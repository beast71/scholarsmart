"use strict";(self.webpackChunkscholarsMart=self.webpackChunkscholarsMart||[]).push([[179],{2011:(mt,xe,k)=>{k.d(xe,{Dh:()=>we,GT:()=>re,cc:()=>Ce,hO:()=>je,on:()=>H,pX:()=>se,xv:()=>pe});var g=k(4650),Y=k(9260),O=k(4976);mt=k.hmd(mt);const ie=["ngOnDestroy"],se=(Re,Pe,Be,Ne={})=>new Proxy(Re,{get:(Ie,Ee)=>Be.runOutsideAngular(()=>{var He;if(Re[Ee])return!(null===(He=Ne?.spy)||void 0===He)&&He.get&&Ne.spy.get(Ee,Re[Ee]),Re[Ee];if(ie.indexOf(Ee)>-1)return()=>{};const Le=Pe.toPromise().then(tt=>{const ne=tt&&tt[Ee];return"function"==typeof ne?ne.bind(tt):ne&&ne.then?ne.then(Dt=>Be.run(()=>Dt)):Be.run(()=>ne)});return new Proxy(()=>{},{get:(tt,ne)=>Le[ne],apply:(tt,ne,Dt)=>Le.then(Je=>{var $t;const at=Je&&Je(...Dt);return!(null===($t=Ne?.spy)||void 0===$t)&&$t.apply&&Ne.spy.apply(Ee,Dt,at),at})})})}),re=(Re,Pe)=>{Pe.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Ne=>{Object.defineProperty(Re.prototype,Ne,Object.getOwnPropertyDescriptor(Be.prototype||Be,Ne))})})};class ye{constructor(Pe){return Pe}}const we=new g.OlP("angularfire2.app.options"),pe=new g.OlP("angularfire2.app.name");function H(Re,Pe,Be){const Ie="object"==typeof Be&&Be||{};Ie.name=Ie.name||"string"==typeof Be&&Be||"[DEFAULT]";const He=Y.Z.apps.filter(Le=>Le&&Le.name===Ie.name)[0]||Pe.runOutsideAngular(()=>Y.Z.initializeApp(Re,Ie));try{JSON.stringify(Re)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(He)}const $=(Re,...Pe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Re](...Pe)},W={provide:ye,useFactory:H,deps:[we,g.R0b,[new g.FiY,pe]]};let je=(()=>{class Re{constructor(Be){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",g.q4F.full,Be.toString())}static initializeApp(Be,Ne){return{ngModule:Re,providers:[{provide:we,useValue:Be},{provide:pe,useValue:Ne}]}}}return Re.\u0275fac=function(Be){return new(Be||Re)(g.LFG(g.Lbi))},Re.\u0275mod=g.oAB({type:Re}),Re.\u0275inj=g.cJS({providers:[W]}),Re})();function Ce(Re,Pe,Be,Ne,Ie){const[,Ee,He]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Re)||[];if(Ee)return function qe(Re,Pe){try{return Re.toString()===Pe.toString()}catch{return Re===Pe}}(Ie,He)||(ge("error",`${Pe} was already initialized on the ${Be} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ie,was:He})),Ee;{const Le=Ne();return globalThis.\u0275AngularfireInstanceCache.push([Re,Le,Ie]),Le}}const ut=!!mt.hot,ge=(Re,...Pe)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Re](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(mt,xe,k)=>{k.d(xe,{q4:()=>ra,iC:()=>Gd,HU:()=>si,vb:()=>Ja,JM:()=>ia});var g=k(4650),Y=k(259),O=k(5861),ie=k(6881),se=k(2090),re=k(4859),ye=k(1877);const we=(I,D)=>D.some(S=>I instanceof S);let pe,H;const je=new WeakMap,Ce=new WeakMap,qe=new WeakMap,ut=new WeakMap,ge=new WeakMap;let Be={get(I,D,S){if(I instanceof IDBTransaction){if("done"===D)return Ce.get(I);if("objectStoreNames"===D)return I.objectStoreNames||qe.get(I);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return He(I[D])},set:(I,D,S)=>(I[D]=S,!0),has:(I,D)=>I instanceof IDBTransaction&&("done"===D||"store"===D)||D in I};function Ee(I){return"function"==typeof I?function Ie(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...D){return I.apply(Le(this),D),He(je.get(this))}:function(...D){return He(I.apply(Le(this),D))}:function(D,...S){const N=I.call(Le(this),D,...S);return qe.set(N,D.sort?D.sort():[D]),He(N)}}(I):(I instanceof IDBTransaction&&function Pe(I){if(Ce.has(I))return;const D=new Promise((S,N)=>{const j=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",te),I.removeEventListener("abort",te)},Z=()=>{S(),j()},te=()=>{N(I.error||new DOMException("AbortError","AbortError")),j()};I.addEventListener("complete",Z),I.addEventListener("error",te),I.addEventListener("abort",te)});Ce.set(I,D)}(I),we(I,function $(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Be):I)}function He(I){if(I instanceof IDBRequest)return function Re(I){const D=new Promise((S,N)=>{const j=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",te)},Z=()=>{S(He(I.result)),j()},te=()=>{N(I.error),j()};I.addEventListener("success",Z),I.addEventListener("error",te)});return D.then(S=>{S instanceof IDBCursor&&je.set(S,I)}).catch(()=>{}),ge.set(D,I),D}(I);if(ut.has(I))return ut.get(I);const D=Ee(I);return D!==I&&(ut.set(I,D),ge.set(D,I)),D}const Le=I=>ge.get(I),Dt=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],$t=new Map;function at(I,D){if(!(I instanceof IDBDatabase)||D in I||"string"!=typeof D)return;if($t.get(D))return $t.get(D);const S=D.replace(/FromIndex$/,""),N=D!==S,j=Je.includes(S);if(!(S in(N?IDBIndex:IDBObjectStore).prototype)||!j&&!Dt.includes(S))return;const Z=function(){var te=(0,O.Z)(function*(ze,...Ge){const st=this.transaction(ze,j?"readwrite":"readonly");let Rt=st.store;return N&&(Rt=Rt.index(Ge.shift())),(yield Promise.all([Rt[S](...Ge),j&&st.done]))[0]});return function(Ge){return te.apply(this,arguments)}}();return $t.set(D,Z),Z}!function Ne(I){Be=I(Be)}(I=>({...I,get:(D,S,N)=>at(D,S)||I.get(D,S,N),has:(D,S)=>!!at(D,S)||I.has(D,S)}));const Ps="@firebase/installations",Yr="0.6.4",no=1e4,zi=`w:${Yr}`,ae="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",me=36e5,ct=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function vn({projectId:I}){return`${le}/projects/${I}/installations`}function ft(I){return{token:I.token,requestStatus:2,expiresIn:Vr(I.expiresIn),creationTime:Date.now()}}function Gt(I,D){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(I,D){const N=(yield D.json()).error;return ct.create("request-failed",{requestName:I,serverCode:N.code,serverMessage:N.message,serverStatus:N.status})})).apply(this,arguments)}function gn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function cr(I){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function Vr(I){return Number(I.replace("s","000"))}function pt(){return(pt=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:S}){const N=vn(I),j=gn(I),Z=D.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&j.append("x-firebase-client",st)}const ze={method:"POST",headers:j,body:JSON.stringify({fid:S,authVersion:ae,appId:I.appId,sdkVersion:zi})},Ge=yield cr(()=>fetch(N,ze));if(Ge.ok){const st=yield Ge.json();return{fid:st.fid||S,registrationStatus:2,refreshToken:st.refreshToken,authToken:ft(st.authToken)}}throw yield Gt("Create Installation",Ge)})).apply(this,arguments)}function Jr(I){return new Promise(D=>{setTimeout(D,I)})}const wr=/^[cdef][\w-]{21}$/,Br="";function Gi(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const S=function Qt(I){return function Uc(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return wr.test(S)?S:Br}catch{return Br}}function Xt(I){return`${I.appName}!${I.appId}`}const nt=new Map;function xt(I,D){const S=Xt(I);lr(S,D),function jr(I,D){const S=function ei(){return!Tn&&"BroadcastChannel"in self&&(Tn=new BroadcastChannel("[Firebase] FID Change"),Tn.onmessage=I=>{lr(I.data.key,I.data.fid)}),Tn}();S&&S.postMessage({key:I,fid:D}),function dn(){0===nt.size&&Tn&&(Tn.close(),Tn=null)}()}(S,D)}function lr(I,D){const S=nt.get(I);if(S)for(const N of S)N(D)}let Tn=null;const Ns="firebase-installations-database",Wt=1,qi="firebase-installations-store";let en=null;function fi(){return en||(en=function tt(I,D,{blocked:S,upgrade:N,blocking:j,terminated:Z}={}){const te=indexedDB.open(I,D),ze=He(te);return N&&te.addEventListener("upgradeneeded",Ge=>{N(He(te.result),Ge.oldVersion,Ge.newVersion,He(te.transaction))}),S&&te.addEventListener("blocked",()=>S()),ze.then(Ge=>{Z&&Ge.addEventListener("close",()=>Z()),j&&Ge.addEventListener("versionchange",()=>j())}).catch(()=>{}),ze}(Ns,Wt,{upgrade:(I,D)=>{0===D&&I.createObjectStore(qi)}})),en}function An(I,D){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(I,D){const S=Xt(I),j=(yield fi()).transaction(qi,"readwrite"),Z=j.objectStore(qi),te=yield Z.get(S);return yield Z.put(D,S),yield j.done,(!te||te.fid!==D.fid)&&xt(I,D.fid),D})).apply(this,arguments)}function Mi(I){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(I){const D=Xt(I),N=(yield fi()).transaction(qi,"readwrite");yield N.objectStore(qi).delete(D),yield N.done})).apply(this,arguments)}function Ri(I,D){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(I,D){const S=Xt(I),j=(yield fi()).transaction(qi,"readwrite"),Z=j.objectStore(qi),te=yield Z.get(S),ze=D(te);return void 0===ze?yield Z.delete(S):yield Z.put(ze,S),yield j.done,ze&&(!te||te.fid!==ze.fid)&&xt(I,ze.fid),ze})).apply(this,arguments)}function V(I){return F.apply(this,arguments)}function F(){return F=(0,O.Z)(function*(I){let D;const S=yield Ri(I.appConfig,N=>{const j=function G(I){return En(I||{fid:Gi(),registrationStatus:0})}(N),Z=function ve(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ct.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},N=function Q(I,D){return Ue.apply(this,arguments)}(I,S);return{installationEntry:S,registrationPromise:N}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ct(I)}:{installationEntry:D}}(I,j);return D=Z.registrationPromise,Z.installationEntry});return S.fid===Br?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}}),F.apply(this,arguments)}function Ue(){return Ue=(0,O.Z)(function*(I,D){try{const S=yield function Ar(I,D){return pt.apply(this,arguments)}(I,D);return An(I.appConfig,S)}catch(S){throw lt(S)&&409===S.customData.serverCode?yield Mi(I.appConfig):yield An(I.appConfig,{fid:D.fid,registrationStatus:0}),S}}),Ue.apply(this,arguments)}function Ct(I){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(I){let D=yield kn(I.appConfig);for(;1===D.registrationStatus;)yield Jr(100),D=yield kn(I.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:N}=yield V(I);return N||S}return D})).apply(this,arguments)}function kn(I){return Ri(I,D=>{if(!D)throw ct.create("installation-not-found");return En(D)})}function En(I){return function on(I){return 1===I.registrationStatus&&I.registrationTime+no<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function xr(){return(xr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},S){const N=function Pi(I,{fid:D}){return`${vn(I)}/${D}/authTokens:generate`}(I,S),j=function On(I,{refreshToken:D}){const S=gn(I);return S.append("Authorization",function Qr(I){return`${ae} ${I}`}(D)),S}(I,S),Z=D.getImmediate({optional:!0});if(Z){const st=yield Z.getHeartbeatsHeader();st&&j.append("x-firebase-client",st)}const ze={method:"POST",headers:j,body:JSON.stringify({installation:{sdkVersion:zi,appId:I.appId}})},Ge=yield cr(()=>fetch(N,ze));if(Ge.ok)return ft(yield Ge.json());throw yield Gt("Generate Auth Token",Ge)})).apply(this,arguments)}function Wi(I){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,O.Z)(function*(I,D=!1){let S;const N=yield Ri(I.appConfig,Z=>{if(!Bt(Z))throw ct.create("not-registered");const te=Z.authToken;if(!D&&function gt(I){return 2===I.requestStatus&&!function Jt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+me}(I)}(te))return Z;if(1===te.requestStatus)return S=function de(I,D){return X.apply(this,arguments)}(I,D),Z;{if(!navigator.onLine)throw ct.create("app-offline");const ze=function Yt(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}(Z);return S=function ht(I,D){return Et.apply(this,arguments)}(I,ze),ze}});return S?yield S:N.authToken}),Ca.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(I,D){let S=yield Oe(I.appConfig);for(;1===S.authToken.requestStatus;)yield Jr(100),S=yield Oe(I.appConfig);const N=S.authToken;return 0===N.requestStatus?Wi(I,D):N})).apply(this,arguments)}function Oe(I){return Ri(I,D=>{if(!Bt(D))throw ct.create("not-registered");return function dr(I){return 1===I.requestStatus&&I.requestTime+no<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Et(){return Et=(0,O.Z)(function*(I,D){try{const S=yield function Ht(I,D){return xr.apply(this,arguments)}(I,D),N=Object.assign(Object.assign({},D),{authToken:S});return yield An(I.appConfig,N),S}catch(S){if(!lt(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const N=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield An(I.appConfig,N)}else yield Mi(I.appConfig);throw S}}),Et.apply(this,arguments)}function Bt(I){return void 0!==I&&2===I.registrationStatus}function _u(){return(_u=(0,O.Z)(function*(I){const D=I,{installationEntry:S,registrationPromise:N}=yield V(D);return N?N.catch(console.error):Wi(D).catch(console.error),S.fid})).apply(this,arguments)}function ro(){return ro=(0,O.Z)(function*(I,D=!1){const S=I;return yield function pi(I){return We.apply(this,arguments)}(S),(yield Wi(S,D)).token}),ro.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(I){const{registrationPromise:D}=yield V(I);D&&(yield D)})).apply(this,arguments)}function ls(I){return ct.create("missing-app-config-values",{valueName:I})}const Vt="installations",so=I=>{const D=I.getProvider("app").getImmediate(),S=function Ta(I){if(!I||!I.options)throw ls("App Configuration");if(!I.name)throw ls("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!I.options[S])throw ls(S);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ds=I=>{const D=I.getProvider("app").getImmediate(),S=(0,ie._getProvider)(D,Vt).getImmediate();return{getId:()=>function Hn(I){return _u.apply(this,arguments)}(S),getToken:j=>function ef(I){return ro.apply(this,arguments)}(S,j)}};(function oo(){(0,ie._registerComponent)(new re.wA(Vt,so,"PUBLIC")),(0,ie._registerComponent)(new re.wA("installations-internal",ds,"PRIVATE"))})(),(0,ie.registerVersion)(Ps,Yr),(0,ie.registerVersion)(Ps,Yr,"esm2017");const Ln="@firebase/remote-config",Ir=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fs{constructor(D,S,N,j){this.client=D,this.storage=S,this.storageCache=N,this.logger=j}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const N=Date.now()-S,j=N<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${N}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${j}.`),j}fetch(D){var S=this;return(0,O.Z)(function*(){const[N,j]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(j&&S.isCachedDataFresh(D.cacheMaxAgeMillis,N))return j;D.eTag=j&&j.eTag;const Z=yield S.client.fetch(D),te=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&te.push(S.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(te),Z})()}}function Gp(I=navigator){return I.languages&&I.languages[0]||I.language}class jc{constructor(D,S,N,j,Z,te){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=N,this.projectId=j,this.apiKey=Z,this.appId=te}fetch(D){var S=this;return(0,O.Z)(function*(){const[N,j]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ge={sdk_version:S.sdkVersion,app_instance_id:N,app_instance_id_token:j,app_id:S.appId,language_code:Gp()},st={method:"POST",headers:ze,body:JSON.stringify(Ge)},Rt=fetch(te,st),At=new Promise((Vi,yr)=>{D.signal.addEventListener(()=>{const tc=new Error("The operation was aborted.");tc.name="AbortError",yr(tc)})});let oi;try{yield Promise.race([Rt,At]),oi=yield Rt}catch(Vi){let yr="fetch-client-network";throw"AbortError"===Vi?.name&&(yr="fetch-timeout"),Ir.create(yr,{originalErrorMessage:Vi?.message})}let bn=oi.status;const ai=oi.headers.get("ETag")||void 0;let Lt,Ui;if(200===oi.status){let Vi;try{Vi=yield oi.json()}catch(yr){throw Ir.create("fetch-client-parse",{originalErrorMessage:yr?.message})}Lt=Vi.entries,Ui=Vi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ui?bn=500:"NO_CHANGE"===Ui?bn=304:("NO_TEMPLATE"===Ui||"EMPTY_CONFIG"===Ui)&&(Lt={}),304!==bn&&200!==bn)throw Ir.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:ai,config:Lt}})()}}class Wp{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,O.Z)(function*(){const N=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,N)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:N}){var j=this;return(0,O.Z)(function*(){yield function qp(I,D){return new Promise((S,N)=>{const j=Math.max(D-Date.now(),0),Z=setTimeout(S,j);I.addEventListener(()=>{clearTimeout(Z),N(Ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const Z=yield j.client.fetch(D);return yield j.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function yd(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Z))throw Z;const te={throttleEndTimeMillis:Date.now()+(0,se.$s)(N),backoffCount:N+1};return yield j.storage.setThrottleMetadata(te),j.attemptFetch(D,te)}})()}}class ay{constructor(D,S,N,j,Z){this.app=D,this._client=S,this._storageCache=N,this._storage=j,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Du(I,D){const S=I.target.error||void 0;return Ir.create(D,{originalErrorMessage:S&&S?.message})}const yi="app_namespace_store";class uy{constructor(D,S,N,j=function Ho(){return new Promise((I,D)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=N=>{D(Du(N,"storage-open"))},S.onsuccess=N=>{I(N.target.result)},S.onupgradeneeded=N=>{0===N.oldVersion&&N.target.result.createObjectStore(yi,{keyPath:"compositeKey"})}}catch(S){D(Ir.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=D,this.appName=S,this.namespace=N,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,O.Z)(function*(){const N=yield S.openDbPromise;return new Promise((j,Z)=>{const ze=N.transaction([yi],"readonly").objectStore(yi),Ge=S.createCompositeKey(D);try{const st=ze.get(Ge);st.onerror=Rt=>{Z(Du(Rt,"storage-get"))},st.onsuccess=Rt=>{const At=Rt.target.result;j(At?At.value:void 0)}}catch(st){Z(Ir.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(D,S){var N=this;return(0,O.Z)(function*(){const j=yield N.openDbPromise;return new Promise((Z,te)=>{const Ge=j.transaction([yi],"readwrite").objectStore(yi),st=N.createCompositeKey(D);try{const Rt=Ge.put({compositeKey:st,value:S});Rt.onerror=At=>{te(Du(At,"storage-set"))},Rt.onsuccess=()=>{Z()}}catch(Rt){te(Ir.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(D){var S=this;return(0,O.Z)(function*(){const N=yield S.openDbPromise;return new Promise((j,Z)=>{const ze=N.transaction([yi],"readwrite").objectStore(yi),Ge=S.createCompositeKey(D);try{const st=ze.delete(Ge);st.onerror=Rt=>{Z(Du(Rt,"storage-delete"))},st.onsuccess=()=>{j()}}catch(st){Z(Ir.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class rf{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const S=D.storage.getLastFetchStatus(),N=D.storage.getLastSuccessfulFetchTimestampMillis(),j=D.storage.getActiveConfig(),Z=yield S;Z&&(D.lastFetchStatus=Z);const te=yield N;te&&(D.lastSuccessfulFetchTimestampMillis=te);const ze=yield j;ze&&(D.activeConfig=ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function $c(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function ps(){(0,ie._registerComponent)(new re.wA("remote-config",function I(D,{instanceIdentifier:S}){const N=D.getProvider("app").getImmediate(),j=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ir.create("registration-window");if(!(0,se.hl)())throw Ir.create("indexed-db-unavailable");const{projectId:Z,apiKey:te,appId:ze}=N.options;if(!Z)throw Ir.create("registration-project-id");if(!te)throw Ir.create("registration-api-key");if(!ze)throw Ir.create("registration-app-id");const Ge=new uy(ze,N.name,S=S||"firebase"),st=new rf(Ge),Rt=new ye.Yd(Ln);Rt.logLevel=ye.in.ERROR;const At=new jc(j,ie.SDK_VERSION,S,Z,te,ze),oi=new Wp(At,Ge),bn=new fs(oi,Ge,st,Rt),ai=new ay(N,bn,st,Ge,Rt);return function ni(I){const D=(0,se.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ai),ai},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ln,"0.4.4"),(0,ie.registerVersion)(Ln,"0.4.4","esm2017")}();const wd=(I,D)=>D.some(S=>I instanceof S);let Hc,ks;const bu=new WeakMap,Ls=new WeakMap,Hr=new WeakMap,Mr=new WeakMap,Pa=new WeakMap;let gs={get(I,D,S){if(I instanceof IDBTransaction){if("done"===D)return Ls.get(I);if("objectStoreNames"===D)return I.objectStoreNames||Hr.get(I);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return Rr(I[D])},set:(I,D,S)=>(I[D]=S,!0),has:(I,D)=>I instanceof IDBTransaction&&("done"===D||"store"===D)||D in I};function Ed(I){return"function"==typeof I?function Id(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ra(){return ks||(ks=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...D){return I.apply(Xn(this),D),Rr(bu.get(this))}:function(...D){return Rr(I.apply(Xn(this),D))}:function(D,...S){const N=I.call(Xn(this),D,...S);return Hr.set(N,D.sort?D.sort():[D]),Rr(N)}}(I):(I instanceof IDBTransaction&&function zo(I){if(Ls.has(I))return;const D=new Promise((S,N)=>{const j=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",te),I.removeEventListener("abort",te)},Z=()=>{S(),j()},te=()=>{N(I.error||new DOMException("AbortError","AbortError")),j()};I.addEventListener("complete",Z),I.addEventListener("error",te),I.addEventListener("abort",te)});Ls.set(I,D)}(I),wd(I,function sf(){return Hc||(Hc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,gs):I)}function Rr(I){if(I instanceof IDBRequest)return function fr(I){const D=new Promise((S,N)=>{const j=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",te)},Z=()=>{S(Rr(I.result)),j()},te=()=>{N(I.error),j()};I.addEventListener("success",Z),I.addEventListener("error",te)});return D.then(S=>{S instanceof IDBCursor&&bu.set(S,I)}).catch(()=>{}),Pa.set(D,I),D}(I);if(Mr.has(I))return Mr.get(I);const D=Ed(I);return D!==I&&(Mr.set(I,D),Pa.set(D,I)),D}const Xn=I=>Pa.get(I);function Cu(I,D,{blocked:S,upgrade:N,blocking:j,terminated:Z}={}){const te=indexedDB.open(I,D),ze=Rr(te);return N&&te.addEventListener("upgradeneeded",Ge=>{N(Rr(te.result),Ge.oldVersion,Ge.newVersion,Rr(te.transaction))}),S&&te.addEventListener("blocked",()=>S()),ze.then(Ge=>{Z&&Ge.addEventListener("close",()=>Z()),j&&Ge.addEventListener("versionchange",()=>j())}).catch(()=>{}),ze}function ms(I,{blocked:D}={}){const S=indexedDB.deleteDatabase(I);return D&&S.addEventListener("blocked",()=>D()),Rr(S).then(()=>{})}const zc=["get","getKey","getAll","getAllKeys","count"],Fs=["put","add","delete","clear"],Go=new Map;function Na(I,D){if(!(I instanceof IDBDatabase)||D in I||"string"!=typeof D)return;if(Go.get(D))return Go.get(D);const S=D.replace(/FromIndex$/,""),N=D!==S,j=Fs.includes(S);if(!(S in(N?IDBIndex:IDBObjectStore).prototype)||!j&&!zc.includes(S))return;const Z=function(){var te=(0,O.Z)(function*(ze,...Ge){const st=this.transaction(ze,j?"readwrite":"readonly");let Rt=st.store;return N&&(Rt=Rt.index(Ge.shift())),(yield Promise.all([Rt[S](...Ge),j&&st.done]))[0]});return function(Ge){return te.apply(this,arguments)}}();return Go.set(D,Z),Z}!function pr(I){gs=I(gs)}(I=>({...I,get:(D,S,N)=>Na(D,S)||I.get(D,S,N),has:(D,S)=>!!Na(D,S)||I.has(D,S)}));const Mt="/firebase-messaging-sw.js",Oa="/firebase-cloud-messaging-push-scope",Dd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bd="https://fcmregistrations.googleapis.com/v1",Tu="google.c.a.c_id",Cd="google.c.a.c_l",Su="google.c.a.ts",Zp="google.c.a.e";var he=(()=>{return(I=he||(he={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",he;var I})();function kt(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ka(I){const S=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),N=atob(S),j=new Uint8Array(N.length);for(let Z=0;Z<N.length;++Z)j[Z]=N.charCodeAt(Z);return j}const La="fcm_token_details_db",er=5,co="fcm_token_object_Store";function zr(){return zr=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(La))return null;let D=null;return(yield Cu(La,er,{upgrade:(N=(0,O.Z)(function*(j,Z,te,ze){var Ge;if(Z<2||!j.objectStoreNames.contains(co))return;const st=ze.objectStore(co),Rt=yield st.index("fcmSenderId").get(I);if(yield st.clear(),Rt)if(2===Z){const At=Rt;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(Ge=At.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:kt(At.vapidKey)}}}else if(3===Z){const At=Rt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:kt(At.auth),p256dh:kt(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:kt(At.vapidKey)}}}else if(4===Z){const At=Rt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:kt(At.auth),p256dh:kt(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:kt(At.vapidKey)}}}}),function(Z,te,ze,Ge){return N.apply(this,arguments)})})).close(),yield ms(La),yield ms("fcm_vapid_details_db"),yield ms("undefined"),function Sd(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var N}),zr.apply(this,arguments)}const xu="firebase-messaging-database",Kp=1,ys="firebase-messaging-store";let Fa=null;function Gn(){return Fa||(Fa=Cu(xu,Kp,{upgrade:(I,D)=>{0===D&&I.createObjectStore(ys)}})),Fa}function vi(I){return Yi.apply(this,arguments)}function Yi(){return Yi=(0,O.Z)(function*(I){const D=Mu(I),N=yield(yield Gn()).transaction(ys).objectStore(ys).get(D);if(N)return N;{const j=yield function Au(I){return zr.apply(this,arguments)}(I.appConfig.senderId);if(j)return yield lo(I,j),j}}),Yi.apply(this,arguments)}function lo(I,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(I,D){const S=Mu(I),j=(yield Gn()).transaction(ys,"readwrite");return yield j.objectStore(ys).put(D,S),yield j.done,D})).apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(I){const D=Mu(I),N=(yield Gn()).transaction(ys,"readwrite");yield N.objectStore(ys).delete(D),yield N.done})).apply(this,arguments)}function Mu({appConfig:I}){return I.appId}const qn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function qo(I,D){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(I,D){const S=yield qc(I),N=Md(D),j={method:"POST",headers:S,body:JSON.stringify(N)};let Z;try{Z=yield(yield fetch(Va(I.appConfig),j)).json()}catch(te){throw qn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(Z.error)throw qn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw qn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function xd(){return(xd=(0,O.Z)(function*(I,D){const S=yield qc(I),N=Md(D.subscriptionOptions),j={method:"PATCH",headers:S,body:JSON.stringify(N)};let Z;try{Z=yield(yield fetch(`${Va(I.appConfig)}/${D.token}`,j)).json()}catch(te){throw qn.create("token-update-failed",{errorInfo:te?.toString()})}if(Z.error)throw qn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw qn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Pu(I,D){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(I,D){const N={method:"DELETE",headers:yield qc(I)};try{const Z=yield(yield fetch(`${Va(I.appConfig)}/${D}`,N)).json();if(Z.error)throw qn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(j){throw qn.create("token-unsubscribe-failed",{errorInfo:j?.toString()})}})).apply(this,arguments)}function Va({projectId:I}){return`${bd}/projects/${I}/registrations`}function qc(I){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*({appConfig:I,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Md({p256dh:I,auth:D,endpoint:S,vapidKey:N}){const j={web:{endpoint:S,auth:D,p256dh:I}};return N!==Dd&&(j.web.applicationPubKey=N),j}const Ou=6048e5;function ku(){return ku=(0,O.Z)(function*(I){const D=yield function cf(I,D){return Rd.apply(this,arguments)}(I.swRegistration,I.vapidKey),S={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:kt(D.getKey("auth")),p256dh:kt(D.getKey("p256dh"))},N=yield vi(I.firebaseDependencies);if(N){if(function Qp(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}(N.subscriptionOptions,S))return Date.now()>=N.createTime+Ou?function Dn(I,D){return Lu.apply(this,arguments)}(I,{token:N.token,createTime:Date.now(),subscriptionOptions:S}):N.token;try{yield Pu(I.firebaseDependencies,N.token)}catch(j){console.warn(j)}return uf(I.firebaseDependencies,S)}return uf(I.firebaseDependencies,S)}),ku.apply(this,arguments)}function vs(){return vs=(0,O.Z)(function*(I){const D=yield vi(I.firebaseDependencies);D&&(yield Pu(I.firebaseDependencies,D.token),yield function Ad(I){return Ua.apply(this,arguments)}(I.firebaseDependencies));const S=yield I.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()}),vs.apply(this,arguments)}function Lu(){return Lu=(0,O.Z)(function*(I,D){try{const S=yield function Ru(I,D){return xd.apply(this,arguments)}(I.firebaseDependencies,D),N=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield lo(I.firebaseDependencies,N),S}catch(S){throw yield function Er(I){return vs.apply(this,arguments)}(I),S}}),Lu.apply(this,arguments)}function uf(I,D){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(I,D){const N={token:yield qo(I,D),createTime:Date.now(),subscriptionOptions:D};return yield lo(I,N),N.token})).apply(this,arguments)}function Rd(){return(Rd=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ka(D)})})).apply(this,arguments)}function Fu(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Wc(I,D){if(!D.notification)return;I.notification={};const S=D.notification.title;S&&(I.notification.title=S);const N=D.notification.body;N&&(I.notification.body=N);const j=D.notification.image;j&&(I.notification.image=j);const Z=D.notification.icon;Z&&(I.notification.icon=Z)}(D,I),function Zc(I,D){D.data&&(I.data=D.data)}(D,I),function Pd(I,D){var S,N,j,Z,te;if(!(D.fcmOptions||null!==(S=D.notification)&&void 0!==S&&S.click_action))return;I.fcmOptions={};const ze=null!==(j=null===(N=D.fcmOptions)||void 0===N?void 0:N.link)&&void 0!==j?j:null===(Z=D.notification)||void 0===Z?void 0:Z.click_action;ze&&(I.fcmOptions.link=ze);const Ge=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;Ge&&(I.fcmOptions.analyticsLabel=Ge)}(D,I),D}function Wo(I,D){const S=[];for(let N=0;N<I.length;N++)S.push(I.charAt(N)),N<D.length&&S.push(D.charAt(N));return S.join("")}function _s(I){return qn.create("missing-app-config-values",{valueName:I})}Wo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jp{constructor(D,S,N){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Zo(I){if(!I||!I.options)throw _s("App Configuration Object");if(!I.name)throw _s("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=I;for(const N of D)if(!S[N])throw _s(N);return{appName:I.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:j,installations:S,analyticsProvider:N}}_delete(){return Promise.resolve()}}function lf(I){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Mt,{scope:Oa}),I.swRegistration.update().catch(()=>{})}catch(D){throw qn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield lf(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Dd)})).apply(this,arguments)}function Ko(){return Ko=(0,O.Z)(function*(I,D){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield function fo(I,D){return po.apply(this,arguments)}(I,D?.vapidKey),yield function cy(I,D){return ja.apply(this,arguments)}(I,D?.serviceWorkerRegistration),function af(I){return ku.apply(this,arguments)}(I)}),Ko.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(I,D,S){const N=function mo(I){switch(I){case he.NOTIFICATION_CLICKED:return"notification_open";case he.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(N,{message_id:S[Tu],message_name:S[Cd],message_time:S[Su],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function yo(){return yo=(0,O.Z)(function*(I,D){const S=D.data;if(!S.isFirebaseMessaging)return;I.onMessageHandler&&S.messageType===he.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Fu(S)):I.onMessageHandler.next(Fu(S)));const N=S.data;(function Kc(I){return"object"==typeof I&&!!I&&Tu in I})(N)&&"1"===N[Zp]&&(yield function Yc(I,D,S){return go.apply(this,arguments)}(I,S.messageType,N))}),yo.apply(this,arguments)}const Us="@firebase/messaging",vo=I=>{const D=new Jp(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Bu(I,D){return yo.apply(this,arguments)}(D,S)),D},ju=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:N=>function Vu(I,D){return Ko.apply(this,arguments)}(D,N)}};function df(){return $u.apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function $a(){(0,ie._registerComponent)(new re.wA("messaging",vo,"PUBLIC")),(0,ie._registerComponent)(new re.wA("messaging-internal",ju,"PRIVATE")),(0,ie.registerVersion)(Us,"0.12.4"),(0,ie.registerVersion)(Us,"0.12.4","esm2017")}();const hn="analytics",Ld="firebase_id",Hu="origin",Jc=6e4,zu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",tr=new ye.Yd("@firebase/analytics"),Fn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Xc(I){if(!I.startsWith(Gu)){const D=Fn.create("invalid-gtag-resource",{gtagURL:I});return tr.warn(D.message),""}return I}function Ha(I){return Promise.all(I.map(D=>D.catch(S=>S)))}function Io(){return(Io=(0,O.Z)(function*(I,D,S,N,j,Z){const te=N[j];try{if(te)yield D[te];else{const Ge=(yield Ha(S)).find(st=>st.measurementId===j);Ge&&(yield D[Ge.appId])}}catch(ze){tr.error(ze)}I("config",j,Z)})).apply(this,arguments)}function Ga(){return(Ga=(0,O.Z)(function*(I,D,S,N,j){try{let Z=[];if(j&&j.send_to){let te=j.send_to;Array.isArray(te)||(te=[te]);const ze=yield Ha(S);for(const Ge of te){const st=ze.find(At=>At.measurementId===Ge),Rt=st&&D[st.appId];if(!Rt){Z=[];break}Z.push(Rt)}}0===Z.length&&(Z=Object.values(D)),yield Promise.all(Z),I("event",N,j||{})}catch(Z){tr.error(Z)}})).apply(this,arguments)}const qa=30,Do=new class Eo{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function pf(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Zt(){return(Zt=(0,O.Z)(function*(I){var D;const{appId:S,apiKey:N}=I,j={method:"GET",headers:pf(N)},Z=zu.replace("{app-id}",S),te=yield fetch(Z,j);if(200!==te.status&&304!==te.status){let ze="";try{const Ge=yield te.json();null!==(D=Ge.error)&&void 0!==D&&D.message&&(ze=Ge.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:te.status,responseMessage:ze})}return te.json()})).apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*(I,D=Do,S){const{appId:N,apiKey:j,measurementId:Z}=I.options;if(!N)throw Fn.create("no-app-id");if(!j){if(Z)return{measurementId:Z,appId:N};throw Fn.create("no-api-key")}const te=D.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new dy;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==S?S:Jc),tl({appId:N,apiKey:j,measurementId:Z},te,ze,D)})).apply(this,arguments)}function tl(I,D,S){return nl.apply(this,arguments)}function nl(){return nl=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:S},N,j=Do){var Z;const{appId:te,measurementId:ze}=I;try{yield function ly(I,D){return new Promise((S,N)=>{const j=Math.max(D-Date.now(),0),Z=setTimeout(S,j);I.addEventListener(()=>{clearTimeout(Z),N(Fn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(N,D)}catch(Ge){if(ze)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:te,measurementId:ze};throw Ge}try{const Ge=yield function Fd(I){return Zt.apply(this,arguments)}(I);return j.deleteThrottleMetadata(te),Ge}catch(Ge){const st=Ge;if(!function gf(I){if(!(I instanceof se.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(st)){if(j.deleteThrottleMetadata(te),ze)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:te,measurementId:ze};throw Ge}const Rt=503===Number(null===(Z=st?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,se.$s)(S,j.intervalMillis,qa):(0,se.$s)(S,j.intervalMillis),At={throttleEndTimeMillis:Date.now()+Rt,backoffCount:S+1};return j.setThrottleMetadata(te,At),tr.debug(`Calling attemptFetch again in ${Rt} millis`),tl(I,At,N,j)}}),nl.apply(this,arguments)}class dy{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let bo,vf;function mf(){return(mf=(0,O.Z)(function*(I,D,S,N,j){if(j&&j.global)I("event",S,N);else{const Z=yield D;I("event",S,Object.assign(Object.assign({},N),{send_to:Z}))}})).apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(){if(!(0,se.hl)())return tr.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return tr.warn(Fn.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ji(){return Ji=(0,O.Z)(function*(I,D,S,N,j,Z,te){var ze;const Ge=function Xp(I){return Wa.apply(this,arguments)}(I);Ge.then(bn=>{S[bn.measurementId]=bn.appId,I.options.measurementId&&bn.measurementId!==I.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>tr.error(bn)),D.push(Ge);const st=function Gr(){return Pr.apply(this,arguments)}().then(bn=>{if(bn)return N.getId()}),[Rt,At]=yield Promise.all([Ge,st]);(function Xo(I){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(Gu)&&S.src.includes(I))return S;return null})(Z)||function Is(I,D){const S=function za(I,D){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(I,D)),S}("firebase-js-sdk-policy",{createScriptURL:Xc}),N=document.createElement("script"),j=`${Gu}?l=${I}&id=${D}`;N.src=S?S?.createScriptURL(j):j,N.async=!0,document.head.appendChild(N)}(Z,Rt.measurementId),vf&&(j("consent","default",vf),function il(I){vf=I}(void 0)),j("js",new Date);const oi=null!==(ze=te?.config)&&void 0!==ze?ze:{};return oi[Hu]="firebase",oi.update=!0,null!=At&&(oi[Ld]=At),j("config",Rt.measurementId,oi),bo&&(j("set",bo),function Yu(I){bo=I}(void 0)),Rt.measurementId}),Ji.apply(this,arguments)}class it{constructor(D){this.app=D}_delete(){return delete Wn[this.app.options.appId],Promise.resolve()}}let Wn={},ii=[];const Ud={};let sl,Ii,To="dataLayer",wi="gtag",ea=!1;function Ju(I,D,S){!function Ka(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((N,j)=>`(${j+1}) ${N}`).join(" "),S=Fn.create("invalid-analytics-context",{errorInfo:D});tr.warn(S.message)}}();const N=I.options.appId;if(!N)throw Fn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Fn.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wn[N])throw Fn.create("already-exists",{id:N});if(!ea){!function hf(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(To);const{wrappedGtag:Z,gtagCore:te}=function Vs(I,D,S,N,j){let Z=function(...te){window[N].push(arguments)};return window[j]&&"function"==typeof window[j]&&(Z=window[j]),window[j]=function Jo(I,D,S,N){function Z(){return Z=(0,O.Z)(function*(te,...ze){try{if("event"===te){const[Ge,st]=ze;yield function el(I,D,S,N,j){return Ga.apply(this,arguments)}(I,D,S,Ge,st)}else if("config"===te){const[Ge,st]=ze;yield function qu(I,D,S,N,j,Z){return Io.apply(this,arguments)}(I,D,S,N,Ge,st)}else if("consent"===te){const[Ge]=ze;I("consent","update",Ge)}else if("get"===te){const[Ge,st,Rt]=ze;I("get",Ge,st,Rt)}else if("set"===te){const[Ge]=ze;I("set",Ge)}else I(te,...ze)}catch(Ge){tr.error(Ge)}}),Z.apply(this,arguments)}return function j(te){return Z.apply(this,arguments)}}(Z,I,D,S),{gtagCore:Z,wrappedGtag:window[j]}}(Wn,ii,Ud,To,wi);Ii=Z,sl=te,ea=!0}return Wn[N]=function tn(I,D,S,N,j,Z,te){return Ji.apply(this,arguments)}(I,ii,Ud,D,sl,To,S),new it(I)}function Xu(){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Ya="@firebase/analytics";!function jd(){(0,ie._registerComponent)(new re.wA(hn,(D,{options:S})=>Ju(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ie._registerComponent)(new re.wA("analytics-internal",function I(D){try{const S=D.getProvider(hn).getImmediate();return{logEvent:(N,j,Z)=>function na(I,D,S,N){I=(0,se.m9)(I),function hy(I,D,S,N,j){return mf.apply(this,arguments)}(Ii,Wn[I.app.options.appId],D,S,N).catch(j=>tr.error(j))}(S,N,j,Z)}}catch(S){throw Fn.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ie.registerVersion)(Ya,"0.10.0"),(0,ie.registerVersion)(Ya,"0.10.0","esm2017")}();var al=k(4408),$s=k(7565);const $d=new class Li extends $s.v{}(class ul extends al.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,N=0){return null!=N&&N>0||null==N&&this.delay>0?super.requestAsyncId(D,S,N):(D.flush(this),0)}});var ec=k(4986),cl=k(8505),Zn=k(9468),Es=k(5363);const ra=new g.GfV("7.6.1"),mr="__angularfire_symbol__analyticsIsSupportedValue",rr="__angularfire_symbol__analyticsIsSupported",Qa="__angularfire_symbol__remoteConfigIsSupportedValue",xo="__angularfire_symbol__remoteConfigIsSupported",ll="__angularfire_symbol__messagingIsSupportedValue",Fi="__angularfire_symbol__messagingIsSupported";function ia(I,D,S){if(D){if(1===D.length)return D[0];const Z=D.filter(te=>te.app===S);if(1===Z.length)return Z[0]}return S.container.getProvider(I).getImmediate({optional:!0})}globalThis[rr]||(globalThis[rr]=Xu().then(I=>globalThis[mr]=I).catch(()=>globalThis[mr]=!1)),globalThis[Fi]||(globalThis[Fi]=df().then(I=>globalThis[ll]=I).catch(()=>globalThis[ll]=!1)),globalThis[xo]||(globalThis[xo]=$c().then(I=>globalThis[Qa]=I).catch(()=>globalThis[Qa]=!1));const Ja=(I,D)=>{const S=D?[D]:(0,Y.C6)(),N=[];return S.forEach(j=>{j.container.getProvider(I).instances.forEach(te=>{N.includes(te)||N.push(te)})}),N};function Xi(){}class dl{constructor(D,S=$d){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,N){const j=this.zone;return this.delegate.schedule(function(te){j.runGuarded(()=>{D.apply(this,[te])})},S,N)}}class Hd{constructor(D){this.zone=D,this.task=null}call(D,S){const N=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xi,{},Xi,Xi)),S.pipe((0,cl.b)({next:N,complete:N,error:N})).subscribe(D).add(N)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let si=(()=>{class I{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new dl(Zone.current)),this.insideAngular=S.run(()=>new dl(Zone.current,ec.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(S){return new(S||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Tt(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Gd(I){return Tt(),function es(I){return function(S){return(S=S.lift(new Hd(I.ngZone))).pipe((0,Zn.R)(I.outsideAngular),(0,Es.Q)(I.insideAngular))}}(Tt())(I)}},2090:(mt,xe,k)=>{k.d(xe,{$s:()=>Mi,BH:()=>Ee,G6:()=>zi,L:()=>pe,LL:()=>De,Pz:()=>Ie,Sg:()=>He,UG:()=>ne,US:()=>re,ZB:()=>W,ZR:()=>Te,aH:()=>Ne,b$:()=>$t,eu:()=>le,hl:()=>ae,jU:()=>Dt,m9:()=>$r,ne:()=>Xt,pd:()=>Gi,r3:()=>Sn,ru:()=>Je,tV:()=>H,uI:()=>tt,vZ:()=>pt,w1:()=>Ps,xO:()=>wr,xb:()=>Qr,z$:()=>Le,zI:()=>me,zd:()=>Br});const ie=function(V){const F=[];let G=0;for(let ve=0;ve<V.length;ve++){let Q=V.charCodeAt(ve);Q<128?F[G++]=Q:Q<2048?(F[G++]=Q>>6|192,F[G++]=63&Q|128):55296==(64512&Q)&&ve+1<V.length&&56320==(64512&V.charCodeAt(ve+1))?(Q=65536+((1023&Q)<<10)+(1023&V.charCodeAt(++ve)),F[G++]=Q>>18|240,F[G++]=Q>>12&63|128,F[G++]=Q>>6&63|128,F[G++]=63&Q|128):(F[G++]=Q>>12|224,F[G++]=Q>>6&63|128,F[G++]=63&Q|128)}return F},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,F){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let Q=0;Q<V.length;Q+=3){const Ue=V[Q],Ct=Q+1<V.length,Kt=Ct?V[Q+1]:0,kn=Q+2<V.length,En=kn?V[Q+2]:0;let xr=(15&Kt)<<2|En>>6,Pi=63&En;kn||(Pi=64,Ct||(xr=64)),ve.push(G[Ue>>2],G[(3&Ue)<<4|Kt>>4],G[xr],G[Pi])}return ve.join("")},encodeString(V,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(V):this.encodeByteArray(ie(V),F)},decodeString(V,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(V):function(V){const F=[];let G=0,ve=0;for(;G<V.length;){const Q=V[G++];if(Q<128)F[ve++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ue=V[G++];F[ve++]=String.fromCharCode((31&Q)<<6|63&Ue)}else if(Q>239&&Q<365){const kn=((7&Q)<<18|(63&V[G++])<<12|(63&V[G++])<<6|63&V[G++])-65536;F[ve++]=String.fromCharCode(55296+(kn>>10)),F[ve++]=String.fromCharCode(56320+(1023&kn))}else{const Ue=V[G++],Ct=V[G++];F[ve++]=String.fromCharCode((15&Q)<<12|(63&Ue)<<6|63&Ct)}}return F.join("")}(this.decodeStringToByteArray(V,F))},decodeStringToByteArray(V,F){this.init_();const G=F?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let Q=0;Q<V.length;){const Ue=G[V.charAt(Q++)],Kt=Q<V.length?G[V.charAt(Q)]:0;++Q;const En=Q<V.length?G[V.charAt(Q)]:64;++Q;const Ht=Q<V.length?G[V.charAt(Q)]:64;if(++Q,null==Ue||null==Kt||null==En||null==Ht)throw new ye;ve.push(Ue<<2|Kt>>4),64!==En&&(ve.push(Kt<<4&240|En>>2),64!==Ht&&ve.push(En<<6&192|Ht))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(V){return function(V){const F=ie(V);return re.encodeByteArray(F,!0)}(V).replace(/\./g,"")},H=function(V){try{return re.decodeString(V,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function W(V,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return F}for(const G in F)!F.hasOwnProperty(G)||!je(G)||(V[G]=W(V[G],F[G]));return V}function je(V){return"__proto__"!==V}const Re=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=V&&H(V[1]);return F&&JSON.parse(F)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},Ne=()=>{var V;return null===(V=Re())||void 0===V?void 0:V.config},Ie=V=>{var F;return null===(F=Re())||void 0===F?void 0:F[`_${V}`]};class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,G)=>{this.resolve=F,this.reject=G})}wrapCallback(F){return(G,ve)=>{G?this.reject(G):this.resolve(ve),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(G):F(G,ve))}}}function He(V,F){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=F||"demo-project",Q=V.iat||0,Ue=V.sub||V.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:Q,exp:Q+3600,auth_time:Q,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},V);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Ct)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ne(){var V;const F=null===(V=Re())||void 0===V?void 0:V.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Dt(){return"object"==typeof self&&self.self===self}function Je(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function $t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ps(){const V=Le();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function zi(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((V,F)=>{try{let G=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ve);Q.onsuccess=()=>{Q.result.close(),G||self.indexedDB.deleteDatabase(ve),V(!0)},Q.onupgradeneeded=()=>{G=!1},Q.onerror=()=>{var Ue;F((null===(Ue=Q.error)||void 0===Ue?void 0:Ue.message)||"")}}catch(G){F(G)}})}function me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Te extends Error{constructor(F,G,ve){super(G),this.code=F,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(F,G,ve){this.service=F,this.serviceName=G,this.errors=ve}create(F,...G){const ve=G[0]||{},Q=`${this.service}/${F}`,Ue=this.errors[F],Ct=Ue?function ct(V,F){return V.replace(lt,(G,ve)=>{const Q=F[ve];return null!=Q?String(Q):`<${ve}?>`})}(Ue,ve):"Error";return new Te(Q,`${this.serviceName}: ${Ct} (${Q}).`,ve)}}const lt=/\{\$([^}]+)}/g;function Sn(V,F){return Object.prototype.hasOwnProperty.call(V,F)}function Qr(V){for(const F in V)if(Object.prototype.hasOwnProperty.call(V,F))return!1;return!0}function pt(V,F){if(V===F)return!0;const G=Object.keys(V),ve=Object.keys(F);for(const Q of G){if(!ve.includes(Q))return!1;const Ue=V[Q],Ct=F[Q];if(Jr(Ue)&&Jr(Ct)){if(!pt(Ue,Ct))return!1}else if(Ue!==Ct)return!1}for(const Q of ve)if(!G.includes(Q))return!1;return!0}function Jr(V){return null!==V&&"object"==typeof V}function wr(V){const F=[];for(const[G,ve]of Object.entries(V))Array.isArray(ve)?ve.forEach(Q=>{F.push(encodeURIComponent(G)+"="+encodeURIComponent(Q))}):F.push(encodeURIComponent(G)+"="+encodeURIComponent(ve));return F.length?"&"+F.join("&"):""}function Br(V){const F={};return V.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[Q,Ue]=ve.split("=");F[decodeURIComponent(Q)]=decodeURIComponent(Ue)}}),F}function Gi(V){const F=V.indexOf("?");if(!F)return"";const G=V.indexOf("#",F);return V.substring(F,G>0?G:void 0)}function Xt(V,F){const G=new nt(V,F);return G.subscribe.bind(G)}class nt{constructor(F,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{F(this)}).catch(ve=>{this.error(ve)})}next(F){this.forEachObserver(G=>{G.next(F)})}error(F){this.forEachObserver(G=>{G.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,G,ve){let Q;if(void 0===F&&void 0===G&&void 0===ve)throw new Error("Missing Observer.");Q=function hi(V,F){if("object"!=typeof V||null===V)return!1;for(const G of F)if(G in V&&"function"==typeof V[G])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:G,complete:ve},void 0===Q.next&&(Q.next=Xr),void 0===Q.error&&(Q.error=Xr),void 0===Q.complete&&(Q.complete=Xr);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Ue}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,F)}sendOne(F,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{G(this.observers[F])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xr(){}const en=1e3,fi=2,An=144e5,$n=.5;function Mi(V,F=en,G=fi){const ve=F*Math.pow(G,V),Q=Math.round($n*ve*(Math.random()-.5)*2);return Math.min(An,ve+Q)}function $r(V){return V&&V._delegate?V._delegate:V}},3168:(mt,xe,k)=>{var g=k(4650);let Y=null;function O(){return Y}class se{}const re=new g.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return(0,g.LFG)(H)}()},providedIn:"platform"}),n})();const pe=new g.OlP("Location Initialized");let H=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){$()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){$()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function W(){return new H((0,g.LFG)(re))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Re)},providedIn:"root"}),n})();const ge=new g.OlP("appBaseHref");let Re=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+qe(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+qe(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ye),g.LFG(ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ye),g.LFG(ge,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ce(Ee(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ee(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=qe,n.joinWithSlash=je,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(g.LFG(ut))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ne(){return new Be((0,g.LFG)(ut))}()},providedIn:"root"}),n})();function Ee(n){return n.replace(/\/index.html$/,"")}function ro(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class zn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let io=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new zn(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),xn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{xn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xn(n,e){n.context.$implicit=e.item}let ls=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Vt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Vt{constructor(){this.$implicit=null,this.ngIf=null}}function Sa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const _d="server";function ps(n){return n===_d}let Ma=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new wd((0,g.LFG)(re),window)}),n})();class wd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ks(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Hc(this.window.history)||Hc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Hc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ra{}class Pd extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Kc extends Pd{static makeCurrent(){!function ie(n){Y||(Y=n)}(new Kc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Zo(){return Wo=Wo||document.querySelector("base"),Wo?Wo.getAttribute("href"):null}();return null==t?null:function Jp(n){_s=_s||document.createElement("a"),_s.setAttribute("href",n);const e=_s.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ro(document.cookie,e)}}let _s,Wo=null;const lf=new g.OlP("TRANSITION_ID"),cy=[{provide:g.ip1,useFactory:function Uu(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[lf,re,g.zs3],multi:!0}];let fo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new g.OlP("EventManagerPlugins");let Vu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(po),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ko{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Yc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),go=(()=>{class n extends Yc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const mo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bu=/%COMP%/g,$a=new g.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Od(n,e){return e.flat(100).map(t=>t.replace(Bu,n))}function _o(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oi=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new ws(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof Ld?s.applyToHost(t):s instanceof hn&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case g.ifc.Emulated:u=new Ld(l,m,r,this.appId,w);break;case g.ifc.ShadowDom:return new kd(l,m,t,r);default:u=new hn(l,m,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Vu),g.LFG(go),g.LFG(g.AFp),g.LFG($a))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class ws{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Qo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Qo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=mo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=mo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,s&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_o(r)):this.eventManager.addEventListener(e,t,_o(r))}}function Qo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class kd extends ws{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Od(s.id,s.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hn extends ws{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=Od(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ld extends hn{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function df(n){return"_ngcontent-%COMP%".replace(Bu,n)}(l),this.hostAttr=function $u(n){return"_nghost-%COMP%".replace(Bu,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Hu=(()=>{class n extends Ko{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Jc=["alt","control","meta","shift"],zu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tr=(()=>{class n extends Ko{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Jc.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=zu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Jc.forEach(l=>{l!==s&&(0,Gu[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const el=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Is(){Kc.makeCurrent()},multi:!0},{provide:re,useFactory:function qu(){return(0,g.RDi)(document),document},deps:[]}]),Ga=new g.OlP(""),Jo=[{provide:g.rWj,useClass:class ja{addToWindow(e){g.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const s=g.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Vs=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function hf(){return new g.qLn},deps:[]},{provide:po,useClass:Hu,multi:!0,deps:[re,g.R0b,g.Lbi]},{provide:po,useClass:tr,multi:!0,deps:[re]},{provide:Oi,useClass:Oi,deps:[Vu,go,g.AFp,$a]},{provide:g.FYo,useExisting:Oi},{provide:Yc,useExisting:go},{provide:go,useClass:go,deps:[re]},{provide:Vu,useClass:Vu,deps:[po,g.R0b]},{provide:Ra,useClass:fo,deps:[]},[]];let Xo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:lf,useExisting:g.AFp},cy]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ga,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Vs,...Jo],imports:[yi,g.hGG]}),n})(),pf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Do(){return new pf((0,g.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Pr=k(2011),tn=k(8996),Ji=k(7669);function it(...n){const e=(0,Ji.yG)(n);return(0,tn.D)(n,e)}var Wn=k(7579);class ii extends Wn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const To=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wi=k(9751);const{isArray:sl}=Array,{getPrototypeOf:Ii,prototype:ea,keys:Qu}=Object;var Bs=k(4671),vt=k(4004);const{isArray:Xu}=Array;var gr=k(5403),Vd=k(9672);function js(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:s}=function Ka(n){if(1===n.length){const e=n[0];if(sl(e))return{args:e,keys:null};if(function Ju(n){return n&&"object"==typeof n&&Ii(n)===ea}(e)){const t=Qu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,tn.D)([],e);const u=new wi.y(function ta(n,e,t=Bs.y){return r=>{wf(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)wf(e,()=>{const C=(0,tn.D)(n[w],e);let A=!1;C.subscribe((0,gr.x)(r,P=>{u[w]=P,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function _f(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):Bs.y));return t?u.pipe(function Ao(n){return(0,vt.U)(e=>function So(n,e){return Xu(e)?n(...e):n(e)}(n,e))}(t)):u}function wf(n,e,t){n?(0,Vd.f)(t,n,e):e()}var na=k(8189);function Ya(...n){return function Bd(){return(0,na.J)(1)}()((0,tn.D)(n,(0,Ji.yG)(n)))}var ol=k(8421);function jd(n){return new wi.y(e=>{(0,ol.Xf)(n()).subscribe(e)})}var al=k(9635),ul=k(576);function $s(n,e){const t=(0,ul.m)(n)?n:()=>n,r=s=>s.error(t());return new wi.y(e?s=>e.schedule(r,0,s):r)}var Li=k(515),$d=k(727),Nr=k(4482);function ec(){return(0,Nr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cl extends wi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $d.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$d.w0.EMPTY)}return e}refCount(){return ec()(this)}}function Zn(n,e){return(0,Nr.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,gr.x)(r,w=>{s?.unsubscribe();let C=0;const A=u++;(0,ol.Xf)(n(w,A)).subscribe(s=(0,gr.x)(r,P=>r.next(e?e(w,P,A,C++):P),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function Es(n){return n<=0?()=>Li.E:(0,Nr.e)((e,t)=>{let r=0;e.subscribe((0,gr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function ra(...n){const e=(0,Ji.yG)(n);return(0,Nr.e)((t,r)=>{(e?Ya(n,t,e):Ya(n,t)).subscribe(r)})}function mr(n,e){return(0,Nr.e)((t,r)=>{let s=0;t.subscribe((0,gr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var rr=k(5577);function Qa(n){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,gr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function xo(n=ll){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,gr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function ll(){return new To}function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mr((s,u)=>n(s,u,r)):Bs.y,Es(1),t?Qa(e):xo(()=>new To))}function Ds(n,e){return(0,ul.m)(e)?(0,rr.z)(n,e,1):(0,rr.z)(n,1)}var Or=k(8505);function Hs(n){return(0,Nr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,gr.x)(t,void 0,void 0,l=>{u=(0,ol.Xf)(n(l,Hs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function ia(n,e){return(0,Nr.e)(function eg(n,e,t,r,s){return(u,l)=>{let m=t,w=e,C=0;u.subscribe((0,gr.x)(l,A=>{const P=C++;w=m?n(w,A,P):(m=!0,A),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ja(n){return n<=0?()=>Li.E:(0,Nr.e)((e,t)=>{let r=[];e.subscribe((0,gr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Xi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mr((s,u)=>n(s,u,r)):Bs.y,Ja(1),t?Qa(e):xo(()=>new To))}function si(n){return(0,Nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",zs=Symbol("RouteTitle");class Mo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sa(n){return new Mo(n)}function zd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!qd(n[s],e[s]))return!1;return!0}function qd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Wd(n){return Array.prototype.concat.apply([],n)}function I(n){return n.length>0?n[n.length-1]:null}function S(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function N(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,tn.D)(Promise.resolve(n)):it(n)}const j=!1,Z={exact:function st(n,e,t){if(!yr(n.segments,e.segments)||!bn(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!st(n.children[r],e.children[r],t))return!1;return!0},subset:At},te={exact:function Ge(n,e){return es(n,e)},subset:function Rt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qd(n[t],e[t]))},ignored:()=>!0};function ze(n,e,t){return Z[t.paths](n.root,e.root,t.matrixParams)&&te[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function At(n,e,t){return oi(n,e,e.segments,t)}function oi(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!yr(s,t)||e.hasChildren()||!bn(s,t,r))}if(n.segments.length===t.length){if(!yr(n.segments,t)||!bn(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!At(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(yr(n.segments,s)&&bn(n.segments,s,r)&&n.children[Tt])&&oi(n.children[Tt],e,u,r)}}function bn(n,e,t){return e.every((r,s)=>te[t](n[s].parameters,r.parameters))}class ai{constructor(e=new Lt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sa(this.queryParams)),this._queryParamMap}toString(){return d0.serialize(this)}}class Lt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,S(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nc(this)}}class Ui{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sa(this.parameters)),this._parameterMap}toString(){return Zd(this)}}function yr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new eu},providedIn:"root"}),n})();class eu{parse(e){const t=new ig(e);return new ai(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${oa(e.root,!0)}`,r=function ng(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${rc(t)}=${rc(s)}`).join("&"):`${rc(t)}=${rc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function nu(n){return encodeURI(n)}(e.fragment)}`:""}`}}const d0=new eu;function nc(n){return n.segments.map(e=>Zd(e)).join("/")}function oa(n,e){if(!n.hasChildren())return nc(n);if(e){const t=n.children[Tt]?oa(n.children[Tt],!1):"",r=[];return S(n.children,(s,u)=>{u!==Tt&&r.push(`${u}:${oa(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tc(n,e){let t=[];return S(n.children,(r,s)=>{s===Tt&&(t=t.concat(e(r,s)))}),S(n.children,(r,s)=>{s!==Tt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Tt?[oa(n.children[Tt],!1)]:[`${s}:${oa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${nc(n)}/${t[0]}`:`${nc(n)}/(${t.join("//")})`}}function tu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rc(n){return tu(n).replace(/%3B/gi,";")}function hl(n){return tu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fl(n){return decodeURIComponent(n)}function tg(n){return fl(n.replace(/\+/g,"%20"))}function Zd(n){return`${hl(n.path)}${function fy(n){return Object.keys(n).map(e=>`;${hl(e)}=${hl(n[e])}`).join("")}(n.parameters)}`}const py=/^[^\/()?;=#]+/;function If(n){const e=n.match(py);return e?e[0]:""}const ru=/^[^=?&#]+/,rg=/^[^&#]+/;class ig{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lt([],{}):new Lt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Lt(e,t)),r}parseSegment(){const e=If(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,j);return this.capture(e),new Ui(fl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=If(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=If(this.remaining);s&&(r=s,this.capture(r))}e[fl(t)]=fl(r)}parseQueryParam(e){const t=function gy(n){const e=n.match(ru);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function pl(n){const e=n.match(rg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=tg(t),u=tg(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=If(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new g.vHH(4010,j);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Tt]:new Lt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,j)}}function iu(n){return n.segments.length>0?new Lt([],{[Tt]:n}):n}function Kd(n){const e={};for(const r of Object.keys(n.children)){const u=Kd(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function my(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Lt(n.segments.concat(e.segments),e.children)}return n}(new Lt(n.segments,e))}function Gs(n){return n instanceof ai}const Yd=!1;function yy(n,e,t,r,s){if(0===t.length)return sc(e.root,e.root,e.root,r,s);const u=function Df(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ml(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return S(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new ml(t,e,r)}(t);return u.toRoot()?sc(e.root,e.root,new Lt([],{}),r,s):function l(w){const C=function oc(n,e,t,r){if(n.isAbsolute)return new ua(e.root,!0,0);if(-1===r)return new ua(t,t===e.root,0);return function yl(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new g.vHH(4005,Yd&&"Invalid number of '../'");s=r.segments.length}return new ua(r,!1,s-u)}(t,r+(Qd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?la(C.segmentGroup,C.index,u.commands):ca(C.segmentGroup,C.index,u.commands);return sc(e.root,C.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Qd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function aa(n){return"object"==typeof n&&null!=n&&n.outlets}function sc(n,e,t,r,s){let l,u={};r&&S(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:Jd(n,e,t);const m=iu(Kd(l));return new ai(m,u,s)}function Jd(n,e,t){const r={};return S(n.children,(s,u)=>{r[u]=s===e?t:Jd(s,e,t)}),new Lt(n.segments,r)}class ml{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qd(r[0]))throw new g.vHH(4003,Yd&&"Root segment cannot have matrix parameters");const s=r.find(aa);if(s&&s!==I(r))throw new g.vHH(4004,Yd&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ua{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ca(n,e,t){if(n||(n=new Lt([],{})),0===n.segments.length&&n.hasChildren())return la(n,e,t);const r=function bf(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(aa(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ag(w,C,l))return u;r+=2}else{if(!ag(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Lt(n.segments.slice(0,r.pathIndex),{});return u.children[Tt]=new Lt(n.segments.slice(r.pathIndex),n.children),la(u,0,s)}return r.match&&0===s.length?new Lt(n.segments,{}):r.match&&!n.hasChildren()?su(n,e,t):r.match?la(n,0,s):su(n,e,t)}function la(n,e,t){if(0===t.length)return new Lt(n.segments,{});{const r=function sg(n){return aa(n[0])?n[0].outlets:{[Tt]:n}}(t),s={};if(!r[Tt]&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const u=la(n.children[Tt],e,t);return new Lt(n.segments,u.children)}return S(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=ca(n.children[l],e,u))}),S(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Lt(n.segments,s)}}function su(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(aa(u)){const w=og(u.outlets);return new Lt(r,w)}if(0===s&&Qd(t[0])){r.push(new Ui(n.segments[e].path,Cf(t[0]))),s++;continue}const l=aa(u)?u.outlets[Tt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&Qd(m)?(r.push(new Ui(l,Cf(m))),s+=2):(r.push(new Ui(l,{})),s++)}return new Lt(r,{})}function og(n){const e={};return S(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=su(new Lt([],{}),0,t))}),e}function Cf(n){const e={};return S(n,(t,r)=>e[r]=`${t}`),e}function ag(n,e,t){return n==t.path&&es(e,t.parameters)}const vl="imperative";class qs{constructor(e,t){this.id=e,this.url=t}}class da extends qs{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends qs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fa extends qs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ac extends qs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class pa extends qs{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vy extends qs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _y extends qs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wy extends qs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Tf extends qs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _l extends qs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ug{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uc{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ei{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let xf=(()=>{class n{createUrlTree(t,r,s,u,l,m){return yy(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(e){return xf.\u0275fac(e)},providedIn:"root"}),n})();class hg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kr(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kr(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ga(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ga(e,this._root).map(t=>t.value)}}function kr(n,e){if(n===e.value)return e;for(const t of e.children){const r=kr(n,t);if(r)return r}return null}function ga(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ga(n,t);if(r.length)return r.unshift(e),r}return[]}class Ro{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ey extends hg{constructor(e,t){super(e),this.snapshot=t,th(this,e)}toString(){return this.snapshot.toString()}}function fg(n,e){const t=function Bi(n,e){const l=new ts([],{},{},"",{},Tt,e,null,n.root,-1,{});return new lc("",new Ro(l,[]))}(n,e),r=new ii([new Ui("",{})]),s=new ii({}),u=new ii({}),l=new ii({}),m=new ii(""),w=new ou(r,s,l,m,u,Tt,e,t.root);return w.snapshot=t.root,new Ey(new Ro(w,[]),t)}class ou{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,vt.U)(C=>C[zs]))??it(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>sa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>sa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Il(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Dy(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ts{get title(){return this.data?.[zs]}constructor(e,t,r,s,u,l,m,w,C,A,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lc extends hg{constructor(e,t){super(t),this.url=e,th(this,t)}toString(){return El(this._root)}}function th(n,e){e.value._routerState=n,e.children.forEach(t=>th(n,t))}function El(n){const e=n.children.length>0?` { ${n.children.map(El).join(", ")} } `:"";return`${n.value}${e}`}function bs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function Gd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Po(n,e){const t=es(n.params,e.params)&&function Vi(n,e){return yr(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Po(n.parent,e.parent))}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function gg(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return dc(n,r,s);return dc(n,r)})}(n,e,t);return new Ro(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>dc(n,m)),l}}const r=function h0(n){return new ou(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>dc(n,u));return new Ro(r,s)}}const y="ngNavigationCancelingError";function h(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=f(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function f(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[y]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _(n){return T(n)&&Gs(n.url)}function T(n){return n&&n[y]}class M{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new U,this.attachRef=null}}let U=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K=!1;let Se=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(U),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,K);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,K);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,K);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,K);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new $e(t,m,s.injector);if(r&&function et(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=s.createComponent(C,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),n})();class $e{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ou?this.route:e===U?this.childContexts:this.parent.get(e,t)}}let Xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Se],encapsulation:2}),n})();function yn(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function rh(n){const e=n.children&&n.children.map(rh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=Xe),t}function Di(n){return n.outlet||Tt}function Rf(n,e){const t=n.filter(r=>Di(r)===e);return t.push(...n.filter(r=>Di(r)!==e)),t}function Cl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class f0{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=wl(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),S(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=wl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=wl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=wl(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new cc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Sf(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(bs(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),bs(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Cl(s.snapshot),w=m?.get(g._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class uD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hc{constructor(e,t){this.component=e,this.route=t}}function Cy(n,e,t){const r=n._root;return sh(r,e?e._root:null,t,[r.value])}function Tl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function sh(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=wl(e);return n.children.forEach(l=>{(function cD(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function lD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yr(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Po(n,e)||!es(n.queryParams,e.queryParams);default:return!Po(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new uD(r)):(u.data=l.data,u._resolvedData=l._resolvedData),sh(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new hc(m.outlet.component,l))}else l&&oh(e,m,s),s.canActivateChecks.push(new uD(r)),sh(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),S(u,(l,m)=>oh(l,t.getContext(m),s)),s}function oh(n,e,t){const r=wl(n),s=n.value;S(r,(u,l)=>{oh(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new hc(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function ah(n){return"function"==typeof n}function xy(n){return n instanceof To||"EmptyError"===n?.name}const uh=Symbol("INITIAL_VALUE");function au(){return Zn(n=>js(n.map(e=>e.pipe(Es(1),ra(uh)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===uh)return uh;if(!1===t||t instanceof ai)return t}return!0}),mr(e=>e!==uh),Es(1)))}function xl(n){return(0,al.z)((0,Or.b)(e=>{if(Gs(e))throw h(0,e)}),(0,vt.U)(e=>!0===e))}const Py={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v0(n,e,t,r,s){const u=Pf(n,e,t);return u.matched?function mD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?it(s.map(l=>{const m=Tl(l,n);return N(function g0(n){return n&&ah(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(au(),xl()):it(!0)}(r=yn(e,r),e,t).pipe((0,vt.U)(l=>!0===l?u:{...Py})):it(u)}function Pf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Py}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||zd)(t,n,e);if(!s)return{...Py};const u={};S(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function vg(n,e,t,r){if(t.length>0&&function w0(n,e,t){return t.some(r=>_g(n,e,r)&&Di(r)!==Tt)}(n,t,r)){const u=new Lt(e,function yD(n,e,t,r){const s={};s[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Di(u)!==Tt){const l=new Lt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[Di(u)]=l}return s}(n,e,r,new Lt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function SA(n,e,t){return t.some(r=>_g(n,e,r))}(n,t,r)){const u=new Lt(n.segments,function _0(n,e,t,r,s){const u={};for(const l of r)if(_g(n,t,l)&&!s[Di(l)]){const m=new Lt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Di(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Lt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function _g(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ch(n,e,t,r){return!!(Di(n)===r||r!==Tt&&_g(e,t,n))&&("**"===n.path||Pf(e,n,t).matched)}function I0(n,e,t){return 0===e.length&&!n.children[t]}const uu=!1;class fc{constructor(e){this.segmentGroup=e||null}}class E0{constructor(e){this.urlTree=e}}function lh(n){return $s(new fc(n))}function D0(n){return $s(new E0(n))}class C0{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=vg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Lt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,vt.U)(u=>this.createUrlTree(Kd(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hs(u=>{if(u instanceof E0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof fc?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,vt.U)(s=>this.createUrlTree(Kd(s),e.queryParams,e.fragment))).pipe(Hs(s=>{throw s instanceof fc?this.noMatchError(s):s}))}noMatchError(e){return new g.vHH(4002,uu)}createUrlTree(e,t,r){const s=iu(e);return new ai(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new Lt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,tn.D)(s).pipe(Ds(u=>{const l=r.children[u],m=Rf(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,vt.U)(w=>({segment:w,outlet:u})))}),ia((u,l)=>(u[l.outlet]=l.segment,u),{}),Xi())}expandSegment(e,t,r,s,u,l){return(0,tn.D)(r).pipe(Ds(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(Hs(C=>{if(C instanceof fc)return it(null);throw C}))),Fi(m=>!!m),Hs((m,w)=>{if(xy(m))return I0(t,s,u)?it(new Lt([],{})):lh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return ch(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):lh(t):lh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?D0(u):this.lineralizeSegments(r,u).pipe((0,rr.z)(l=>{const m=new Lt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=Pf(t,s,u);if(!m)return lh(t);const P=this.applyRedirectCommands(w,s.redirectTo,A);return s.redirectTo.startsWith("/")?D0(P):this.lineralizeSegments(s,P).pipe((0,rr.z)(B=>this.expandSegment(e,t,r,B.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=yn(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Lt(s,{})))):it(new Lt(s,{}))):v0(t,r,s,e).pipe(Zn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,rr.z)(A=>{const P=A.injector??e,B=A.routes,{segmentGroup:q,slicedSegments:ue}=vg(t,m,w,B),Me=new Lt(q.segments,q.children);if(0===ue.length&&Me.hasChildren())return this.expandChildren(P,B,Me).pipe((0,vt.U)(wt=>new Lt(m,wt)));if(0===B.length&&0===ue.length)return it(new Lt(m,{}));const ke=Di(r)===u;return this.expandSegment(P,Me,B,ue,ke?Tt:u,!0).pipe((0,vt.U)(It=>new Lt(m.concat(It.segments),It.children)))})):lh(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function y0(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?it(!0):it(s.map(l=>{const m=Tl(l,n);return N(function TA(n){return n&&ah(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(au(),xl())}(e,t,r).pipe((0,rr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Or.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function _D(n){return $s(f(uu,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return it(r);if(s.numberOfChildren>1||!s.children[Tt])return e.redirectTo,$s(new g.vHH(4e3,uu));s=s.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ai(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return S(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return S(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Lt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new g.vHH(4001,uu);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class wD{}class ID{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=vg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new ts([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ro(r,t),u=new lc(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Il(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,tn.D)(Object.keys(r.children)).pipe(Ds(s=>{const u=r.children[s],l=Rf(t,s);return this.processSegmentGroup(e,l,u,s)}),ia((s,u)=>s&&u?(s.push(...u),s):null),function dl(n,e=!1){return(0,Nr.e)((t,r)=>{let s=0;t.subscribe((0,gr.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Qa(null),Xi(),(0,vt.U)(s=>{if(null===s)return null;const u=T0(s);return function ED(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,tn.D)(t).pipe(Ds(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Fi(l=>!!l),Hs(l=>{if(xy(l))return I0(r,s,u)?it([]):it(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!ch(t,r,s,u))return it(null);let l;if("**"===t.path){const m=s.length>0?I(s).parameters:{},w=Ml(r)+s.length;l=it({snapshot:new ts(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,A0(t),Di(t),t.component??t._loadedComponent??null,t,S0(r),w,x0(t)),consumedSegments:[],remainingSegments:[]})}else l=v0(r,t,s,e).pipe((0,vt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const P=Ml(r)+w.length;return{snapshot:new ts(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,A0(t),Di(t),t.component??t._loadedComponent??null,t,S0(r),P,x0(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(Zn(m=>{if(null===m)return it(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const P=t._loadedInjector??e,B=function DD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:ue}=vg(r,C,A,B.filter(ke=>void 0===ke.redirectTo));if(0===ue.length&&q.hasChildren())return this.processChildren(P,B,q).pipe((0,vt.U)(ke=>null===ke?null:[new Ro(w,ke)]));if(0===B.length&&0===ue.length)return it([new Ro(w,[])]);const Me=Di(t)===u;return this.processSegment(P,B,q,ue,Me?Tt:u).pipe((0,vt.U)(ke=>null===ke?null:[new Ro(w,ke)]))}))}}function bD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function T0(n){const e=[],t=new Set;for(const r of n){if(!bD(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=T0(r.children);e.push(new Ro(r.value,s))}return e.filter(r=>!t.has(r))}function S0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ml(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function A0(n){return n.data||{}}function x0(n){return n.resolve||{}}function N0(n){return"string"==typeof n.title||null===n.title}function Ig(n){return Zn(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,vt.U)(()=>e)):it(e)})}const dh=new g.OlP("ROUTES");let Cs=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,g.f3M)(g.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=N(t.loadComponent()).pipe((0,vt.U)(ky),(0,Or.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),si(()=>{this.componentLoaders.delete(t)})),s=new cl(r,()=>new Wn.x).pipe(ec());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Wd(w.get(dh,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(rh),injector:w}}),si(()=>{this.childrenLoaders.delete(r)})),l=new cl(u,()=>new Wn.x).pipe(ec());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return N(t()).pipe((0,vt.U)(ky),(0,rr.z)(r=>r instanceof g.YKP||Array.isArray(r)?it(r):(0,tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ky(n){return function TD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Dg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Wn.x,this.configLoader=(0,g.f3M)(Cs),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(Xa),this.rootContexts=(0,g.f3M)(U),this.navigationId=0,this.afterPreactivation=()=>it(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new cg(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new ug(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mr(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Zn(r=>{let s=!1,u=!1;return it(r).pipe((0,Or.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new ac(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Li.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return k0(l.source)&&(t.browserUrlTree=l.extractedUrl),it(l).pipe(Zn(A=>{const P=this.transitions?.getValue();return this.events.next(new da(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),P!==this.transitions?.getValue()?Li.E:Promise.resolve(A)}),function Ny(n,e,t,r){return Zn(s=>function b0(n,e,t,r,s){return new C0(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,vt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Or.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function AA(n,e,t,r,s){return(0,rr.z)(u=>function Nf(n,e,t,r,s,u,l="emptyOnly"){return new ID(n,e,t,r,s,l,u).recognize().pipe(Zn(m=>null===m?function Oy(n){return new wi.y(e=>e.error(n))}(new wD):it(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,vt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Or.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const B=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(B,A)}t.browserUrlTree=A.urlAfterRedirects}const P=new vy(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(P)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:P,source:B,restoredState:q,extras:ue}=l,Me=new da(A,this.urlSerializer.serialize(P),B,q);this.events.next(Me);const ke=fg(P,this.rootComponentType).snapshot;return it(r={...l,targetSnapshot:ke,urlAfterRedirects:P,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new ac(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Li.E}}),(0,Or.b)(l=>{const m=new _y(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,vt.U)(l=>r={...l,guards:Cy(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function fD(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?it({...t,guardsResult:!0}):function My(n,e,t,r){return(0,tn.D)(n).pipe((0,rr.z)(s=>function gD(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?it(u.map(m=>{const w=Cl(e)??s,C=Tl(m,w);return N(function Ay(n){return n&&ah(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(Fi())})).pipe(au()):it(!0)}(s.component,s.route,t,e,r)),Fi(s=>!0!==s,!0))}(l,r,s,n).pipe((0,rr.z)(m=>m&&function Ty(n){return"boolean"==typeof n}(m)?function yg(n,e,t,r){return(0,tn.D)(e).pipe(Ds(s=>Ya(function m0(n,e){return null!==n&&e&&e(new uc(n)),it(!0)}(s.route.parent,r),function Al(n,e){return null!==n&&e&&e(new Ei(n)),it(!0)}(s.route,r),function pD(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function p0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>jd(()=>it(l.guards.map(w=>{const C=Cl(l.node)??t,A=Tl(w,C);return N(function dD(n){return n&&ah(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Fi())})).pipe(au())));return it(u).pipe(au())}(n,s.path,t),function Ry(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const s=r.map(u=>jd(()=>{const l=Cl(e)??t,m=Tl(u,l);return N(function Sy(n){return n&&ah(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Fi())}));return it(s).pipe(au())}(n,s.route,t))),Fi(s=>!0!==s,!0))}(r,u,n,e):it(m)),(0,vt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Or.b)(l=>{if(r.guardsResult=l.guardsResult,Gs(l.guardsResult))throw h(0,l.guardsResult);const m=new wy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),mr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Ig(l=>{if(l.guards.canActivateChecks.length)return it(l).pipe((0,Or.b)(m=>{const w=new Tf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Zn(m=>{let w=!1;return it(m).pipe(function xA(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return it(t);let u=0;return(0,tn.D)(s).pipe(Ds(l=>function M0(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!N0(s)&&(u[zs]=s.title),function MA(n,e,t,r){const s=function R0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return it({});const u={};return(0,tn.D)(s).pipe((0,rr.z)(l=>function P0(n,e,t,r){const s=Cl(e)??r,u=Tl(n,s);return N(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Fi(),(0,Or.b)(m=>{u[l]=m}))),Ja(1),function Hd(n){return(0,vt.U)(()=>n)}(u),Hs(l=>xy(l)?Li.E:$s(l)))}(u,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=Il(n,t).resolve,s&&N0(s)&&(n.data[zs]=s.title),null)))}(l.route,r,n,e)),(0,Or.b)(()=>u++),Ja(1),(0,rr.z)(l=>u===s.length?it(t):Li.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Or.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Or.b)(m=>{const w=new _l(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),Ig(l=>{const m=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Or.b)(A=>{w.component=A}),(0,vt.U)(()=>{})));for(const A of w.children)C.push(...m(A));return C};return js(m(l.targetSnapshot.root)).pipe(Qa(),Es(1))}),Ig(()=>this.afterPreactivation()),(0,vt.U)(l=>{const m=function pg(n,e,t){const r=dc(n,e._root,t?t._root:void 0);return new Ey(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Or.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new f0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Es(1),(0,Or.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ha(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),si(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Hs(l=>{if(u=!0,T(l)){_(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new fa(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),_(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||k0(r.source)};t.scheduleNavigation(w,vl,null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new pa(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Li.E}))}))}cancelNavigationTransition(t,r,s){const u=new fa(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function k0(n){return n!==vl}let L0=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[zs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(F0)},providedIn:"root"}),n})(),F0=(()=>{class n extends L0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pf))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(xD)},providedIn:"root"}),n})();class AD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let xD=(()=>{class n extends AD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Of=new g.OlP("",{providedIn:"root",factory:()=>({})});let U0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(V0)},providedIn:"root"}),n})(),V0=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MD(n){throw n}function B0(n,e,t){return e.parse("/")}const RD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ns=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(Of,{optional:!0})||{},this.errorHandler=this.options.errorHandler||MD,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||B0,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(U0),this.routeReuseStrategy=(0,g.f3M)(SD),this.urlCreationStrategy=(0,g.f3M)(dg),this.titleStrategy=(0,g.f3M)(L0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Wd((0,g.f3M)(dh,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(Dg),this.urlSerializer=(0,g.f3M)(Xa),this.location=(0,g.f3M)(Be),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ai,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fg(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(rh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Gs(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,vl,null,r)}navigate(t,r={skipLocationChange:!1}){return function PD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...RD}:!1===r?{...j0}:r,Gs(t))return ze(this.currentUrlTree,t,s);const u=this.parseUrl(t);return ze(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,C,A;return l?(m=l.resolve,w=l.reject,C=l.promise):C=new Promise((P,B)=>{m=P,w=B}),A="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kf=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Wn.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof ha&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ns),g.Y36(ou),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ut))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class gc{}let Fy=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(mr(t=>t instanceof ha),Ds(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,tn.D)(s).pipe((0,na.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const u=s.pipe((0,rr.z)(l=>null===l?it(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,tn.D)([u,l]).pipe((0,na.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ns),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(gc),g.LFG(Cs))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uy=new g.OlP("");let ND=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof da?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ha&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof eh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new eh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();var Zs=(()=>((Zs=Zs||{})[Zs.COMPLETE=0]="COMPLETE",Zs[Zs.FAILED=1]="FAILED",Zs[Zs.REDIRECTING=2]="REDIRECTING",Zs))();const hh=!1;function mc(n,e){return{\u0275kind:n,\u0275providers:e}}const yc=new g.OlP("",{providedIn:"root",factory:()=>!1});function G0(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(ns),s=n.get(By);1===n.get(jy)&&r.initialNavigation(),n.get(q0,null,g.XFs.Optional)?.setUpPreloading(),n.get(Uy,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const By=new g.OlP(hh?"bootstrap done indicator":"",{factory:()=>new Wn.x}),jy=new g.OlP(hh?"initial navigation":"",{providedIn:"root",factory:()=>1});function BD(){let n=[];return n=hh?[{provide:g.Xts,multi:!0,useFactory:()=>{const e=(0,g.f3M)(ns);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function lg(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],mc(1,n)}const q0=new g.OlP(hh?"router preloader":"");function W0(n){return mc(0,[{provide:q0,useExisting:Fy},{provide:gc,useExisting:n}])}const Rl=!1,bg=new g.OlP(Rl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),HD=[Be,{provide:Xa,useClass:eu},ns,U,{provide:ou,useFactory:function kD(n){return n.routerState.root},deps:[ns]},Cs,Rl?{provide:yc,useValue:!0}:[]];function OA(){return new g.PXZ("Router",ns)}let Pl=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[HD,Rl&&r?.enableTracing?BD().\u0275providers:[],{provide:dh,multi:!0,useValue:t},{provide:bg,useFactory:GD,deps:[[ns,new g.FiY,new g.tp0]]},{provide:Of,useValue:r||{}},r?.useHash?{provide:ut,useClass:Pe}:{provide:ut,useClass:Re},{provide:Uy,useFactory:()=>{const n=(0,g.f3M)(Ma),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(Of),r=(0,g.f3M)(Dg),s=(0,g.f3M)(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ND(s,r,n,e,t)}},r?.preloadingStrategy?W0(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:OA},r?.initialNavigation?qD(r):[],[{provide:Lf,useFactory:G0},{provide:g.tb,multi:!0,useExisting:Lf}]]}}static forChild(t){return{ngModule:n,providers:[{provide:dh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(bg,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Xe]}),n})();function GD(n){if(Rl&&n)throw new g.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qD(n){return["disabled"===n.initialNavigation?mc(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(ns);return()=>{e.setUpLocationChangeListener()}}},{provide:jy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mc(2,[{provide:jy,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(ns),u=e.get(By);(function PA(n,e){n.events.pipe(mr(t=>t instanceof ha||t instanceof fa||t instanceof pa||t instanceof ac),(0,vt.U)(t=>t instanceof ha||t instanceof ac?Zs.COMPLETE:t instanceof fa&&(0===t.code||1===t.code)?Zs.REDIRECTING:Zs.FAILED),mr(t=>t!==Zs.REDIRECTING),Es(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(Dg).afterPreactivation=()=>(r(!0),u.closed?it(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const Lf=new g.OlP(Rl?"Router Initializer":"");var fe=k(5861),$y=k(6451),Nl=k(5363),Q0=k(6063);class Hy extends Wn.x{constructor(e=1/0,t=1/0,r=Q0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var zy=k(3099);function Cg(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,zy.B)({connector:()=>new Hy(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Gy(n,e){return(0,ul.m)(e)?Zn(()=>n,e):Zn(()=>n)}var Ff=k(9468),ui=k(4976);k(259);var Ol=k(6881),ph=k(4859),cn=k(2090),vc=k(1877);const Wy=new Map,tw={activated:!1,tokenObservers:[]},XD={initialized:!1,enabled:!1};function fn(n){return Wy.get(n)||Object.assign({},tw)}function Tg(){return XD}const Ky="https://content-firebaseappcheck.googleapis.com/v1",tb="exchangeDebugToken",rw={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class nb{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function rb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Dr=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iw(n){if(!fn(n).activated)throw Dr.create("use-before-activation",{appName:n.name})}function Bf(n,e){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const P=yield s.getHeartbeatsHeader();P&&(r["X-Firebase-Client"]=P)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(P){throw Dr.create("fetch-network-error",{originalErrorMessage:P?.message})}if(200!==l.status)throw Dr.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(P){throw Dr.create("fetch-parse-error",{originalErrorMessage:P?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Dr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}})).apply(this,arguments)}function xg(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${Ky}/projects/${t}/apps/${r}:${tb}?key=${s}`,body:{debug_token:e}}}const cu="firebase-app-check-database",Mg=1,_c="firebase-app-check-store";let Rg=null;function uw(n,e){return cw.apply(this,arguments)}function cw(){return(cw=(0,fe.Z)(function*(n,e){const r=(yield function Jy(){return Rg||(Rg=new Promise((n,e)=>{try{const t=indexedDB.open(cu,Mg);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Dr.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_c,{keyPath:"compositeKey"})}}catch(t){e(Dr.create("storage-open",{originalErrorMessage:t?.message}))}}),Rg)}()).transaction(_c,"readwrite"),u=r.objectStore(_c).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;m(Dr.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const $f=new vc.Yd("@firebase/app-check");function tv(n,e){return(0,cn.hl)()?function ib(n,e){return uw(function dw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{$f.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nv(){return Tg().enabled}function Hf(){return rv.apply(this,arguments)}function rv(){return(rv=(0,fe.Z)(function*(){const n=Tg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ub={error:"UNKNOWN_ERROR"};function cb(n){return cn.US.encodeString(JSON.stringify(n),!1)}function Ng(n){return iv.apply(this,arguments)}function iv(){return(iv=(0,fe.Z)(function*(n,e=!1){const t=n.app;iw(t);const r=fn(t);let u,s=r.token;if(s&&!lu(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(lu(w)?s=w:yield tv(t,void 0))}if(!e&&s&&lu(s))return{token:s.token};let m,l=!1;if(nv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Bf(xg(t,yield Hf()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield tv(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield fn(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?$f.warn(w.message):$f.error(w),u=w}return s?u?m=lu(s)?{token:s.token,internalError:u}:gw(u):(m={token:s.token},r.token=s,yield tv(t,s)):m=gw(u),l&&function db(n,e){const t=fn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function fw(n){return Og.apply(this,arguments)}function Og(){return(Og=(0,fe.Z)(function*(n){const e=n.app;iw(e);const{provider:t}=fn(e);if(nv()){const r=yield Hf(),{token:s}=yield Bf(xg(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function sv(n,e){const t=fn(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function lb(n){const{app:e}=n,t=fn(e);let r=t.tokenRefresher;r||(r=function pw(n){const{app:e}=n;return new nb((0,fe.Z)(function*(){let r;if(r=fn(e).token?yield Ng(n,!0):yield Ng(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},rw.RETRIAL_MIN_WAIT,rw.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lu(n){return n.expireTimeMillis-Date.now()>0}function gw(n){return{token:cb(ub),error:n}}class hb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fn(this.app);for(const t of e)sv(this.app,t.next);return Promise.resolve()}}const yw="app-check-internal";!function vw(){(0,Ol._registerComponent)(new ph.wA("app-check",n=>function ov(n,e){return new hb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yw).initialize()})),(0,Ol._registerComponent)(new ph.wA(yw,n=>function fb(n){return{getToken:e=>Ng(n,e),getLimitedUseToken:()=>fw(n),addTokenListener:e=>function kg(n,e,t,r){const{app:s}=n,u=fn(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&lu(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),lb(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>lb(n))}(n,"INTERNAL",e),removeTokenListener:e=>sv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ol.registerVersion)("@firebase/app-check","0.8.0")}();class Gf{constructor(){return(0,ui.vb)("app-check")}}typeof window<"u"&&window;var Cb=k(9260);const hv=new g.OlP("angularfire2.auth.use-emulator"),fv=new g.OlP("angularfire2.auth.settings"),pv=new g.OlP("angularfire2.auth.tenant-id"),Tw=new g.OlP("angularfire2.auth.langugage-code"),Sw=new g.OlP("angularfire2.auth.use-device-language"),Aw=new g.OlP("angularfire.auth.persistence"),jg=(n,e,t,r,s,u,l,m)=>(0,Pr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[C,A]of Object.entries(l))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let qf=(()=>{class n{constructor(t,r,s,u,l,m,w,C,A,P,B,q){const ue=new Wn.x,Me=it(void 0).pipe((0,Nl.Q)(l.outsideAngular),Zn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,vt.U)(()=>(0,Pr.on)(t,u,r)),(0,vt.U)(ke=>jg(ke,u,m,C,A,P,w,B)),Cg({bufferSize:1,refCount:!1}));if(ps(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{Me.pipe(Fi()).subscribe();const rt=Me.pipe(Zn(Pt=>Pt.getRedirectResult().then(zt=>zt,()=>null)),ui.iC,Cg({bufferSize:1,refCount:!1})),It=Me.pipe(Zn(Pt=>new wi.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onAuthStateChanged(an=>zt.next(an),an=>zt.error(an),()=>zt.complete()))})))),wt=Me.pipe(Zn(Pt=>new wi.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onIdTokenChanged(an=>zt.next(an),an=>zt.error(an),()=>zt.complete()))}))));this.authState=rt.pipe(Gy(It),(0,Ff.R)(l.outsideAngular),(0,Nl.Q)(l.insideAngular)),this.user=rt.pipe(Gy(wt),(0,Ff.R)(l.outsideAngular),(0,Nl.Q)(l.insideAngular)),this.idToken=this.user.pipe(Zn(Pt=>Pt?(0,tn.D)(Pt.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Zn(Pt=>Pt?(0,tn.D)(Pt.getIdTokenResult()):it(null))),this.credential=(0,$y.T)(rt,ue,this.authState.pipe(mr(Pt=>!Pt))).pipe((0,vt.U)(Pt=>Pt?.user?Pt:null),(0,Ff.R)(l.outsideAngular),(0,Nl.Q)(l.insideAngular))}return(0,Pr.pX)(this,Me,u,{spy:{apply:(ke,rt,It)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&It.then(wt=>ue.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Pr.Dh),g.LFG(Pr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ui.HU),g.LFG(hv,8),g.LFG(fv,8),g.LFG(pv,8),g.LFG(Tw,8),g.LFG(Sw,8),g.LFG(Aw,8),g.LFG(Gf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$l=(()=>{class n{constructor(t,r){this.firebaseAuth=t,this.router=r,this.isLoggedIn=!1}signIn(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseAuth.signInWithEmailAndPassword(t,r).then(u=>{s.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}signUp(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseAuth.createUserWithEmailAndPassword(t,r).then(u=>{localStorage.setItem("user",JSON.stringify(u.user)),s.isLoggedIn=!0})})()}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user")}forgotPassword(t){this.firebaseAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verify-email"])},r=>{alert("Something went wrong")})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(qf),g.LFG(ns))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xw=(()=>{class n{constructor(t){this.firebaseservice=t,this.isLogout=new g.vpe}logout(){this.firebaseservice.logout(),this.isLogout.emit()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($l))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],inputs:{data:"data"},outputs:{isLogout:"isLogout"},decls:6,vars:1,consts:[[1,"btn","mt-4",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"body")(1,"h1"),g._uU(2),g.qZA(),g.TgZ(3,"div")(4,"a",0),g.NdJ("click",function(){return r.logout()}),g._uU(5,"Logout"),g.qZA()()()),2&t&&(g.xp6(2),g.hij("LOGGED IN ",r.data,""))},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{margin:0}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#123456;color:#ffeba7;box-shadow:0 8px 24px #10277033}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029;height:100vh}"]}),n})();class Wf{}class $g{}class ya{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let s;if(s="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),s.length>0){const u=t.toLowerCase();this.headers.set(u,s),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ya?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ya;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ya?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Mw{encodeKey(e){return Rw(e)}encodeValue(e){return Rw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ic=/%(\d[a-f0-9])/gi,Ab={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Rw(n){return encodeURIComponent(n).replace(Ic,(e,t)=>Ab[t]??e)}function wh(n){return`${n}`}class rs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Mw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Hg(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],w=t.get(l)||[];w.push(m),t.set(l,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(wh):[wh(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new rs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(wh(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(wh(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Mb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Rb(n){return typeof Blob<"u"&&n instanceof Blob}function Nw(n){return typeof FormData<"u"&&n instanceof FormData}class Ih{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function gv(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new ya),this.context||(this.context=new xb),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new rs,this.urlWithParams=t}serializeBody(){return null===this.body?null:Mb(this.body)||Rb(this.body)||Nw(this.body)||function Pb(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nw(this.body)?null:Rb(this.body)?this.body.type||null:Mb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,C=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((P,B)=>P.set(B,e.setHeaders[B]),w)),e.setParams&&(C=Object.keys(e.setParams).reduce((P,B)=>P.set(B,e.setParams[B]),C)),new Ih(t,r,u,{params:C,headers:w,context:A,reportProgress:m,responseType:s,withCredentials:l})}}var br=(()=>((br=br||{})[br.Sent=0]="Sent",br[br.UploadProgress=1]="UploadProgress",br[br.ResponseHeader=2]="ResponseHeader",br[br.DownloadProgress=3]="DownloadProgress",br[br.Response=4]="Response",br[br.User=5]="User",br))();class vr{constructor(e,t=200,r="OK"){this.headers=e.headers||new ya,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zg extends vr{constructor(e={}){super(e),this.type=br.ResponseHeader}clone(e={}){return new zg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gg extends vr{constructor(e={}){super(e),this.type=br.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ow extends vr{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function qg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let kw=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Ih)u=t;else{let w,C;w=s.headers instanceof ya?s.headers:new ya(s.headers),s.params&&(C=s.params instanceof rs?s.params:new rs({fromObject:s.params})),u=new Ih(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:C,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=it(u).pipe(Ds(w=>this.handler.handle(w)));if(t instanceof Ih||"events"===s.observe)return l;const m=l.pipe(mr(w=>w instanceof Gg));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,vt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new rs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,qg(s,r))}post(t,r,s={}){return this.request("POST",t,qg(s,r))}put(t,r,s={}){return this.request("PUT",t,qg(s,r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wf))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function mv(n,e){return e(n)}function Lw(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const Nb=new g.OlP("HTTP_INTERCEPTORS"),Zf=new g.OlP("HTTP_INTERCEPTOR_FNS");function Fw(){let n=null;return(e,t)=>(null===n&&(n=((0,g.f3M)(Nb,{optional:!0})??[]).reduceRight(Lw,mv)),n(e,t))}let Uw=(()=>{class n extends Wf{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Zf)));this.chain=r.reduceRight((s,u)=>function Eh(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),mv)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($g),g.LFG(g.lqb))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Vw=/^\)\]\}',?\n/;let Bw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wi.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((q,ue)=>s.setRequestHeader(q,ue.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&s.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();s.responseType="json"!==q?q:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const q=s.statusText||"OK",ue=new ya(s.getAllResponseHeaders()),Me=function Vb(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new zg({headers:ue,status:s.status,statusText:q,url:Me}),l},w=()=>{let{headers:q,status:ue,statusText:Me,url:ke}=m(),rt=null;204!==ue&&(rt=typeof s.response>"u"?s.responseText:s.response),0===ue&&(ue=rt?200:0);let It=ue>=200&&ue<300;if("json"===t.responseType&&"string"==typeof rt){const wt=rt;rt=rt.replace(Vw,"");try{rt=""!==rt?JSON.parse(rt):null}catch(Pt){rt=wt,It&&(It=!1,rt={error:Pt,text:rt})}}It?(r.next(new Gg({body:rt,headers:q,status:ue,statusText:Me,url:ke||void 0})),r.complete()):r.error(new Ow({error:rt,headers:q,status:ue,statusText:Me,url:ke||void 0}))},C=q=>{const{url:ue}=m(),Me=new Ow({error:q,status:s.status||0,statusText:s.statusText||"Unknown Error",url:ue||void 0});r.error(Me)};let A=!1;const P=q=>{A||(r.next(m()),A=!0);let ue={type:br.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ue.total=q.total),"text"===t.responseType&&s.responseText&&(ue.partialText=s.responseText),r.next(ue)},B=q=>{let ue={type:br.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ue.total=q.total),r.next(ue)};return s.addEventListener("load",w),s.addEventListener("error",C),s.addEventListener("timeout",C),s.addEventListener("abort",C),t.reportProgress&&(s.addEventListener("progress",P),null!==u&&s.upload&&s.upload.addEventListener("progress",B)),s.send(u),r.next({type:br.Sent}),()=>{s.removeEventListener("error",C),s.removeEventListener("abort",C),s.removeEventListener("load",w),s.removeEventListener("timeout",C),t.reportProgress&&(s.removeEventListener("progress",P),null!==u&&s.upload&&s.upload.removeEventListener("progress",B)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ra))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const yv=new g.OlP("XSRF_ENABLED"),Wg=new g.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jw=new g.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class vv{}let jb=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ro(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(re),g.LFG(g.Lbi),g.LFG(Wg))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function $b(n,e){const t=n.url.toLowerCase();if(!(0,g.f3M)(yv)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,g.f3M)(vv).getToken(),s=(0,g.f3M)(jw);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var ir=(()=>((ir=ir||{})[ir.Interceptors=0]="Interceptors",ir[ir.LegacyInterceptors=1]="LegacyInterceptors",ir[ir.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ir[ir.NoXsrfProtection=3]="NoXsrfProtection",ir[ir.JsonpSupport=4]="JsonpSupport",ir[ir.RequestsMadeViaParent=5]="RequestsMadeViaParent",ir))();function hu(n,e){return{\u0275kind:n,\u0275providers:e}}function zb(...n){const e=[kw,Bw,Uw,{provide:Wf,useExisting:Uw},{provide:$g,useExisting:Bw},{provide:Zf,useValue:$b,multi:!0},{provide:yv,useValue:!0},{provide:vv,useClass:jb}];for(const t of n)e.push(...t.\u0275providers);return(0,g.MR2)(e)}const _v=new g.OlP("LEGACY_INTERCEPTOR_FN");let $w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[zb(hu(ir.LegacyInterceptors,[{provide:_v,useFactory:Fw},{provide:Zf,useExisting:_v,multi:!0}]))]}),n})(),Hw=(()=>{class n{constructor(t){this.http=t}getProducts(){return this.http.get("https://fakestoreapi.com/products/").pipe((0,vt.U)(t=>t))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(kw))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ev=(()=>{class n{constructor(){this.cartItemList=[],this.productList=new ii([])}getProducts(){return this.productList.asObservable()}setProduct(t){this.cartItemList.push(...t),this.productList.next(t)}addToCart(t){this.cartItemList.push(t),this.productList.next(this.cartItemList),this.getTotalPrice(),console.log(this.cartItemList)}getTotalPrice(){let t=0;return this.cartItemList.map(r=>{t+=r.total}),t}removeCartItem(t){this.cartItemList.map((r,s)=>{t.id===r.id&&this.cartItemList.splice(s,1)}),this.productList.next(this.cartItemList)}removeAllCart(){this.cartItemList=[],this.productList.next(this.cartItemList)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Jb(n,e){if(1&n){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",3),g._UZ(2,"img",4),g.TgZ(3,"h5",5),g._uU(4),g.qZA(),g.TgZ(5,"p",5),g._uU(6),g.qZA(),g.TgZ(7,"p")(8,"strong"),g._uU(9,"Price"),g.qZA(),g._uU(10),g.qZA(),g.TgZ(11,"button",6),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.addToCart(u))}),g._uU(12,"Add to Cart"),g.qZA()(),g.BQk()}if(2&n){const t=e.$implicit;g.xp6(2),g.s9C("src",t.image,g.LSH),g.xp6(2),g.Oqu(t.title),g.xp6(2),g.Oqu(t.description),g.xp6(4),g.hij("$",t.price,"")}}let Xb=(()=>{class n{constructor(t,r,s){this.api=t,this.firebaseservice=r,this.cartservice=s,this.isLogout=new g.vpe}ngOnInit(){this.api.getProducts().subscribe(t=>{this.productList=t,this.productList.forEach(r=>{Object.assign(r,{quantity:1,total:r.price})})})}logout(){this.firebaseservice.logout(),this.isLogout.emit()}addToCart(t){this.cartservice.addToCart(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hw),g.Y36($l),g.Y36(Ev))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-product-page"]],outputs:{isLogout:"isLogout"},decls:4,vars:1,consts:[[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"card","col-md-3"],[3,"src"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis","max-width","100ch"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"body")(1,"div",0)(2,"div",1),g.YNc(3,Jb,13,4,"ng-container",2),g.qZA()()()),2&t&&(g.xp6(3),g.Q6J("ngForOf",r.productList))},dependencies:[io],styles:[".card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;margin-bottom:15px;transition:.3s ease-in-out}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.3s ease-in-out}.card[_ngcontent-%COMP%]{padding:20px;margin:30px}body[_ngcontent-%COMP%]{background-color:#1f2029}"]}),n})();function eC(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._UZ(6,"img",11),g.qZA(),g.TgZ(7,"td",12),g._uU(8),g.qZA(),g.TgZ(9,"th",13),g._uU(10),g.qZA(),g.TgZ(11,"td",13),g._uU(12),g.qZA(),g.TgZ(13,"td",13),g._uU(14),g.qZA(),g.TgZ(15,"td")(16,"button",8),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw(2);return g.KtG(l.removeItem(u))}),g._UZ(17,"i",14),g.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;g.xp6(2),g.Oqu(r+1),g.xp6(2),g.Oqu(t.title),g.xp6(2),g.s9C("src",t.image,g.LSH),g.xp6(2),g.Oqu(t.description),g.xp6(2),g.Oqu(t.price),g.xp6(2),g.Oqu(t.quantity),g.xp6(2),g.Oqu(t.total)}}function tC(n,e){if(1&n){const t=g.EpF();g.ynx(0),g.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"table",5)(5,"thead")(6,"tr")(7,"th"),g._uU(8,"Sr.No"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Product Name"),g.qZA(),g.TgZ(11,"th"),g._uU(12,"Product Image"),g.qZA(),g.TgZ(13,"th"),g._uU(14,"Description"),g.qZA(),g.TgZ(15,"th"),g._uU(16,"Price"),g.qZA(),g.TgZ(17,"th"),g._uU(18,"Quantity"),g.qZA(),g.TgZ(19,"th"),g._uU(20,"Total"),g.qZA(),g.TgZ(21,"th"),g._uU(22,"Action"),g.qZA()()(),g.TgZ(23,"tbody"),g.YNc(24,eC,18,7,"tr",6),g.TgZ(25,"tr"),g._UZ(26,"td",7),g.TgZ(27,"td")(28,"button",8),g.NdJ("click",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.emptycart())}),g._uU(29,"Empty Cart"),g.qZA()(),g.TgZ(30,"td")(31,"button",9),g._uU(32,"Shop More"),g.qZA()(),g.TgZ(33,"td")(34,"button",10),g._uU(35,"Checkout"),g.qZA()(),g.TgZ(36,"td")(37,"strong"),g._uU(38),g.qZA()()()()()()()(),g.BQk()}if(2&n){const t=g.oxw();g.xp6(24),g.Q6J("ngForOf",t.products),g.xp6(14),g.hij("Grand Total : $",t.grandTotal,"")}}function nC(n,e){1&n&&(g.ynx(0,15),g.TgZ(1,"div",2)(2,"div",16)(3,"h5",17),g._uU(4,"My Cart"),g.qZA()(),g.TgZ(5,"div",18),g._UZ(6,"img",19),g.TgZ(7,"h4"),g._uU(8,"Your cart is empty!"),g.qZA(),g.TgZ(9,"h6"),g._uU(10,"Add item to it now"),g.qZA(),g.TgZ(11,"button",9),g._uU(12,"Shop Now"),g.qZA()()(),g.BQk())}let rC=(()=>{class n{constructor(t){this.cartService=t,this.products=[]}ngOnInit(){this.cartService.getProducts().subscribe(t=>{this.products=t,this.grandTotal=this.cartService.getTotalPrice()})}removeItem(t){this.cartService.removeCartItem(t)}emptycart(){this.cartService.removeAllCart()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ev))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-mycart"]],decls:3,vars:2,consts:[[4,"ngIf"],["class","noproducts",4,"ngIf"],[1,"container"],[1,"card-table"],[1,"cart-product"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"btn","btn-danger",3,"click"],["routerLink","/products",1,"btn","btn-primary"],[1,"btn","btn-success"],["alt","",2,"width","120px",3,"src"],[2,"width","25%"],[2,"width","12%"],[1,"fas","fa-trash-alt"],[1,"noproducts"],[1,"card"],[1,"card-title"],[1,"center"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABSlBMVEXvyEnRkz7////gW0q+PiXwzErkk0ngVEorQU+7OSTSkD7Slj/s7e+/QCbIbjPvyUrtxEnuxj/Vm0Dvx0XuxT3z133eoT+8OSP+/ffOgjrWlj3xzkv99+f+/PT02ozs8fTPjjTy0GX89uP78tr02IP57MT35a734aTwy1K9Nxvhb2LcqVvYVEHOjCz78dL357by03L13ZX46r/UhDbEVSzFYC/ksES7MhHoz8zHRzDfTjnKejcjPVDu17T14J7678zouEXXjTnBTCrFWyy5KwDDVUPJcWHGYlDfwLzq5OXRjoPOczPWopnkmY/mrqnfSjPieGrbtbG/STTKdmjgaVfkjYLQiX3dcEfesm3iun7kwI/nn0ngZEnfcEjs0qn05c/Dj0GyhEJjW0pBSkygjUt+aEiQckWymUsRNU+je0NMUEvDpklJTUzftHXhacCyAAAQcElEQVR4nN2d+VvbRhrHJQW1GOOMhWQsZAsk22Bc8AEhXKFASBNytU22aZqwuyRpttkm3fz/v+6MDp865rRFv08bIE9l5tN33mNezUiSIlpmtbPebe6Ueq4rhXLdXmmn2V3vVE3hv18S99Gm3emellxN0wz4r65Lw9J1XfPklnY2hIIKIrQ7G6uuNAQGpBjpOuTX3dWNji1mKAIIzXqzBIxxoyULGtSQSs26AFvyJqzuriK6eJslYhrSarfKeURcCWsbJTjjKNhGjFlq1ngOih9htduDeDS2m4TsbfCzJCdC86ykGXqRHS+ANPRSh5NPciGsNl1DgwPjRQgAgnSbXAzJgbC+Khn+wKjiSwwkYgSr9QwQdqD3ceMaF/TIzowJ112DLXamCU7W9RkSnvUE8/mMvbMZEdZLKLMDfr4Xz1hi8EdqwmpjCvYbMDao4yolodnkktwJGLVTyvxIR3jmGlPlgwIaZcihIbQb0AGL3PI7HiAyY4NmgUVBuKuLS4DJ0vXdKRDCCDPtCTokiohDSri+OSsDSl5ZqG+SmpGQcMeYHZ8PqRs7Aglr7qwBkQy3JopwV5pejk+SLpHkDQLCU2MKFRqejFMBhHbJ4Lj8Y5VWwk6NuIRVV8sOH5Tm4qYNTMLOLJNEpPRNzLUxHuG6TtcBFSodL95gEXaNhLb87GR0eRFuZCELRsnY4EN4mjUXDARzl4aRNdIJvUItg3MUChQxSrhUwp1s+mCodMQ0wqYBprrSJZbRZCPc0DJtQSQtJdwkE3azVKlFCqQmjUTCMyP4kCwLACOxY5xEWNczs5hIlp7UME4grG5mYzmYKqBvJpTh8YSme0MApaKku/Ht4njCUlZrtSgZDXLC5k0CTEqLcYRnmc8TY4oNqDGENTDdGy/MgqONiTYxhL2bEmUG0nskhKc3ywl9xTTgIgnPbiIgrFAjXTGK0L4pqX5MuhvVYowiXM3ooj5V2ioe4Q2do0hRKWOS0LxZaWJIcOBgsnqbJNy5qXMUIWqTTY0Jws7NjDKBgD7RCZ8gvDErimjpvfF5Ok6Y0fY2rsBkT2OM0J71ENkF7ETCGxxmQo13UEcJazfbCX1ptQTC1b8Dob4aT1jP4F1CCagqGAj+kHqFVo8lbGiZ6+ADdX95VEU17RK9EUdYz16YUZfnyuXckOAP91PNOGLEYcKSlrUOMDjPzU2ovJxmRb0UTVib5Za8aKnPIghze8U0Sxi1SMLsLQvB+SQfVGGpCJIrL60RRVid2sCxVblTjiLck5dSI2I1grCZPRMWCxGTdK58Ly8jKyYasTlJaG5ObeRYggSV+wHgcDgtl2/nZdlDTJC+aU4Q7maudwHUQgB4e2VICwhQXsgjK8ZSAmN3grDH72wdFxUl1SrPIcZcIe9BjSnZFwf94ZCwljkTSmAPTtICMmEUoLyQ5IsA9BNGSJi9ZRNYDgPpQhRg4IuxiP2OjRTGmaytKgC46xPm7kaaMM2KUhhrAsLs9UjBfi7FhCkRNeydBoSNzE3SyrM0E6YghisMn9DOVjIEwzX3SgKgLHtJIxJT37SHCM8yV3RXnuW8bFjeSzJhoi8Gt6J8wsx1L9RiwcuFc7mVZMKEiRp0M6SgYsuWDUHlTjBJL9IAExD9aOoR1mkm6aBkAry3L8IPvPCWSXO5e+mE0BelSF806n1CqmUFqKhSsQg/vJK25CaXavkmzF2k83m+GPkp/gLDI+wRDwFUwP79Zw8uLi727t5ZliqsSOPaywU1N4YJ4yYq8GtTRGgTp3tVsvbQigb9b4YqPDvnakd1OfDCAhafHFeGG3ZAuE5GWATAusiNrE3LuXupTT7sTy8C9QGZCeWwRh2xJJCM9YCQsOoGxbthTdyCChgvlrlN1X7BVkgo2KKsOD5VveobEZLcMgSSen7hAbZ+KDx89OjR5dHBgZe6yul9TBzBgap3ywXvExMLtmgrDo8USK5PaBOZUN2fy3nWe/T4yRrS4uHTowMv8N3nYUU4sP1giuQITCj7SWNMuu0Rkq0rihcI8ODyELL5Wlt78tRHTG3VYkn1a+5C7gGJCeUw3AzbEa0vJMJsWPFm0MFTn28twFx7XPD8cZ8DYtgkLeSSa+5YxCGhjCiRFaWodwIt+DwE+/GnwI6HCLG8d16pqGyq9JukKTV3hCbKcNQZlhTTjeWJEOpgQgv6WD/9fPzzi+D7wwNvMfcNu/wOW6F8D46ZFHLcF10TEuL3umEcRR3M1mXogN9t37p1fBj88BwhHn3LrO0gE2EVbBPyq5u+HfUqJOwQ7JVVUTX1w+FaSHgLEYYR5xI1/yAzo8ImKU7NHYkoDT2SS+tAwi72Ad+iilJx61E/iI4Qrr1EefGIFTA0IXbBNia/Vdwn7ELCU/wbv16b/eBxNOHik3+gacpKeBT2uelMKI/6onYKCRv4oRSg23mtJwhuiHAx+HntF5QxeJmQLNuPaGiloTcgoYvthwA8yBVaD9fQjPzu1atX33ljeoW+/fGJH2uYHTEwYXKHDR9RdxWJYLMlAHDl3fplDebBn7dvjaAc/4r+9gc4NjZCHiYc9kUdmBKsSvEZIeHBa8jy4/H40F6FKZGNkIsJ5X4ZDiTNlmoEhH0b/jROuP2Ciw1DE86ldtjSrBjeCNdqUoegKkV3g1qXKKq8OD4+3vZhtrePt49vwYiK0gUjYWhC8oItworekLWOtE5CeBvd7/KLNKRXCPAl+g4F07XXrQJjLA1bBqwmlANfhIS7Updg7aTeycF1hV+mQZuF+XAtSB4PUYhgAdz2u8BzF0vMgHIQUbWuRPLABK9DFNbdEzXNYYs14wcFG1aTNF2eL2obEsETE4JG7cGTyLrUT/gsbhjEGbwmKY4gorZDQigBFTXbW6+jCP1cwTRJ+xsTuJjQR4SEBEUbWn+j9UNYmaK0uL0dTNnFhyjO8DAhW7YfRyxJJSJC775luRDOzF9vvTgM2hmXXhuDxYRhquBnQiirQUYYNKLKrcdBn2Yx+Prk0utFcTBh4l1tCm2REno7JArl1vPFMKIiAz5+6FmQKZDyKthGlCcnLPq9qLmDy5eLa4EOXx+wA4YmJGySpoqYECLe9zbytA4Kvzx/+fjxy6cPfT7Gxe9R0H96wCXbMxCi+4XLhZxXfLQOkFpzfiXCBrgdZnviJilvQiR1/0E5vPVUQP+gPzisfAvexgSebkhLCNPivYvyyOZW5hYb34KNmVBSz/MLt49CMx6xtxC5F2xDhBQbTQBClJd+gwXN9jY7HZIwE8pvJMpNieBcvvctFzgk1iZpvJy3Eu32bnC+wg1QTMHmE15JXdo9e2D/X7wAxZlQbn8v0e/vrvzGa5qy97mTCM/onkuKos0/OREKqrlDwjr1YSewzwfQN2GBc809IKxS750FRU6OGJqQd8GG5LyTTPrdwepvXAA5Nkkn1TYlhX57MODjiGF7hkOTdFIWJKR/nBAfRwxNiLGTlEJLikR/0gKAIg/CYDMw7V3tZDlvISHDmbXKv9kB2TYmpBJeQcJdhlDzDbsjhpP0mZBJ6lxDwjr9c8tAMb/AqHvBMvNCQLZHhO8gIctZC1Bk7Krk/X2OQgo27/NttCeKOpiiA4CMiCsUO0lJtIUI2Y6tAcCCmA82Awsp2GQv0CBC6vVToCXy7WehVoJAWhZkwoCQ7XAlkOgnaj7YTl0m3UmKq/Y7f48w27EuhEhpggWhBRuU4+8RVqjabcOIEp0V87epd5Ji6k2wk32D+fBhkcYX8zLjNsRUITf0COvsB0hpfLFvQjEFm+y7oUdo0q8u1EogdSlPrEGTVFSgMcNzT0R3ukd0pxAsDdBXUoUdNlFe6Hztn+yizYjonnfUkyuIJKBJGhJe9wmrJLv3Bhoct2aSoGwPJ2l1cEqWrjQFVuTDVcgkquaG2hqcIaVcBavLrIQFcTV3kCtCwhpVWxgUC3PBDWB6EwqqueUgV/SfOED3xEt1Ocemcm5PmAnlpeHz+HTPmAdAPV+5zSRR1Yzcn6QhYY32Hpu0lLfk97JFlOqtpffwEu8aYYDhJO0/vYVyoQ8k/cPvH+c//v7Bwv/d1mfiSyi0pYwS0t5kU/9zcjI/P39y8gf2eK0//vQv+SQSsX09Rkj5lHL9v3/O+8Ier/XpJLzks0BEpzpGSNut+RgOd/4j5q9+H14wf/JFIOBXZZyQ6rGQ+l8ng/HiWcT6PHTJB+oOT5rCODP8RDqalf5gkmJP08EkFTpNtyaf16aQHEvIPGH7e2WSkOZhWCOzFC/6j8zS96Imad6MIFRITl709aU/3v/h/vZ+cBIWafLtKyWKkM2ImCYcMuLJ/AdZUFVq2ZGEVG/jBH/Nw/wNs/5nayGPN17rM/rvT04+iipqRkw4QmjTPGlIL3768vHLp/fYo83L1nvCS0hlVWMIoRFJGdEROH3ZsggGCw1teRJWdTvDJhwlpCndAF2zVKTydiwhwcn1EWUL0blW4gkpN9cw3wrmKstMIqR8QmSWEIfKmShCpUe52M8MorOlJBNSvzwgK4iDRUUMIfVd/YxMVOftONAEIfUd4Wwg5ifeETj5vifqx9FmAXE8zEQSoqUw5S4p6hv6vOS8mcSJILQl6i1EM7biQjviPZZR785j2Ms3W8SIORrzhkf65ybP1IpRczSG0KZ/Ju0sESfjaCwhy+6MmSHmJ3J9EiHVcj/UjBBHFvbphEqJPtrMxorOVsyrueMIbYa3BM4EMdoJEwhRCc6COO3UH+OESYRsLy0pCrz1GQl4HcsRT8j0dvUpT9T2xIoCi1BZpevaTB9xcCuNkFDpMbxgfYqIsWE0nZDtzSXTQnSsqJdV4xEqVQ6IwmPOUlyewCFUapuZn6hWbJ7AIlTqION5MT4RYhIyvnxVuBVTAdMJlRqLFcUi5tHJLXZCpc4SboT64kKaD2ISskVUgYhOHgMQi1CpuiwnMkQhOilpgoRQMRmWi6IQna3ERE9ICGvUTJXhsIpof00q1SgIWVcaXPNiPr5nwUCorOsM8Ya3FSM7o6yESo0l3nBFxAui5ISK2chGk7H9Bi/GkBOijWHUd23QyXZOgPEdC3ZCpe7SHSBC4mNFohlKQaiYDCe/eSC235LMUBpCRTnb1JJfih0rVl+EhbaFH0PpCRVz1aDMG4CxyYid5RkJFaXjUjIypX5iD2QgVMwNMM19N8jyTvuK1ANZCOFyo4HMSOyO1A/SaL+pU46UlhAlDqqpSoXY3qKaoIyEsFLt0TCSI7a3yCMoH0LF3HVpNk6TIbbz13QOyIMQMnY3DT3h5diRhCSI7SU2PmZCBc1VjfjBhJiIDtv85EUIY84qIHRILCs67a/08WUgHoQwd2y4hib57wPDMmcqotPOX2E1mlLFhxA6ZL1BZMh4RJTe29bXd4zu1xcvQih7t0QCGYfoONabaz7m88SREKq6u7ppaJiUUYgOtB5PPIU3IZTdafYMQ0cpJMUjxyeq025vXXGbnH1xJ0Sy1097kqGlFecDRAdq6+p7m2JxlCohhEh2Z2Ont6lrmqbHtyGLS07bcfJbbwXRIQkjRDLt2vrGTskFmgYtqhnwD937Cr9DfwHcxtX19Tub+8wcllDCUKZZ7XTWd7vdbnPn9LQJv+6ud+pVU5TZRvR/3jJXaDzHoZQAAAAASUVORK5CYII=","alt",""]],template:function(t,r){1&t&&(g.TgZ(0,"body"),g.YNc(1,tC,39,2,"ng-container",0),g.YNc(2,nC,13,0,"ng-container",1),g.qZA()),2&t&&(g.xp6(1),g.Q6J("ngIf",0!=r.products.length),g.xp6(1),g.Q6J("ngIf",0==r.products.length))},dependencies:[io,ls,kf],styles:["body[_ngcontent-%COMP%]{background-color:#1f2029;height:300vh}.card[_ngcontent-%COMP%]{height:60vh;padding:25px}.center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{text-decoration:none;color:inherit;border:none;outline:none;height:150px;width:150px;margin:0}h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-weight:400}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.card-table[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:none;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.2);border-radius:.25rem}.center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important;margin-top:20px!important;font-weight:400;padding:12px 72px;border-radius:3px!important}"]}),n})(),iC=(()=>{class n{constructor(t,r){this.cartService=t,this.firebaseservice=r,this.isLogout=new g.vpe,this.totalItem=0}ngOnInit(){this.cartService.getProducts().subscribe(t=>{this.totalItem=t.length})}logout(){this.firebaseservice.logout(),this.isLogout.emit()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ev),g.Y36($l))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:8,vars:1,consts:[[1,"navbar","navbar-dark","shadow-sm"],["routerLink","cart",1,"btn","btn-primary"],[1,"fas","fa-cart-plus",2,"font-size","30px"],[1,"badge","bg-danger",2,"font-size","10px"],[3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"]],template:function(t,r){1&t&&(g.TgZ(0,"header")(1,"div",0)(2,"button",1),g._UZ(3,"i",2),g.TgZ(4,"div",3),g._uU(5),g.qZA()(),g.TgZ(6,"button",4),g.NdJ("click",function(){return r.logout()}),g._UZ(7,"i",5),g.qZA()()()),2&t&&(g.xp6(5),g.Oqu(r.totalItem))},dependencies:[kf],styles:["header[_ngcontent-%COMP%]{background-color:#1f2029}"]}),n})();function sC(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"body")(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"h6",12)(7,"span"),g._uU(8,"Log In "),g.qZA(),g.TgZ(9,"span"),g._uU(10,"Sign Up"),g.qZA()(),g._UZ(11,"input",13)(12,"label",14),g.TgZ(13,"div",15)(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19)(18,"h4",20),g._uU(19,"Log In"),g.qZA(),g.TgZ(20,"div",21),g._UZ(21,"input",22,23)(23,"i",24),g.qZA(),g.TgZ(24,"div",25),g._UZ(25,"input",26,27)(27,"i",28),g.qZA(),g.TgZ(28,"a",29),g.NdJ("click",function(){g.CHM(t);const s=g.MAs(22),u=g.MAs(26),l=g.oxw();return g.KtG(l.signIn(s.value,u.value))}),g._uU(29,"Login"),g.qZA(),g.TgZ(30,"p",30)(31,"a",31),g._uU(32,"Forgot your password?"),g.qZA()()()()(),g.TgZ(33,"div",32)(34,"div",18)(35,"div",19)(36,"h4",33),g._uU(37,"Sign Up"),g.qZA(),g.TgZ(38,"div",21),g._UZ(39,"input",34,35)(41,"i",36),g.qZA(),g.TgZ(42,"div",25),g._UZ(43,"input",37,38)(45,"i",39),g.qZA(),g.TgZ(46,"div",25),g._UZ(47,"input",22,40)(49,"i",24),g.qZA(),g.TgZ(50,"div",25),g._UZ(51,"input",26,41)(53,"i",28),g.qZA(),g.TgZ(54,"a",29),g.NdJ("click",function(){g.CHM(t);const s=g.MAs(48),u=g.MAs(52),l=g.MAs(40),m=g.oxw();return m.signUp(s.value,u.value),g.KtG(m.nameDisplay(l.value))}),g._uU(55,"Register"),g.qZA()()()()()()()()()()()()}}function oC(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"app-header",42),g.NdJ("isLogout",function(){g.CHM(t);const s=g.oxw();return g.KtG(s.handleLogout())}),g.qZA()}}const zw='@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700,800,900";body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029}a[_ngcontent-%COMP%]:hover{text-decoration:none}.link[_ngcontent-%COMP%]{color:#ffeba7}.link[_ngcontent-%COMP%]:hover{color:#c4c3ca}p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}h4[_ngcontent-%COMP%]{font-weight:600}h6[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 20px;font-weight:700}.section[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.full-height[_ngcontent-%COMP%]{min-height:100vh}[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){display:none}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;display:block;text-align:center;width:60px;height:16px;border-radius:8px;padding:0;margin:10px auto;cursor:pointer;background-color:#ffeba7}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{position:absolute;display:block;width:36px;height:36px;border-radius:50%;color:#ffeba7;background-color:#020305;font-family:unicons;content:"\\eb4f";z-index:20;top:-10px;left:-10px;line-height:36px;text-align:center;font-size:24px;transition:all .5s ease}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{transform:translate(44px) rotate(-270deg)}.card-3d-wrap[_ngcontent-%COMP%]{position:relative;width:440px;max-width:100%;height:400px;transform-style:preserve-3d;perspective:800px;margin-top:60px}.card-3d-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:all .6s ease-out}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#2b2e38;background-image:url(/img/pattern_japanese-pattern-2_1_2_0-0_0_1__ffffff00_000000.png);position:absolute;border-radius:6px;-webkit-transform-style:preserve-3d}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.checkbox[_ngcontent-%COMP%]:checked ~ .card-3d-wrap[_ngcontent-%COMP%]   .card-3d-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.center-wrap[_ngcontent-%COMP%]{position:absolute;width:100%;padding:0 35px;top:50%;left:0;transform:translate3d(0,-50%,35px) perspective(100px);z-index:20;display:block}.form-group[_ngcontent-%COMP%]{position:relative;display:block;margin:0;padding:0}.form-style[_ngcontent-%COMP%]{padding:13px 20px 13px 55px;height:48px;width:100%;font-weight:500;border-radius:4px;font-size:14px;line-height:22px;letter-spacing:.5px;outline:none;color:#c4c3ca;background-color:#1f2029;border:none;transition:all .2s linear;box-shadow:0 4px 8px #15151533}.form-style[_ngcontent-%COMP%]:focus, .form-style[_ngcontent-%COMP%]:active{border:none;outline:none;box-shadow:0 4px 8px #15151533}.input-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:18px;height:48px;font-size:24px;line-height:48px;text-align:left;transition:all .2s linear}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}';let Gw=(()=>{class n{constructor(t){this.firebaseService=t,this.title="scholarsMart",this.isSignedIn=!1,this.email="",this.message=""}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}signUp(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseService.signUp(t,r),s.firebaseService.isLoggedIn&&(s.isSignedIn=!0)})()}signIn(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseService.signIn(t,r),s.firebaseService.isLoggedIn&&(s.isSignedIn=!0)})()}handleLogout(){this.isSignedIn=!1}nameDisplay(t){this.message=t}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($l))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login-signup"]],decls:11,vars:2,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1, shrink-to-fit=no"],["rel","stylesheet","href","https://unicons.iconscout.com/release/v2.1.9/css/unicons.css"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css"],[4,"ngIf"],[3,"isLogout",4,"ngIf"],[1,"section"],[1,"container"],[1,"row","full-height","justify-content-center"],[1,"col-12","text-center","align-self-center","py-5"],[1,"section","pb-5","pt-5","pt-sm-2","text-center"],[1,"mb-0","pb-3"],["type","checkbox","id","reg-log","name","reg-log",1,"checkbox"],["for","reg-log"],[1,"card-3d-wrap","mx-auto"],[1,"card-3d-wrapper"],[1,"card-front"],[1,"center-wrap"],[1,"section","text-center"],[1,"mb-4","pb-3"],[1,"form-group"],["type","email","placeholder","Email",1,"form-style"],["email",""],[1,"input-icon","uil","uil-at"],[1,"form-group","mt-2"],["type","password","placeholder","Password",1,"form-style"],["password",""],[1,"input-icon","uil","uil-lock-alt"],["routerLink","products",1,"btn","mt-4",3,"click"],[1,"mb-0","mt-4","text-center"],["routerLink","/forgot-password",1,"link"],[1,"card-back"],[1,"mb-3","pb-3"],["type","text ","placeholder","Full Name",1,"form-style"],["fullName",""],[1,"input-icon","uil","uil-user"],["type","tel","placeholder","Phone Number",1,"form-style"],["phoneNumber",""],[1,"input-icon","uil","uil-phone"],["emailSignup",""],["passwordSignup",""],[3,"isLogout"]],template:function(t,r){1&t&&(g.TgZ(0,"html",0)(1,"head")(2,"title"),g._uU(3,"Webleb"),g.qZA(),g._UZ(4,"meta",1)(5,"meta",2)(6,"link",3)(7,"link",4),g.qZA(),g.YNc(8,sC,56,0,"body",5),g.qZA(),g.YNc(9,oC,1,0,"app-header",6),g._UZ(10,"router-outlet")),2&t&&(g.xp6(8),g.Q6J("ngIf",!r.isSignedIn),g.xp6(1),g.Q6J("ngIf",r.isSignedIn))},dependencies:[ls,Se,kf,iC],styles:[zw,zw]}),n})();const aC=[{path:"home",component:xw},{path:"products",component:Xb},{path:"cart",component:rC},{path:"login",component:Gw},{path:"",redirectTo:"products",pathMatch:"full"}];let uC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Pl.forRoot(aC),Pl]}),n})(),cC=(()=>{class n{constructor(t){this.firebaseService=t,this.title="scholarsMart",this.isSignedIn=!1,this.email="",this.message=""}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}signUp(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseService.signUp(t,r),s.firebaseService.isLoggedIn&&(s.isSignedIn=!0)})()}signIn(t,r){var s=this;return(0,fe.Z)(function*(){yield s.firebaseService.signIn(t,r),s.firebaseService.isLoggedIn&&(s.isSignedIn=!0)})()}handleLogout(){this.isSignedIn=!1}nameDisplay(t){this.message=t}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($l))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&g._UZ(0,"app-login-signup")(1,"router-outlet")},dependencies:[Se,Gw],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700,800,900";body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029}a[_ngcontent-%COMP%]:hover{text-decoration:none}.link[_ngcontent-%COMP%]{color:#ffeba7}.link[_ngcontent-%COMP%]:hover{color:#c4c3ca}p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}h4[_ngcontent-%COMP%]{font-weight:600}h6[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 20px;font-weight:700}.section[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.full-height[_ngcontent-%COMP%]{min-height:100vh}[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){display:none}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;display:block;text-align:center;width:60px;height:16px;border-radius:8px;padding:0;margin:10px auto;cursor:pointer;background-color:#ffeba7}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{position:absolute;display:block;width:36px;height:36px;border-radius:50%;color:#ffeba7;background-color:#020305;font-family:unicons;content:"\\eb4f";z-index:20;top:-10px;left:-10px;line-height:36px;text-align:center;font-size:24px;transition:all .5s ease}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{transform:translate(44px) rotate(-270deg)}.card-3d-wrap[_ngcontent-%COMP%]{position:relative;width:440px;max-width:100%;height:400px;transform-style:preserve-3d;perspective:800px;margin-top:60px}.card-3d-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:all .6s ease-out}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#2b2e38;background-image:url(/img/pattern_japanese-pattern-2_1_2_0-0_0_1__ffffff00_000000.png);position:absolute;border-radius:6px;-webkit-transform-style:preserve-3d}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.checkbox[_ngcontent-%COMP%]:checked ~ .card-3d-wrap[_ngcontent-%COMP%]   .card-3d-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.center-wrap[_ngcontent-%COMP%]{position:absolute;width:100%;padding:0 35px;top:50%;left:0;transform:translate3d(0,-50%,35px) perspective(100px);z-index:20;display:block}.form-group[_ngcontent-%COMP%]{position:relative;display:block;margin:0;padding:0}.form-style[_ngcontent-%COMP%]{padding:13px 20px 13px 55px;height:48px;width:100%;font-weight:500;border-radius:4px;font-size:14px;line-height:22px;letter-spacing:.5px;outline:none;color:#c4c3ca;background-color:#1f2029;border:none;transition:all .2s linear;box-shadow:0 4px 8px #15151533}.form-style[_ngcontent-%COMP%]:focus, .form-style[_ngcontent-%COMP%]:active{border:none;outline:none;box-shadow:0 4px 8px #15151533}.input-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:18px;height:48px;font-size:24px;line-height:48px;text-align:left;transition:all .2s linear}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}']}),n})();var lC=k(4986);function Dv(){return(0,Nr.e)((n,e)=>{let t,r=!1;n.subscribe((0,gr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function qw(n,e){return n===e}k(2644);var Ye,Ww=k(3942),Zw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Js={},Zg=Zg||{},Ft=Zw||self;function Yf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fu="closure_uid_"+(1e9*Math.random()>>>0),fC=0;function pC(n,e,t){return n.call.apply(n.bind,arguments)}function bh(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function ji(n,e,t){return(ji=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pC:bh).apply(null,arguments)}function Ch(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function pu(){this.s=this.s,this.o=this.o}pu.prototype.s=!1,pu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Kw(n){Object.prototype.hasOwnProperty.call(n,fu)&&n[fu]||(n[fu]=++fC)}(this)},pu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function bt(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Qw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Yf(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ci.prototype.h=function(){this.defaultPrevented=!0};var mC=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",()=>{},e),Ft.removeEventListener("test",()=>{},e)}catch{}return n}();function _a(n){return/^[\s\xa0]*$/.test(n)}function Kg(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Ts(n){return-1!=Kg().indexOf(n)}function Th(n){return Th[" "](n),n}Th[" "]=function(){};var Yg,n,jA=Ts("Opera"),Hl=Ts("Trident")||Ts("MSIE"),bv=Ts("Edge"),Cv=bv||Hl,Tv=Ts("Gecko")&&!(-1!=Kg().toLowerCase().indexOf("webkit")&&!Ts("Edge"))&&!(Ts("Trident")||Ts("MSIE"))&&!Ts("Edge"),Jw=-1!=Kg().toLowerCase().indexOf("webkit")&&!Ts("Edge");function Sv(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Av="",xv=(n=Kg(),Tv?/rv:([^\);]+)(\)|;)/.exec(n):bv?/Edge\/([\d\.]+)/.exec(n):Hl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Jw?/WebKit\/(\S+)/.exec(n):jA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xv&&(Av=xv?xv[1]:""),Hl){var Mv=Sv();if(null!=Mv&&Mv>parseFloat(Av)){Yg=String(Mv);break e}}Yg=Av}var yC=Ft.document&&Hl&&(Sv()||parseInt(Yg,10))||void 0;function Qf(n,e){if(Ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Tv){e:{try{Th(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Qg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qf.$.h.call(this)}}ci(Qf,Ci);var Qg={2:"touch",3:"pen",4:"mouse"};Qf.prototype.h=function(){Qf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sh="closure_listenable_"+(1e6*Math.random()|0),eI=0;function tI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++eI,this.fa=this.ia=!1}function Jg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Gl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nI(n){const e={};for(const t in n)e[t]=n[t];return e}const rI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iI(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<rI.length;u++)t=rI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xf(n){this.src=n,this.g={},this.h=0}function Xg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=gC(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Jg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function em(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Xf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=em(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new tI(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Rv="closure_lm_"+(1e6*Math.random()|0),tm={};function sI(n,e,t,r,s){if(r&&r.once)return vC(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)sI(n,e[u],t,r,s);return null}return t=rm(t),n&&n[Sh]?n.O(e,t,Dh(r)?!!r.capture:!!r,s):oI(n,e,t,!1,r,s)}function oI(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Dh(s)?!!s.capture:!!s,m=Nv(n);if(m||(n[Rv]=m=new Xf(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function $A(){const e=nm;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mC||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Pv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vC(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vC(n,e[u],t,r,s);return null}return t=rm(t),n&&n[Sh]?n.P(e,t,Dh(r)?!!r.capture:!!r,s):oI(n,e,t,!0,r,s)}function _C(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)_C(n,e[u],t,r,s);else r=Dh(r)?!!r.capture:!!r,t=rm(t),n&&n[Sh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=em(u=n.g[e],t,r,s))&&(Jg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Nv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=em(e,t,r,s)),(t=-1<n?e[n]:null)&&aI(t))}function aI(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Sh])Xg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Nv(e))?(Xg(t,n),0==t.h&&(t.src=null,e[Rv]=null)):Jg(n)}}}function Pv(n){return n in tm?tm[n]:tm[n]="on"+n}function nm(n,e){if(n.fa)n=!0;else{e=new Qf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&aI(n),n=t.call(r,e)}return n}function Nv(n){return(n=n[Rv])instanceof Xf?n:null}var Ov="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(n){return"function"==typeof n?n:(n[Ov]||(n[Ov]=function(e){return n.handleEvent(e)}),n[Ov])}function or(){pu.call(this),this.i=new Xf(this),this.S=this,this.J=null}function li(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ci(e,n);else if(e instanceof Ci)e.target=e.target||n;else{var s=e;iI(e=new Ci(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=im(l,r,!0,e)&&s}if(s=im(l=e.g=n,r,!0,e)&&s,s=im(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=im(l=e.g=t[u],r,!1,e)&&s}function im(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&Xg(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}ci(or,pu),or.prototype[Sh]=!0,or.prototype.removeEventListener=function(n,e,t,r){_C(this,n,e,t,r)},or.prototype.N=function(){if(or.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jg(t[r]);delete n.g[e],n.h--}}this.J=null},or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},or.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kv=Ft.JSON.stringify;function HA(){var n=Fv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lv=new class wC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new EC,n=>n.reset());class EC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function DC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function ep(n){Ft.setTimeout(()=>{throw n},0)}let tp,Ah=!1,Fv=new class IC{constructor(){this.h=this.g=null}add(e,t){const r=Lv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Uv=()=>{const n=Ft.Promise.resolve(void 0);tp=()=>{n.then(bC)}};var bC=()=>{for(var n;n=HA();){try{n.h.call(n.g)}catch(t){ep(t)}var e=Lv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ah=!1};function np(n,e){or.call(this),this.h=n||1,this.g=e||Ft,this.j=ji(this.qb,this),this.l=Date.now()}function Vv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function rp(n,e,t){if("function"==typeof n)t&&(n=ji(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ji(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function uI(n){n.g=rp(()=>{n.g=null,n.i&&(n.i=!1,uI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(np,or),(Ye=np.prototype).ga=!1,Ye.T=null,Ye.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),li(this,"tick"),this.ga&&(Vv(this),this.start()))}},Ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.N=function(){np.$.N.call(this),Vv(this),delete this.g};class cI extends pu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uI(this)}N(){super.N(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xh(n){pu.call(this),this.h=n,this.g={}}ci(xh,pu);var lI=[];function dI(n,e,t,r){Array.isArray(t)||(t&&(lI[0]=t.toString()),t=lI);for(var s=0;s<t.length;s++){var u=sI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function hI(n){Gl(n.g,function(e,t){this.g.hasOwnProperty(t)&&aI(e)},n),n.g={}}function Mh(){this.g=!0}function Rh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return kv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}xh.prototype.N=function(){xh.$.N.call(this),hI(this)},xh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mh.prototype.Ea=function(){this.g=!1},Mh.prototype.info=function(){};var ql={},pI=null;function sm(){return pI=pI||new or}function gI(n){Ci.call(this,ql.Ta,n)}function ip(n){const e=sm();li(e,new gI(e))}function Bv(n,e){Ci.call(this,ql.STAT_EVENT,n),this.stat=e}function Ti(n){const e=sm();li(e,new Bv(e,n))}function mI(n,e){Ci.call(this,ql.Ua,n),this.size=e}function sp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}ql.Ta="serverreachability",ci(gI,Ci),ql.STAT_EVENT="statevent",ci(Bv,Ci),ql.Ua="timingevent",ci(mI,Ci);var op={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jv(){}function om(){}jv.prototype.h=null;var $v,Wl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function am(){Ci.call(this,"d")}function ap(){Ci.call(this,"c")}function um(){}function Zl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new xh(this),this.P=AC,this.V=new np(n=Cv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _I}function _I(){this.i=null,this.g="",this.h=!1}ci(am,Ci),ci(ap,Ci),ci(um,jv),um.prototype.g=function(){return new XMLHttpRequest},um.prototype.i=function(){return{}},$v=new um;var AC=45e3,Ec={},up={};function Hv(n,e,t){n.L=1,n.v=qv(wa(e)),n.s=t,n.S=!0,xC(n,null)}function xC(n,e){n.G=Date.now(),Kl(n),n.A=wa(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Ph(t.i,"t",r),n.C=0,t=n.l.J,n.h=new _I,n.g=i_(n.l,t?e:null,!n.s),0<n.O&&(n.M=new cI(ji(n.Pa,n,n.g),n.O)),dI(n.U,n.g,"readystatechange",n.nb),e=n.I?nI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ip(),function CC(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var P=A.split("_");l=2<=P.length&&"type"==P[1]?l+(A+"=")+C+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function zv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function cm(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=MC(n,t),s==up){4==e&&(n.o=4,Ti(14),r=!1),Rh(n.j,n.m,null,"[Incomplete Response]");break}if(s==Ec){n.o=4,Ti(15),Rh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rh(n.j,n.m,s,null),lm(n,s)}zv(n)&&s!=up&&s!=Ec&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),ym(e),e.M=!0,Ti(11))):(Rh(n.j,n.m,t,"[Invalid Chunked Response]"),Dc(n),Yl(n))}function MC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?up:(t=Number(e.substring(t,r)),isNaN(t)?Ec:(r+=1)+t>e.length?up:(e=e.slice(r,r+t),n.C=r+t,e))}function Kl(n){n.Y=Date.now()+n.P,wI(n,n.P)}function wI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sp(ji(n.lb,n),e)}function cp(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Yl(n){0==n.l.H||n.J||Xl(n.l,n)}function Dc(n){cp(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Vv(n.V),hI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function lm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||OI(t.i,n)))if(!n.K&&OI(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;qr(t),Lh(t)}r_(t),Ti(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=sp(ji(t.ib,t),6e3));if(1>=NI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ed(t,11)}else if((n.K||t.g==n)&&qr(t),!_a(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let C=s[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const A=C[3];null!=A&&(t.ra=A,t.l.info("VER="+t.ra));const P=C[4];null!=P&&(t.Ga=P,t.l.info("SVER="+t.Ga));const B=C[5];null!=B&&"number"==typeof B&&0<B&&(t.L=r=1.5*B,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ue=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var u=r.i;u.g||-1==ue.indexOf("spdy")&&-1==ue.indexOf("quic")&&-1==ue.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Zv(u,u.h),u.h=null))}if(r.F){const Me=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.Da=Me,Mn(r.I,r.F,Me))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=zC(r,r.J?r.pa:null,r.Y),l.K){kI(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(cp(m),Kl(m)),r.g=l}else n_(r);0<t.j.length&&mm(t)}else"stop"!=C[0]&&"close"!=C[0]||ed(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ed(t,7):gm(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}ip()}catch{}}function DI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function EI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Yf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function II(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Yf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(Ye=Zl.prototype).setTimeout=function(n){this.P=n},Ye.nb=function(n){n=n.target;const e=this.M;e&&3==Oo(n)?e.l():this.Pa(n)},Ye.Pa=function(n){try{if(n==this.g)e:{const A=Oo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>A)&&(3!=A||Cv||this.g&&(this.h.h||this.g.ja()||pm(this.g)))){this.J||4!=A||7==e||ip(),cp(this);var t=this.g.da();this.ca=t;t:if(zv(this)){var r=pm(this.g);n="";var s=r.length,u=4==Oo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Dc(this),Yl(this);var l="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function fI(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,A,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_a(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ti(12),Dc(this),Yl(this);break e}Rh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lm(this,t)}this.S?(cm(this,A,l),Cv&&this.i&&3==A&&(dI(this.U,this.V,"tick",this.mb),this.V.start())):(Rh(this.j,this.m,l,null),lm(this,l)),4==A&&Dc(this),this.i&&!this.J&&(4==A?Xl(this.l,this):(this.i=!1,Kl(this)))}else(function Qv(n){const e={};n=(n.g&&2<=Oo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(_a(n[r]))continue;var t=DC(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function Jf(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),Dc(this),Yl(this)}}}catch{}},Ye.mb=function(){if(this.g){var n=Oo(this.g),e=this.g.ja();this.C<e.length&&(cp(this),cm(this,n,e),this.i&&4!=n&&Kl(this))}},Ye.cancel=function(){this.J=!0,Dc(this)},Ye.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function TC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ip(),Ti(17)),Dc(this),this.o=2,Yl(this)):wI(this,this.Y-n)};var bI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ql(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ql){this.h=n.h,Gv(this,n.j),this.s=n.s,this.g=n.g,lp(this,n.m),this.l=n.l;var e=n.i,t=new fp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),CI(this,t),this.o=n.o}else n&&(e=String(n).match(bI))?(this.h=!1,Gv(this,e[1]||"",!0),this.s=dp(e[2]||""),this.g=dp(e[3]||"",!0),lp(this,e[4]),this.l=dp(e[5]||"",!0),CI(this,e[6]||"",!0),this.o=dp(e[7]||"")):(this.h=!1,this.i=new fp(null,this.h))}function wa(n){return new Ql(n)}function Gv(n,e,t){n.j=t?dp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function CI(n,e,t){e instanceof fp?(n.i=e,function xI(n,e){e&&!n.j&&(bc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(SI(this,r),Ph(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=hp(e,kC)),n.i=new fp(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function qv(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ql.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hp(e,TI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hp(e,TI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(hp(t,"/"==t.charAt(0)?OC:NC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hp(t,LC)),n.join("")};var TI=/[#\/\?@]/g,NC=/[#\?:]/g,OC=/[#\?]/g,kC=/[#\?@]/g,LC=/#/g;function fp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bc(n){n.g||(n.g=new Map,n.h=0,n.i&&function RC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function SI(n,e){bc(n),e=Jl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function AI(n,e){return bc(n),e=Jl(n,e),n.g.has(e)}function Ph(n,e,t){SI(n,e),0<t.length&&(n.i=null,n.g.set(Jl(n,e),bt(t)),n.h+=t.length)}function Jl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Wv(n){this.l=n||RI,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ka&&Ft.g.Ka()&&Ft.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=fp.prototype).add=function(n,e){bc(this),this.i=null,n=Jl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){bc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Ye.ta=function(){bc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},Ye.Z=function(n){bc(this);let e=[];if("string"==typeof n)AI(this,n)&&(e=e.concat(this.g.get(Jl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ye.set=function(n,e){return bc(this),this.i=null,AI(this,n=Jl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var RI=10;function PI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NI(n){return n.h?1:n.g?n.g.size:0}function OI(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Zv(n,e){n.g?n.g.add(e):n.h=e}function kI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function LI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return bt(n.i)}Wv.prototype.cancel=function(){if(this.i=LI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var FC=class{stringify(n){return Ft.JSON.stringify(n,void 0)}parse(n){return Ft.JSON.parse(n,void 0)}};function UC(){this.g=new FC}function pp(n,e,t){const r=t||"";try{DI(n,function(s,u){let l=s;Dh(s)&&(l=kv(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Nh(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function is(n){this.l=n.fc||null,this.j=n.ob||!1}function dm(n,e){or.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ci(is,jv),is.prototype.g=function(){return new dm(this.l,this.j)},is.prototype.i=function(n){return function(){return n}}({}),ci(dm,or);var gp=0;function Oh(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function mp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yp(n)}function yp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=dm.prototype).open=function(n,e){if(this.readyState!=gp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yp(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=gp},Ye.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yp(this)),this.g&&(this.readyState=3,yp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oh(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ye.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mp(this):yp(this),3==this.readyState&&Oh(this)}},Ye.Za=function(n){this.g&&(this.response=this.responseText=n,mp(this))},Ye.Ya=function(n){this.g&&(this.response=n,mp(this))},Ye.ka=function(){this.g&&mp(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(dm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var BC=Ft.JSON.parse;function Rn(n){or.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=vp,this.L=this.M=!1}ci(Rn,or);var vp="",jC=/^https?$/i,$C=["POST","PUT"];function Kv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,hm(n),kh(n)}function hm(n){n.F||(n.F=!0,li(n,"complete"),li(n,"error"))}function Yv(n){if(n.h&&typeof Zg<"u"&&(!n.C[1]||4!=Oo(n)||2!=n.da()))if(n.v&&4==Oo(n))rp(n.La,0,n);else if(li(n,"readystatechange"),4==Oo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(bI)[1]||null;!s&&Ft.self&&Ft.self.location&&(s=Ft.self.location.protocol.slice(0,-1)),r=!jC.test(s?s.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var u=2<Oo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",hm(n)}}finally{kh(n)}}}function kh(n,e){if(n.g){fm(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function fm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Oo(n){return n.g?n.g.readyState:0}function pm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case vp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function UI(n){let e="";return Gl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Jv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=UI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function _p(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function VI(n){this.Ga=0,this.j=[],this.l=new Mh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_p("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_p("baseRetryDelayMs",5e3,n),this.hb=_p("retryDelaySeedMs",1e4,n),this.eb=_p("forwardChannelMaxRetries",2,n),this.xa=_p("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Wv(n&&n.concurrentRequestLimit),this.Ja=new UC,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function gm(n){if(Xv(n),3==n.H){var e=n.W++,t=wa(n.I);if(Mn(t,"SID",n.K),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),wp(n,t),(e=new Zl(n,n.l,e)).L=2,e.v=qv(wa(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon)try{t=Ft.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=i_(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Kl(e)}HC(n)}function Lh(n){n.g&&(ym(n),n.g.cancel(),n.g=null)}function Xv(n){Lh(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),qr(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function mm(n){if(!PI(n.i)&&!n.m){n.m=!0;var e=n.Na;tp||Uv(),Ah||(tp(),Ah=!0),Fv.add(e,n),n.C=0}}function e_(n,e){var t;t=e?e.m:n.W++;const r=wa(n.I);Mn(r,"SID",n.K),Mn(r,"RID",t),Mn(r,"AID",n.V),wp(n,r),n.o&&n.s&&Jv(r,n.o,n.s),t=new Zl(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=t_(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Zv(n.i,t),Hv(t,r,e)}function wp(n,e){n.na&&Gl(n.na,function(t,r){Mn(e,r,t)}),n.h&&DI({},function(t,r){Mn(e,r,t)})}function t_(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ji(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=s[w].g;const A=s[w].map;if(C-=u,0>C)u=Math.max(0,s[w].g-100),m=!1;else try{pp(A,l,"req"+C+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function n_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;tp||Uv(),Ah||(tp(),Ah=!0),Fv.add(e,n),n.A=0}}function r_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=sp(ji(n.Ma,n),$I(n,n.A)),n.A++,0))}function ym(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function jI(n){n.g=new Zl(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=wa(n.wa);Mn(e,"RID","rpc"),Mn(e,"SID",n.K),Mn(e,"AID",n.V),Mn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Mn(e,"TO",n.qa),Mn(e,"TYPE","xmlhttp"),wp(n,e),n.o&&n.s&&Jv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=qv(wa(e)),t.s=null,t.S=!0,xC(t,n)}function qr(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Xl(n,e){var t=null;if(n.g==e){qr(n),ym(n),n.g=null;var r=2}else{if(!OI(n.i,e))return;t=e.F,kI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;li(r=sm(),new mI(r,t)),mm(n)}else n_(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function BI(n,e){return!(NI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=sp(ji(n.Na,n,e),$I(n,n.C)),n.C++,0)))}(n,e)||2==r&&r_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:ed(n,5);break;case 4:ed(n,10);break;case 3:ed(n,6);break;default:ed(n,2)}}function $I(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ed(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ji(n.pb,n);t||(t=new Ql("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Gv(t,"https"),qv(t)),function VC(n,e){const t=new Mh;if(Ft.Image){const r=new Image;r.onload=Ch(Nh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ch(Nh,t,r,"TestLoadImage: error",!1,e),r.onabort=Ch(Nh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ch(Nh,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ti(2);n.H=0,n.h&&n.h.za(e),HC(n),Xv(n)}function HC(n){if(n.H=0,n.ma=[],n.h){const e=LI(n.i);(0!=e.length||0!=n.j.length)&&(Qw(n.ma,e),Qw(n.ma,n.j),n.i.i.length=0,bt(n.j),n.j.length=0),n.h.ya()}}function zC(n,e,t){var r=t instanceof Ql?wa(t):new Ql(t);if(""!=r.g)e&&(r.g=e+"."+r.g),lp(r,r.m);else{var s=Ft.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ql(null);r&&Gv(u,r),e&&(u.g=e),s&&lp(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Mn(r,t,e),Mn(r,"VER",n.ra),wp(n,r),r}function i_(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(t&&n.Ha&&!n.va?new is({ob:!0}):n.va)).Oa(n.J),e}function vm(){}function Cc(){if(Hl&&!(10<=Number(yC)))throw Error("Environmental error: no available transport.")}function Ss(n,e){or.call(this),this.g=new VI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!_a(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_a(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new td(this)}function _m(n){am.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function HI(){ap.call(this),this.status=1}function td(n){this.g=n}function ko(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function s_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function pn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(Ye=Rn.prototype).Oa=function(n){this.M=n},Ye.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$v.g(),this.C=function vI(n){return n.h||(n.h=n.i())}(this.u?this.u:$v),this.g.onreadystatechange=ji(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Kv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ft.FormData&&n instanceof Ft.FormData,!(0<=gC($C,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fm(this),0<this.B&&((this.L=function FI(n){return Hl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ji(this.ua,this)):this.A=rp(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Kv(this,u)}},Ye.ua=function(){typeof Zg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),kh(this))},Ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kh(this,!0)),Rn.$.N.call(this)},Ye.La=function(){this.s||(this.G||this.v||this.l?Yv(this):this.kb())},Ye.kb=function(){Yv(this)},Ye.isActive=function(){return!!this.g},Ye.da=function(){try{return 2<Oo(this)?this.g.status:-1}catch{return-1}},Ye.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ye.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),BC(e)}},Ye.Ia=function(){return this.m},Ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=VI.prototype).ra=8,Ye.H=1,Ye.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Zl(this,this.l,n);let u=this.s;if(this.U&&(u?(u=nI(u),iI(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=t_(this,s,e),Mn(t=wa(this.I),"RID",n),Mn(t,"CVER",22),this.F&&Mn(t,"X-HTTP-Session-Id",this.F),wp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(UI(u)))+"&"+e:this.o&&Jv(t,this.o,u)),Zv(this.i,s),this.bb&&Mn(t,"TYPE","init"),this.P?(Mn(t,"$req",e),Mn(t,"SID","null"),s.aa=!0,Hv(s,t,null)):Hv(s,t,e),this.H=2}}else 3==this.H&&(n?e_(this,n):0==this.j.length||PI(this.i)||e_(this))},Ye.Ma=function(){if(this.u=null,jI(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=sp(ji(this.jb,this),n)}},Ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ti(10),Lh(this),jI(this))},Ye.ib=function(){null!=this.v&&(this.v=null,Lh(this),r_(this),Ti(19))},Ye.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ti(2)):(this.l.info("Failed to ping google.com"),Ti(1))},Ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ye=vm.prototype).Ba=function(){},Ye.Aa=function(){},Ye.za=function(){},Ye.ya=function(){},Ye.isActive=function(){return!0},Ye.Va=function(){},Cc.prototype.g=function(n,e){return new Ss(n,e)},ci(Ss,or),Ss.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ti(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=zC(n,null,n.Y),mm(n)},Ss.prototype.close=function(){gm(this.g)},Ss.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=kv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&mm(e)},Ss.prototype.N=function(){this.g.h=null,delete this.j,gm(this.g),delete this.g,Ss.$.N.call(this)},ci(_m,am),ci(HI,ap),ci(td,vm),td.prototype.Ba=function(){li(this.g,"a")},td.prototype.Aa=function(n){li(this.g,new _m(n))},td.prototype.za=function(n){li(this.g,new HI)},td.prototype.ya=function(){li(this.g,"b")},ci(ko,function GC(){this.blockSize=-1}),ko.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ko.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)s_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){s_(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){s_(this,r),s=0;break}}this.h=s,this.i+=e},ko.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var zI={};function wm(n){return-128<=n&&128>n?function sr(n,e){var t=zI;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new pn([0|e],0>e?-1:0)}):new pn([0|n],0>n?-1:0)}function As(n){if(isNaN(n)||!isFinite(n))return nd;if(0>n)return Wr(As(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=GI;return new pn(e,0)}var GI=4294967296,nd=wm(0),o_=wm(1),a_=wm(16777216);function ss(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Xs(n){return-1==n.h}function Wr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new pn(t,~n.h).add(o_)}function Fh(n,e){return n.add(Wr(e))}function u_(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ip(n,e){this.g=n,this.h=e}function c_(n,e){if(ss(e))throw Error("division by zero");if(ss(n))return new Ip(nd,nd);if(Xs(n))return e=c_(Wr(n),e),new Ip(Wr(e.g),Wr(e.h));if(Xs(e))return e=c_(n,Wr(e)),new Ip(Wr(e.g),e.h);if(30<n.g.length){if(Xs(n)||Xs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=o_,r=e;0>=r.X(n);)t=qI(t),r=qI(r);var s=Uh(t,1),u=Uh(r,1);for(r=Uh(r,2),t=Uh(t,2);!ss(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Uh(r,1),t=Uh(t,1)}return e=Fh(n,s.R(e)),new Ip(s,e)}for(s=nd;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=As(t)).R(e);Xs(l)||0<l.X(n);)l=(u=As(t-=r)).R(e);ss(u)&&(u=o_),s=s.add(u),n=Fh(n,l)}return new Ip(s,n)}function qI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new pn(t,n.h)}function Uh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new pn(s,n.h)}(Ye=pn.prototype).ea=function(){if(Xs(this))return-Wr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:GI+r)*e,e*=GI}return n},Ye.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ss(this))return"0";if(Xs(this))return"-"+Wr(this).toString(n);for(var e=As(Math.pow(n,6)),t=this,r="";;){var s=c_(t,e).g,u=((0<(t=Fh(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ss(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Ye.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ye.X=function(n){return Xs(n=Fh(this,n))?-1:ss(n)?0:1},Ye.abs=function(){return Xs(this)?Wr(this):this},Ye.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new pn(t,-2147483648&t[t.length-1]?-1:0)},Ye.R=function(n){if(ss(this)||ss(n))return nd;if(Xs(this))return Xs(n)?Wr(this).R(Wr(n)):Wr(Wr(this).R(n));if(Xs(n))return Wr(this.R(Wr(n)));if(0>this.X(a_)&&0>n.X(a_))return As(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,u_(t,2*r+2*s),t[2*r+2*s+1]+=u*w,u_(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,u_(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,u_(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new pn(t,0)},Ye.gb=function(n){return c_(this,n).h},Ye.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new pn(t,this.h&n.h)},Ye.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new pn(t,this.h|n.h)},Ye.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new pn(t,this.h^n.h)},Cc.prototype.createWebChannel=Cc.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,op.NO_ERROR=0,op.TIMEOUT=8,op.HTTP_ERROR=6,yI.COMPLETE="complete",om.EventType=Wl,Wl.OPEN="a",Wl.CLOSE="b",Wl.ERROR="c",Wl.MESSAGE="d",or.prototype.listen=or.prototype.O,Rn.prototype.listenOnce=Rn.prototype.P,Rn.prototype.getLastError=Rn.prototype.Sa,Rn.prototype.getLastErrorCode=Rn.prototype.Ia,Rn.prototype.getStatus=Rn.prototype.da,Rn.prototype.getResponseJson=Rn.prototype.Wa,Rn.prototype.getResponseText=Rn.prototype.ja,Rn.prototype.send=Rn.prototype.ha,Rn.prototype.setWithCredentials=Rn.prototype.Oa,ko.prototype.digest=ko.prototype.l,ko.prototype.reset=ko.prototype.reset,ko.prototype.update=ko.prototype.j,pn.prototype.add=pn.prototype.add,pn.prototype.multiply=pn.prototype.R,pn.prototype.modulo=pn.prototype.gb,pn.prototype.compare=pn.prototype.X,pn.prototype.toNumber=pn.prototype.ea,pn.prototype.toString=pn.prototype.toString,pn.prototype.getBits=pn.prototype.D,pn.fromNumber=As,pn.fromString=function Im(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Wr(Im(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=As(Math.pow(e,8)),r=nd,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=As(Math.pow(e,u)),r=r.R(u).add(As(l))):r=(r=r.R(t)).add(As(l))}return r};var qC=Js.createWebChannelTransport=function(){return new Cc},WI=Js.getStatEventTarget=function(){return sm()},Em=Js.ErrorCode=op,WC=Js.EventType=yI,ZI=Js.Event=ql,l_=Js.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ZC=Js.FetchXmlHttpFactory=is,Dm=Js.WebChannel=om,KI=Js.XhrIo=Rn,KC=Js.Md5=ko,rd=Js.Integer=pn;const d_="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let id="9.23.0";const Tc=new vc.Yd("@firebase/firestore");function h_(){return Tc.logLevel}function Fe(n,...e){if(Tc.logLevel<=vc.in.DEBUG){const t=e.map(YI);Tc.debug(`Firestore (${id}): ${n}`,...t)}}function Cr(n,...e){if(Tc.logLevel<=vc.in.ERROR){const t=e.map(YI);Tc.error(`Firestore (${id}): ${n}`,...t)}}function Lo(n,...e){if(Tc.logLevel<=vc.in.WARN){const t=e.map(YI);Tc.warn(`Firestore (${id}): ${n}`,...t)}}function YI(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${id}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function yt(n,e){n||ot()}function Qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class QI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JI{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=C=>this.i!==s?(s=this.i,t(C)):Promise.resolve();let l=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,fe.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new f_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Lr(e)}}class qA{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class p_{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YC{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.T=t.token,new g_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function WA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class XI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=WA(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function gu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function eE(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Yn(0,0))}static max(){return new _t(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cm{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends Cm{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends Cm{construct(e,t,r){return new ar(e,t,r)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(rn.fromString(e))}static fromName(e){return new Ze(rn.fromString(e).popFirst(5))}static empty(){return new Ze(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new rn(e.slice()))}}class Tm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Sm(n){return n.fields.find(e=>2===e.kind)}function Sc(n){return n.fields.filter(e=>2!==e.kind)}Tm.UNKNOWN_ID=-1;class os{constructor(e,t){this.fieldPath=e,this.kind=t}}class sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sd(0,Un.min())}}function tE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=_t.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new Un(s,Ze.empty(),e)}function XC(n){return new Un(n.readTime,n.key,-1)}class Un{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Un(_t.min(),Ze.empty(),-1)}static max(){return new Un(_t.max(),Ze.empty(),-1)}}function m_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const Am="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ac(n){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,fe.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Am)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Ep.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{l[C]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new ee((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Dp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Zr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Vh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=Uo(r.target.error);this.v.reject(new Vh(e,s))}}static open(e,t,r,s){try{return new Dp(t,e.transaction(s,r))}catch(u){throw new Vh(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iE(t)}}class Fo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Fo.S((0,cn.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),od(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,cn.hl)())return!1;if(Fo.C())return!0;const e=(0,cn.z$)(),t=Fo.S(e),r=0<t&&t<10,s=Fo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new be(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new be(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Vh(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,fe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=Dp.open(u.db,e,l?"readonly":"readwrite",r),C=s(w).next(A=>(w.P(),A)).catch(A=>(w.abort(A),ee.reject(A))).toPromise();return C.catch(()=>{}),yield w.R,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rE{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return od(this.L.delete())}}class Vh extends be{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xc(n){return"IndexedDbTransactionError"===n.name}class iE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),od(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),od(this.store.add(e))}get(e){return od(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),od(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),od(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ee((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ee((r,s)=>{t.onerror=u=>{const l=Uo(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new rE(m),C=t(m.primaryKey,m.value,w);if(C instanceof ee){const A=C.catch(P=>(w.done(),ee.reject(P)));r.push(A)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function od(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Uo(r.target.error);t(s)}})}let xm=!1;function Uo(n){const e=Fo.S((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xm||(xm=!0,setTimeout(()=>{throw r},0)),r}}return n}class Mc{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){xc(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ac(r)}yield t.et(6e4)}))}}class sE{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ee.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=XC(u);m_(l,r)>0&&(r=l)}),new Un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let $i=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Bh(n){return null==n}function bp(n){return 0===n&&1/n==-1/0}function eT(n){return"number"==typeof n&&Number.isInteger(n)&&!bp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oE(e)),e=tT(n.get(t),e);return oE(e)}function tT(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function oE(n){return n+"\x01\x01"}function Ia(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&ot(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:ot()}u=l+2}return new rn(r)}const y_=["userId","batchId"];function v_(n,e){return[n,Si(e)]}function __(n,e,t){return[n,Si(e),t]}const nT={},aE=["prefixPath","collectionGroup","readTime","documentId"],KA=["prefixPath","collectionGroup","documentId"],w_=["collectionGroup","readTime","prefixPath","documentId"],uE=["canonicalId","targetId"],cE=["targetId","path"],lE=["path","targetId"],dE=["collectionId","parent"],hE=["indexId","uid"],Mm=["uid","sequenceNumber"],Rm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fE=["indexId","uid","orderedDocumentKey"],rT=["userId","collectionPath","documentId"],iT=["userId","collectionPath","largestBatchId"],YA=["userId","collectionGroup","largestBatchId"],sT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QA=[...sT,"documentOverlays"],I_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pE=I_,oT=[...pE,"indexConfiguration","indexState","indexEntries"];class E_ extends nE{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function di(n,e){const t=Qe(n);return Fo.M(t.ht,e)}function aT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ad(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pn{constructor(e,t){this.comparator=e,this.root=t||Tr.EMPTY}insert(e,t){return new Pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tr.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pm(this.root,e,this.comparator,!0)}}class Pm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Tr.RED,this.left=s??Tr.EMPTY,this.right=u??Tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Tr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Tr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}Tr.EMPTY=null,Tr.RED=!0,Tr.BLACK=!1,Tr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Tr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gE(this.data.getIterator())}getIteratorFrom(e){return new gE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class gE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ud(n){return n.hasNext()?n.getNext():void 0}class Sr{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new Sr([])}unionWith(e){let t=new Nn(ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class D_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new D_("Invalid base64 string: "+s):s}}(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const cT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(n){if(yt(!!n),"string"==typeof n){let e=0;const t=cT.exec(n);if(yt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function eo(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function C_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function T_(n){const e=n.mapValue.fields.__previous_value__;return C_(e)?T_(e):e}function Nm(n){const e=Ea(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class JA{constructor(e,t,r,s,u,l,m,w,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=C}}class mu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}const Rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Om={nullValue:"NULL_VALUE"};function Pc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C_(n)?4:lT(n)?9007199254740991:10:ot()}function Da(n,e){if(n===e)return!0;const t=Pc(n);if(t!==Pc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nm(n).isEqual(Nm(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Ea(r.timestampValue),l=Ea(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,eo(n.bytesValue).isEqual(eo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Vn(r.geoPointValue.latitude)===Vn(s.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Vn(r.integerValue)===Vn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Vn(r.doubleValue),l=Vn(s.doubleValue);return u===l?bp(u)===bp(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return gu(n.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(aT(u)!==aT(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Da(u[m],l[m])))return!1;return!0}(n,e);default:return ot()}var s}function jh(n,e){return void 0!==(n.values||[]).find(t=>Da(t,e))}function yu(n,e){if(n===e)return 0;const t=Pc(n),r=Pc(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Vn(s.integerValue||s.doubleValue),m=Vn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return S_(n.timestampValue,e.timestampValue);case 4:return S_(Nm(n),Nm(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,u){const l=eo(s),m=eo(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const C=Ut(l[w],m[w]);if(0!==C)return C}return Ut(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ut(Vn(s.latitude),Vn(u.latitude));return 0!==l?l:Ut(Vn(s.longitude),Vn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const C=yu(l[w],m[w]);if(C)return C}return Ut(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Rc.mapValue&&u===Rc.mapValue)return 0;if(s===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const P=Ut(m[A],C[A]);if(0!==P)return P;const B=yu(l[m[A]],w[C[A]]);if(0!==B)return B}return Ut(m.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function S_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Ea(n),r=Ea(e),s=Ut(t.seconds,r.seconds);return 0!==s?s:Ut(t.nanos,r.nanos)}function $h(n){return A_(n)}function A_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Ea(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?eo(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=A_(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${A_(r.fields[m])}`;return u+"}"}(n.mapValue):ot();var e}function vu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mE(n){return!!n&&"integerValue"in n}function Hh(n){return!!n&&"arrayValue"in n}function km(n){return!!n&&"nullValue"in n}function yE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lm(n){return!!n&&"mapValue"in n}function Fm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ad(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dT(n){return"nullValue"in n?Om:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vu(mu.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function hT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vu(mu.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Rc:ot()}function vE(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fT(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fm(t)}setAll(e){let t=ar.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Fm(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Lm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ad(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ai(Fm(this.value))}}function pT(n){const e=[];return ad(n.fields,(t,r)=>{const s=new ar([t]);if(Lm(r)){const u=pT(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Sr(e)}class Bn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Bn(e,0,_t.min(),_t.min(),_t.min(),Ai.empty(),0)}static newFoundDocument(e,t,r,s){return new Bn(e,1,t,_t.min(),r,s,0)}static newNoDocument(e,t){return new Bn(e,2,t,_t.min(),_t.min(),Ai.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,_t.min(),_t.min(),Ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nc{constructor(e,t){this.position=e,this.inclusive=t}}function gT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):yu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function mT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Da(n.position[t],e.position[t]))return!1;return!0}class Tp{constructor(e,t="asc"){this.field=e,this.dir=t}}function XA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yT{}class nn extends yT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new x(e,t,r):"array-contains"===t?new J(e,r):"in"===t?new _e(e,r):"not-in"===t?new Ve(e,r):"array-contains-any"===t?new Ke(e,r):new nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new R(e,r):new L(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yu(t,this.value)):null!==t&&Pc(this.value)===Pc(t)&&this.matchesComparison(yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class i extends yT{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new i(e,t)}matches(e){return o(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function o(n){return"and"===n.op}function a(n){return"or"===n.op}function c(n){return d(n)&&o(n)}function d(n){for(const e of n.filters)if(e instanceof i)return!1;return!0}function p(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+$h(n.value);if(c(n))return n.filters.map(e=>p(e)).join(",");{const e=n.filters.map(t=>p(t)).join(",");return`${n.op}(${e})`}}function v(n,e){return n instanceof nn?(t=n,(r=e)instanceof nn&&t.op===r.op&&t.field.isEqual(r.field)&&Da(t.value,r.value)):n instanceof i?function(t,r){return r instanceof i&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&v(u,r.filters[l]),!0)}(n,e):void ot();var t,r}function E(n,e){const t=n.filters.concat(e);return i.create(t,n.op)}function b(n){return n instanceof nn?`${(e=n).field.canonicalString()} ${e.op} ${$h(e.value)}`:n instanceof i?function(e){return e.op.toString()+" {"+e.getFilters().map(b).join(" ,")+"}"}(n):"Filter";var e}class x extends nn{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class R extends nn{constructor(e,t){super(e,"in",t),this.keys=z(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class L extends nn{constructor(e,t){super(e,"not-in",t),this.keys=z(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function z(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class J extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hh(t)&&jh(t.arrayValue,this.value)}}class _e extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jh(this.value.arrayValue,t)}}class Ve extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jh(this.value.arrayValue,t)}}class Ke extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jh(this.value.arrayValue,r))}}class dt{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function St(n,e=null,t=[],r=[],s=null,u=null,l=null){return new dt(n,e,t,r,s,u,l)}function Ae(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>p(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),e.dt=t}return e.dt}function Nt(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!v(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mT(n.startAt,e.startAt)&&mT(n.endAt,e.endAt)}function Cn(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jn(n,e){return n.filters.filter(t=>t instanceof nn&&t.field.isEqual(e))}function vT(n,e,t){let r=Om,s=!0;for(const u of jn(n,e)){let l=Om,m=!0;switch(u.op){case"<":case"<=":l=dT(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Om}vE({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];vE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function ex(n,e,t){let r=Rc,s=!0;for(const u of jn(n,e)){let l=Rc,m=!0;switch(u.op){case">=":case">":l=hT(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Rc}fT({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];fT({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class cd{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function tx(n,e,t,r,s,u,l,m){return new cd(n,e,t,r,s,u,l,m)}function Um(n){return new cd(n)}function nx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _T(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _E(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function wT(n){return null!==n.collectionGroup}function Sp(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=_E(e),r=_T(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Tp(t)),e.wt.push(new Tp(ar.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Tp(ar.keyField(),u))}}}return e.wt}function xs(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=St(e.path,e.collectionGroup,Sp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Sp(e))t.push(new Tp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Nc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Nc(e.startAt.position,e.startAt.inclusive):null;e._t=St(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function IT(n,e){e.getFirstInequalityField(),_E(n);const t=n.filters.concat([e]);return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function wE(n,e,t){return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function x_(n,e){return Nt(xs(n),xs(e))&&n.limitType===e.limitType}function rx(n){return`${Ae(xs(n))}|lt:${n.limitType}`}function ET(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>b(r)).join(", ")}]`),Bh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),`Target(${t})`}(xs(n))}; limitType=${n.limitType})`}function M_(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Sp(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=gT(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,Sp(t),r)||t.endAt&&!function(s,u,l){const m=gT(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,Sp(t),r)));var t,r}function ix(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sx(n){return(e,t)=>{let r=!1;for(const s of Sp(n)){const u=nP(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function nP(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?yu(m,w):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ad(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}const rP=new Pn(Ze.comparator);function to(){return rP}const ox=new Pn(Ze.comparator);function R_(...n){let e=ox;for(const t of n)e=e.insert(t.key,t);return e}function ax(n){let e=ox;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oc(){return P_()}function ux(){return P_()}function P_(){return new ld(n=>n.toString(),(n,e)=>n.isEqual(e))}const iP=new Pn(Ze.comparator),sP=new Nn(Ze.comparator);function qt(...n){let e=sP;for(const t of n)e=e.add(t);return e}const oP=new Nn(Ut);function DT(){return oP}function cx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bp(e)?"-0":e}}function lx(n){return{integerValue:""+n}}function dx(n,e){return eT(e)?lx(e):cx(n,e)}class IE{constructor(){this._=void 0}}function aP(n,e,t){return n instanceof Vm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&C_(s)&&(s=T_(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Ap?fx(n,e):n instanceof xp?px(n,e):function(r,s){const u=hx(r,s),l=gx(u)+gx(r.gt);return mE(u)&&mE(r.gt)?lx(l):cx(r.serializer,l)}(n,e)}function uP(n,e,t){return n instanceof Ap?fx(n,e):n instanceof xp?px(n,e):t}function hx(n,e){return n instanceof Bm?mE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Vm extends IE{}class Ap extends IE{constructor(e){super(),this.elements=e}}function fx(n,e){const t=mx(e);for(const r of n.elements)t.some(s=>Da(s,r))||t.push(r);return{arrayValue:{values:t}}}class xp extends IE{constructor(e){super(),this.elements=e}}function px(n,e){let t=mx(e);for(const r of n.elements)t=t.filter(s=>!Da(s,r));return{arrayValue:{values:t}}}class Bm extends IE{constructor(e,t){super(),this.serializer=e,this.gt=t}}function gx(n){return Vn(n.integerValue||n.doubleValue)}function mx(n){return Hh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class N_{constructor(e,t){this.field=e,this.transform=t}}class lP{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function EE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class DE{}function yx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $m(n.key,ur.none()):new jm(n.key,n.data,ur.none());{const t=n.data,r=Ai.empty();let s=new Nn(ar.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new dd(n.key,r,new Sr(s.toArray()),ur.none())}}function dP(n,e,t){n instanceof jm?function(r,s,u){const l=r.value.clone(),m=wx(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof dd?function(r,s,u){if(!EE(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=wx(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(_x(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function O_(n,e,t,r){return n instanceof jm?function(s,u,l,m){if(!EE(s.precondition,u))return l;const w=s.value.clone(),C=Ix(s.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof dd?function(s,u,l,m){if(!EE(s.precondition,u))return l;const w=Ix(s.fieldTransforms,m,u),C=u.data;return C.setAll(_x(s)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,EE(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function hP(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=hx(r.transform,s||null);null!=u&&(null===t&&(t=Ai.empty()),t.set(r.field,u))}return t||null}function vx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gu(t,r,(s,u)=>function cP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ap&&r instanceof Ap||t instanceof xp&&r instanceof xp?gu(t.elements,r.elements,Da):t instanceof Bm&&r instanceof Bm?Da(t.gt,r.gt):t instanceof Vm&&r instanceof Vm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jm extends DE{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dd extends DE{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _x(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wx(n,e,t){const r=new Map;yt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,uP(l,m,t[s]))}return r}function Ix(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,aP(u,l,e))}return r}class $m extends DE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bT extends DE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class CT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&dP(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=O_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=O_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ux();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=yx(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&gu(this.mutations,e.mutations,(t,r)=>vx(t,r))&&gu(this.baseMutations,e.baseMutations,(t,r)=>vx(t,r))}}class TT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){yt(e.mutations.length===r.length);let s=iP;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new TT(e,t,r,s)}}class ST{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,ln;function Ex(n){switch(n){default:return ot();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Dx(n){if(void 0===n)return Cr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Kr.OK:return ce.OK;case Kr.CANCELLED:return ce.CANCELLED;case Kr.UNKNOWN:return ce.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return ce.INTERNAL;case Kr.UNAVAILABLE:return ce.UNAVAILABLE;case Kr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Kr.NOT_FOUND:return ce.NOT_FOUND;case Kr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Kr.ABORTED:return ce.ABORTED;case Kr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Kr.DATA_LOSS:return ce.DATA_LOSS;default:return ot()}}(ln=Kr||(Kr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class AT{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return bE}static getOrCreateInstance(){return null===bE&&(bE=new AT),bE}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let bE=null;function bx(){return new TextEncoder}const gP=new rd([4294967295,4294967295],0);function Cx(n){const e=bx().encode(n),t=new KC;return t.update(e),new Uint8Array(t.digest())}function Tx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new rd([t,r],0),new rd([s,u],0)]}class xT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new k_(`Invalid padding: ${t}`);if(r<0)throw new k_(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new k_(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new k_(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=rd.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(rd.fromNumber(r)));return 1===s.compare(gP)&&(s=new rd([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Cx(e),[r,s]=Tx(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new xT(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=Cx(e),[r,s]=Tx(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class k_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class L_{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,F_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new L_(_t.min(),s,new Pn(Ut),to(),qt())}}class F_{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new F_(r,t,qt(),qt(),qt())}}class CE{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class Sx{constructor(e,t){this.targetId=e,this.Vt=t}}class Ax{constructor(e,t,r=_r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class xx{constructor(){this.St=0,this.Dt=Rx(),this.Ct=_r.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ot()}}),new F_(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Rx()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class mP{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=to(),this.zt=Mx(),this.Wt=new Pn(Ut)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(Cn(l))if(0===s){const m=new Ze(l.path);this.Yt(r,m,Bn.newNoDocument(m,_t.min()))}else yt(1===s);else{const m=this.ie(r);if(m!==s){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=AT.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,A,P){var B,q,ue,Me,ke,rt;const It={localCacheCount:A,existenceFilterCount:P.count},wt=P.unchangedNames;return wt&&(It.bloomFilter={applied:0===C,hashCount:null!==(B=wt?.hashCount)&&void 0!==B?B:0,bitmapLength:null!==(Me=null===(ue=null===(q=wt?.bits)||void 0===q?void 0:q.bitmap)||void 0===ue?void 0:ue.length)&&void 0!==Me?Me:0,padding:null!==(rt=null===(ke=wt?.bits)||void 0===ke?void 0:ke.padding)&&void 0!==rt?rt:0}),It}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,C;try{w=eo(u).toUint8Array()}catch(A){if(A instanceof D_)return Lo("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw A}try{C=new xT(w,l,m)}catch(A){return Lo(A instanceof k_?"BloomFilter error: ":"Applying bloom filter failed: ",A),1}return 0===C.It?1:s!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&Cn(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Bn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=qt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const C=this.se(w);return!C||"TargetPurposeLimboResolution"===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new L_(e,t,this.Wt,this.jt,r);return this.jt=to(),this.zt=Mx(),this.Wt=new Pn(Ut),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new xx,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Nn(Ut),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new xx),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Mx(){return new Pn(Ze.comparator)}function Rx(){return new Pn(Ze.comparator)}const yP={asc:"ASCENDING",desc:"DESCENDING"},vP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_P={and:"AND",or:"OR"};class wP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MT(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function Hm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Px(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IP(n,e){return Hm(n,e.toTimestamp())}function Fr(n){return yt(!!n),_t.fromTimestamp(function(e){const t=Ea(e);return new Yn(t.seconds,t.nanos)}(n))}function RT(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Nx(n){const e=rn.fromString(n);return yt($x(e)),e}function U_(n,e){return RT(n.databaseId,e.path)}function kc(n,e){const t=Nx(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(kx(t))}function PT(n,e){return RT(n.databaseId,e)}function Ox(n){const e=Nx(n);return 4===e.length?rn.emptyPath():kx(e)}function V_(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kx(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lx(n,e,t){return{name:U_(n,e),fields:t.value.mapValue.fields}}function Fx(n,e,t){const r=kc(n,e.name),s=Fr(e.updateTime),u=e.createTime?Fr(e.createTime):_t.min(),l=new Ai({mapValue:{fields:e.fields}}),m=Bn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function B_(n,e){let t;if(e instanceof jm)t={update:Lx(n,e.key,e.value)};else if(e instanceof $m)t={delete:U_(n,e.key)};else if(e instanceof dd)t={update:Lx(n,e.key,e.data),updateMask:xP(e.fieldMask)};else{if(!(e instanceof bT))return ot();t={verify:U_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Vm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ap)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:IP(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ot()),t;var s}function NT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ur.updateTime(Fr(s.updateTime)):void 0!==s.exists?ur.exists(s.exists):ur.none():ur.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(yt("REQUEST_TIME"===l.setToServerValue),m=new Vm):"appendMissingElements"in l?m=new Ap(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new xp(l.removeAllFromArray.values||[]):"increment"in l?m=new Bm(u,l.increment):ot();const w=ar.fromServerFormat(l.fieldPath);return new N_(w,m)}(n,s)):[];var s;if(e.update){const s=kc(n,e.update.name),u=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Sr((e.updateMask.fieldPaths||[]).map(C=>ar.fromServerFormat(C)));return new dd(s,u,l,t,r)}return new jm(s,u,t,r)}if(e.delete){const s=kc(n,e.delete);return new $m(s,t)}if(e.verify){const s=kc(n,e.verify);return new bT(s,t)}return ot()}function Ux(n,e){return{documents:[PT(n,e.path)]}}function OT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=PT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=PT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return jx(i.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:zh((A=C).field),direction:TP(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=MT(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Vx(n){let e=Ox(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){yt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const P=Bx(A);return P instanceof i&&c(P)?P.getFilters():[P]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new Tp(zm((P=A).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let m=null;t.limit&&(m=function(A){let P;return P="object"==typeof A?A.value:A,Bh(P)?null:P}(t.limit));let w=null;var A;t.startAt&&(w=new Nc((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Nc(A.values||[],!A.before)}(t.endAt)),tx(e,s,l,u,m,"F",w,C)}function Bx(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zm(e.unaryFilter.field);return nn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zm(e.unaryFilter.field);return nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zm(e.unaryFilter.field);return nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=zm(e.unaryFilter.field);return nn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):void 0!==n.fieldFilter?nn.create(zm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return i.create(e.compositeFilter.filters.map(t=>Bx(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(n):ot();var e}function TP(n){return yP[n]}function SP(n){return vP[n]}function AP(n){return _P[n]}function zh(n){return{fieldPath:n.canonicalString()}}function zm(n){return ar.fromServerFormat(n.fieldPath)}function jx(n){return n instanceof nn?function(e){if("=="===e.op){if(yE(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NAN"}};if(km(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yE(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NAN"}};if(km(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zh(e.field),op:SP(e.op),value:e.value}}}(n):n instanceof i?function(e){const t=e.getFilters().map(r=>jx(r));return 1===t.length?t[0]:{compositeFilter:{op:AP(e.op),filters:t}}}(n):ot()}function xP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $x(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hd{constructor(e,t,r,s,u=_t.min(),l=_t.min(),m=_r.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hx{constructor(e){this.fe=e}}function zx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:TE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:U_(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Hm(s,u.version.toTimestamp()),createTime:Hm(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Mp(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:Mp(e.version)}}var s,u;return r}function TE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Mp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rp(n){const e=new Yn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Pp(n,e){const t=(e.baseMutations||[]).map(u=>NT(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>NT(n.fe,u)),s=Yn.fromMillis(e.localWriteTimeMs);return new CT(e.batchId,s,t,r)}function j_(n){const e=Rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rp(n.lastLimboFreeSnapshotVersion):_t.min();let r;var s;return void 0!==n.query.documents?(yt(1===(s=n.query).documents.length),r=xs(Um(Ox(s.documents[0])))):r=xs(Vx(n.query)),new hd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function Gx(n,e){const t=Mp(e.snapshotVersion),r=Mp(e.lastLimboFreeSnapshotVersion);let s;s=Cn(e.target)?Ux(n.fe,e.target):OT(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ae(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function kT(n){const e=Vx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wE(e,e.limit,"L"):e}function LT(n,e){return new ST(e.largestBatchId,NT(n.fe,e.overlayMutation))}function qx(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function Wx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Mp(r.readTime),documentKey:Si(r.documentKey.path),largestBatchId:r.largestBatchId}}class RP{getBundleMetadata(e,t){return Zx(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Rp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Zx(e).put({bundleId:(r=t).id,createTime:Mp(Fr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Kx(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:kT(s.bundledQuery),readTime:Rp(s.readTime)};var s})}saveNamedQuery(e,t){return Kx(e).put({name:(r=t).name,readTime:Mp(Fr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Zx(n){return di(n,"bundles")}function Kx(n){return di(n,"namedQueries")}class SE{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new SE(e,t.uid||"")}getOverlay(e,t){return $_(e).get(qx(this.userId,t)).next(r=>r?LT(this.serializer,r):null)}getOverlays(e,t){const r=Oc();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new ST(t,l);s.push(this.we(e,m))}),ee.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Si(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push($_(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Oc(),u=Si(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return $_(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const C=LT(this.serializer,w);s.set(C.getKey(),C)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Oc();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $_(e).X({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const P=LT(this.serializer,C);u.size()<s||P.largestBatchId===l?(u.set(P.getKey(),P),l=P.largestBatchId):A.done()}).next(()=>u)}we(e,t){return $_(e).put(function(r,s,u){const[l,m,w]=qx(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:B_(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function $_(n){return di(n,"documentOverlays")}class Np{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Vn(e.integerValue));else if("doubleValue"in e){const r=Vn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),bp(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(eo(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?lT(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ot()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function PP(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Yx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=PP(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Np.Ve=new Np;class NP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=Yx(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=Yx(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class OP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class kP{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class H_{constructor(){this.je=new NP,this.ze=new OP(this.je),this.We=new kP(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Op{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Op(this.indexId,this.documentKey,this.arrayValue,r)}}function Gh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Qx(n.arrayValue,e.arrayValue),0!==t?t:(t=Qx(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function Qx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class LP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){yt(e.collectionGroup===this.collectionId);const t=Sm(e);if(void 0!==t&&!this.en(t))return!1;const r=Sc(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jx(n){var e,t;if(yt(n instanceof nn||n instanceof i),n instanceof nn){if(n instanceof _e){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>nn.create(n.field,"==",u)))||[];return i.create(s,"or")}return n}const r=n.filters.map(s=>Jx(s));return i.create(r,n.op)}function FP(n){if(0===n.getFilters().length)return[];const e=VT(Jx(n));return yt(Xx(e)),FT(e)||UT(e)?[e]:e.getFilters()}function FT(n){return n instanceof nn}function UT(n){return n instanceof i&&c(n)}function Xx(n){return FT(n)||UT(n)||function(e){if(e instanceof i&&a(e)){for(const t of e.getFilters())if(!FT(t)&&!UT(t))return!1;return!0}return!1}(n)}function VT(n){if(yt(n instanceof nn||n instanceof i),n instanceof nn)return n;if(1===n.filters.length)return VT(n.filters[0]);const e=n.filters.map(r=>VT(r));let t=i.create(e,n.op);return t=AE(t),Xx(t)?t:(yt(t instanceof i),yt(o(t)),yt(t.filters.length>1),t.filters.reduce((r,s)=>BT(r,s)))}function BT(n,e){let t;return yt(n instanceof nn||n instanceof i),yt(e instanceof nn||e instanceof i),t=n instanceof nn?e instanceof nn?i.create([n,e],"and"):eM(n,e):e instanceof nn?eM(e,n):function(r,s){if(yt(r.filters.length>0&&s.filters.length>0),o(r)&&o(s))return E(r,s.getFilters());const u=a(r)?r:s,l=a(r)?s:r,m=u.filters.map(w=>BT(w,l));return i.create(m,"or")}(n,e),AE(t)}function eM(n,e){if(o(e))return E(e,n.getFilters());{const t=e.filters.map(r=>BT(n,r));return i.create(t,"or")}}function AE(n){if(yt(n instanceof nn||n instanceof i),n instanceof nn)return n;const e=n.getFilters();if(1===e.length)return AE(e[0]);if(d(n))return n;const t=e.map(s=>AE(s)),r=[];return t.forEach(s=>{s instanceof nn?r.push(s):s instanceof i&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:i.create(r,n.op)}class UP{constructor(){this.rn=new jT}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Un.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class jT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nn(rn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nn(rn.comparator)).toArray()}}const xE=new Uint8Array(0);class VP{constructor(e,t){this.user=e,this.databaseId=t,this.on=new jT,this.un=new ld(r=>Ae(r),(r,s)=>Nt(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Si(s)};return tM(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[eE(t),""],!1,!0);return tM(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Ia(l.parent))}return r})}addFieldIndex(e,t){const r=ME(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=G_(e);return u.next(m=>{l.put(Wx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ME(e),s=G_(e),u=z_(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=z_(e);let s=!0;const u=new Map;return ee.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=qt();const m=[];return ee.forEach(u,(w,C)=>{var A;Fe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${Ae(t)}`);const P=function(wt,Pt){const zt=Sm(Pt);if(void 0===zt)return null;for(const an of jn(wt,zt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(C,w),B=function(wt,Pt){const zt=new Map;for(const an of Sc(Pt))for(const cs of jn(wt,an.fieldPath))switch(cs.op){case"==":case"in":zt.set(an.fieldPath.canonicalString(),cs.value);break;case"not-in":case"!=":return zt.set(an.fieldPath.canonicalString(),cs.value),Array.from(zt.values())}return null}(C,w),q=function(wt,Pt){const zt=[];let an=!0;for(const cs of Sc(Pt)){const zp=0===cs.kind?vT(wt,cs.fieldPath,wt.startAt):ex(wt,cs.fieldPath,wt.startAt);zt.push(zp.value),an&&(an=zp.inclusive)}return new Nc(zt,an)}(C,w),ue=function(wt,Pt){const zt=[];let an=!0;for(const cs of Sc(Pt)){const zp=0===cs.kind?ex(wt,cs.fieldPath,wt.endAt):vT(wt,cs.fieldPath,wt.endAt);zt.push(zp.value),an&&(an=zp.inclusive)}return new Nc(zt,an)}(C,w),Me=this.hn(w,C,q),ke=this.hn(w,C,ue),rt=this.ln(w,C,B),It=this.fn(w.indexId,P,Me,q.inclusive,ke,ue.inclusive,rt);return ee.forEach(It,wt=>r.H(wt,t.limit).next(Pt=>{Pt.forEach(zt=>{const an=Ze.fromSegments(zt.documentKey);l.has(an)||(l=l.add(an),m.push(an))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:FP(i.create(e.filters,"and")).map(r=>St(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let P=0;P<w;++P){const B=t?this.dn(t[P/C]):xE,q=this.wn(e,B,r[P%C],s),ue=this._n(e,B,u[P%C],l),Me=m.map(ke=>this.wn(e,B,ke,!0));A.push(...this.createRange(q,ue,Me))}return A}wn(e,t,r,s){const u=new Op(e,Ze.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new Op(e,Ze.empty(),t,r);return s?u.Je():u}an(e,t){const r=new LP(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ee.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Nn(ar.comparator),C=!1;for(const A of m.filters)for(const P of A.getFlattenedFilters())P.field.isKeyField()||("array-contains"===P.op||"array-contains-any"===P.op?C=!0:w=w.add(P.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new H_;for(const s of Sc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Np.Ve._e(u,l)}return r.Qe()}dn(e){const t=new H_;return Np.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new H_;return Np.Ve._e(vu(this.databaseId,t),r.He(function(s){const u=Sc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new H_);let u=0;for(const l of Sc(e)){const m=r[u++];for(const w of s)if(this.yn(t,l.fieldPath)&&Hh(m))s=this.pn(s,l,m);else{const C=w.He(l.kind);Np.Ve._e(m,C)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new H_;w.seed(m.Qe()),Np.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof nn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ME(e),s=G_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(C,A){const P=A?new sd(A.sequenceNumber,new Un(Rp(A.readTime),new Ze(Ia(A.documentKey)),A.largestBatchId)):sd.empty(),B=C.fields.map(([q,ue])=>new os(ar.fromServerFormat(q),ue));return new Tm(C.indexId,C.collectionGroup,B,P)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=ME(e),u=G_(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(Wx(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ee.forEach(m,w=>this.En(e,s,w).next(C=>{const A=this.An(u,w);return C.isEqual(A)?ee.resolve():this.vn(e,u,w,C,A)}))))})}Rn(e,t,r,s){return z_(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return z_(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=z_(e);let u=new Nn(Gh);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Op(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Nn(Gh);const s=this.mn(t,e);if(null==s)return r;const u=Sm(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Hh(l))for(const m of l.arrayValue.values||[])r=r.add(new Op(t.indexId,e.key,this.dn(m),s))}else r=r.add(new Op(t.indexId,e.key,xE,s));return r}vn(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,C,A,P){const B=m.getIterator(),q=w.getIterator();let ue=ud(B),Me=ud(q);for(;ue||Me;){let ke=!1,rt=!1;if(ue&&Me){const It=C(ue,Me);It<0?rt=!0:It>0&&(ke=!0)}else null!=ue?rt=!0:ke=!0;ke?(A(Me),Me=ud(q)):rt?(P(ue),ue=ud(B)):(ue=ud(B),Me=ud(q))}}(s,u,Gh,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ee.waitFor(l)}Tn(e){let t=1;return G_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Gh(l,m)).filter((l,m,w)=>!m||0!==Gh(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Gh(l,e),w=Gh(l,t);if(0===m)s[0]=e.Je();else if(m>0&&w<0)s.push(l),s.push(l.Je());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,xE,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,xE,[]]))}return u}bn(e,t){return Gh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nM)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||ot())).next(nM)}}function tM(n){return di(n,"collectionParents")}function z_(n){return di(n,"indexEntries")}function ME(n){return di(n,"indexConfiguration")}function G_(n){return di(n,"indexState")}function nM(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;m_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Un(e.readTime,e.documentKey,t)}const rM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class as{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new as(e,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iM(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(A,P,B)=>(m++,B.delete()));u.push(w.next(()=>{yt(1===m)}));const C=[];for(const A of t.mutations){const P=__(e,A.key.path,t.batchId);u.push(s.delete(P)),C.push(A.key)}return ee.waitFor(u).next(()=>C)}function RE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}as.DEFAULT_COLLECTION_PERCENTILE=10,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,as.DEFAULT=new as(41943040,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),as.DISABLED=new as(-1,0,0);class PE{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){yt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new PE(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Gm(e),l=qh(e);return l.add({}).next(m=>{yt("number"==typeof m);const w=new CT(m,t,r,s),C=function(B,q,ue){const Me=ue.baseMutations.map(rt=>B_(B.fe,rt)),ke=ue.mutations.map(rt=>B_(B.fe,rt));return{userId:q,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:Me,mutations:ke}}(this.serializer,this.userId,w),A=[];let P=new Nn((B,q)=>Ut(B.canonicalString(),q.canonicalString()));for(const B of s){const q=__(this.userId,B.key.path,m);P=P.add(B.key.path.popLast()),A.push(l.put(C)),A.push(u.put(q,nT))}return P.forEach(B=>{A.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return qh(e).get(t).next(r=>r?(yt(r.userId===this.userId),Pp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return qh(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(yt(m.batchId>=r),u=Pp(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).j("userMutationsIndex",t).next(r=>r.map(s=>Pp(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=v_(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Gm(e).X({range:s},(l,m,w)=>{const[C,A,P]=l,B=Ia(A);if(C===this.userId&&t.path.isEqual(B))return qh(e).get(P).next(q=>{if(!q)throw ot();yt(q.userId===this.userId),u.push(Pp(this.serializer,q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Ut);const s=[];return t.forEach(u=>{const l=v_(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Gm(e).X({range:m},(C,A,P)=>{const[B,q,ue]=C,Me=Ia(q);B===this.userId&&u.path.isEqual(Me)?r=r.add(ue):P.done()});s.push(w)}),ee.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=v_(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Nn(Ut);return Gm(e).X({range:l},(w,C,A)=>{const[P,B,q]=w,ue=Ia(B);P===this.userId&&r.isPrefixOf(ue)?ue.length===s&&(m=m.add(q)):A.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(qh(e).get(u).next(l=>{if(null===l)throw ot();yt(l.userId===this.userId),r.push(Pp(this.serializer,l))}))}),ee.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return iM(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Gm(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=Ia(u[1]);s.push(w)}else m.done()}).next(()=>{yt(0===s.length)})})}containsKey(e,t){return sM(e,this.userId,t)}xn(e){return oM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sM(n,e,t){const r=v_(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Gm(n).X({range:u,Y:!0},(m,w,C)=>{const[A,P,B]=m;A===e&&P===s&&(l=!0),C.done()}).next(()=>l)}function qh(n){return di(n,"mutations")}function Gm(n){return di(n,"documentMutations")}function oM(n){return di(n,"mutationQueues")}class kp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kp(0)}static Mn(){return new kp(-1)}}class BP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new kp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>_t.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return qm(e).X((l,m)=>{const w=j_(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>s)}forEachTarget(e,t){return qm(e).X((r,s)=>{const u=j_(s);t(u)})}$n(e){return aM(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}On(e,t){return aM(e).put("targetGlobalKey",t)}Fn(e,t){return qm(e).put(Gx(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ae(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return qm(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const C=j_(m);Nt(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Wh(e);return t.forEach(l=>{const m=Si(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(s)}removeMatchingKeys(e,t,r){const s=Wh(e);return ee.forEach(t,u=>{const l=Si(u.path);return ee.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Wh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Wh(e);let u=qt();return s.X({range:r,Y:!0},(l,m,w)=>{const C=Ia(l[1]),A=new Ze(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Si(t.path),s=IDBKeyRange.bound([r],[eE(r)],!1,!0);let u=0;return Wh(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}le(e,t){return qm(e).get(t).next(r=>r?j_(r):null)}}function qm(n){return di(n,"targets")}function aM(n){return di(n,"targetGlobal")}function Wh(n){return di(n,"targetDocuments")}function uM([n,e],[t,r]){const s=Ut(n,t);return 0===s?Ut(e,r):s}class jP{constructor(e){this.Ln=e,this.buffer=new Nn(uM),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xc(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ac(r)}yield t.Qn(3e5)}))}}class $P{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve($i.ct);const r=new jP(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(rM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rM):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),s=this.params.maximumSequenceNumbersToCollect):s=P,l=Date.now(),this.nthSequenceNumber(e,s))).next(P=>(r=P,m=Date.now(),this.removeTargets(e,r,t))).next(P=>(u=P,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(C=Date.now(),h_()<=vc.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${P} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:P})))}}class HP{constructor(e,t){this.db=e,this.garbageCollector=function lM(n,e){return new $P(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return NE(e,r)}removeReference(e,t,r){return NE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return NE(e,t)}Xn(e,t){return function(r,s){let u=!1;return oM(r).Z(l=>sM(r,l,s).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,_t.min()),Wh(e).delete([0,Si(l.path)])))});s.push(w)}}).next(()=>ee.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return NE(e,t)}Yn(e,t){const r=Wh(e);let s,u=$i.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:C})=>{0===l?(u!==$i.ct&&t(new Ze(Ia(s)),u),u=C,s=w):u=$i.ct}).next(()=>{u!==$i.ct&&t(new Ze(Ia(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function NE(n,e){return Wh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:r}));var r}class dM{constructor(){this.changes=new ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Lp(e).put(r)}removeEntry(e,t,r){return Lp(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],TE(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return Lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(q_(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return Lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(q_(t))},(s,u)=>{r={document:this.ts(t,u),size:RE(u)}}).next(()=>r)}getEntries(e,t){let r=to();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=to(),s=new Pn(Ze.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,RE(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let s=new Nn(gM);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(q_(s.first()),q_(s.last())),l=s.getIterator();let m=l.getNext();return Lp(e).X({index:"documentKeyIndex",range:u},(w,C,A)=>{const P=Ze.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&gM(m,P)<0;)r(m,null),m=l.getNext();m&&m.isEqual(P)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?A.G(q_(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),TE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lp(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let C=to();for(const A of w){const P=this.ts(Ze.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);P.isFoundDocument()&&(M_(t,P)||s.has(P.key))&&(C=C.insert(P.key,P))}return C})}getAllFromCollectionGroup(e,t,r,s){let u=to();const l=pM(t,r),m=pM(t,Un.max());return Lp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,C,A)=>{const P=this.ts(Ze.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(P.key,P),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new GP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fM(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Zn(e,t){return fM(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function MP(n,e){let t;if(e.document)t=Fx(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),s=Rp(e.noDocument.readTime);t=Bn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Ze.fromSegments(e.unknownDocument.path),s=Rp(e.unknownDocument.version);t=Bn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Yn(r[0],r[1]);return _t.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Bn.newInvalidDocument(e)}}function hM(n){return new zP(n)}class GP extends dM{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ld(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Nn((u,l)=>Ut(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=zx(this.os.serializer,l);s=s.add(u.path.popLast());const C=RE(w);r+=C-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=zx(this.os.serializer,l.convertToNoDocument(_t.min()));t.push(this.os.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function fM(n){return di(n,"remoteDocumentGlobal")}function Lp(n){return di(n,"remoteDocumentsV14")}function q_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pM(n,e){const t=e.documentKey.path.toArray();return[n,TE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ut(t[u],r[u]),s)return s;return s=Ut(t.length,r.length),s||(s=Ut(t[t.length-2],r[r.length-2]),s||Ut(t[t.length-1],r[r.length-1]))}class qP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&O_(r.mutation,s,Sr.empty(),Yn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const s=Oc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=R_();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Oc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=to();const l=P_(),m=P_();return t.forEach((w,C)=>{const A=r.get(C.key);s.has(C.key)&&(void 0===A||A.mutation instanceof dd)?u=u.insert(C.key,C):void 0!==A?(l.set(C.key,A.mutation.getFieldMask()),O_(A.mutation,C,A.mutation.getFieldMask(),Yn.now())):l.set(C.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>l.set(C,A)),t.forEach((C,A)=>{var P;return m.set(C,new qP(A,null!==(P=l.get(C))&&void 0!==P?P:null))}),m))}recalculateAndSaveOverlays(e,t){const r=P_();let s=new Pn((l,m)=>l-m),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||Sr.empty();A=m.applyToLocalView(C,A),r.set(w,A);const P=(s.get(m.batchId)||qt()).add(w);s=s.insert(m.batchId,P)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,P=ux();A.forEach(B=>{if(!u.has(B)){const q=yx(t.get(B),r.get(B));null!==q&&P.set(B,q),u=u.add(B)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,P))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ee.resolve(Oc());let m=-1,w=u;return l.next(C=>ee.forEach(C,(A,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),u.get(A)?ee.resolve():this.remoteDocumentCache.getEntry(e,A).next(B=>{w=w.insert(A,B)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,qt())).next(A=>({batchId:m,changes:ax(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let s=R_();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=R_();return this.indexManager.getCollectionParents(e,s).next(l=>ee.forEach(l,m=>{const w=(C=t,A=m.child(s),new cd(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,P)=>{u=u.insert(A,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const C=w.getKey();null===u.get(C)&&(u=u.insert(C,Bn.newInvalidDocument(C)))});let l=R_();return u.forEach((m,w)=>{const C=s.get(m);void 0!==C&&O_(C.mutation,w,Sr.empty(),Yn.now()),M_(t,w)&&(l=l.insert(m,w))}),l})}}class WP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Fr(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:kT(r.bundledQuery),readTime:Fr(r.readTime)}),ee.resolve();var r}}class ZP{constructor(){this.overlays=new Pn(Ze.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oc();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=Oc(),u=t.length+1,l=new Ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Pn((C,A)=>C-A);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=Oc(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=Oc(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=s)););return ee.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ST(t,r));let u=this.ls.get(t);void 0===u&&(u=qt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class $T{constructor(){this.fs=new Nn(xi.ds),this.ws=new Nn(xi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new xi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new xi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new rn([])),r=new xi(t,e),s=new xi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new rn([])),r=new xi(t,e),s=new xi(t,e+1);let u=qt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new xi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Ut(e.As,t.As)}static _s(e,t){return Ut(e.As,t.As)||Ze.comparator(e.key,t.key)}}class KP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Nn(xi.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new CT(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new xi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xi(t,0),s=new xi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Ut);return t.forEach(s=>{const u=new xi(s,0),l=new xi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const l=new xi(new Ze(u),0);let m=new Nn(Ut);return this.Rs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===s&&(m=m.add(w.As)),!0)},l),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){yt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,s=>{const u=new xi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new xi(t,0),s=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class YP{constructor(e){this.Ds=e,this.docs=new Pn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=to();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Bn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=to();const l=t.path,m=new Ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:C,value:{document:A}}=w.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||m_(XC(A),r)<=0||(s.has(A.key)||M_(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,s){ot()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new QP(this)}getSize(e){return ee.resolve(this.size)}}class QP extends dM{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class JP{constructor(e){this.persistence=e,this.xs=new ld(t=>Ae(t),Nt),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ns=0,this.ks=new $T,this.targetCount=0,this.Ms=kp.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ee.waitFor(u).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class HT{constructor(e,t){this.$s={},this.overlays={},this.Os=new $i(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new JP(this),this.indexManager=new UP,this.remoteDocumentCache=new YP(r=>this.referenceDelegate.Ls(r)),this.serializer=new Hx(t),this.qs=new WP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new KP(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new XP(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class XP extends nE{constructor(e){super(),this.currentSequenceNumber=e}}class OE{constructor(e){this.persistence=e,this.Qs=new $T,this.js=null}static zs(e){return new OE(e)}get Ws(){if(this.js)return this.js;throw ot()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const s=Ze.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,_t.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class e1{constructor(e){this.serializer=e}O(e,t,r,s){const u=new Dp("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y_,{unique:!0}),m.createObjectStore("documentMutations"),yM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),yM(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y_,{unique:!0});const A=w.store("mutations"),P=C.map(B=>A.put(B));return ee.waitFor(P)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:rT});w.createIndex("collectionPathOverlayIndex",iT,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",YA,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:aE});w.createIndex("documentKeyIndex",KA),w.createIndex("collectionGroupIndex",w_)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:hE}).createIndex("sequenceNumberIndex",Mm,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Rm}).createIndex("documentKeyIndex",fE,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=RE(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ee.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{yt(w.userId===u.userId);const C=Pp(this.serializer,w);return iM(e,u.userId,C).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new rn(l),C=[0,Si(w)];u.push(t.get(C).next(A=>A?ee.resolve():t.put({targetId:0,path:Si(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:dE});const r=t.store("collectionParents"),s=new jT,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Si(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new rn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],C)=>{const A=Ia(m);return u(A.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=j_(s),l=Gx(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(C=l,C.document?new Ze(rn.fromString(C.document.name).popFirst(5)):C.noDocument?Ze.fromSegments(C.noDocument.path):C.unknownDocument?Ze.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>ee.waitFor(s))}si(e,t){const r=t.store("mutations"),s=hM(this.serializer),u=new HT(OE.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:qt();Pp(this.serializer,w).keys().forEach(P=>A=A.add(P)),m.set(w.userId,A)}),ee.forEach(m,(w,C)=>{const A=new Lr(C),P=SE.de(this.serializer,A),B=u.getIndexManager(A),q=PE.de(A,this.serializer,B,u.referenceDelegate);return new mM(s,q,P,B).recalculateAndSaveOverlaysForDocumentKeys(new E_(t,$i.ct),w).next()})})}}function yM(n){n.createObjectStore("targetDocuments",{keyPath:cE}).createIndex("documentTargetsIndex",lE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uE,{unique:!0}),n.createObjectStore("targetGlobal")}const zT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GT{constructor(e,t,r,s,u,l,m,w,C,A,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=C,this.oi=A,this.ui=P,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=B=>Promise.resolve(),!GT.D())throw new be(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HP(this,s),this.di=t+"main",this.serializer=new Hx(w),this.wi=new Fo(this.di,this.ui,new e1(this.serializer)),this.Bs=new BP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hM(this.serializer),this.qs=new RP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===A&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,zT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new $i(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>LE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(xc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return W_(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return LE(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=di(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):W_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new be(ce.FAILED_PRECONDITION,zT);return!1}}return!(!this.networkEnabled||!this.inForeground)||LE(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new E_(t,$i.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>LE(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return PE.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VP(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return SE.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?oT:14===l?pE:13===l?I_:12===l?QA:11===l?sT:void ot();var l;let m;return this.wi.runTransaction(e,s,u,w=>(m=new E_(w,this.Os?this.Os.next():$i.ct),"readwrite-primary"===t?this.Ti(m).next(C=>!!C||this.Ei(m)).next(C=>{if(!C)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new be(ce.FAILED_PRECONDITION,Am);return r(m)}).next(C=>this.vi(m).next(()=>C)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return W_(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ce.FAILED_PRECONDITION,zT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return W_(e).put("owner",t)}static D(){return Fo.D()}Ai(e){const t=W_(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W_(n){return di(n,"owner")}function LE(n){return di(n,"clientMetadata")}function qT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=qt(),s=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new WT(e,t.fromCache,r,s)}}class vM{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(nx(t))return ee.resolve(null);let r=xs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=wE(t,null,"F"),r=xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=qt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.ji(t,m);return this.zi(t,C,l,w.readTime)?this.Ki(e,wE(t,null,"F")):this.Wi(e,C,t,w)}))})))}Gi(e,t,r,s){return nx(t)||s.isEqual(_t.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(h_()<=vc.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ET(t)),this.Wi(e,l,t,tE(s,-1)))})}ji(e,t){let r=new Nn(sx(e));return t.forEach((s,u)=>{M_(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return h_()<=vc.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",ET(t)),this.Ui.getDocumentsMatchingQuery(e,t,Un.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class t1{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Pn(Ut),this.Yi=new ld(u=>Ae(u),Nt),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function _M(n,e,t,r){return new t1(n,e,t,r)}function wM(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,fe.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=qt();for(const C of s){l.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({er:C,removedBatchIds:l,addedBatchIds:m}))})})}),ZT.apply(this,arguments)}function IM(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function EM(n,e,t){let r=qt(),s=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=to();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(_t.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{nr:l,sr:s}})}function i1(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wm(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ee.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new hd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Zm(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,fe.Z)(function*(n,e,t){const r=Qe(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!xc(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),KT.apply(this,arguments)}function FE(n,e,t){const r=Qe(n);let s=_t.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,C){const A=Qe(m),P=A.Yi.get(C);return void 0!==P?ee.resolve(A.Ji.get(P)):A.Bs.getTargetData(w,C)}(r,l,xs(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:_t.min(),t?u:qt())).next(m=>(CM(r,ix(e),m),{documents:m,ir:u})))}function DM(n,e){const t=Qe(n),r=Qe(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function bM(n,e){const t=Qe(n),r=t.Xi.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,tE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(CM(t,e,s),s))}function CM(n,e,t){let r=n.Xi.get(e)||_t.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function YT(){return YT=(0,fe.Z)(function*(n,e,t,r){const s=Qe(n);let u=qt(),l=to();for(const C of t){const A=e.rr(C.metadata.name);C.document&&(u=u.add(A));const P=e.ur(C);P.setReadTime(e.cr(C.metadata.readTime)),l=l.insert(A,P)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Wm(s,(C=r,xs(Um(rn.fromString(`__bundle__/docs/${C}`)))));var C;return s.persistence.runTransaction("Apply bundle documents","readwrite",C=>EM(C,m,l).next(A=>(m.apply(C),A)).next(A=>s.Bs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>s.Bs.addMatchingKeys(C,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(C,A.nr,A.sr)).next(()=>A.nr)))}),YT.apply(this,arguments)}function o1(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,fe.Z)(function*(n,e,t=qt()){const r=yield Wm(n,xs(kT(e.bundledQuery))),s=Qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Fr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(_r.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),QT.apply(this,arguments)}function TM(n,e){return`firestore_clients_${n}_${e}`}function SM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function JT(n,e){return`firestore_targets_${n}_${e}`}class UE{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new be(s.error.code,s.error.message))),l?new UE(e,t,s.state,u):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new be(r.error.code,r.error.message))),u?new Z_(e,r.state,s):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=DT();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=eT(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new VE(e,u):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class XT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new XT(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eS{constructor(){this.activeTargetIds=DT()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tS{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Pn(Ut),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=TM(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eS),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(TM(e.persistenceKey,s));if(u){const l=VE.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(JT(this.persistenceKey,e));if(r){const s=Z_.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(JT(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=$i.ct;if(null!=u)try{const m=JSON.parse(u);yt("number"==typeof m),l=m}catch(m){Cr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==$i.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new UE(this.currentUser,e,t,r),u=SM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=SM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=JT(this.persistenceKey,e),u=new Z_(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return VE.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return UE.ar(new Lr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Z_.ar(s,t)}br(e){return XT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=DT();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class AM{constructor(){this.Hr=new eS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new eS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a1{Yr(e){}shutdown(){}}class xM{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let BE=null;function nS(){return null===BE?BE=268435456+Math.round(2147483648*Math.random()):BE++,"0x"+BE.toString(16)}const u1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c1{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const us="WebChannelConnection";class l1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=nS(),m=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,s,u),this.Ao(e,m,w,r).then(C=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw Lo("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",m,"request:",r),C})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+id,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${u1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=nS();return new Promise((l,m)=>{const w=new KI;w.setWithCredentials(!0),w.listenOnce(WC.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Em.NO_ERROR:const A=w.getResponseJson();Fe(us,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case Em.TIMEOUT:Fe(us,`RPC '${e}' ${u} timed out`),m(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Em.HTTP_ERROR:const P=w.getStatus();if(Fe(us,`RPC '${e}' ${u} failed with status:`,P,"response text:",w.getResponseText()),P>0){let B=w.getResponseJson();Array.isArray(B)&&(B=B[0]);const q=B?.error;if(q&&q.status&&q.message){const ue=function(Me){const ke=Me.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ke)>=0?ke:ce.UNKNOWN}(q.status);m(new be(ue,q.message))}else m(new be(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new be(ce.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Fe(us,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(s);Fe(us,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",C,r,15)})}Ro(e,t,r){const s=nS(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=qC(),m=WI(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(w.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(w.xmlHttpFactory=new ZC({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const A=u.join("");Fe(us,`Creating RPC '${e}' stream ${s}: ${A}`,w);const P=l.createWebChannel(A,w);let B=!1,q=!1;const ue=new c1({ro:ke=>{q?Fe(us,`Not sending because RPC '${e}' stream ${s} is closed:`,ke):(B||(Fe(us,`Opening RPC '${e}' stream ${s} transport.`),P.open(),B=!0),Fe(us,`RPC '${e}' stream ${s} sending:`,ke),P.send(ke))},oo:()=>P.close()}),Me=(ke,rt,It)=>{ke.listen(rt,wt=>{try{It(wt)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Me(P,Dm.EventType.OPEN,()=>{q||Fe(us,`RPC '${e}' stream ${s} transport opened.`)}),Me(P,Dm.EventType.CLOSE,()=>{q||(q=!0,Fe(us,`RPC '${e}' stream ${s} transport closed`),ue.wo())}),Me(P,Dm.EventType.ERROR,ke=>{q||(q=!0,Lo(us,`RPC '${e}' stream ${s} transport errored:`,ke),ue.wo(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),Me(P,Dm.EventType.MESSAGE,ke=>{var rt;if(!q){const It=ke.data[0];yt(!!It);const Pt=It.error||(null===(rt=It[0])||void 0===rt?void 0:rt.error);if(Pt){Fe(us,`RPC '${e}' stream ${s} received error:`,Pt);const zt=Pt.status;let an=function(zp){const QR=Kr[zp];if(void 0!==QR)return Dx(QR)}(zt),cs=Pt.message;void 0===an&&(an=ce.INTERNAL,cs="Unknown error status: "+zt+" with message "+Pt.message),q=!0,ue.wo(new be(an,cs)),P.close()}else Fe(us,`RPC '${e}' stream ${s} received:`,It),ue._o(It)}}),Me(m,ZI.STAT_EVENT,ke=>{ke.stat===l_.PROXY?Fe(us,`RPC '${e}' stream ${s} detected buffering proxy`):ke.stat===l_.NOPROXY&&Fe(us,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ue.fo()},0),ue}}function MM(){return typeof window<"u"?window:null}function jE(){return typeof document<"u"?document:null}function K_(n){return new wP(n,!0)}class rS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class RM{constructor(e,t,r,s,u,l,m,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new rS(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d1 extends RM{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function DP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:ot(),s=e.targetChange.targetIds||[],u=function(w,C){return w.useProto3Json?(yt(void 0===C||"string"==typeof C),_r.fromBase64String(C||"")):(yt(void 0===C||C instanceof Uint8Array),_r.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const C=void 0===w.code?ce.UNKNOWN:Dx(w.code);return new be(C,w.message||"")}(l);t=new Ax(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=kc(n,r.document.name),u=Fr(r.document.updateTime),l=r.document.createTime?Fr(r.document.createTime):_t.min(),m=new Ai({mapValue:{fields:r.document.fields}}),w=Bn.newFoundDocument(s,u,l,m);t=new CE(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=kc(n,r.document),u=r.readTime?Fr(r.readTime):_t.min(),l=Bn.newNoDocument(s,u);t=new CE([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=kc(n,r.document);t=new CE([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return ot();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new pP(s,u);t=new Sx(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return _t.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Fr(u.readTime):_t.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=V_(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=Cn(m)?{documents:Ux(s,m)}:{query:OT(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Px(s,u.resumeToken);const w=MT(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(_t.min())>0){l.readTime=Hm(s,u.snapshotVersion.toTimestamp());const w=MT(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function CP(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=V_(this.serializer),t.removeTarget=e,this.Wo(t)}}class h1 extends RM{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function bP(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,s){let u=Fr(r.updateTime?r.updateTime:s);return u.isEqual(_t.min())&&(u=Fr(s)),new lP(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fr(e.commitTime);return this.listener.cu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=V_(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>B_(this.serializer,r))};this.Wo(t)}}class f1 extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new be(ce.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class g1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class m1{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,fe.Z)(function*(){var w;Zh(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,fe.Z)(function*(C){const A=Qe(C);A.vu.add(4),yield Km(A),A.bu.set("Unknown"),A.vu.delete(4),yield Y_(A)}),function(C){return w.apply(this,arguments)})(l))}))}),this.bu=new g1(r,s)}}function Y_(n){return sS.apply(this,arguments)}function sS(){return sS=(0,fe.Z)(function*(n){if(Zh(n))for(const e of n.Ru)yield e(!0)}),sS.apply(this,arguments)}function Km(n){return oS.apply(this,arguments)}function oS(){return oS=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),oS.apply(this,arguments)}function $E(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),cS(t)?uS(t):Qm(t).Ko()&&aS(t,e))}function Q_(n,e){const t=Qe(n),r=Qm(t);t.Au.delete(e),r.Ko()&&PM(t,e),0===t.Au.size&&(r.Ko()?r.jo():Zh(t)&&t.bu.set("Unknown"))}function aS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qm(n).su(e)}function PM(n,e){n.Vu.qt(e),Qm(n).iu(e)}function uS(n){n.Vu=new mP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Qm(n).start(),n.bu.gu()}function cS(n){return Zh(n)&&!Qm(n).Uo()&&n.Au.size>0}function Zh(n){return 0===Qe(n).vu.size}function NM(n){n.Vu=void 0}function y1(n){return lS.apply(this,arguments)}function lS(){return lS=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{aS(n,e)})}),lS.apply(this,arguments)}function v1(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,fe.Z)(function*(n,e){NM(n),cS(n)?(n.bu.Iu(e),uS(n)):n.bu.set("Unknown")}),dS.apply(this,arguments)}function _1(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Ax&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HE(n,r)}else if(e instanceof CE?n.Vu.Ht(e):e instanceof Sx?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(_t.min()))try{const r=yield IM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=s.Au.get(w);C&&s.Au.set(w,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const C=s.Au.get(m);if(!C)return;s.Au.set(m,C.withResumeToken(_r.EMPTY_BYTE_STRING,C.snapshotVersion)),PM(s,m);const A=new hd(C.target,m,w,C.sequenceNumber);aS(s,A)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield HE(n,r)}var r}),hS.apply(this,arguments)}function HE(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,fe.Z)(function*(n,e,t){if(!xc(e))throw e;n.vu.add(1),yield Km(n),n.bu.set("Offline"),t||(t=()=>IM(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Y_(n)}))}),fS.apply(this,arguments)}function OM(n,e){return e().catch(t=>HE(n,t,e))}function Ym(n){return pS.apply(this,arguments)}function pS(){return pS=(0,fe.Z)(function*(n){const e=Qe(n),t=Kh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;w1(e);)try{const s=yield i1(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,I1(e,s)}catch(s){yield HE(e,s)}kM(e)&&LM(e)}),pS.apply(this,arguments)}function w1(n){return Zh(n)&&n.Eu.length<10}function I1(n,e){n.Eu.push(e);const t=Kh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function kM(n){return Zh(n)&&!Kh(n).Uo()&&n.Eu.length>0}function LM(n){Kh(n).start()}function E1(n){return gS.apply(this,arguments)}function gS(){return gS=(0,fe.Z)(function*(n){Kh(n).hu()}),gS.apply(this,arguments)}function D1(n){return mS.apply(this,arguments)}function mS(){return mS=(0,fe.Z)(function*(n){const e=Kh(n);for(const t of n.Eu)e.uu(t.mutations)}),mS.apply(this,arguments)}function b1(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),s=TT.from(r,e,t);yield OM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ym(n)}),yS.apply(this,arguments)}function C1(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,fe.Z)(function*(n,e){var t;e&&Kh(n).ou&&(yield(t=(0,fe.Z)(function*(r,s){if(Ex(u=s.code)&&u!==ce.ABORTED){const l=r.Eu.shift();Kh(r).Qo(),yield OM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Ym(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),kM(n)&&LM(n)}),vS.apply(this,arguments)}function FM(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,fe.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Zh(t);t.vu.add(3),yield Km(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Y_(t)}),_S.apply(this,arguments)}function wS(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,fe.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield Y_(t)):e||(t.vu.add(2),yield Km(t),t.bu.set("Unknown"))}),IS.apply(this,arguments)}function Qm(n){return n.Su||(n.Su=function(e,t,r){const s=Qe(e);return s.fu(),new d1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:y1.bind(null,n),ao:v1.bind(null,n),nu:_1.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),cS(n)?uS(n):n.bu.set("Unknown")):(yield n.Su.stop(),NM(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Kh(n){return n.Du||(n.Du=function(e,t,r){const s=Qe(e);return s.fu(),new h1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:E1.bind(null,n),ao:C1.bind(null,n),au:D1.bind(null,n),cu:b1.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield Ym(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class ES{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new ES(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),xc(n))return new be(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Xm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=R_(),this.sortedSet=new Pn(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UM{constructor(){this.Cu=new Pn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ot():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ey{constructor(e,t,r,s,u,l,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new ey(e,t,Xm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&x_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class T1{constructor(){this.Nu=void 0,this.listeners=[]}}class S1{constructor(){this.queries=new ld(e=>rx(e),x_),this.onlineState="Unknown",this.ku=new Set}}function DS(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new T1),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=Jm(l,`Initialization of query '${ET(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&SS(t)}),bS.apply(this,arguments)}function CS(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),TS.apply(this,arguments)}function A1(n,e){const t=Qe(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&SS(t)}function x1(n,e,t){const r=Qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function SS(n){n.ku.forEach(e=>{e.next()})}class AS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new ey(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class M1{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class VM{constructor(e){this.serializer=e}rr(e){return kc(this.serializer,e)}ur(e){return e.metadata.exists?Fx(this.serializer,e.document,!1):Bn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Fr(e)}}class R1{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BM(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new VM(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||qt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function s1(n,e,t,r){return YT.apply(this,arguments)}(e.localStore,new VM(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield o1(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function BM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jM{constructor(e){this.key=e}}class $M{constructor(e){this.key=e}}class HM{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=sx(e),this.ec=new Xm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new UM,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,C="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,P)=>{const B=s.get(A),q=M_(this.query,P)?P:null,ue=!!B&&this.mutatedKeys.has(B.key),Me=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let ke=!1;B&&q?B.data.isEqual(q.data)?ue!==Me&&(r.track({type:3,doc:q}),ke=!0):this.rc(B,q)||(r.track({type:2,doc:q}),ke=!0,(w&&this.tc(q,w)>0||C&&this.tc(q,C)<0)&&(m=!0)):!B&&q?(r.track({type:0,doc:q}),ke=!0):B&&!q&&(r.track({type:1,doc:B}),ke=!0,(w||C)&&(m=!0)),ke&&(q?(l=l.add(q),u=Me?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((C,A)=>function(P,B){const q=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return q(P)-q(B)}(C.type,A.type)||this.tc(C.doc,A.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new ey(this.query,e.ec,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new UM,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new $M(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new jM(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ey.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class P1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class N1{constructor(e){this.key=e,this.fc=!1}}class O1{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new ld(m=>rx(m),x_),this._c=new Map,this.mc=new Set,this.gc=new Pn(Ze.comparator),this.yc=new Map,this.Ic=new $T,this.Tc={},this.Ec=new Map,this.Ac=kp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function k1(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,fe.Z)(function*(n,e){const t=JS(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Wm(t.localStore,xs(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield MS(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&$E(t.remoteStore,l)}return s}),xS.apply(this,arguments)}function MS(n,e,t,r,s){return RS.apply(this,arguments)}function RS(){return RS=(0,fe.Z)(function*(n,e,t,r,s){n.Rc=(P,B,q)=>{return(ue=(0,fe.Z)(function*(Me,ke,rt,It){let wt=ke.view.sc(rt);wt.zi&&(wt=yield FE(Me.localStore,ke.query,!1).then(({documents:an})=>ke.view.sc(an,wt)));const Pt=It&&It.targetChanges.get(ke.targetId),zt=ke.view.applyChanges(wt,Me.isPrimaryClient,Pt);return jS(Me,ke.targetId,zt.cc),zt.snapshot}),function(Me,ke,rt,It){return ue.apply(this,arguments)})(n,P,B,q);var ue};const u=yield FE(n.localStore,e,!0),l=new HM(e,u.ir),m=l.sc(u.documents),w=F_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),C=l.applyChanges(m,n.isPrimaryClient,w);jS(n,t,C.cc);const A=new P1(e,t,l);return n.wc.set(e,A),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),RS.apply(this,arguments)}function L1(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!x_(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Zm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Q_(t.remoteStore,r.targetId),ty(t,r.targetId)}).catch(Ac))):(ty(t,r.targetId),yield Zm(t.localStore,r.targetId,!0))}),PS.apply(this,arguments)}function NS(){return NS=(0,fe.Z)(function*(n,e,t){const r=XS(n);try{const s=yield function(u,l){const m=Qe(u),w=Yn.now(),C=l.reduce((B,q)=>B.add(q.key),qt());let A,P;return m.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=to(),ue=qt();return m.Zi.getEntries(B,C).next(Me=>{q=Me,q.forEach((ke,rt)=>{rt.isValidDocument()||(ue=ue.add(ke))})}).next(()=>m.localDocuments.getOverlayedDocuments(B,q)).next(Me=>{A=Me;const ke=[];for(const rt of l){const It=hP(rt,A.get(rt.key).overlayedDocument);null!=It&&ke.push(new dd(rt.key,It,pT(It.value.mapValue),ur.exists(!0)))}return m.mutationQueue.addMutationBatch(B,w,ke,l)}).next(Me=>{P=Me;const ke=Me.applyToLocalDocumentSet(A,ue);return m.documentOverlayCache.saveOverlays(B,Me.batchId,ke)})}).then(()=>({batchId:P.batchId,changes:ax(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new Pn(Ut)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield fd(r,s.changes),yield Ym(r.remoteStore)}catch(s){const u=Jm(s,"Failed to persist write");t.reject(u)}}),NS.apply(this,arguments)}function zM(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,fe.Z)(function*(n,e){const t=Qe(n);try{const r=yield function r1(n,e){const t=Qe(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((A,P)=>{const B=s.get(P);if(!B)return;m.push(t.Bs.removeMatchingKeys(u,A.removedDocuments,P).next(()=>t.Bs.addMatchingKeys(u,A.addedDocuments,P)));let q=B.withSequenceNumber(u.currentSequenceNumber);var ue,Me,ke;null!==e.targetMismatches.get(P)?q=q.withResumeToken(_r.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):A.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(A.resumeToken,r)),s=s.insert(P,q),Me=q,ke=A,(0===(ue=B).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-ue.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,q))});let w=to(),C=qt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(EM(u,l,e.documentUpdates).next(A=>{w=A.nr,C=A.sr})),!r.isEqual(_t.min())){const A=t.Bs.getLastRemoteSnapshotVersion(u).next(P=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?yt(l.fc):s.removedDocuments.size>0&&(yt(l.fc),l.fc=!1))}),yield fd(t,r,e)}catch(r){yield Ac(r)}}),OS.apply(this,arguments)}function GM(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Qe(u);m.onlineState=l;let w=!1;m.queries.forEach((C,A)=>{for(const P of A.listeners)P.Mu(l)&&(w=!0)}),w&&SS(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function U1(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,fe.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Pn(Ze.comparator);l=l.insert(u,Bn.newNoDocument(u,_t.min()));const m=qt().add(u),w=new L_(_t.min(),new Map,new Pn(Ut),l,m);yield zM(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),$S(r)}else yield Zm(r.localStore,e,!1).then(()=>ty(r,e,t)).catch(Ac)}),kS.apply(this,arguments)}function V1(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const s=yield function n1(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,C){const A=w.batch,P=A.keys();let B=ee.resolve();return P.forEach(q=>{B=B.next(()=>C.getEntry(m,q)).next(ue=>{const Me=w.docVersions.get(q);yt(null!==Me),ue.version.compareTo(Me)<0&&(A.applyToRemoteDocument(ue,w),ue.isValidDocument()&&(ue.setReadTime(w.commitVersion),C.addEntry(ue)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=qt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);BS(t,r,null),VS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fd(t,s)}catch(s){yield Ac(s)}}),LS.apply(this,arguments)}function B1(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,fe.Z)(function*(n,e,t){const r=Qe(n);try{const s=yield function(u,l){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(yt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);BS(r,e,t),VS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fd(r,s)}catch(s){yield Ac(s)}}),FS.apply(this,arguments)}function US(){return US=(0,fe.Z)(function*(n,e){const t=Qe(n);Zh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Jm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),US.apply(this,arguments)}function VS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function BS(n,e,t){const r=Qe(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||qM(n,r)})}function qM(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Q_(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),$S(n))}function jS(n,e,t){for(const r of t)r instanceof jM?(n.Ic.addReference(r.key,e),$1(n,r)):r instanceof $M?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||qM(n,r.key)):ot()}function $1(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),$S(n))}function $S(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new N1(t)),n.gc=n.gc.insert(t,r),$E(n.remoteStore,new hd(xs(Um(t.path)),r,"TargetPurposeLimboResolution",$i.ct))}}function fd(n,e,t){return HS.apply(this,arguments)}function HS(){return HS=(0,fe.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){s.push(C);const A=WT.Li(w.targetId,C);u.push(A)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,fe.Z)(function*(w,C){const A=Qe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>ee.forEach(C,B=>ee.forEach(B.Fi,q=>A.persistence.referenceDelegate.addReference(P,B.targetId,q)).next(()=>ee.forEach(B.Bi,q=>A.persistence.referenceDelegate.removeReference(P,B.targetId,q)))))}catch(P){if(!xc(P))throw P;Fe("LocalStore","Failed to update sequence numbers: "+P)}for(const P of C){const B=P.targetId;if(!P.fromCache){const q=A.Ji.get(B),Me=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);A.Ji=A.Ji.insert(B,Me)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),HS.apply(this,arguments)}function H1(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,fe.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield wM(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new be(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fd(t,r.er)}var s}),zS.apply(this,arguments)}function z1(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let s=qt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function G1(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=yield FE(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&jS(t,e.targetId,s.cc),s}),GS.apply(this,arguments)}function q1(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,fe.Z)(function*(n,e){const t=Qe(n);return bM(t.localStore,e).then(r=>fd(t,r))}),qS.apply(this,arguments)}function W1(n,e,t,r){return WS.apply(this,arguments)}function WS(){return WS=(0,fe.Z)(function*(n,e,t,r){const s=Qe(n),u=yield function(l,m){const w=Qe(l),C=Qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Sn(A,m).next(P=>P?w.localDocuments.getDocuments(A,P):ee.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Ym(s.remoteStore):"acknowledged"===t||"rejected"===t?(BS(s,e,r||null),VS(s,e),m=e,Qe(Qe(s.localStore).mutationQueue).Cn(m)):ot(),yield fd(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),WS.apply(this,arguments)}function ZS(){return ZS=(0,fe.Z)(function*(n,e){const t=Qe(n);if(JS(t),XS(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield WM(t,r.toArray());t.vc=!0,yield wS(t.remoteStore,!0);for(const u of s)$E(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(ty(t,l),Zm(t.localStore,l,!0))),Q_(t.remoteStore,l)}),yield s,yield WM(t,r),function(u){const l=Qe(u);l.yc.forEach((m,w)=>{Q_(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Pn(Ze.comparator)}(t),t.vc=!1,yield wS(t.remoteStore,!1)}}),ZS.apply(this,arguments)}function WM(n,e,t){return KS.apply(this,arguments)}function KS(){return KS=(0,fe.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Wm(r.localStore,xs(w[0]));for(const C of w){const A=r.wc.get(C),P=yield G1(r,A);P.snapshot&&u.push(P.snapshot)}}else{const C=yield DM(r.localStore,l);m=yield Wm(r.localStore,C),yield MS(r,ZM(C),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),KS.apply(this,arguments)}function ZM(n){return tx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function K1(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function Y1(n,e,t,r){return YS.apply(this,arguments)}function YS(){return YS=(0,fe.Z)(function*(n,e,t,r){const s=Qe(n);if(s.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield bM(s.localStore,ix(u[0])),m=L_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_r.EMPTY_BYTE_STRING);yield fd(s,l,m);break}case"rejected":yield Zm(s.localStore,e,!0),ty(s,e,r);break;default:ot()}}),YS.apply(this,arguments)}function Q1(n,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,fe.Z)(function*(n,e,t){const r=JS(n);if(r.vc){for(const s of e){if(r._c.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield DM(r.localStore,s),l=yield Wm(r.localStore,u);yield MS(r,ZM(u),l.targetId,!1,l.resumeToken),$E(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Zm(r.localStore,s,!1).then(()=>{Q_(r.remoteStore,s),ty(r,s)}).catch(Ac))}}),QS.apply(this,arguments)}function JS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U1.bind(null,e),e.dc.nu=A1.bind(null,e.eventManager),e.dc.Pc=x1.bind(null,e.eventManager),e}function XS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B1.bind(null,e),e}class J_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=K_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _M(this.persistence,new vM,e.initialUser,this.serializer)}createPersistence(e){return new HT(OE.zs,this.serializer)}createSharedClientState(e){return new AM}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class eA extends J_{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield XS(r.Vc.syncEngine),yield Ym(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _M(this.persistence,new vM,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new sE(t,this.persistence);return new Mc(e.asyncQueue,r)}createPersistence(e){const t=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?as.withCacheSize(this.cacheSizeBytes):as.DEFAULT;return new GT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,MM(),jE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new AM}}class KM extends eA{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof tS&&(r.sharedClientState.syncEngine={jr:W1.bind(null,s),zr:Y1.bind(null,s),Wr:Q1.bind(null,s),$i:K1.bind(null,s),Qr:q1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,fe.Z)(function*(l){yield function Z1(n,e){return ZS.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=MM();if(!tS.D(t))throw new be(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ny{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>GM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=H1.bind(null,r.syncEngine),yield wS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new S1}createDatastore(e){const t=K_(e.databaseInfo.databaseId),r=new l1(e.databaseInfo);return new f1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>GM(this.syncEngine,m,0),l=xM.D()?new xM:new a1,new m1(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,C){const A=new O1(r,s,u,l,m,w);return C&&(A.vc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Km(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YM(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class eN{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Zr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new M1(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class tN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,fe.Z)(function*(u,l){const m=Qe(u),w=V_(m.serializer)+"/documents",C={documents:l.map(q=>U_(m.serializer,q))},A=yield m.vo("BatchGetDocuments",w,C,l.length),P=new Map;A.forEach(q=>{const ue=function EP(n,e){return"found"in e?function(t,r){yt(!!r.found);const s=kc(t,r.found.name),u=Fr(r.found.updateTime),l=r.found.createTime?Fr(r.found.createTime):_t.min(),m=new Ai({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const s=kc(t,r.missing),u=Fr(r.readTime);return Bn.newNoDocument(s,u)}(n,e):ot()}(m.serializer,q);P.set(ue.key.toString(),ue)});const B=[];return l.forEach(q=>{const ue=P.get(q.toString());yt(!!ue),B.push(ue)}),B}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ze.fromPath(s);e.mutations.push(new bT(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(s,u){const l=Qe(s),m=V_(l.serializer)+"/documents",w={writes:u.map(C=>B_(l.serializer,C))};yield l.Io("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?ur.exists(!1):ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new be(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nN{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new rS(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new tN(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!Bh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ex(t)}return!1}}class rN{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Lr.UNAUTHENTICATED,this.clientId=XI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Jm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function GE(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,fe.Z)(function*(u){r.isEqual(u)||(yield wM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),tA.apply(this,arguments)}function nA(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iA(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>FM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>FM(e.remoteStore,u)),n._onlineComponents=e}),rA.apply(this,arguments)}function QM(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function iA(n){return sA.apply(this,arguments)}function sA(){return sA=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield GE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!QM(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),yield GE(n,new J_)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield GE(n,new J_);return n._offlineComponents}),sA.apply(this,arguments)}function qE(n){return oA.apply(this,arguments)}function oA(){return oA=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield nA(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield nA(n,new ny))),n._onlineComponents}),oA.apply(this,arguments)}function JM(n){return iA(n).then(e=>e.persistence)}function WE(n){return iA(n).then(e=>e.localStore)}function XM(n){return qE(n).then(e=>e.remoteStore)}function aA(n){return qE(n).then(e=>e.syncEngine)}function ry(n){return uA.apply(this,arguments)}function uA(){return uA=(0,fe.Z)(function*(n){const e=yield qE(n),t=e.eventManager;return t.onListen=k1.bind(null,e.syncEngine),t.onUnlisten=L1.bind(null,e.syncEngine),t}),uA.apply(this,arguments)}function tR(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,m,w){const C=new zE({next:P=>{u.enqueueAndForget(()=>CS(s,A));const B=P.docs.has(l);!B&&P.fromCache?w.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&P.fromCache&&m&&"server"===m.source?w.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),A=new AS(Um(l.path),C,{includeMetadataChanges:!0,Ku:!0});return DS(s,A)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function nR(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,l,m,w){const C=new zE({next:P=>{u.enqueueAndForget(()=>CS(s,A)),P.fromCache&&"server"===m.source?w.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),A=new AS(l,C,{includeMetadataChanges:!0,Ku:!0});return DS(s,A)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function rR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const iR=new Map;function cA(n,e,t){if(!t)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sR(n,e,t,r){if(!0===e&&!0===r)throw new be(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oR(n){if(!Ze.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aR(n){if(Ze.isDocumentKey(n))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZE(n);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uR(n,e){if(e<=0)throw new be(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=rR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class X_{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new bm;switch(t.type){case"firstParty":return new p_(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iR.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),iR.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Lc extends Hi{constructor(e,t,r){super(e,t,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ze(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function dR(n,e,...t){if(n=(0,cn.m9)(n),cA("collection","path",e),n instanceof X_){const r=rn.fromString(e,...t);return aR(r),new Lc(n,null,r)}{if(!(n instanceof Qn||n instanceof Lc))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return aR(r),new Lc(n.firestore,null,r)}}function KE(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=XI.A()),cA("doc","path",e),n instanceof X_){const r=rn.fromString(e,...t);return oR(r),new Qn(n,null,new Ze(r))}{if(!(n instanceof Qn||n instanceof Lc))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return oR(r),new Qn(n.firestore,n instanceof Lc?n.converter:null,new Ze(r))}}function hR(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Qn||n instanceof Lc)&&(e instanceof Qn||e instanceof Lc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lA(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&x_(n._query,e._query)&&n.converter===e.converter}class fN{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new rS(this,"async_queue_retry"),this.Xc=()=>{const t=jE();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=jE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=jE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Zr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!xc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=ES.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&ot()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function dA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class pN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends X_{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new fN,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fR(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||fR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fR(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JA(n._databaseId,m,n._persistenceKey,(C=s).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,rR(C.experimentalLongPollingOptions),C.useFetchStreams));var m,C;n._firestoreClient=new rN(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function pR(n,e,t){const r=new Zr;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield GE(n,t),yield nA(n,e),r.resolve()}catch(s){const u=s;if(!QM(u))throw u;Lo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function gR(n){if(n._initialized||n._terminated)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fc(_r.fromBase64String(e))}catch(t){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fc(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fp{constructor(e){this._methodName=e}}class YE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const CN=/^__.*__$/;class TN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dd(e,this.data,this.fieldMask,t,this.fieldTransforms):new jm(e,this.data,t,this.fieldTransforms)}}class mR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class QE{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new QE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return eD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(yR(this.ca)&&CN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class SN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||K_(e)}ya(e,t,r,s=!1){return new QE({ca:e,methodName:t,ga:r,path:ar.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Up(n){const e=n._freezeSettings(),t=K_(n._databaseId);return new SN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JE(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);gA("Data must be an object, but it was:",l,r);const m=wR(r,l);let w,C;if(u.merge)w=new Sr(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const P of u.mergeFields){const B=n0(e,P,t);if(!l.contains(B))throw new be(ce.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);ER(A,B)||A.push(B)}w=new Sr(A),C=l.fieldTransforms.filter(P=>w.covers(P.field))}else w=null,C=l.fieldTransforms;return new TN(new Ai(m),w,C)}class t0 extends Fp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t0}}function vR(n,e,t){return new QE({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hA extends Fp{_toFieldTransform(e){return new N_(e.path,new Vm)}isEqual(e){return e instanceof hA}}class AN extends Fp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=vR(this,e,!0),r=this.pa.map(u=>Vp(u,t)),s=new Ap(r);return new N_(e.path,s)}isEqual(e){return this===e}}class xN extends Fp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=vR(this,e,!0),r=this.pa.map(u=>Vp(u,t)),s=new xp(r);return new N_(e.path,s)}isEqual(e){return this===e}}class MN extends Fp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Bm(e.serializer,dx(e.serializer,this.Ia));return new N_(e.path,t)}isEqual(e){return this===e}}function fA(n,e,t,r){const s=n.ya(1,e,t);gA("Data must be an object, but it was:",s,r);const u=[],l=Ai.empty();ad(r,(w,C)=>{const A=XE(e,w,t);C=(0,cn.m9)(C);const P=s.da(A);if(C instanceof t0)u.push(A);else{const B=Vp(C,P);null!=B&&(u.push(A),l.set(A,B))}});const m=new Sr(u);return new mR(l,m,s.fieldTransforms)}function pA(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[n0(e,r,t)],w=[s];if(u.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<u.length;B+=2)m.push(n0(e,u[B])),w.push(u[B+1]);const C=[],A=Ai.empty();for(let B=m.length-1;B>=0;--B)if(!ER(C,m[B])){const q=m[B];let ue=w[B];ue=(0,cn.m9)(ue);const Me=l.da(q);if(ue instanceof t0)C.push(q);else{const ke=Vp(ue,Me);null!=ke&&(C.push(q),A.set(q,ke))}}const P=new Sr(C);return new mR(A,P,l.fieldTransforms)}function _R(n,e,t,r=!1){return Vp(t,n.ya(r?4:3,e))}function Vp(n,e){if(IR(n=(0,cn.m9)(n)))return gA("Unsupported field value:",e,n),wR(n,e);if(n instanceof Fp)return function(t,r){if(!yR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Vp(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dx(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Yn.fromDate(t);return{timestampValue:Hm(r.serializer,s)}}if(t instanceof Yn){const s=new Yn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hm(r.serializer,s)}}if(t instanceof YE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fc)return{bytesValue:Px(r.serializer,t._byteString)};if(t instanceof Qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${ZE(t)}`)}(n,e)}function wR(n,e){const t={};return uT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ad(n,(r,s)=>{const u=Vp(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function IR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof YE||n instanceof Fc||n instanceof Qn||n instanceof Fp)}function gA(n,e,t){if(!IR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZE(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function n0(n,e,t){if((e=(0,cn.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return XE(n,e);throw eD("Field path arguments must be of type string or ",n,!1,void 0,t)}const RN=new RegExp("[~\\*/\\[\\]]");function XE(n,e,t){if(e.search(RN)>=0)throw eD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw eD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new be(ce.INVALID_ARGUMENT,m+n+w)}function ER(n,e){return n.some(t=>t.isEqual(e))}class r0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PN extends r0{data(){return super.data()}}function tD(n,e){return"string"==typeof e?XE(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function DR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mA{}class s0 extends mA{}function Yh(n,e,...t){let r=[];e instanceof mA&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof iy).length,l=s.filter(m=>m instanceof o0).length;if(u>1||u>0&&l>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class o0 extends s0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new o0(e,t,r)}_apply(e){const t=this._parse(e);return SR(e._query,t),new Hi(e.firestore,e.converter,IT(e._query,t))}_parse(e){const t=Up(e.firestore);return function(s,u,l,m,w,C,A){let P;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){TR(A,C);const B=[];for(const q of A)B.push(CR(m,s,q));P={arrayValue:{values:B}}}else P=CR(m,s,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||TR(A,C),P=_R(l,"where",A,"in"===C||"not-in"===C);return nn.create(w,C,P)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class iy extends mA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:i.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)SR(u,m),u=IT(u,m)}(e._query,t),new Hi(e.firestore,e.converter,IT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yA extends s0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yA(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Tp(s,u);return function(m,w){if(null===_T(m)){const C=_E(m);null!==C&&AR(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new cd(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class nD extends s0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new nD(e,t,r)}_apply(e){return new Hi(e.firestore,e.converter,wE(e._query,this._limit,this._limitType))}}class rD extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rD(e,t,r)}_apply(e){const t=bR(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(s=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class iD extends s0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new iD(e,t,r)}_apply(e){const t=bR(e,this.type,this._docOrFields,this._inclusive);return new Hi(e.firestore,e.converter,(s=t,new cd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function bR(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof r0)return function(s,u,l,m,w){if(!m)throw new be(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const A of Sp(s))if(A.field.isKeyField())C.push(vu(u,m.key));else{const P=m.data.field(A.field);if(C_(P))throw new be(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const B=A.field.canonicalString();throw new be(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}C.push(P)}return new Nc(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Up(n.firestore);return function(u,l,m,w,C,A){const P=u.explicitOrderBy;if(C.length>P.length)throw new be(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let q=0;q<C.length;q++){const ue=C[q];if(P[q].field.isKeyField()){if("string"!=typeof ue)throw new be(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ue}`);if(!wT(u)&&-1!==ue.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ue}' contains a slash.`);const Me=u.path.child(rn.fromString(ue));if(!Ze.isDocumentKey(Me))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const ke=new Ze(Me);B.push(vu(l,ke))}else{const Me=_R(m,w,ue);B.push(Me)}}return new Nc(B,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function CR(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wT(e)&&-1!==t.indexOf("/"))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ze.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vu(n,new Ze(r))}if(t instanceof Qn)return vu(n,t._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZE(t)}.`)}function TR(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SR(n,e){if(e.isInequality()){const r=_E(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new be(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=_T(n);null!==u&&AR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new be(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function AR(n,e,t){if(!t.isEqual(e))throw new be(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vA{convertValue(e,t="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ad(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new YE(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=T_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nm(e));default:return null}}convertTimestamp(e){const t=Ea(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);yt($x(r));const s=new mu(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return s.isEqual(t)||Cr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jN extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gd extends r0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends gd{data(e={}){return super.data(e)}}class Qh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new Bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new a0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:HN(l.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function MR(n,e){return n instanceof gd&&e instanceof gd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qh&&e instanceof Qh&&n._firestore===e._firestore&&lA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Jh extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function RR(n,e,t){n=sn(n,Qn);const r=sn(n.firestore,Jn),s=sD(n.converter,e,t);return sy(r,[JE(Up(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,ur.none())])}function PR(n,e,t,...r){n=sn(n,Qn);const s=sn(n.firestore,Jn),u=Up(s);let l;return l="string"==typeof(e=(0,cn.m9)(e))||e instanceof pd?pA(u,"updateDoc",n._key,e,t,r):fA(u,"updateDoc",n._key,e),sy(s,[l.toMutation(n._key,ur.exists(!0))])}function NR(n,...e){var t,r,s;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(dA(e[l])){const P=e[l];e[l]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[l+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[l+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let w,C,A;if(n instanceof Qn)C=sn(n.firestore,Jn),A=Um(n._key.path),w={next:P=>{e[l]&&e[l](_A(C,n,P))},error:e[l+1],complete:e[l+2]};else{const P=sn(n,Hi);C=sn(P.firestore,Jn),A=P._query;const B=new Jh(C);w={next:q=>{e[l]&&e[l](new Qh(C,B,P,q))},error:e[l+1],complete:e[l+2]},DR(n._query)}return function(P,B,q,ue){const Me=new zE(ue),ke=new AS(B,Me,q);return P.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return DS(yield ry(P),ke)})),()=>{Me.Dc(),P.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return CS(yield ry(P),ke)}))}}(Ur(C),A,m,w)}function sy(n,e){return function(t,r){const s=new Zr;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function F1(n,e,t){return NS.apply(this,arguments)}(yield aA(t),r,s)})),s.promise}(Ur(n),e)}function _A(n,e,t){const r=t.docs.get(e._key),s=new Jh(n);return new gd(n,s,e._key,r,new Bp(t.hasPendingWrites,t.fromCache),e.converter)}const aO={maxAttempts:5};class OR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Up(e)}set(e,t,r){this._verifyNotCommitted();const s=Xh(e,this._firestore),u=sD(s.converter,t,r),l=JE(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,ur.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Xh(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof pd?pA(this._dataReader,"WriteBatch.update",u._key,t,r,s):fA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xh(e,this._firestore);return this._mutations=this._mutations.concat(new $m(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xh(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Up(e)}get(e){const t=Xh(e,this._firestore),r=new jN(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return ot();const u=s[0];if(u.isFoundDocument())return new r0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new r0(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const s=Xh(e,this._firestore),u=sD(s.converter,t,r),l=JE(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Xh(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof pd?pA(this._dataReader,"Transaction.update",u._key,t,r,s):fA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xh(e,this._firestore),r=new Jh(this._firestore);return super.get(e).then(s=>new gd(this._firestore,r,t._key,s._document,new Bp(!1,!1),t.converter))}}!function(n,e=!0){id=Ol.SDK_VERSION,(0,Ol._registerComponent)(new ph.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(new JI(t.getProvider("auth-internal")),new YC(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Ol.registerVersion)(d_,"3.13.0",n),(0,Ol.registerVersion)(d_,"3.13.0","esm2017")}();function wA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LR(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function FR(){if(!function b_(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class u0{constructor(e){this._delegate=e}static fromBase64String(e){return FR(),new u0(Fc.fromBase64String(e))}static fromUint8Array(e){return LR(),new u0(Fc.fromUint8Array(e))}toBase64(){return FR(),this._delegate.toBase64()}toUint8Array(){return LR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IA(n){return function yO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vO{enableIndexedDbPersistence(e,t){return function mN(n,e){gR(n=sn(n,Jn));const t=Ur(n);if(t._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new ny;return pR(t,s,new eA(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yN(n){gR(n=sn(n,Jn));const e=Ur(n);if(e._uninitializedComponentsProvider)throw new be(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new ny;return pR(e,r,new KM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vN(n){if(n._initialized&&!n._terminated)throw new be(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!Fo.D())return Promise.resolve();const s=r+"main";yield Fo.delete(s)}),function(r){return t.apply(this,arguments)})(qT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class UR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lR(n,e,t,r={}){var s;const u=(n=sn(n,X_))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Lr.MOCK_USER;else{m=(0,cn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new be(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Lr(C)}n._authCredentials=new QI(new f_(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function wN(n){return function iN(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield JM(n),t=yield XM(n);return e.setNetworkEnabled(!0),function(r){const s=Qe(r);return s.vu.delete(0),Y_(s)}(t)}))}(Ur(n=sn(n,Jn)))}(this._delegate)}disableNetwork(){return function IN(n){return function sN(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield JM(n),t=yield XM(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(s){const u=Qe(s);u.vu.add(0),yield Km(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ur(n=sn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _N(n){return function(e){const t=new Zr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function j1(n,e){return US.apply(this,arguments)}(yield aA(e),t)})),t.promise}(Ur(n=sn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function JN(n,e){return function uN(n,e){const t=new zE(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield ry(n),s=t,Qe(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield ry(n),s=t,void Qe(r).ku.delete(s);var r,s}))}}(Ur(n=sn(n,Jn)),dA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oy(this,dR(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new ba(this,KE(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function hN(n,e){if(n=sn(n,X_),cA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new cd(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cO(n,e,t){n=sn(n,Jn);const r=Object.assign(Object.assign({},aO),t);return function(s){if(s.maxAttempts<1)throw new be(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Zr;return s.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const w=yield function eR(n){return qE(n).then(e=>e.datastore)}(s);new nN(s.asyncQueue,w,l,u,m).run()})),m.promise}(Ur(n),s=>e(new uO(n,s)),r)}(this._delegate,t=>e(new VR(this,t)))}batch(){return Ur(this._delegate),new BR(new OR(this._delegate,e=>sy(this._delegate,e)))}loadBundle(e){return function EN(n,e){const t=Ur(n=sn(n,Jn)),r=new pN;return function cN(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?bx().encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return YM(w,C);if(w instanceof ArrayBuffer)return YM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new eN(w,l);var w}(t,K_(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function J1(n,e,t){const r=Qe(n);var s;(s=(0,fe.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(B,q){const ue=Qe(B),Me=Fr(q.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",ke=>ue.qs.getBundleMetadata(ke,q.id)).then(ke=>!!ke&&ke.createTime.compareTo(Me)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(B=w).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);m._updateProgress(BM(w));const C=new R1(w,u.localStore,l.serializer);let A=yield l.bc();for(;A;){const B=yield C.zu(A);B&&m._updateProgress(B),A=yield l.bc()}const P=yield C.complete();return yield fd(u,P.Ju,void 0),yield function(B,q){const ue=Qe(B);return ue.persistence.runTransaction("Save bundle","readwrite",Me=>ue.qs.saveBundleMetadata(Me,q))}(u.localStore,w),m._completeWith(P.progress),Promise.resolve(P.Hu)}catch(w){return Lo("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var B}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield aA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function DN(n,e){return function lN(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const s=Qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield WE(n),e)}))}(Ur(n=sn(n,Jn)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class oD extends vA{constructor(e){super(),this.firestore=e}convertBytes(e){return new u0(new Fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ba.forKey(t,this.firestore,null)}}class VR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=$p(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new gd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=$p(e);return r?(wA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}}class BR{constructor(e){this._delegate=e}set(e,t,r){const s=$p(e);return r?(wA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new jp(e,new oD(e),t),s.set(t,u)),u}}jp.INSTANCES=new WeakMap;class ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ba(t,new Qn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new ba(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oy(this.firestore,dR(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Qn&&hR(this._delegate,e)}set(e,t){t=wA("DocumentReference.set",t);try{return t?RR(this._delegate,e,t):RR(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PR(this._delegate,e):PR(this._delegate,e,t,...r)}catch(s){throw Ms(s,"updateDoc()","DocumentReference.update()")}}delete(){return function YN(n){return sy(sn(n.firestore,Jn),[new $m(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=jR(e),r=$R(e,s=>new c0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return NR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function GN(n){n=sn(n,Qn);const e=sn(n.firestore,Jn),t=Ur(e),r=new Jh(e);return function oN(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const m=yield function(w,C){const A=Qe(w);return A.persistence.runTransaction("read document","readonly",P=>A.localDocuments.getDocument(P,C))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new be(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Jm(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield WE(n),e,t);var r})),t.promise}(t,n._key).then(s=>new gd(e,r,n._key,s,new Bp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function qN(n){n=sn(n,Qn);const e=sn(n.firestore,Jn);return tR(Ur(e),n._key,{source:"server"}).then(t=>_A(e,n,t))}(this._delegate):function zN(n){n=sn(n,Qn);const e=sn(n.firestore,Jn);return tR(Ur(e),n._key).then(t=>_A(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ba(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function jR(n){for(const e of n)if("object"==typeof e&&!IA(e))return e;return{}}function $R(n,e){var t,r;let s;return s=IA(n[0])?n[0]:IA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MR(this._delegate,e._delegate)}}class l0 extends c0{data(e){const t=this._delegate.data(e);return function GA(n,e){n||ot()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new Rs(this.firestore,Yh(this._delegate,function NN(n,e,t){const r=e,s=tD("where",n);return o0._create(s,r,t)}(e,t,r)))}catch(s){throw Ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Yh(this._delegate,function ON(n,e="asc"){const t=e,r=tD("orderBy",n);return yA._create(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Yh(this._delegate,function kN(n){return uR("limit",n),nD._create("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Yh(this._delegate,function LN(n){return uR("limitToLast",n),nD._create("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Yh(this._delegate,function FN(...n){return rD._create("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Yh(this._delegate,function UN(...n){return rD._create("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Yh(this._delegate,function VN(...n){return iD._create("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Yh(this._delegate,function BN(...n){return iD._create("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return lA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZN(n){n=sn(n,Hi);const e=sn(n.firestore,Jn),t=Ur(e),r=new Jh(e);return function aN(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,l){try{const m=yield FE(s,u,!0),w=new HM(u,m.ir),C=w.sc(m.documents),A=w.applyChanges(C,!1);l.resolve(A.snapshot)}catch(m){const w=Jm(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield WE(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Qh(e,r,n,s))}(this._delegate):"server"===e?.source?function KN(n){n=sn(n,Hi);const e=sn(n.firestore,Jn),t=Ur(e),r=new Jh(e);return nR(t,n._query,{source:"server"}).then(s=>new Qh(e,r,n,s))}(this._delegate):function WN(n){n=sn(n,Hi);const e=sn(n.firestore,Jn),t=Ur(e),r=new Jh(e);return DR(n._query),nR(t,n._query).then(s=>new Qh(e,r,n,s))}(this._delegate),t.then(r=>new EA(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=jR(e),r=$R(e,s=>new EA(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return NR(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class wO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class EA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return MR(this._delegate,e._delegate)}}class oy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ba(this.firestore,e):null}doc(e){try{return new ba(this.firestore,void 0===e?KE(this._delegate):KE(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function QN(n,e){const t=sn(n.firestore,Jn),r=KE(n),s=sD(n.converter,e);return sy(t,[JE(Up(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ba(this.firestore,t))}isEqual(e){return hR(this._delegate,e._delegate)}withConverter(e){return new oy(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function $p(n){return sn(n,Qn)}class DA{constructor(...e){this._delegate=new pd(...e)}static documentId(){return new DA(ar.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof pd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dO(){return new hA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hp(e)}static delete(){const e=function lO(){return new t0("deleteField")}();return e._methodName="FieldValue.delete",new Hp(e)}static arrayUnion(...e){const t=function hO(...n){return new AN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hp(t)}static arrayRemove(...e){const t=function fO(...n){return new xN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hp(t)}static increment(e){const t=function pO(n){return new MN("increment",n)}(e);return t._methodName="FieldValue.increment",new Hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IO={Firestore:UR,GeoPoint:YE,Timestamp:Yn,Blob:u0,Transaction:VR,WriteBatch:BR,DocumentReference:ba,DocumentSnapshot:c0,Query:Rs,QueryDocumentSnapshot:l0,QuerySnapshot:EA,CollectionReference:oy,FieldPath:DA,FieldValue:Hp,setLogLevel:function _O(n){!function zA(n){Tc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HR(n,e){return function bO(n,e=lC.z){return new wi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bA(n,e){return HR(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return bA(n,e).pipe(ra(void 0),Dv(),(0,vt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(A=>A.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function zR(n,e,t){return aD(n,t).pipe(ia((r,s)=>function TO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function SO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function dC(n,e=Bs.y){return n=n??qw,(0,Nr.e)((t,r)=>{let s,u=!0;t.subscribe((0,gr.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,vt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function CA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function GR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function DO(n){(function EO(n,e){n.INTERNAL.registerComponent(new ph.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},IO)))})(n,(e,t)=>new UR(e,t,new vO)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Ww.Z);class qR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(ra(void 0),Dv(),mr(([r,s])=>s.length>0||!r),(0,vt.U)(([r,s])=>s),ui.iC)}auditTrail(e){return this.stateChanges(e).pipe(ia((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GR(e);return zR(this.query,t,this.afs.schedulers.outsideAngular).pipe(ui.iC)}valueChanges(e={}){return bA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ui.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ui.iC)}add(e){return this.ref.add(e)}doc(e){return new WR(this.ref.doc(e),this.afs)}}class WR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=YR(r,t);return new qR(s,u,this.afs)}snapshotChanges(){return function CO(n,e){return HR(n,e).pipe(ra(void 0),Dv(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ui.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(ui.iC)}}class AO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),mr(t=>t.length>0),ui.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(ui.iC)}auditTrail(e){return this.stateChanges(e).pipe(ia((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GR(e);return zR(this.query,t,this.afs.schedulers.outsideAngular).pipe(ui.iC)}valueChanges(e={}){return bA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),ui.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ui.iC)}}const ZR=new g.OlP("angularfire2.enableFirestorePersistence"),KR=new g.OlP("angularfire2.firestore.persistenceSettings"),xO=new g.OlP("angularfire2.firestore.settings"),MO=new g.OlP("angularfire2.firestore.use-emulator");function YR(n,e=(t=>t)){return{query:e(n),ref:n}}let RO=(()=>{class n{constructor(t,r,s,u,l,m,w,C,A,P,B,q,ue,Me,ke,rt,It){this.schedulers=w;const wt=(0,Pr.on)(t,m,r),Pt=A;P&&jg(wt,m,B,ue,Me,ke,q,rt),[this.firestore,this.persistenceEnabled$]=(0,Pr.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const zt=m.runOutsideAngular(()=>wt.firestore());if(u&&zt.settings(u),Pt&&zt.useEmulator(...Pt),s&&!ps(l)){const an=()=>{try{return(0,tn.D)(zt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(cs){return typeof console<"u"&&console.warn(cs),it(!1)}};return[zt,m.runOutsideAngular(an)]}return[zt,it(!1)]},[u,Pt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=YR(s,r),m=this.schedulers.ngZone.run(()=>u);return new qR(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new AO(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new WR(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Pr.Dh),g.LFG(Pr.xv,8),g.LFG(ZR,8),g.LFG(xO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ui.HU),g.LFG(KR,8),g.LFG(MO,8),g.LFG(qf,8),g.LFG(hv,8),g.LFG(fv,8),g.LFG(pv,8),g.LFG(Tw,8),g.LFG(Sw,8),g.LFG(Aw,8),g.LFG(Gf,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PO=(()=>{class n{constructor(){Cb.Z.registerVersion("angularfire",ui.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ZR,useValue:!0},{provide:KR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[RO]}),n})(),NO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[cC]}),n.\u0275inj=g.cJS({providers:[$l],imports:[Xo,uC,Pr.hO.initializeApp({apiKey:"AIzaSyAupGpwto-DAM6xp5hq1HdHpA8opQgcuVQ",authDomain:"scholarsmart-37766.firebaseapp.com",projectId:"scholarsmart-37766",storageBucket:"scholarsmart-37766.appspot.com",messagingSenderId:"550524140253",appId:"1:550524140253:web:13629867b5fbd7b0f23934"}),PO,$w]}),n})();el().bootstrapModule(NO).catch(n=>console.error(n))},9751:(mt,xe,k)=>{k.d(xe,{y:()=>we});var g=k(2961),Y=k(727),O=k(8822),ie=k(9635),se=k(2416),re=k(576),ye=k(2806);let we=(()=>{class W{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const qe=new W;return qe.source=this,qe.operator=Ce,qe}subscribe(Ce,qe,ut){const ge=function $(W){return W&&W instanceof g.Lv||function H(W){return W&&(0,re.m)(W.next)&&(0,re.m)(W.error)&&(0,re.m)(W.complete)}(W)&&(0,Y.Nn)(W)}(Ce)?Ce:new g.Hp(Ce,qe,ut);return(0,ye.x)(()=>{const{operator:Re,source:Pe}=this;ge.add(Re?Re.call(ge,Pe):Pe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(qe){Ce.error(qe)}}forEach(Ce,qe){return new(qe=pe(qe))((ut,ge)=>{const Re=new g.Hp({next:Pe=>{try{Ce(Pe)}catch(Be){ge(Be),Re.unsubscribe()}},error:ge,complete:ut});this.subscribe(Re)})}_subscribe(Ce){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ce)}[O.L](){return this}pipe(...Ce){return(0,ie.U)(Ce)(this)}toPromise(Ce){return new(Ce=pe(Ce))((qe,ut)=>{let ge;this.subscribe(Re=>ge=Re,Re=>ut(Re),()=>qe(ge))})}}return W.create=je=>new W(je),W})();function pe(W){var je;return null!==(je=W??se.v.Promise)&&void 0!==je?je:Promise}},7579:(mt,xe,k)=>{k.d(xe,{x:()=>ye});var g=k(9751),Y=k(727);const ie=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),re=k(2806);let ye=(()=>{class pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const W=new we(this,this);return W.operator=$,W}_throwIfClosed(){if(this.closed)throw new ie}next($){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next($)}})}error($){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:W}=this;for(;W.length;)W.shift().error($)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:W,isStopped:je,observers:Ce}=this;return W||je?Y.Lc:(this.currentObservers=null,Ce.push($),new Y.w0(()=>{this.currentObservers=null,(0,se.P)(Ce,$)}))}_checkFinalizedStatuses($){const{hasError:W,thrownError:je,isStopped:Ce}=this;W?$.error(je):Ce&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return pe.create=(H,$)=>new we(H,$),pe})();class we extends ye{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===W||W.call($,H)}error(H){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===W||W.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,W;return null!==(W=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==W?W:Y.Lc}}},2961:(mt,xe,k)=>{k.d(xe,{Hp:()=>ut,Lv:()=>W});var g=k(576),Y=k(727),O=k(2416),ie=k(7849);function se(){}const re=pe("C",void 0,void 0);function pe(Ne,Ie,Ee){return{kind:Ne,value:Ie,error:Ee}}var H=k(3410),$=k(2806);class W extends Y.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,Y.Nn)(Ie)&&Ie.add(this)):this.destination=Be}static create(Ie,Ee,He){return new ut(Ie,Ee,He)}next(Ie){this.isStopped?Pe(function we(Ne){return pe("N",Ne,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Pe(function ye(Ne){return pe("E",void 0,Ne)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Pe(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Ce(Ne,Ie){return je.call(Ne,Ie)}class qe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Ie)}catch(He){ge(He)}}error(Ie){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Ie)}catch(He){ge(He)}else ge(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Ee){ge(Ee)}}}class ut extends W{constructor(Ie,Ee,He){let Le;if(super(),(0,g.m)(Ie)||!Ie)Le={next:Ie??void 0,error:Ee??void 0,complete:He??void 0};else{let tt;this&&O.v.useDeprecatedNextContext?(tt=Object.create(Ie),tt.unsubscribe=()=>this.unsubscribe(),Le={next:Ie.next&&Ce(Ie.next,tt),error:Ie.error&&Ce(Ie.error,tt),complete:Ie.complete&&Ce(Ie.complete,tt)}):Le=Ie}this.destination=new qe(Le)}}function ge(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ne):(0,ie.h)(Ne)}function Pe(Ne,Ie){const{onStoppedNotification:Ee}=O.v;Ee&&H.z.setTimeout(()=>Ee(Ne,Ie))}const Be={closed:!0,next:se,error:function Re(Ne){throw Ne},complete:se}},727:(mt,xe,k)=>{k.d(xe,{Lc:()=>re,w0:()=>se,Nn:()=>ye});var g=k(576);const O=(0,k(3888).d)(pe=>function($){pe(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((W,je)=>`${je+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ie=k(8737);class se{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ce of $)Ce.remove(this);else $.remove(this);const{initialTeardown:W}=this;if((0,g.m)(W))try{W()}catch(Ce){H=Ce instanceof O?Ce.errors:[Ce]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Ce of je)try{we(Ce)}catch(qe){H=H??[],qe instanceof O?H=[...H,...qe.errors]:H.push(qe)}}if(H)throw new O(H)}}add(H){var $;if(H&&H!==this)if(this.closed)we(H);else{if(H instanceof se){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,ie.P)($,H)}remove(H){const{_finalizers:$}=this;$&&(0,ie.P)($,H),H instanceof se&&H._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const re=se.EMPTY;function ye(pe){return pe instanceof se||pe&&"closed"in pe&&(0,g.m)(pe.remove)&&(0,g.m)(pe.add)&&(0,g.m)(pe.unsubscribe)}function we(pe){(0,g.m)(pe)?pe():pe.unsubscribe()}},2416:(mt,xe,k)=>{k.d(xe,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,xe,k)=>{k.d(xe,{E:()=>Y});const Y=new(k(9751).y)(se=>se.complete())},8996:(mt,xe,k)=>{k.d(xe,{D:()=>Ie});var g=k(8421),Y=k(5363),O=k(9468),re=k(9751),we=k(2202),pe=k(576),H=k(9672);function W(Ee,He){if(!Ee)throw new Error("Iterable cannot be null");return new re.y(Le=>{(0,H.f)(Le,He,()=>{const tt=Ee[Symbol.asyncIterator]();(0,H.f)(Le,He,()=>{tt.next().then(ne=>{ne.done?Le.complete():Le.next(ne.value)})},0,!0)})})}var je=k(3670),Ce=k(8239),qe=k(1144),ut=k(6495),ge=k(2206),Re=k(4532),Pe=k(3260);function Ie(Ee,He){return He?function Ne(Ee,He){if(null!=Ee){if((0,je.c)(Ee))return function ie(Ee,He){return(0,g.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,qe.z)(Ee))return function ye(Ee,He){return new re.y(Le=>{let tt=0;return He.schedule(function(){tt===Ee.length?Le.complete():(Le.next(Ee[tt++]),Le.closed||this.schedule())})})}(Ee,He);if((0,Ce.t)(Ee))return function se(Ee,He){return(0,g.Xf)(Ee).pipe((0,O.R)(He),(0,Y.Q)(He))}(Ee,He);if((0,ge.D)(Ee))return W(Ee,He);if((0,ut.T)(Ee))return function $(Ee,He){return new re.y(Le=>{let tt;return(0,H.f)(Le,He,()=>{tt=Ee[we.h](),(0,H.f)(Le,He,()=>{let ne,Dt;try{({value:ne,done:Dt}=tt.next())}catch(Je){return void Le.error(Je)}Dt?Le.complete():Le.next(ne)},0,!0)}),()=>(0,pe.m)(tt?.return)&&tt.return()})}(Ee,He);if((0,Pe.L)(Ee))return function Be(Ee,He){return W((0,Pe.Q)(Ee),He)}(Ee,He)}throw(0,Re.z)(Ee)}(Ee,He):(0,g.Xf)(Ee)}},8421:(mt,xe,k)=>{k.d(xe,{Xf:()=>je});var g=k(7582),Y=k(1144),O=k(8239),ie=k(9751),se=k(3670),re=k(2206),ye=k(4532),we=k(6495),pe=k(3260),H=k(576),$=k(7849),W=k(8822);function je(Ne){if(Ne instanceof ie.y)return Ne;if(null!=Ne){if((0,se.c)(Ne))return function Ce(Ne){return new ie.y(Ie=>{const Ee=Ne[W.L]();if((0,H.m)(Ee.subscribe))return Ee.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,Y.z)(Ne))return function qe(Ne){return new ie.y(Ie=>{for(let Ee=0;Ee<Ne.length&&!Ie.closed;Ee++)Ie.next(Ne[Ee]);Ie.complete()})}(Ne);if((0,O.t)(Ne))return function ut(Ne){return new ie.y(Ie=>{Ne.then(Ee=>{Ie.closed||(Ie.next(Ee),Ie.complete())},Ee=>Ie.error(Ee)).then(null,$.h)})}(Ne);if((0,re.D)(Ne))return Re(Ne);if((0,we.T)(Ne))return function ge(Ne){return new ie.y(Ie=>{for(const Ee of Ne)if(Ie.next(Ee),Ie.closed)return;Ie.complete()})}(Ne);if((0,pe.L)(Ne))return function Pe(Ne){return Re((0,pe.Q)(Ne))}(Ne)}throw(0,ye.z)(Ne)}function Re(Ne){return new ie.y(Ie=>{(function Be(Ne,Ie){var Ee,He,Le,tt;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,g.KL)(Ne);!(He=yield Ee.next()).done;)if(Ie.next(He.value),Ie.closed)return}catch(ne){Le={error:ne}}finally{try{He&&!He.done&&(tt=Ee.return)&&(yield tt.call(Ee))}finally{if(Le)throw Le.error}}Ie.complete()})})(Ne,Ie).catch(Ee=>Ie.error(Ee))})}},6451:(mt,xe,k)=>{k.d(xe,{T:()=>re});var g=k(8189),Y=k(8421),O=k(515),ie=k(7669),se=k(8996);function re(...ye){const we=(0,ie.yG)(ye),pe=(0,ie._6)(ye,1/0),H=ye;return H.length?1===H.length?(0,Y.Xf)(H[0]):(0,g.J)(pe)((0,se.D)(H,we)):O.E}},5403:(mt,xe,k)=>{k.d(xe,{x:()=>Y});var g=k(2961);function Y(ie,se,re,ye,we){return new O(ie,se,re,ye,we)}class O extends g.Lv{constructor(se,re,ye,we,pe,H){super(se),this.onFinalize=pe,this.shouldUnsubscribe=H,this._next=re?function($){try{re($)}catch(W){se.error(W)}}:super._next,this._error=we?function($){try{we($)}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(mt,xe,k)=>{k.d(xe,{U:()=>O});var g=k(4482),Y=k(5403);function O(ie,se){return(0,g.e)((re,ye)=>{let we=0;re.subscribe((0,Y.x)(ye,pe=>{ye.next(ie.call(se,pe,we++))}))})}},8189:(mt,xe,k)=>{k.d(xe,{J:()=>O});var g=k(5577),Y=k(4671);function O(ie=1/0){return(0,g.z)(Y.y,ie)}},5577:(mt,xe,k)=>{k.d(xe,{z:()=>we});var g=k(4004),Y=k(8421),O=k(4482),ie=k(9672),se=k(5403),ye=k(576);function we(pe,H,$=1/0){return(0,ye.m)(H)?we((W,je)=>(0,g.U)((Ce,qe)=>H(W,Ce,je,qe))((0,Y.Xf)(pe(W,je))),$):("number"==typeof H&&($=H),(0,O.e)((W,je)=>function re(pe,H,$,W,je,Ce,qe,ut){const ge=[];let Re=0,Pe=0,Be=!1;const Ne=()=>{Be&&!ge.length&&!Re&&H.complete()},Ie=He=>Re<W?Ee(He):ge.push(He),Ee=He=>{Ce&&H.next(He),Re++;let Le=!1;(0,Y.Xf)($(He,Pe++)).subscribe((0,se.x)(H,tt=>{je?.(tt),Ce?Ie(tt):H.next(tt)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Re--;ge.length&&Re<W;){const tt=ge.shift();qe?(0,ie.f)(H,qe,()=>Ee(tt)):Ee(tt)}Ne()}catch(tt){H.error(tt)}}))};return pe.subscribe((0,se.x)(H,Ie,()=>{Be=!0,Ne()})),()=>{ut?.()}}(W,je,pe,$)))}},5363:(mt,xe,k)=>{k.d(xe,{Q:()=>ie});var g=k(9672),Y=k(4482),O=k(5403);function ie(se,re=0){return(0,Y.e)((ye,we)=>{ye.subscribe((0,O.x)(we,pe=>(0,g.f)(we,se,()=>we.next(pe),re),()=>(0,g.f)(we,se,()=>we.complete(),re),pe=>(0,g.f)(we,se,()=>we.error(pe),re)))})}},3099:(mt,xe,k)=>{k.d(xe,{B:()=>se});var g=k(8421),Y=k(7579),O=k(2961),ie=k(4482);function se(ye={}){const{connector:we=(()=>new Y.x),resetOnError:pe=!0,resetOnComplete:H=!0,resetOnRefCountZero:$=!0}=ye;return W=>{let je,Ce,qe,ut=0,ge=!1,Re=!1;const Pe=()=>{Ce?.unsubscribe(),Ce=void 0},Be=()=>{Pe(),je=qe=void 0,ge=Re=!1},Ne=()=>{const Ie=je;Be(),Ie?.unsubscribe()};return(0,ie.e)((Ie,Ee)=>{ut++,!Re&&!ge&&Pe();const He=qe=qe??we();Ee.add(()=>{ut--,0===ut&&!Re&&!ge&&(Ce=re(Ne,$))}),He.subscribe(Ee),!je&&ut>0&&(je=new O.Hp({next:Le=>He.next(Le),error:Le=>{Re=!0,Pe(),Ce=re(Be,pe,Le),He.error(Le)},complete:()=>{ge=!0,Pe(),Ce=re(Be,H),He.complete()}}),(0,g.Xf)(Ie).subscribe(je))})(W)}}function re(ye,we,...pe){if(!0===we)return void ye();if(!1===we)return;const H=new O.Hp({next:()=>{H.unsubscribe(),ye()}});return(0,g.Xf)(we(...pe)).subscribe(H)}},9468:(mt,xe,k)=>{k.d(xe,{R:()=>Y});var g=k(4482);function Y(O,ie=0){return(0,g.e)((se,re)=>{re.add(O.schedule(()=>se.subscribe(re),ie))})}},8505:(mt,xe,k)=>{k.d(xe,{b:()=>se});var g=k(576),Y=k(4482),O=k(5403),ie=k(4671);function se(re,ye,we){const pe=(0,g.m)(re)||ye||we?{next:re,error:ye,complete:we}:re;return pe?(0,Y.e)((H,$)=>{var W;null===(W=pe.subscribe)||void 0===W||W.call(pe);let je=!0;H.subscribe((0,O.x)($,Ce=>{var qe;null===(qe=pe.next)||void 0===qe||qe.call(pe,Ce),$.next(Ce)},()=>{var Ce;je=!1,null===(Ce=pe.complete)||void 0===Ce||Ce.call(pe),$.complete()},Ce=>{var qe;je=!1,null===(qe=pe.error)||void 0===qe||qe.call(pe,Ce),$.error(Ce)},()=>{var Ce,qe;je&&(null===(Ce=pe.unsubscribe)||void 0===Ce||Ce.call(pe)),null===(qe=pe.finalize)||void 0===qe||qe.call(pe)}))}):ie.y}},4408:(mt,xe,k)=>{k.d(xe,{o:()=>se});var g=k(727);class Y extends g.w0{constructor(ye,we){super()}schedule(ye,we=0){return this}}const O={setInterval(re,ye,...we){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(re,ye,...we):setInterval(re,ye,...we)},clearInterval(re){const{delegate:ye}=O;return(ye?.clearInterval||clearInterval)(re)},delegate:void 0};var ie=k(8737);class se extends Y{constructor(ye,we){super(ye,we),this.scheduler=ye,this.work=we,this.pending=!1}schedule(ye,we=0){var pe;if(this.closed)return this;this.state=ye;const H=this.id,$=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId($,H,we)),this.pending=!0,this.delay=we,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId($,this.id,we),this}requestAsyncId(ye,we,pe=0){return O.setInterval(ye.flush.bind(ye,this),pe)}recycleAsyncId(ye,we,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return we;null!=we&&O.clearInterval(we)}execute(ye,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ye,we);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,we){let H,pe=!1;try{this.work(ye)}catch($){pe=!0,H=$||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ye,scheduler:we}=this,{actions:pe}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(pe,this),null!=ye&&(this.id=this.recycleAsyncId(we,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,xe,k)=>{k.d(xe,{v:()=>O});var g=k(6063);class Y{constructor(se,re=Y.now){this.schedulerActionCtor=se,this.now=re}schedule(se,re=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,re)}}Y.now=g.l.now;class O extends Y{constructor(se,re=Y.now){super(se,re),this.actions=[],this._active=!1}flush(se){const{actions:re}=this;if(this._active)return void re.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=re.shift());if(this._active=!1,ye){for(;se=re.shift();)se.unsubscribe();throw ye}}}},4986:(mt,xe,k)=>{k.d(xe,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(mt,xe,k)=>{k.d(xe,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(mt,xe,k)=>{k.d(xe,{z:()=>g});const g={setTimeout(Y,O,...ie){const{delegate:se}=g;return se?.setTimeout?se.setTimeout(Y,O,...ie):setTimeout(Y,O,...ie)},clearTimeout(Y){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(mt,xe,k)=>{k.d(xe,{h:()=>Y});const Y=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,xe,k)=>{k.d(xe,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,xe,k)=>{k.d(xe,{_6:()=>re,jO:()=>ie,yG:()=>se});var g=k(576);function O(ye){return ye[ye.length-1]}function ie(ye){return(0,g.m)(O(ye))?ye.pop():void 0}function se(ye){return function Y(ye){return ye&&(0,g.m)(ye.schedule)}(O(ye))?ye.pop():void 0}function re(ye,we){return"number"==typeof O(ye)?ye.pop():we}},8737:(mt,xe,k)=>{function g(Y,O){if(Y){const ie=Y.indexOf(O);0<=ie&&Y.splice(ie,1)}}k.d(xe,{P:()=>g})},3888:(mt,xe,k)=>{function g(Y){const ie=Y(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(xe,{d:()=>g})},2806:(mt,xe,k)=>{k.d(xe,{O:()=>ie,x:()=>O});var g=k(2416);let Y=null;function O(se){if(g.v.useDeprecatedSynchronousErrorHandling){const re=!Y;if(re&&(Y={errorThrown:!1,error:null}),se(),re){const{errorThrown:ye,error:we}=Y;if(Y=null,ye)throw we}}else se()}function ie(se){g.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=se)}},9672:(mt,xe,k)=>{function g(Y,O,ie,se=0,re=!1){const ye=O.schedule(function(){ie(),re?Y.add(this.schedule(null,se)):this.unsubscribe()},se);if(Y.add(ye),!re)return ye}k.d(xe,{f:()=>g})},4671:(mt,xe,k)=>{function g(Y){return Y}k.d(xe,{y:()=>g})},1144:(mt,xe,k)=>{k.d(xe,{z:()=>g});const g=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(mt,xe,k)=>{k.d(xe,{D:()=>Y});var g=k(576);function Y(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(mt,xe,k)=>{function g(Y){return"function"==typeof Y}k.d(xe,{m:()=>g})},3670:(mt,xe,k)=>{k.d(xe,{c:()=>O});var g=k(8822),Y=k(576);function O(ie){return(0,Y.m)(ie[g.L])}},6495:(mt,xe,k)=>{k.d(xe,{T:()=>O});var g=k(2202),Y=k(576);function O(ie){return(0,Y.m)(ie?.[g.h])}},8239:(mt,xe,k)=>{k.d(xe,{t:()=>Y});var g=k(576);function Y(O){return(0,g.m)(O?.then)}},3260:(mt,xe,k)=>{k.d(xe,{L:()=>ie,Q:()=>O});var g=k(7582),Y=k(576);function O(se){return(0,g.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:we,done:pe}=yield(0,g.qq)(ye.read());if(pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(we)}}finally{ye.releaseLock()}})}function ie(se){return(0,Y.m)(se?.getReader)}},4482:(mt,xe,k)=>{k.d(xe,{A:()=>Y,e:()=>O});var g=k(576);function Y(ie){return(0,g.m)(ie?.lift)}function O(ie){return se=>{if(Y(se))return se.lift(function(re){try{return ie(re,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(mt,xe,k)=>{k.d(xe,{U:()=>O,z:()=>Y});var g=k(4671);function Y(...ie){return O(ie)}function O(ie){return 0===ie.length?g.y:1===ie.length?ie[0]:function(re){return ie.reduce((ye,we)=>we(ye),re)}}},7849:(mt,xe,k)=>{k.d(xe,{h:()=>O});var g=k(2416),Y=k(3410);function O(ie){Y.z.setTimeout(()=>{const{onUnhandledError:se}=g.v;if(!se)throw ie;se(ie)})}},4532:(mt,xe,k)=>{function g(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(xe,{z:()=>g})},4650:(mt,xe,k)=>{k.d(xe,{$8M:()=>Jo,$WT:()=>dr,$Z:()=>Z0,AFp:()=>QI,AaK:()=>we,BQk:()=>dv,CHM:()=>ka,CRH:()=>e_,CZH:()=>bm,CqO:()=>Db,D6c:()=>vE,EJc:()=>eE,EpF:()=>Ew,F4k:()=>Eb,FYo:()=>lh,FiY:()=>Ka,GfV:()=>b0,JOm:()=>si,KtG:()=>La,LFG:()=>en,LSH:()=>bl,Lbi:()=>YC,Lck:()=>Hv,MAs:()=>Ug,MMx:()=>Kl,MR2:()=>cD,NdJ:()=>bw,OlP:()=>Zt,Oqu:()=>wv,P3R:()=>ih,PXZ:()=>tT,Q6J:()=>Gf,QGY:()=>Dw,Qsj:()=>D0,R0b:()=>Un,RDi:()=>ug,Rgc:()=>Oh,SBq:()=>fc,Sil:()=>QC,Suo:()=>BI,TTD:()=>$c,TgZ:()=>lv,X6Q:()=>iT,XFs:()=>pt,Xpm:()=>Pi,Xts:()=>Cy,Y36:()=>Pl,YKP:()=>up,YNc:()=>vw,Yjl:()=>Bt,Yz7:()=>lt,Z0I:()=>In,ZZ4:()=>vu,_UZ:()=>Iw,_Vd:()=>ch,_c5:()=>dT,_uU:()=>_v,aQg:()=>km,c2e:()=>XI,cJS:()=>ft,cg1:()=>Ch,dDg:()=>xc,dqk:()=>Qt,eFA:()=>__,eJc:()=>vm,eoX:()=>iE,f3M:()=>An,g9A:()=>g_,h0i:()=>Ec,hGG:()=>hT,hij:()=>Iv,iGM:()=>Xv,ifc:()=>ve,ip1:()=>f_,jDz:()=>cp,kL8:()=>pu,lG2:()=>Et,lqb:()=>Al,lri:()=>rE,n5z:()=>qu,oAB:()=>X,oxw:()=>pv,q4F:()=>C0,qLn:()=>Nf,qZA:()=>Vg,rWj:()=>Vh,s9C:()=>jg,sBO:()=>pE,s_b:()=>vp,soG:()=>gu,tb:()=>Bh,tp0:()=>Bs,uIk:()=>mh,vHH:()=>ge,vpe:()=>is,wAp:()=>bt,xp6:()=>Of,ynx:()=>Bg,z2F:()=>Mm,zSh:()=>uh,zs3:()=>gc});var g=k(7579),Y=k(727),O=k(9751),ie=k(6451),se=k(3099);function re(i){for(let o in i)if(i[o]===re)return o;throw Error("Could not find renamed property on target object.")}function we(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(we).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const H=re({__forward_ref__:re});function $(i){return i.__forward_ref__=$,i.toString=function(){return we(this())},i}function W(i){return je(i)?i():i}function je(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===$}function Ce(i){return i&&!!i.\u0275providers}const ut="https://g.co/ng/security#xss";class ge extends Error{constructor(o,a){super(Re(o,a)),this.code=o}}function Re(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Pe(i){return"string"==typeof i?i:null==i?"":String(i)}function He(i,o){throw new ge(-201,!1)}function me(i,o){null==i&&function oe(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function lt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function ft(i){return{providers:i.providers||[],imports:i.imports||[]}}function Gt(i){return gn(i,Sn)||gn(i,Qr)}function In(i){return null!==Gt(i)}function gn(i,o){return i.hasOwnProperty(o)?i[o]:null}function cr(i){return i&&(i.hasOwnProperty(Vr)||i.hasOwnProperty(Ar))?i[Vr]:null}const Sn=re({\u0275prov:re}),Vr=re({\u0275inj:re}),Qr=re({ngInjectableDef:re}),Ar=re({ngInjectorDef:re});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Jr;function wr(i){const o=Jr;return Jr=i,o}function Br(i,o,a){const c=Gt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&pt.Optional?null:void 0!==o?o:void He(we(i))}const Qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hi={},Xr="__NG_DI_FLAG__",lr="ngTempTokenPath",jr="ngTokenPath",Tn=/\n/gm,ei="\u0275",dn="__source";let Ns;function Wt(i){const o=Ns;return Ns=i,o}function qi(i,o=pt.Default){if(void 0===Ns)throw new ge(-203,!1);return null===Ns?Br(i,void 0,o):Ns.get(i,o&pt.Optional?null:void 0,o)}function en(i,o=pt.Default){return(function Uc(){return Jr}()||qi)(W(i),o)}function An(i,o=pt.Default){return en(i,$n(o))}function $n(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Mi(i){const o=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let d,p=pt.Default;for(let v=0;v<c.length;v++){const E=c[v],b=Ri(E);"number"==typeof b?-1===b?d=E.token:p|=b:d=E}o.push(en(d,p))}else o.push(en(c))}return o}function _n(i,o){return i[Xr]=o,i.prototype[Xr]=o,i}function Ri(i){return i[Xr]}function F(i){return{toString:i}.toString()}var G=(()=>((G=G||{})[G.OnPush=0]="OnPush",G[G.Default=1]="Default",G))(),ve=(()=>{return(i=ve||(ve={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ve;var i})();const Q={},Ue=[],Ct=re({\u0275cmp:re}),Kt=re({\u0275dir:re}),kn=re({\u0275pipe:re}),En=re({\u0275mod:re}),on=re({\u0275fac:re}),Ht=re({__NG_ELEMENT_ID__:re});let xr=0;function Pi(i){return F(()=>{const o=_u(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===G.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||ve.Emulated,id:"c"+xr++,styles:i.styles||Ue,_:null,schemas:i.schemas||null,tView:null};ef(a);const c=i.dependencies;return a.directiveDefs=ro(c,!1),a.pipeDefs=ro(c,!0),a})}function Ca(i){return gt(i)||Jt(i)}function de(i){return null!==i}function X(i){return F(()=>({type:i.type,bootstrap:i.bootstrap||Ue,declarations:i.declarations||Ue,imports:i.imports||Ue,exports:i.exports||Ue,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ht(i,o){if(null==i)return Q;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}function Et(i){return F(()=>{const o=_u(i);return ef(o),o})}function Bt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function gt(i){return i[Ct]||null}function Jt(i){return i[Kt]||null}function Yt(i){return i[kn]||null}function dr(i){const o=gt(i)||Jt(i)||Yt(i);return null!==o&&o.standalone}function Hn(i,o){const a=i[En]||null;if(!a&&!0===o)throw new Error(`Type ${we(i)} does not have '\u0275mod' property.`);return a}function _u(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Ue,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ht(i.inputs,o),outputs:ht(i.outputs)}}function ef(i){i.features?.forEach(o=>o(i))}function ro(i,o){if(!i)return null;const a=o?Yt:Ca;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(de)}const pi=0,We=1,Ot=2,wn=3,gi=4,un=5,zn=6,io=7,xn=8,Ta=9,ls=10,Vt=11,Sa=12,so=13,ds=14,oo=15,Ln=16,Vo=17,hs=18,Zi=19,Bo=20,Ir=21,mn=22,Aa=1,Vc=2,jo=7,Os=8,ao=9,hr=10;function ni(i){return Array.isArray(i)&&"object"==typeof i[Aa]}function ri(i){return Array.isArray(i)&&!0===i[Aa]}function xa(i){return 0!=(4&i.flags)}function $o(i){return i.componentOffset>-1}function Bc(i){return 1==(1&i.flags)}function mi(i){return!!i.template}function Iu(i){return 0!=(256&i[Ot])}function Ki(i,o){return i.hasOwnProperty(on)?i[on]:null}class uo{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function $c(){return Ma}function Ma(i){return i.type.prototype.ngOnChanges&&(i.setInput=Hc),wd}function wd(){const i=sf(this),o=i?.current;if(o){const a=i.previous;if(a===Q)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Hc(i,o,a,c){const d=this.declaredInputs[a],p=sf(i)||function Ra(i,o){return i[ks]=o}(i,{previous:Q,current:null}),v=p.current||(p.current={}),E=p.previous,b=E[d];v[d]=new uo(b&&b.currentValue,o,E===Q),i[c]=o}$c.ngInherit=!0;const ks="__ngSimpleChanges__";function sf(i){return i[ks]||null}const Hr=function(i,o,a){};function fr(i){for(;Array.isArray(i);)i=i[pi];return i}function pr(i,o){return fr(o[i.index])}function Ed(i,o){return i.data[o]}function Xn(i,o){const a=o[i];return ni(a)?a:a[pi]}function ms(i){return 64==(64&i[Ot])}function Fs(i,o){return null==o?null:i[o]}function Go(i){i[hs]=0}function Na(i,o){i[un]+=o;let a=i,c=i[wn];for(;null!==c&&(1===o&&1===a[un]||-1===o&&0===a[un]);)c[un]+=o,a=c,c=c[wn]}const Mt={lFrame:qc(null),bindingsEnabled:!0};function Su(){return Mt.bindingsEnabled}function he(){return Mt.lFrame.lView}function kt(){return Mt.lFrame.tView}function ka(i){return Mt.lFrame.contextLView=i,i[xn]}function La(i){return Mt.lFrame.contextLView=null,i}function er(){let i=co();for(;null!==i&&64===i.type;)i=i.parent;return i}function co(){return Mt.lFrame.currentTNode}function zr(i,o){const a=Mt.lFrame;a.currentTNode=i,a.isParent=o}function Sd(){return Mt.lFrame.isParent}function xu(){Mt.lFrame.isParent=!1}function lo(){return Mt.lFrame.bindingIndex++}function Mu(i,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,qn(o)}function qn(i){Mt.lFrame.currentDirectiveIndex=i}function Gc(){return Mt.lFrame.currentQueryIndex}function Ru(i){Mt.lFrame.currentQueryIndex=i}function xd(i){const o=i[We];return 2===o.type?o.declTNode:1===o.type?i[zn]:null}function Pu(i,o,a){if(a&pt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&pt.Host||(d=xd(p),null===d||(p=p[oo],10&d.type))););if(null===d)return!1;o=d,i=p}const c=Mt.lFrame=Va();return c.currentTNode=o,c.lView=i,!0}function Nu(i){const o=Va(),a=i[We];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Va(){const i=Mt.lFrame,o=null===i?null:i.child;return null===o?qc(i):o}function qc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ba(){const i=Mt.lFrame;return Mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Md=Ba;function Ou(){const i=Ba();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Er(){return Mt.lFrame.selectedIndex}function vs(i){Mt.lFrame.selectedIndex=i}function Dn(){const i=Mt.lFrame;return Ed(i.tView,i.selectedIndex)}function Fu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=p;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks??(i.contentHooks=[])).push(a,E),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks??(i.viewHooks=[])).push(-a,b),x&&((i.viewHooks??(i.viewHooks=[])).push(a,x),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,x)),null!=R&&(i.destroyHooks??(i.destroyHooks=[])).push(a,R)}}function Wc(i,o,a){Kc(i,o,3,a)}function Zc(i,o,a,c){(3&i[Ot])===a&&Kc(i,o,a,c)}function Pd(i,o){let a=i[Ot];(3&a)===o&&(a&=2047,a+=1,i[Ot]=a)}function Kc(i,o,a,c){const p=c??-1,v=o.length-1;let E=0;for(let b=void 0!==c?65535&i[hs]:0;b<v;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(i[hs]+=65536),(E<p||-1==p)&&(Wo(i,a,o,b),i[hs]=(4294901760&i[hs])+b+2),b++}function Wo(i,o,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[Ot]>>11<i[hs]>>16&&(3&i[Ot])===o){i[Ot]+=2048,Hr(4,E,p);try{p.call(E)}finally{Hr(5,E,p)}}}else{Hr(4,E,p);try{p.call(E)}finally{Hr(5,E,p)}}}const Zo=-1;class _s{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ko(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],v=a[c++],E=a[c++];i.setAttribute(o,v,E,p)}else{const p=d,v=a[++c];go(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),c++}}return c}function Yc(i){return 3===i||4===i||6===i}function go(i){return 64===i.charCodeAt(0)}function mo(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Bu(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Bu(i,o,a,c,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function yo(i){return i!==Zo}function Us(i){return 32767&i}function vo(i,o){let a=function Nd(i){return i>>16}(i),c=o;for(;a>0;)c=c[oo],a--;return c}let ju=!0;function $a(i){const o=ju;return ju=i,o}const $u=255,Od=5;let _o=0;const Oi={};function Qc(i,o){const a=Qo(i,o);if(-1!==a)return a;const c=o[We];c.firstCreatePass&&(i.injectorIndex=o.length,Yo(c.data,i),Yo(o,null),Yo(c.blueprint,null));const d=kd(i,o),p=i.injectorIndex;if(yo(d)){const v=Us(d),E=vo(d,o),b=E[We].data;for(let x=0;x<8;x++)o[p+x]=E[v+x]|b[v+x]}return o[p+8]=d,p}function Yo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Qo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function kd(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Ga(d),null===c)return Zo;if(a++,d=d[oo],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Zo}function hn(i,o,a){!function ws(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ht)&&(c=a[Ht]),null==c&&(c=a[Ht]=_o++);const d=c&$u;o.data[i+(d>>Od)]|=1<<d}(i,o,a)}function Hu(i,o,a){if(a&pt.Optional||void 0!==i)return i;He()}function Jc(i,o,a,c){if(a&pt.Optional&&void 0===c&&(c=null),!(a&(pt.Self|pt.Host))){const d=i[Ta],p=wr(void 0);try{return d?d.get(o,c,a&pt.Optional):Br(o,c,a&pt.Optional)}finally{wr(p)}}return Hu(c,0,a)}function zu(i,o,a,c=pt.Default,d){if(null!==i){if(1024&o[Ot]){const v=function el(i,o,a,c,d){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[Ot]&&!(256&v[Ot]);){const E=Gu(p,v,a,c|pt.Self,Oi);if(E!==Oi)return E;let b=p.parent;if(!b){const x=v[Ir];if(x){const R=x.get(a,Oi,c);if(R!==Oi)return R}b=Ga(v),v=v[oo]}p=b}return d}(i,o,a,c,Oi);if(v!==Oi)return v}const p=Gu(i,o,a,c,Oi);if(p!==Oi)return p}return Jc(o,a,c,d)}function Gu(i,o,a,c,d){const p=function Xc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ht)?i[Ht]:void 0;return"number"==typeof o?o>=0?o&$u:hf:o}(a);if("function"==typeof p){if(!Pu(o,i,c))return c&pt.Host?Hu(d,0,c):Jc(o,a,c,d);try{const v=p(c);if(null!=v||c&pt.Optional)return v;He()}finally{Md()}}else if("number"==typeof p){let v=null,E=Qo(i,o),b=Zo,x=c&pt.Host?o[Ln][zn]:null;for((-1===E||c&pt.SkipSelf)&&(b=-1===E?kd(i,o):o[E+8],b!==Zo&&za(c,!1)?(v=o[We],E=Us(b),o=vo(b,o)):E=-1);-1!==E;){const R=o[We];if(Ha(p,E,R.data)){const L=tr(E,o,a,v,c,x);if(L!==Oi)return L}b=o[E+8],b!==Zo&&za(c,o[We].data[E+8]===x)&&Ha(p,E,o)?(v=R,E=Us(b),o=vo(b,o)):E=-1}}return d}function tr(i,o,a,c,d,p){const v=o[We],E=v.data[i+8],R=wo(E,v,a,null==c?$o(E)&&ju:c!=v&&0!=(3&E.type),d&pt.Host&&p===E);return null!==R?Fn(o,v,R,E):Oi}function wo(i,o,a,c,d){const p=i.providerIndexes,v=o.data,E=1048575&p,b=i.directiveStart,R=p>>20,z=d?E+R:i.directiveEnd;for(let J=c?E:E+R;J<z;J++){const _e=v[J];if(J<b&&a===_e||J>=b&&_e.type===a)return J}if(d){const J=v[b];if(J&&mi(J)&&J.type===a)return b}return null}function Fn(i,o,a,c){let d=i[a];const p=o.data;if(function Jp(i){return i instanceof _s}(d)){const v=d;v.resolving&&function Ne(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ge(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Pe(i)}(p[a]));const E=$a(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?wr(v.injectImpl):null;Pu(i,c,pt.Default);try{d=i[a]=v.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Qp(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=Ma(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&wr(b),$a(E),v.resolving=!1,Md()}}return d}function Ha(i,o,a){return!!(a[o+(i>>Od)]&1<<i)}function za(i,o){return!(i&pt.Self||i&pt.Host&&o)}class Is{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return zu(this._tNode,this._lView,o,$n(c),a)}}function hf(){return new Is(er(),he())}function qu(i){return F(()=>{const o=i.prototype.constructor,a=o[on]||Io(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[on]||Io(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Io(i){return je(i)?()=>{const o=Io(W(i));return o&&o()}:Ki(i)}function Ga(i){const o=i[We],a=o.type;return 2===a?o.declTNode:1===a?i[zn]:null}function Jo(i){return function Ld(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(Yc(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(er(),i)}const Xo="__parameters__";function Do(i,o,a){return F(()=>{const c=function Eo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return E.annotation=v,E;function E(b,x,R){const L=b.hasOwnProperty(Xo)?b[Xo]:Object.defineProperty(b,Xo,{value:[]})[Xo];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Zt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=lt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qi(i,o){i.forEach(a=>Array.isArray(a)?Qi(a,o):o(a))}function yf(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Co(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}const Ka=_n(Do("Optional"),8),Bs=_n(Do("SkipSelf"),4);var si=(()=>((si=si||{})[si.Important=1]="Important",si[si.DashCase=2]="DashCase",si))();const zd=new Map;let Gd=0;const Z="__ngContext__";function te(i,o){ni(o)?(i[Z]=o[Bo],function qd(i){zd.set(i[Bo],i)}(o)):i[Z]=o}let yr;function tc(i,o){return yr(i,o)}function eu(i){const o=i[wn];return ri(o)?o[wn]:o}function oa(i){return rc(i[so])}function tu(i){return rc(i[gi])}function rc(i){for(;null!==i&&!ri(i);)i=i[gi];return i}function nu(i,o,a,c,d){if(null!=c){let p,v=!1;ri(c)?p=c:ni(c)&&(v=!0,c=c[pi]);const E=fr(c);0===i&&null!==a?null==d?gl(o,a,E):ic(o,a,E,d||null,!0):1===i&&null!==a?ic(o,a,E,d||null,!0):2===i?function la(i,o,a){const c=aa(i,o);c&&function yy(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,v):3===i&&o.destroyNode(E),null!=p&&function ag(i,o,a,c,d){const p=a[jo];p!==fr(a)&&nu(o,i,c,p,d);for(let E=hr;E<a.length;E++){const b=a[E];su(b[We],b,i,o,c,p)}}(o,i,p,a,d)}}function Zd(i,o,a){return i.createElement(o,a)}function rg(i,o){const a=i[ao],c=a.indexOf(o),d=o[wn];512&o[Ot]&&(o[Ot]&=-513,Na(d,-1)),a.splice(c,1)}function pl(i,o){if(i.length<=hr)return;const a=hr+o,c=i[a];if(c){const d=c[Vo];null!==d&&d!==i&&rg(d,c),o>0&&(i[a-1][gi]=c[gi]);const p=Co(i,hr+o);!function fy(i,o){su(i,o,o[Vt],2,null,null),o[pi]=null,o[zn]=null}(c[We],c);const v=p[Zi];null!==v&&v.detachView(p[We]),c[wn]=null,c[gi]=null,c[Ot]&=-65}return c}function ig(i,o){if(!(128&o[Ot])){const a=o[Vt];a.destroyNode&&su(i,o,a,3,null,null),function If(i){let o=i[so];if(!o)return iu(i[We],i);for(;o;){let a=null;if(ni(o))a=o[so];else{const c=o[hr];c&&(a=c)}if(!a){for(;o&&!o[gi]&&o!==i;)ni(o)&&iu(o[We],o),o=o[wn];null===o&&(o=i),ni(o)&&iu(o[We],o),a=o&&o[gi]}o=a}}(o)}}function iu(i,o){if(!(128&o[Ot])){o[Ot]&=-65,o[Ot]|=128,function my(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof _s)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=d[p[v]],b=p[v+1];Hr(4,E,b);try{b.call(E)}finally{Hr(5,E,b)}}else{Hr(4,d,p);try{p.call(d)}finally{Hr(5,d,p)}}}}}(i,o),function Kd(i,o){const a=i.cleanup,c=o[io];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),p+=2}else{const v=c[d=a[p+1]];a[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[io]=null}}(i,o),1===o[We].type&&o[Vt].destroy();const a=o[Vo];if(null!==a&&ri(o[wn])){a!==o[wn]&&rg(a,o);const c=o[Zi];null!==c&&c.detachView(i)}!function I(i){zd.delete(i[Bo])}(o)}}function Gs(i,o,a){return function Yd(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[pi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===ve.None||p===ve.Emulated)return null}return pr(c,a)}}(i,o.parent,a)}function ic(i,o,a,c,d){i.insertBefore(o,a,c,d)}function gl(i,o,a){i.appendChild(o,a)}function Ef(i,o,a,c,d){null!==c?ic(i,o,a,c,d):gl(i,o,a)}function aa(i,o){return i.parentNode(o)}let ua,_l,uc,Df=function ml(i,o,a){return 40&i.type?pr(i,a):null};function oc(i,o,a,c){const d=Gs(i,c,o),p=o[Vt],E=function Jd(i,o,a){return Df(i,o,a)}(c.parent||o[zn],c,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)Ef(p,d,a[b],E,!1);else Ef(p,d,a,E,!1);void 0!==ua&&ua(p,c,o,a,d)}function yl(i,o){if(null!==o){const a=o.type;if(3&a)return pr(o,i);if(4&a)return ca(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return yl(i,c);{const d=i[o.index];return ri(d)?ca(-1,d):fr(d)}}if(32&a)return tc(o,i)()||fr(i[o.index]);{const c=sg(i,o);return null!==c?Array.isArray(c)?c[0]:yl(eu(i[Ln]),c):yl(i,o.next)}}return null}function sg(i,o){return null!==o?i[Ln][zn].projection[o.projection]:null}function ca(i,o){const a=hr+i+1;if(a<o.length){const c=o[a],d=c[We].firstChild;if(null!==d)return yl(c,d)}return o[jo]}function bf(i,o,a,c,d,p,v){for(;null!=a;){const E=c[a.index],b=a.type;if(v&&0===o&&(E&&te(fr(E),c),a.flags|=2),32!=(32&a.flags))if(8&b)bf(i,o,a.child,c,d,p,!1),nu(o,i,d,E,p);else if(32&b){const x=tc(a,c);let R;for(;R=x();)nu(o,i,d,R,p);nu(o,i,d,E,p)}else 16&b?Cf(i,o,c,a,d,p):nu(o,i,d,E,p);a=v?a.projectionNext:a.next}}function su(i,o,a,c,d,p){bf(a,c,i.firstChild,o,d,p,!1)}function Cf(i,o,a,c,d,p){const v=a[Ln],b=v[zn].projection[c.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)nu(o,i,d,b[x],p);else bf(i,o,b,v[wn],d,p,!0)}function da(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function ha(i,o,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Ko(i,o,c),null!==d&&da(i,o,d),null!==p&&function qs(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function ug(i){_l=i}function eh(i){return function Sf(){if(void 0===uc&&(uc=null,Qt.trustedTypes))try{uc=Qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return uc}()?.createScriptURL(i)||i}class lg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function kr(i){return i instanceof lg?i.changingThisBreaksApplicationSecurity:i}function ga(i,o){const a=function Ro(i){return i instanceof lg&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ut})`)}return a===o}const th=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function bl(i){const o=hc();return o?o.sanitize(Kn.URL,i)||"":ga(i,"URL")?kr(i):function El(i){return(i=String(i)).match(th)?i:"unsafe:"+i}(Pe(i))}function Mf(i){const o=hc();if(o)return eh(o.sanitize(Kn.RESOURCE_URL,i)||"");if(ga(i,"ResourceURL"))return eh(kr(i));throw new ge(904,!1)}function ih(i,o,a){return function Cl(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Mf:bl}(o,a)(i)}function hc(){const i=he();return i&&i[Sa]}const Cy=new Zt("ENVIRONMENT_INITIALIZER"),p0=new Zt("INJECTOR",-1),Tl=new Zt("INJECTOR_DEF_TYPES");class sh{get(o,a=hi){if(a===hi){const c=new Error(`NullInjectorError: No provider for ${we(o)}!`);throw c.name="NullInjectorError",c}return a}}function cD(i){return{\u0275providers:i}}function lD(...i){return{\u0275providers:oh(0,i),\u0275fromNgModule:!0}}function oh(i,...o){const a=[],c=new Set;let d;return Qi(o,p=>{const v=p;Ty(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&ah(d,a),a}function ah(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Sy(d,p=>{o.push(p)})}}function Ty(i,o,a,c){if(!(i=W(i)))return!1;let d=null,p=cr(i);const v=!p&&gt(i);if(p||v){if(v&&!v.standalone)return!1;d=i}else{const b=i.ngModule;if(p=cr(b),!p)return!1;d=b}const E=c.has(d);if(v){if(E)return!1;if(c.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of b)Ty(x,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let x;c.add(d);try{Qi(p.imports,R=>{Ty(R,o,a,c)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&ah(x,o)}if(!E){const x=Ki(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Ue},{provide:Tl,useValue:d,multi:!0},{provide:Cy,useValue:()=>en(d),multi:!0})}const b=p.providers;null==b||E||Sy(b,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}function Sy(i,o){for(let a of i)Ce(a)&&(a=a.\u0275providers),Array.isArray(a)?Sy(a,o):o(a)}const dD=re({provide:String,useValue:re});function Ay(i){return null!==i&&"object"==typeof i&&dD in i}function Sl(i){return"function"==typeof i}const uh=new Zt("Set Injector scope."),au={},fD={};let My;function yg(){return void 0===My&&(My=new sh),My}class Al{}class m0 extends Al{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pf(o,v=>this.processProvider(v)),this.records.set(p0,xl(void 0,this)),d.has("environment")&&this.records.set(Al,xl(void 0,this));const p=this.records.get(uh);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Tl.multi,Ue,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Wt(this),c=wr(void 0);try{return o()}finally{Wt(a),wr(c)}}get(o,a=hi,c=pt.Default){this.assertNotDestroyed(),c=$n(c);const d=Wt(this),p=wr(void 0);try{if(!(c&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function v0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Zt}(o)&&Gt(o);E=b&&this.injectableDefInScope(b)?xl(Ry(o),au):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&pt.Self?yg():this.parent).get(o,a=c&pt.Optional&&a===hi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[lr]=v[lr]||[]).unshift(we(o)),d)throw v;return function $r(i,o,a,c){const d=i[lr];throw o[dn]&&d.unshift(o[dn]),i.message=function V(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==ei?i.slice(2):i;let d=we(o);if(Array.isArray(o))d=o.map(we).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):we(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Tn,"\n  ")}`}("\n"+i.message,d,a,c),i[jr]=d,i[lr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{wr(p),Wt(d)}}resolveInjectorInitializers(){const o=Wt(this),a=wr(void 0);try{const c=this.get(Cy.multi,Ue,pt.Self);for(const d of c)d()}finally{Wt(o),wr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(we(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(o){let a=Sl(o=W(o))?o:W(o&&o.provide);const c=function gD(i){return Ay(i)?xl(void 0,i.useValue):xl(function y0(i,o,a){let c;if(Sl(i)){const d=W(i);return Ki(d)||Ry(d)}if(Ay(i))c=()=>W(i.useValue);else if(function hD(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Mi(i.deps||[]));else if(function g0(i){return!(!i||!i.useExisting)}(i))c=()=>en(W(i.useExisting));else{const d=W(i&&(i.useClass||i.provide));if(!function mD(i){return!!i.deps}(i))return Ki(d)||Ry(d);c=()=>new d(...Mi(i.deps))}return c}(i),au)}(o);if(Sl(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=xl(void 0,au,!0),d.factory=()=>Mi(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===au&&(a.value=fD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Py(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ry(i){const o=Gt(i),a=null!==o?o.factory:Ki(i);if(null!==a)return a;if(i instanceof Zt)throw new ge(204,!1);if(i instanceof Function)return function pD(i){const o=i.length;if(o>0)throw function Zu(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ge(204,!1);const a=function On(i){return i&&(i[Sn]||i[Qr])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ge(204,!1)}function xl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Pf(i,o){for(const a of i)Array.isArray(a)?Pf(a,o):a&&Ce(a)?Pf(a.\u0275providers,o):o(a)}class vg{}class _0{}class _g{resolveComponentFactory(o){throw function yD(i){const o=Error(`No component factory found for ${we(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let ch=(()=>{class i{}return i.NULL=new _g,i})();function I0(){return uu(er(),he())}function uu(i,o){return new fc(pr(i,o))}let fc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=I0,i})();function E0(i){return i instanceof fc?i.nativeElement:i}class lh{}let D0=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function vD(){const i=he(),a=Xn(er().index,i);return(ni(a)?a:i)[Vt]}(),i})(),_D=(()=>{class i{}return i.\u0275prov=lt({token:i,providedIn:"root",factory:()=>null}),i})();class b0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const C0=new b0("15.2.9"),Ny={},wg="ngOriginalError";function Oy(i){return i[wg]}class Nf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Oy(o);for(;a&&Oy(a);)a=Oy(a);return a||null}}function pc(i){return i instanceof Function?i():i}function R0(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const P0="ng-template";function N0(i,o,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const v=i[c++];if(a&&"class"===p&&-1!==R0(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Ig(i){return 4===i.type&&i.value!==P0}function O0(i,o,a){return o===(4!==i.type||a?i.value:P0)}function dh(i,o,a){let c=4;const d=i.attrs||[],p=function Dg(i){for(let o=0;o<i.length;o++)if(Yc(i[o]))return o;return i.length}(d);let v=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!O0(i,b,a)||""===b&&1===o.length){if(Cs(c))return!1;v=!0}}else{const x=8&c?b:o[++E];if(8&c&&null!==i.attrs){if(!N0(i.attrs,x,a)){if(Cs(c))return!1;v=!0}continue}const L=TD(8&c?"class":b,d,Ig(i),a);if(-1===L){if(Cs(c))return!1;v=!0;continue}if(""!==x){let z;z=L>p?"":d[L+1].toLowerCase();const J=8&c?z:null;if(J&&-1!==R0(J,x,0)||2&c&&x!==z){if(Cs(c))return!1;v=!0}}}}else{if(!v&&!Cs(c)&&!Cs(b))return!1;if(v&&Cs(b))continue;v=!1,c=b|1&c}}return Cs(c)||v}function Cs(i){return 0==(1&i)}function TD(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function k0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function ky(i,o,a=!1){for(let c=0;c<o.length;c++)if(dh(i,o[c],a))return!0;return!1}function F0(i,o){return i?":not("+o.trim()+")":o}function SD(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Cs(v)&&(o+=F0(p,d),d=""),c=v,p=p||!Cs(c);a++}return""!==d&&(o+=F0(p,d)),o}const jt={};function Of(i){U0(kt(),he(),Er()+i,!1)}function U0(i,o,a,c){if(!c)if(3==(3&o[Ot])){const p=i.preOrderCheckHooks;null!==p&&Wc(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Zc(o,p,0,a)}vs(a)}function $0(i,o=null,a=null,c){const d=H0(i,o,a,c);return d.resolveInjectorInitializers(),d}function H0(i,o=null,a=null,c,d=new Set){const p=[a||Ue,lD(i)];return c=c||("object"==typeof i?void 0:we(i)),new m0(p,o||yg(),c||null,d)}let gc=(()=>{class i{static create(a,c){if(Array.isArray(a))return $0({name:""},c,a,"");{const d=a.name??"";return $0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=hi,i.NULL=new sh,i.\u0275prov=lt({token:i,providedIn:"any",factory:()=>en(p0)}),i.__NG_ELEMENT_ID__=-1,i})();function Pl(i,o=pt.Default){const a=he();return null===a?en(i,o):zu(er(),a,W(i),o)}function Z0(){throw new Error("invalid")}function K0(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const v=i.data[p];Ru(a[c]),v.contentQueries(2,o[p],p)}}}function Lf(i,o,a,c,d,p,v,E,b,x,R){const L=o.blueprint.slice();return L[pi]=d,L[Ot]=76|c,(null!==R||i&&1024&i[Ot])&&(L[Ot]|=1024),Go(L),L[wn]=L[oo]=i,L[xn]=a,L[ls]=v||i&&i[ls],L[Vt]=E||i&&i[Vt],L[Sa]=b||i&&i[Sa]||null,L[Ta]=x||i&&i[Ta]||null,L[zn]=p,L[Bo]=function es(){return Gd++}(),L[Ir]=R,L[Ln]=2==o.type?i[Ln]:L,L}function fh(i,o,a,c,d){let p=i.data[o];if(null===p)p=function Y0(i,o,a,c,d){const p=co(),v=Sd(),b=i.data[o]=function WD(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(i,o,a,c,d),function Ad(){return Mt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const v=function Au(){const i=Mt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return zr(p,!0),p}function fe(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function $y(i,o,a){Nu(o);try{const c=i.viewQuery;null!==c&&Vf(1,c,a);const d=i.template;null!==d&&Q0(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&K0(i,o),i.staticViewQueries&&Vf(2,i.viewQuery,a);const p=i.components;null!==p&&function qD(i,o){for(let a=0;a<o.length;a++)nb(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Ot]&=-5,Ou()}}function Nl(i,o,a,c){const d=o[Ot];if(128!=(128&d)){Nu(o);try{Go(o),function Yi(i){return Mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Q0(i,o,a,2,c);const v=3==(3&d);if(v){const x=i.preOrderCheckHooks;null!==x&&Wc(o,x,null)}else{const x=i.preOrderHooks;null!==x&&Zc(o,x,0,null),Pd(o,0)}if(function tb(i){for(let o=oa(i);null!==o;o=tu(o)){if(!o[Vc])continue;const a=o[ao];for(let c=0;c<a.length;c++){const d=a[c];512&d[Ot]||Na(d[wn],1),d[Ot]|=512}}}(o),function eb(i){for(let o=oa(i);null!==o;o=tu(o))for(let a=hr;a<o.length;a++){const c=o[a],d=c[We];ms(c)&&Nl(d,c,d.template,c[xn])}}(o),null!==i.contentQueries&&K0(i,o),v){const x=i.contentCheckHooks;null!==x&&Wc(o,x)}else{const x=i.contentHooks;null!==x&&Zc(o,x,1),Pd(o,1)}!function zD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)vs(~d);else{const p=d,v=a[++c],E=a[++c];Mu(v,p),E(2,o[p])}}}finally{vs(-1)}}(i,o);const E=i.components;null!==E&&function GD(i,o){for(let a=0;a<o.length;a++)rw(i,o[a])}(o,E);const b=i.viewQuery;if(null!==b&&Vf(2,b,c),v){const x=i.viewCheckHooks;null!==x&&Wc(o,x)}else{const x=i.viewHooks;null!==x&&Zc(o,x,2),Pd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Ot]&=-41,512&o[Ot]&&(o[Ot]&=-513,Na(o[wn],-1))}finally{Ou()}}}function Q0(i,o,a,c,d){const p=Er(),v=2&c;try{vs(-1),v&&o.length>mn&&U0(i,o,mn,!1),Hr(v?2:0,d),a(c,d)}finally{vs(p),Hr(v?3:1,d)}}function Hy(i,o,a){if(xa(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function zy(i,o,a){Su()&&(function UA(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;$o(a)&&function XD(i,o,a){const c=pr(o,i),d=Gy(a),p=i[ls],v=Sg(i,Lf(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Qc(a,o),te(c,o);const v=a.initialInputs;for(let E=d;E<p;E++){const b=i.data[E],x=Fn(o,i,E,a);te(x,o),null!==v&&Tg(0,E-d,x,b,0,v),mi(b)&&(Xn(a.index,o)[xn]=Fn(o,i,E,a))}}(i,o,a,pr(a,o)),64==(64&a.flags)&&JD(i,o,a))}function Cg(i,o,a=pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?a(o,i):i[v];i[d++]=E}}}function Gy(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Ff(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Ff(i,o,a,c,d,p,v,E,b,x){const R=mn+c,L=R+d,z=function ui(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:jt);return a}(R,L),J="function"==typeof x?x():x;return z[We]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function Uf(i,o,a,c){const d=Bf(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Ag(i).push(c,d.length-1))}function ZD(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?X0(a,o,d,p):c.hasOwnProperty(d)&&X0(a,o,c[d],p)}return a}function X0(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Ks(i,o,a,c,d,p,v,E){const b=pr(o,a);let R,x=o.inputs;!E&&null!=x&&(R=x[c])?(xg(i,a,R,c,d),$o(o)&&function KD(i,o){const a=Xn(o,i);16&a[Ot]||(a[Ot]|=32)}(a,o.index)):3&o.type&&(c=function kA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,p.setProperty(b,c,d))}function ew(i,o,a,c){if(Su()){const d=null===c?null:{"":-1},p=function Ol(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const v=a[p];if(ky(o,v.selectors,!1))if(c||(c=[]),mi(v))if(null!==v.findHostDirectiveDefs){const E=[];d=d||new Map,v.findHostDirectiveDefs(v,E,d),c.unshift(...E,v),ph(i,o,E.length)}else c.unshift(v),ph(i,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,E;null===p?v=E=null:[v,E]=p,null!==v&&QD(i,o,a,v,d,E),d&&function cn(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ge(-301,!1);c.push(o[d],p)}}}(a,c,d)}a.mergedAttrs=mo(a.mergedAttrs,a.attrs)}function QD(i,o,a,c,d,p){for(let x=0;x<c.length;x++)hn(Qc(a,o),i,c[x].type);!function Wy(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let x=0;x<c.length;x++){const R=c[x];R.providersResolver&&R.providersResolver(R)}let v=!1,E=!1,b=fe(i,o,c.length,null);for(let x=0;x<c.length;x++){const R=c[x];a.mergedAttrs=mo(a.mergedAttrs,R.hostAttrs),tw(i,a,o,b,R),vc(b,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const L=R.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),E=!0),b++}!function qy(i,o,a){const d=o.directiveEnd,p=i.data,v=o.attrs,E=[];let b=null,x=null;for(let R=o.directiveStart;R<d;R++){const L=p[R],z=a?a.get(L):null,_e=z?z.outputs:null;b=ZD(L.inputs,R,b,z?z.inputs:null),x=ZD(L.outputs,R,x,_e);const Ve=null===b||null===v||Ig(o)?null:Ky(b,R,v);E.push(Ve)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=b,o.outputs=x}(i,a,p)}function JD(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,v=function Yp(){return Mt.lFrame.currentDirectiveIndex}();try{vs(p);for(let E=c;E<d;E++){const b=i.data[E],x=o[E];qn(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&VA(b,x)}}finally{vs(-1),qn(v)}}function VA(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function ph(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function vc(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;mi(o)&&(a[""]=i)}}function tw(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=Ki(d.type)),v=new _s(p,mi(d),Pl);i.blueprint[c]=v,a[c]=v,function LA(i,o,a,c,d){const p=d.hostBindings;if(p){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~o.index;(function FA(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,c,p)}}(i,o,c,fe(i,a,d.hostVars,jt),d)}function fn(i,o,a,c,d,p){const v=pr(i,o);!function Zy(i,o,a,c,d,p,v){if(null==p)i.removeAttribute(o,d,a);else{const E=null==v?Pe(p):v(p,c||"",d);i.setAttribute(o,d,E,a)}}(o[Vt],v,p,i.value,a,c,d)}function Tg(i,o,a,c,d,p){const v=p[o];if(null!==v){const E=c.setInput;for(let b=0;b<v.length;){const x=v[b++],R=v[b++],L=v[b++];null!==E?c.setInput(a,L,x,R):a[R]=L}}}function Ky(i,o,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const v=i[p];for(let E=0;E<v.length;E+=2)if(v[E]===o){c.push(p,v[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function nw(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function rw(i,o){const a=Xn(o,i);if(ms(a)){const c=a[We];48&a[Ot]?Nl(c,a,c.template,a[xn]):a[un]>0&&Yy(a)}}function Yy(i){for(let c=oa(i);null!==c;c=tu(c))for(let d=hr;d<c.length;d++){const p=c[d];if(ms(p))if(512&p[Ot]){const v=p[We];Nl(v,p,v.template,p[xn])}else p[un]>0&&Yy(p)}const a=i[We].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Xn(a[c],i);ms(d)&&d[un]>0&&Yy(d)}}function nb(i,o){const a=Xn(o,i),c=a[We];(function rb(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),$y(c,a,a[xn])}function Sg(i,o){return i[so]?i[ds][gi]=o:i[so]=o,i[ds]=o,o}function Dr(i){for(;i;){i[Ot]|=32;const o=eu(i);if(Iu(i)&&!o)return i;i=o}return null}function kl(i,o,a,c=!0){const d=o[ls];d.begin&&d.begin();try{Nl(i,o,i.template,a)}catch(v){throw c&&ow(o,v),v}finally{d.end&&d.end()}}function Vf(i,o,a){Ru(0),o(i,a)}function Bf(i){return i[io]||(i[io]=[])}function Ag(i){return i.cleanup||(i.cleanup=[])}function ow(i,o){const a=i[Ta],c=a?a.get(Nf,null):null;c&&c.handleError(o)}function xg(i,o,a,c,d){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],b=o[v],x=i.data[v];null!==x.setInput?x.setInput(b,d,c,E):b[E]=d}}function cu(i,o,a){const c=function gs(i,o){return fr(o[i])}(o,i);!function fl(i,o,a){i.setValue(o,a)}(i[Vt],c,a)}function Mg(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?d=pe(d,E):2==p&&(c=pe(c,E+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function _c(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(fr(p)),ri(p))for(let E=hr;E<p.length;E++){const b=p[E],x=b[We].firstChild;null!==x&&_c(b[We],b,x,c)}const v=a.type;if(8&v)_c(i,o,a.child,c);else if(32&v){const E=tc(a,o);let b;for(;b=E();)c.push(b)}else if(16&v){const E=sg(o,a);if(Array.isArray(E))c.push(...E);else{const b=eu(o[Ln]);_c(b[We],b,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class gh{get rootNodes(){const o=this._lView,a=o[We];return _c(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(o){this._lView[xn]=o}get destroyed(){return 128==(128&this._lView[Ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[wn];if(ri(o)){const a=o[Os],c=a?a.indexOf(this):-1;c>-1&&(pl(o,c),Co(a,c))}this._attachedToViewContainer=!1}ig(this._lView[We],this._lView)}onDestroy(o){Uf(this._lView[We],this._lView,null,o)}markForCheck(){Dr(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-65}reattach(){this._lView[Ot]|=64}detectChanges(){kl(this._lView[We],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function py(i,o){su(i,o,o[Vt],2,null,null)}(this._lView[We],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=o}}class Rg extends gh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;kl(o[We],o,o[xn],!1)}checkNoChanges(){}get context(){return null}}class Jy extends ch{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=gt(o);return new jf(a,this.ngModule)}}function aw(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class sb{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=$n(c);const d=this.injector.get(o,Ny,c);return d!==Ny||a===Ny?d:this.parentInjector.get(o,a,c)}}class jf extends _0{get inputs(){return aw(this.componentDef.inputs)}get outputs(){return aw(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function AD(i){return i.map(SD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Al?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new sb(o,p):o,E=v.get(lh,null);if(null===E)throw new ge(407,!1);const b=v.get(_D,null),x=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",L=c?function J0(i,o,a){return i.selectRootElement(o,a===ve.ShadowDom)}(x,c,this.componentDef.encapsulation):Zd(x,R,function ib(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),z=this.componentDef.onPush?288:272,J=Ff(0,null,null,1,0,null,null,null,null,null),_e=Lf(null,J,null,z,null,null,E,x,b,v,null);let Ve,Ke;Nu(_e);try{const dt=this.componentDef;let St,Ae=null;dt.findHostDirectiveDefs?(St=[],Ae=new Map,dt.findHostDirectiveDefs(dt,St,Ae),St.push(dt)):St=[dt];const Nt=function lw(i,o){const a=i[We],c=mn;return i[c]=o,fh(a,c,2,"#host",null)}(_e,L),Cn=function Xy(i,o,a,c,d,p,v,E){const b=d[We];!function dw(i,o,a,c){for(const d of i)o.mergedAttrs=mo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Mg(o,o.mergedAttrs,!0),null!==a&&ha(c,a,o))}(c,i,o,v);const x=p.createRenderer(o,a),R=Lf(d,Gy(a),null,a.onPush?32:16,d[i.index],i,p,x,E||null,null,null);return b.firstCreatePass&&ph(b,i,c.length-1),Sg(d,R),d[i.index]=R}(Nt,L,dt,St,_e,E,x);Ke=Ed(J,mn),L&&function ob(i,o,a,c){if(c)Ko(i,a,["ng-version",C0.full]);else{const{attrs:d,classes:p}=function xD(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!Cs(d))break;d=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ko(i,a,d),p&&p.length>0&&da(i,a,p.join(" "))}}(x,dt,L,c),void 0!==a&&function ev(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(Ke,this.ngContentSelectors,a),Ve=function $f(i,o,a,c,d,p){const v=er(),E=d[We],b=pr(v,d);QD(E,d,v,a,null,c);for(let R=0;R<a.length;R++)te(Fn(d,E,v.directiveStart+R,v),d);JD(E,d,v),b&&te(b,d);const x=Fn(d,E,v.directiveStart+v.componentOffset,v);if(i[xn]=d[xn]=x,null!==p)for(const R of p)R(x,o);return Hy(E,v,i),x}(Cn,dt,St,Ae,_e,[tv]),$y(J,_e,null)}finally{Ou()}return new uw(this.componentType,Ve,uu(Ke,_e),_e,Ke)}}class uw extends vg{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Rg(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;xg(p[We],p,d,o,a),Dr(Xn(this._tNode.index,p))}}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function tv(){const i=er();Fu(he()[We],i)}function lu(i){return!!ov(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function ov(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function bi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function mh(i,o,a,c){const d=he();return bi(d,lo(),o)&&(kt(),fn(Dn(),d,i,o,a,c)),mh}function Ul(i,o,a,c){return bi(i,lo(),a)?o+Pe(a)+c:jt}function vw(i,o,a,c,d,p,v,E){const b=he(),x=kt(),R=i+mn,L=x.firstCreatePass?function yw(i,o,a,c,d,p,v,E,b){const x=o.consts,R=fh(o,i,4,v||null,Fs(x,E));ew(o,a,R,Fs(x,b)),Fu(o,R);const L=R.tView=Ff(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,a,c,d,p,v):x.data[R];zr(L,!1);const z=b[Vt].createComment("");oc(x,b,z,L),te(z,b),Sg(b,b[R]=nw(z,b,z,L)),Bc(L)&&zy(x,b,L),null!=v&&Cg(b,L,E)}function Ug(i){return function Rr(i,o){return i[o]}(function Kp(){return Mt.lFrame.contextLView}(),mn+i)}function Gf(i,o,a){const c=he();return bi(c,lo(),o)&&Ks(kt(),Dn(),c,i,o,c[Vt],a,!1),Gf}function ww(i,o,a,c,d){const v=d?"class":"style";xg(i,a,o.inputs[v],v,c)}function lv(i,o,a,c){const d=he(),p=kt(),v=mn+i,E=d[Vt],b=p.firstCreatePass?function cv(i,o,a,c,d,p){const v=o.consts,b=fh(o,i,2,c,Fs(v,d));return ew(o,a,b,Fs(v,p)),null!==b.attrs&&Mg(b,b.attrs,!1),null!==b.mergedAttrs&&Mg(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,d,o,a,c):p.data[v],x=d[v]=Zd(E,o,function Rd(){return Mt.lFrame.currentNamespace}()),R=Bc(b);return zr(b,!0),ha(E,x,b),32!=(32&b.flags)&&oc(p,d,x,b),0===function bd(){return Mt.lFrame.elementDepthCount}()&&te(x,d),function Tu(){Mt.lFrame.elementDepthCount++}(),R&&(zy(p,d,b),Hy(p,b,d)),null!==c&&Cg(d,b),lv}function Vg(){let i=er();Sd()?xu():(i=i.parent,zr(i,!1));const o=i;!function Cd(){Mt.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Fu(a,i),xa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function ja(i){return 0!=(8&i.flags)}(o)&&ww(a,o,he(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function fo(i){return 0!=(16&i.flags)}(o)&&ww(a,o,he(),o.stylesWithoutHost,!1),Vg}function Iw(i,o,a,c){return lv(i,o,a,c),Vg(),Iw}function Bg(i,o,a){const c=he(),d=kt(),p=i+mn,v=d.firstCreatePass?function wb(i,o,a,c,d){const p=o.consts,v=Fs(p,c),E=fh(o,i,8,"ng-container",v);return null!==v&&Mg(E,v,!0),ew(o,a,E,Fs(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,c,o,a):d.data[p];zr(v,!0);const E=c[p]=c[Vt].createComment("");return oc(d,c,E,v),te(E,c),Bc(v)&&(zy(d,c,v),Hy(d,v,c)),null!=a&&Cg(c,v),Bg}function dv(){let i=er();const o=kt();return Sd()?xu():(i=i.parent,zr(i,!1)),o.firstCreatePass&&(Fu(o,i),xa(i)&&o.queries.elementEnd(i)),dv}function Ew(){return he()}function Dw(i){return!!i&&"function"==typeof i.then}function Eb(i){return!!i&&"function"==typeof i.subscribe}const Db=Eb;function bw(i,o,a,c){const d=he(),p=kt(),v=er();return function Cw(i,o,a,c,d,p,v){const E=Bc(c),x=i.firstCreatePass&&Ag(i),R=o[xn],L=Bf(o);let z=!0;if(3&c.type||v){const Ve=pr(c,o),Ke=v?v(Ve):Ve,dt=L.length,St=v?Nt=>v(fr(Nt[c.index])):c.index;let Ae=null;if(!v&&E&&(Ae=function Cb(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===c){const E=o[io],b=d[p+2];return E.length>b?E[b]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,c.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=p,Ae.__ngLastListenerFn__=p,z=!1;else{p=fv(c,o,R,p,!1);const Nt=a.listen(Ke,d,p);L.push(p,Nt),x&&x.push(d,St,dt,dt+1)}}else p=fv(c,o,R,p,!1);const J=c.outputs;let _e;if(z&&null!==J&&(_e=J[d])){const Ve=_e.length;if(Ve)for(let Ke=0;Ke<Ve;Ke+=2){const Cn=o[_e[Ke]][_e[Ke+1]].subscribe(p),jn=L.length;L.push(p,Cn),x&&x.push(d,c.index,jn,-(jn+1))}}}(p,d,d[Vt],v,i,o,c),bw}function hv(i,o,a,c){try{return Hr(6,o,a),!1!==a(c)}catch(d){return ow(i,d),!1}finally{Hr(7,o,a)}}function fv(i,o,a,c,d){return function p(v){if(v===Function)return c;Dr(i.componentOffset>-1?Xn(i.index,o):o);let b=hv(o,a,c,v),x=p.__ngNextListenerFn__;for(;x;)b=hv(o,a,x,v)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function pv(i=1){return function af(i){return(Mt.lFrame.contextLView=function ku(i,o){for(;i>0;)o=o[oo],i--;return o}(i,Mt.lFrame.contextLView))[xn]}(i)}function jg(i,o,a){return qf(i,"",o,"",a),jg}function qf(i,o,a,c,d){const p=he(),v=Ul(p,o,a,c);return v!==jt&&Ks(kt(),Dn(),p,i,v,p[Vt],d,!1),qf}function _v(i,o=""){const a=he(),c=kt(),d=i+mn,p=c.firstCreatePass?fh(c,d,1,o,null):c.data[d],v=a[d]=function hl(i,o){return i.createText(o)}(a[Vt],o);oc(c,a,v,p),zr(p,!1)}function wv(i){return Iv("",i,""),wv}function Iv(i,o,a){const c=he(),d=Ul(c,i,o,a);return d!==jt&&cu(c,Er(),d),Iv}const fu=void 0;var pC=["en",[["a","p"],["AM","PM"],fu],[["AM","PM"],fu,fu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fu,"{1} 'at' {0}",fu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fC(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let bh={};function Ch(i){const o=function Qw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Yw(o);if(a)return a;const c=o.split("-")[0];if(a=Yw(c),a)return a;if("en"===c)return pC;throw new ge(701,!1)}function pu(i){return Ch(i)[bt.PluralCase]}function Yw(i){return i in bh||(bh[i]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[i]),bh[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const _a="en-US";let Hl=_a;class Ec{}class up{}function Hv(i,o){return new zv(i,o??null)}class zv extends Ec{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jy(this);const c=Hn(o);this._bootstrapComponents=pc(c.bootstrap),this._r3Injector=H0(o,a,[{provide:Ec,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],we(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cm extends up{constructor(o){super(),this.moduleType=o}create(o){return new zv(this.moduleType,o)}}class MC extends Ec{constructor(o,a,c){super(),this.componentFactoryResolver=new Jy(this),this.instance=null;const d=new m0([...o,{provide:Ec,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],a||yg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Kl(i,o,a=null){return new MC(i,o,a).injector}let wI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=oh(0,a.type),d=c.length>0?Kl([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=lt({token:i,providedIn:"environment",factory:()=>new i(en(Al))}),i})();function cp(i){i.getStandaloneInjector=o=>o.get(wI).getOrCreateStandaloneInjector(i)}function Nh(i){return o=>{setTimeout(i,void 0,o)}}const is=class VC extends g.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=Nh(p),d&&(d=Nh(d)),v&&(v=Nh(v)));const E=super.subscribe({next:d,error:p,complete:v});return o instanceof Y.w0&&o.add(E),E}};function dm(){return this._results[Symbol.iterator]()}class gp{get changes(){return this._changes||(this._changes=new is)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gp.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=dm)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function ki(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function rl(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Oh=(()=>{class i{}return i.__NG_ELEMENT_ID__=BC,i})();const mp=Oh,yp=class extends mp{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=Lf(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[Vo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Zi];return null!==v&&(d[Zi]=v.createEmbeddedView(c)),$y(c,d,o),new gh(d)}};function BC(){return Rn(er(),he())}function Rn(i,o){return 4&i.type?new yp(o,i,uu(i,o)):null}let vp=(()=>{class i{}return i.__NG_ELEMENT_ID__=jC,i})();function jC(){return Yv(er(),he())}const $C=vp,FI=class extends $C{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return uu(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const o=kd(this._hostTNode,this._hostLView);if(yo(o)){const a=vo(o,this._hostLView),c=Us(o);return new Is(a[We].data[c+8],a)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Kv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(o,a,c,d,p){const v=o&&!function Wu(i){return"function"==typeof i}(o);let E;if(v)E=a;else{const L=a||{};E=L.index,c=L.injector,d=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const b=v?o:new jf(gt(o)),x=c||this.parentInjector;if(!p&&null==b.ngModule){const z=(v?x:this.parentInjector).get(Al,null);z&&(p=z)}const R=b.create(x,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,a){const c=o._lView,d=c[We];if(function zc(i){return ri(i[wn])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[wn],z=new FI(L,L[zn],L[wn]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function ru(i,o,a,c){const d=hr+c,p=a.length;c>0&&(a[d-1][gi]=o),c<p-hr?(o[gi]=a[d],yf(a,hr+c,o)):(a.push(o),o[gi]=null),o[wn]=a;const v=o[Vo];null!==v&&a!==v&&function gy(i,o){const a=i[ao];o[Ln]!==o[wn][wn][Ln]&&(i[Vc]=!0),null===a?i[ao]=[o]:a.push(o)}(v,o);const E=o[Zi];null!==E&&E.insertView(i),o[Ot]|=64}(d,c,v,p);const E=ca(p,v),b=c[Vt],x=aa(b,v[jo]);return null!==x&&function ng(i,o,a,c,d,p){c[pi]=d,c[zn]=o,su(i,c,a,1,d,p)}(d,v[zn],b,c,x,E),o.attachToViewContainerRef(),yf(hm(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Kv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=pl(this._lContainer,a);c&&(Co(hm(this._lContainer),a),ig(c[We],c))}detach(o){const a=this._adjustIndex(o,-1),c=pl(this._lContainer,a);return c&&null!=Co(hm(this._lContainer),a)?new gh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Kv(i){return i[Os]}function hm(i){return i[Os]||(i[Os]=[])}function Yv(i,o){let a;const c=o[i.index];if(ri(c))a=c;else{let d;if(8&i.type)d=fr(c);else{const p=o[Vt];d=p.createComment("");const v=pr(i,o);ic(p,aa(p,v),d,function sc(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=nw(c,o,d,i),Sg(o,a)}return new FI(a,i,o)}class kh{constructor(o){this.queryList=o,this.matches=null}clone(){return new kh(this.queryList)}setDirty(){this.queryList.setDirty()}}class fm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new fm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==ym(o,a).matches&&this.queries[a].setDirty()}}class Oo{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class pm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new pm(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Qv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Qv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,UI(a,p)),this.matchTNodeWithReadOption(o,a,wo(a,o,p,!1,!1))}else c===Oh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,wo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===fc||d===vp||d===Oh&&4&a.type)this.addMatch(a.index,-2);else{const p=wo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function UI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function _p(i,o,a,c){return-1===a?function Jv(i,o){return 11&i.type?uu(i,o):4&i.type?Rn(i,o):null}(o,i):-2===a?function VI(i,o,a){return a===fc?uu(o,i):a===Oh?Rn(o,i):a===vp?Yv(o,i):void 0}(i,o,c):Fn(i,i[We],a,o)}function gm(i,o,a,c){const d=o[Zi].queries[c];if(null===d.matches){const p=i.data,v=a.matches,E=[];for(let b=0;b<v.length;b+=2){const x=v[b];E.push(x<0?null:_p(o,p[x],v[b+1],a.metadata.read))}d.matches=E}return d.matches}function Lh(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=gm(i,o,d,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)c.push(v[E/2]);else{const x=p[E+1],R=o[-b];for(let L=hr;L<R.length;L++){const z=R[L];z[Vo]===z[wn]&&Lh(z[We],z,x,c)}if(null!==R[ao]){const L=R[ao];for(let z=0;z<L.length;z++){const J=L[z];Lh(J[We],J,x,c)}}}}}return c}function Xv(i){const o=he(),a=kt(),c=Gc();Ru(c+1);const d=ym(a,c);if(i.dirty&&function Cu(i){return 4==(4&i[Ot])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Lh(a,o,c,[]):gm(a,o,d,c);i.reset(p,E0),i.notifyOnChanges()}return!0}return!1}function BI(i,o,a,c){const d=kt();if(d.firstCreatePass){const p=er();(function n_(i,o,a){null===i.queries&&(i.queries=new pm),i.queries.track(new Qv(o,a))})(d,new Oo(o,a,c),p.index),function r_(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function t_(i,o,a){const c=new gp(4==(4&a));Uf(i,o,c,c.destroy),null===o[Zi]&&(o[Zi]=new fm),o[Zi].queries.push(new kh(c))}(d,he(),a)}function e_(){return function wp(i,o){return i[Zi].queries[o].queryList}(he(),Gc())}function ym(i,o){return i.queries.getByIndex(o)}function vm(i){return!!Hn(i)}function be(...i){}const f_=new Zt("Application Initializer");let bm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=be,this.reject=be,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Dw(p))a.push(p);else if(Db(p)){const v=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(en(f_,8))},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QI=new Zt("AppId",{providedIn:"root",factory:function JI(){return`${p_()}${p_()}${p_()}`}});function p_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const g_=new Zt("Platform Initializer"),YC=new Zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let XI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const gu=new Zt("LocaleId",{providedIn:"root",factory:()=>An(gu,pt.Optional|pt.SkipSelf)||function Ut(){return typeof $localize<"u"&&$localize.locale||_a}()}),eE=new Zt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class rn{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let QC=(()=>{class i{compileModuleSync(a){return new cm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=pc(Hn(a).declarations).reduce((v,E)=>{const b=gt(E);return b&&v.push(new jf(b)),v},[]);return new rn(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const JC=(()=>Promise.resolve(0))();function sd(i){typeof Zone>"u"?JC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Un{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new is(!1),this.onMicrotaskEmpty=new is(!1),this.onStable=new is(!1),this.onError=new is(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function tE(){let i=Qt.requestAnimationFrame,o=Qt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Ac(i){const o=()=>{!function nE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Qt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ep(i),i.isCheckStableRunning=!0,Am(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ep(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,v,E)=>{try{return ee(i),a.invokeTask(d,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Dp(i)}},onInvoke:(a,c,d,p,v,E,b)=>{try{return ee(i),a.invoke(d,p,v,E,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),Dp(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Ep(i),Am(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Un.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(Un.isInAngularZone())throw new ge(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,m_,be,be);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const m_={};function Am(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ep(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ee(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Dp(i){i._nesting--,Am(i)}class Fo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new is,this.onMicrotaskEmpty=new is,this.onStable=new is,this.onError=new is}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const rE=new Zt(""),Vh=new Zt("");let xm,xc=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xm||(function od(i){xm=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Un.assertNotInAngularZone(),sd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sd(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(en(Un),en(iE),en(Vh))},i.\u0275prov=lt({token:i,factory:i.\u0275fac}),i})(),iE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return xm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Uo=!1;let Mc=null;const sE=new Zt("AllowMultipleToken"),$i=new Zt("PlatformDestroyListeners"),Bh=new Zt("appBootstrapListener");class tT{constructor(o,a){this.name=o,this.token=a}}function __(i,o,a=[]){const c=`Platform: ${o}`,d=new Zt(c);return(p=[])=>{let v=w_();if(!v||v.injector.get(sE,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function oE(i){if(Mc&&!Mc.get(sE,!1))throw new ge(400,!1);Mc=i;const o=i.get(uE);(function y_(i){const o=i.get(g_,null);o&&o.forEach(a=>a())})(i)}(function aE(i=[],o){return gc.create({name:o,providers:[{provide:uh,useValue:"platform"},{provide:$i,useValue:new Set([()=>Mc=null])},...i]})}(E,c))}return function nT(i){const o=w_();if(!o)throw new ge(401,!1);return o}()}}function w_(){return Mc?.get(uE)??null}let uE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function lE(i,o){let a;return a="noop"===i?new Fo:("zone.js"===i?void 0:i)||new Un(o),a}(c?.ngZone,function cE(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Un,useValue:d}];return d.run(()=>{const v=gc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(v),b=E.injector.get(Nf,null);if(!b)throw new ge(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:R=>{b.handleError(R)}});E.onDestroy(()=>{Rm(this._modules,E),x.unsubscribe()})}),function dE(i,o,a){try{const c=a();return Dw(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(b,d,()=>{const x=E.injector.get(bm);return x.runInitializers(),x.donePromise.then(()=>(function bv(i){me(i,"Expected localeId to be defined"),"string"==typeof i&&(Hl=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(gu,_a)||_a),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=hE({},c);return function bp(i,o,a){const c=new cm(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Mm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ge(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get($i,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(en(gc))},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function hE(i,o){return Array.isArray(o)?o.reduce(hE,i):{...i,...o}}let Mm=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Un.assertNotInAngularZone(),sd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Un.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(p,v.pipe((0,se.B)()))}bootstrap(a,c){const d=a instanceof _0;if(!this._injector.get(bm).done){!d&&dr(a);throw new ge(405,Uo)}let v;v=d?a:this._injector.get(ch).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Si(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Ec),x=v.create(gc.NULL,[],c||v.selector,E),R=x.location.nativeElement,L=x.injector.get(rE,null);return L?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),Rm(this.components,x),L?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Rm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Bh,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Rm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(en(Un),en(Al),en(Nf))},i.\u0275prov=lt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function iT(){return!1}let pE=(()=>{class i{}return i.__NG_ELEMENT_ID__=oT,i})();function oT(i){return function E_(i,o,a){if($o(i)&&!a){const c=Xn(i.index,o);return new gh(c,c)}return 47&i.type?new gh(o[Ln],o):null}(er(),he(),16==(16&i))}class mu{constructor(){}supports(o){return lu(o)}create(o){return new Om(o)}}const Rc=(i,o)=>o;class Om{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Rc}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<yu(c,d,p)?a:c,E=yu(v,d,p),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const x=E-d,R=b-d;if(x!=R){for(let z=0;z<x;z++){const J=z<p.length?p[z]:p[z]=0,_e=J+z;R<=_e&&_e<x&&(p[z]=J+1)}p[v.previousIndex]=R-x}}E!==b&&o(v,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!lu(o))throw new ge(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),c=!0),a=a._next}else d=0,function hb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new Pc(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new jh),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jh),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Pc{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Da{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class jh{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Da,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yu(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class S_{constructor(){}supports(o){return o instanceof Map||ov(o)}create(){return new $h}}class $h{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||ov(o)))throw new ge(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new A_(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class A_{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cp(){return new vu([new mu])}let vu=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Cp()),deps:[[i,new Bs,new Ka]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ge(901,!1)}}return i.\u0275prov=lt({token:i,providedIn:"root",factory:Cp}),i})();function Hh(){return new km([new S_])}let km=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Hh()),deps:[[i,new Bs,new Ka]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ge(901,!1)}}return i.\u0275prov=lt({token:i,providedIn:"root",factory:Hh}),i})();const dT=__(null,"core",[]);let hT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(en(Mm))},i.\u0275mod=X({type:i}),i.\u0275inj=ft({}),i})();function vE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(mt,xe,k)=>{k.d(xe,{Z:()=>qe});var g=k(2090),Y=k(4859),O=k(6881),ie=k(1877);class se{constructor(ge,Re){this._delegate=ge,this.firebase=Re,(0,O._addComponent)(ge,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,Re=O._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(ge);return!Be.isInitialized()&&"EXPLICIT"===(null===(Pe=Be.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Re})}_removeServiceInstance(ge,Re=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Re)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function pe(){const ut=function we(ut){const ge={},Re={__esModule:!0,initializeApp:function Ne(Le,tt={}){const ne=O.initializeApp(Le,tt);if((0,g.r3)(ge,ne.name))return ge[ne.name];const Dt=new ut(ne,Re);return ge[ne.name]=Dt,Dt},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Le){const tt=Le.name,ne=tt.replace("-compat","");if(O._registerComponent(Le)&&"PUBLIC"===Le.type){const Dt=(Je=Be())=>{if("function"!=typeof Je[ne])throw ye.create("invalid-app-argument",{appName:tt});return Je[ne]()};void 0!==Le.serviceProps&&(0,g.ZB)(Dt,Le.serviceProps),Re[ne]=Dt,ut.prototype[ne]=function(...Je){return this._getService.bind(this,tt).apply(this,Le.multipleInstances?Je:[])}}return"PUBLIC"===Le.type?Re[ne]:null},removeApp:function Pe(Le){delete ge[Le]},useAsService:function He(Le,tt){return"serverAuth"===tt?null:tt},modularAPIs:O}};function Be(Le){if(!(0,g.r3)(ge,Le=Le||O._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Le});return ge[Le]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Ie(){return Object.keys(ge).map(Le=>ge[Le])}}),Be.App=ut,Re}(se);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(Re){(0,g.ZB)(ut,Re)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ut}(),$=new ie.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=H;!function Ce(ut){(0,O.registerVersion)("@firebase/app-compat","0.2.13",ut)}()},6881:(mt,xe,k)=>{k.r(xe),k.d(xe,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Ns,_DEFAULT_ENTRY_NAME:()=>Br,_addComponent:()=>nt,_addOrOverwriteComponent:()=>xt,_apps:()=>Qt,_clearComponents:()=>jr,_components:()=>Xt,_getProvider:()=>Xr,_registerComponent:()=>hi,_removeServiceInstance:()=>lr,deleteApp:()=>fi,getApp:()=>qi,getApps:()=>en,initializeApp:()=>Wt,onLog:()=>Mi,registerVersion:()=>$n,setLogLevel:()=>_n});var g=k(5861),Y=k(4859),O=k(1877),ie=k(2090);const se=(de,X)=>X.some(Oe=>de instanceof Oe);let re,ye;const H=new WeakMap,$=new WeakMap,W=new WeakMap,je=new WeakMap,Ce=new WeakMap;let ge={get(de,X,Oe){if(de instanceof IDBTransaction){if("done"===X)return $.get(de);if("objectStoreNames"===X)return de.objectStoreNames||W.get(de);if("store"===X)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Ne(de[X])},set:(de,X,Oe)=>(de[X]=Oe,!0),has:(de,X)=>de instanceof IDBTransaction&&("done"===X||"store"===X)||X in de};function Be(de){return"function"==typeof de?function Pe(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...X){return de.apply(Ie(this),X),Ne(H.get(this))}:function(...X){return Ne(de.apply(Ie(this),X))}:function(X,...Oe){const ht=de.call(Ie(this),X,...Oe);return W.set(ht,X.sort?X.sort():[X]),Ne(ht)}}(de):(de instanceof IDBTransaction&&function ut(de){if($.has(de))return;const X=new Promise((Oe,ht)=>{const Et=()=>{de.removeEventListener("complete",Bt),de.removeEventListener("error",gt),de.removeEventListener("abort",gt)},Bt=()=>{Oe(),Et()},gt=()=>{ht(de.error||new DOMException("AbortError","AbortError")),Et()};de.addEventListener("complete",Bt),de.addEventListener("error",gt),de.addEventListener("abort",gt)});$.set(de,X)}(de),se(de,function we(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ge):de)}function Ne(de){if(de instanceof IDBRequest)return function qe(de){const X=new Promise((Oe,ht)=>{const Et=()=>{de.removeEventListener("success",Bt),de.removeEventListener("error",gt)},Bt=()=>{Oe(Ne(de.result)),Et()},gt=()=>{ht(de.error),Et()};de.addEventListener("success",Bt),de.addEventListener("error",gt)});return X.then(Oe=>{Oe instanceof IDBCursor&&H.set(Oe,de)}).catch(()=>{}),Ce.set(X,de),X}(de);if(je.has(de))return je.get(de);const X=Be(de);return X!==de&&(je.set(de,X),Ce.set(X,de)),X}const Ie=de=>Ce.get(de),Le=["get","getKey","getAll","getAllKeys","count"],tt=["put","add","delete","clear"],ne=new Map;function Dt(de,X){if(!(de instanceof IDBDatabase)||X in de||"string"!=typeof X)return;if(ne.get(X))return ne.get(X);const Oe=X.replace(/FromIndex$/,""),ht=X!==Oe,Et=tt.includes(Oe);if(!(Oe in(ht?IDBIndex:IDBObjectStore).prototype)||!Et&&!Le.includes(Oe))return;const Bt=function(){var gt=(0,g.Z)(function*(Jt,...Yt){const dr=this.transaction(Jt,Et?"readwrite":"readonly");let Hn=dr.store;return ht&&(Hn=Hn.index(Yt.shift())),(yield Promise.all([Hn[Oe](...Yt),Et&&dr.done]))[0]});return function(Yt){return gt.apply(this,arguments)}}();return ne.set(X,Bt),Bt}!function Re(de){ge=de(ge)}(de=>({...de,get:(X,Oe,ht)=>Dt(X,Oe)||de.get(X,Oe,ht),has:(X,Oe)=>!!Dt(X,Oe)||de.has(X,Oe)}));class Je{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function $t(de){return"VERSION"===de.getComponent()?.type}(Oe)){const ht=Oe.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Oe=>Oe).join(" ")}}const at="@firebase/app",Yr=new O.Yd("@firebase/app"),Br="[DEFAULT]",Gi={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,Xt=new Map;function nt(de,X){try{de.container.addComponent(X)}catch(Oe){Yr.debug(`Component ${X.name} failed to register with FirebaseApp ${de.name}`,Oe)}}function xt(de,X){de.container.addOrOverwriteComponent(X)}function hi(de){const X=de.name;if(Xt.has(X))return Yr.debug(`There were multiple attempts to register component ${X}.`),!1;Xt.set(X,de);for(const Oe of Qt.values())nt(Oe,de);return!0}function Xr(de,X){const Oe=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),de.container.getProvider(X)}function lr(de,X,Oe=Br){Xr(de,X).clearInstance(Oe)}function jr(){Xt.clear()}const ei=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dn{constructor(X,Oe,ht){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const Ns="9.23.0";function Wt(de,X={}){let Oe=de;"object"!=typeof X&&(X={name:X});const ht=Object.assign({name:Br,automaticDataCollectionEnabled:!1},X),Et=ht.name;if("string"!=typeof Et||!Et)throw ei.create("bad-app-name",{appName:String(Et)});if(Oe||(Oe=(0,ie.aH)()),!Oe)throw ei.create("no-options");const Bt=Qt.get(Et);if(Bt){if((0,ie.vZ)(Oe,Bt.options)&&(0,ie.vZ)(ht,Bt.config))return Bt;throw ei.create("duplicate-app",{appName:Et})}const gt=new Y.H0(Et);for(const Yt of Xt.values())gt.addComponent(Yt);const Jt=new dn(Oe,ht,gt);return Qt.set(Et,Jt),Jt}function qi(de=Br){const X=Qt.get(de);if(!X&&de===Br&&(0,ie.aH)())return Wt();if(!X)throw ei.create("no-app",{appName:de});return X}function en(){return Array.from(Qt.values())}function fi(de){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(de){const X=de.name;Qt.has(X)&&(Qt.delete(X),yield Promise.all(de.container.getProviders().map(Oe=>Oe.delete())),de.isDeleted=!0)})).apply(this,arguments)}function $n(de,X,Oe){var ht;let Et=null!==(ht=Gi[de])&&void 0!==ht?ht:de;Oe&&(Et+=`-${Oe}`);const Bt=Et.match(/\s|\//),gt=X.match(/\s|\//);if(Bt||gt){const Jt=[`Unable to register library "${Et}" with version "${X}":`];return Bt&&Jt.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Bt&&gt&&Jt.push("and"),gt&&Jt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Yr.warn(Jt.join(" "))}hi(new Y.wA(`${Et}-version`,()=>({library:Et,version:X}),"VERSION"))}function Mi(de,X){if(null!==de&&"function"!=typeof de)throw ei.create("invalid-log-argument");(0,O.Am)(de,X)}function _n(de){(0,O.Ub)(de)}const Ri="firebase-heartbeat-database",$r=1,V="firebase-heartbeat-store";let F=null;function G(){return F||(F=function Ee(de,X,{blocked:Oe,upgrade:ht,blocking:Et,terminated:Bt}={}){const gt=indexedDB.open(de,X),Jt=Ne(gt);return ht&&gt.addEventListener("upgradeneeded",Yt=>{ht(Ne(gt.result),Yt.oldVersion,Yt.newVersion,Ne(gt.transaction),Yt)}),Oe&&gt.addEventListener("blocked",Yt=>Oe(Yt.oldVersion,Yt.newVersion,Yt)),Jt.then(Yt=>{Bt&&Yt.addEventListener("close",()=>Bt()),Et&&Yt.addEventListener("versionchange",dr=>Et(dr.oldVersion,dr.newVersion,dr))}).catch(()=>{}),Jt}(Ri,$r,{upgrade:(de,X)=>{0===X&&de.createObjectStore(V)}}).catch(de=>{throw ei.create("idb-open",{originalErrorMessage:de.message})})),F}function Q(){return(Q=(0,g.Z)(function*(de){try{return yield(yield G()).transaction(V).objectStore(V).get(Kt(de))}catch(X){if(X instanceof ie.ZR)Yr.warn(X.message);else{const Oe=ei.create("idb-get",{originalErrorMessage:X?.message});Yr.warn(Oe.message)}}})).apply(this,arguments)}function Ue(de,X){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(de,X){try{const ht=(yield G()).transaction(V,"readwrite");yield ht.objectStore(V).put(X,Kt(de)),yield ht.done}catch(Oe){if(Oe instanceof ie.ZR)Yr.warn(Oe.message);else{const ht=ei.create("idb-set",{originalErrorMessage:Oe?.message});Yr.warn(ht.message)}}})).apply(this,arguments)}function Kt(de){return`${de.name}!${de.options.appId}`}class on{constructor(X){this.container=X,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Pi(Oe),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var X=this;return(0,g.Z)(function*(){const ht=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=Ht();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==Et&&!X._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Et))return X._heartbeatsCache.heartbeats.push({date:Et,agent:ht}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Bt=>{const gt=new Date(Bt.date).valueOf();return Date.now()-gt<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,g.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Oe=Ht(),{heartbeatsToSend:ht,unsentEntries:Et}=function xr(de,X=1024){const Oe=[];let ht=de.slice();for(const Et of de){const Bt=Oe.find(gt=>gt.agent===Et.agent);if(Bt){if(Bt.dates.push(Et.date),Wi(Oe)>X){Bt.dates.pop();break}}else if(Oe.push({agent:Et.agent,dates:[Et.date]}),Wi(Oe)>X){Oe.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:ht}}(X._heartbeatsCache.heartbeats),Bt=(0,ie.L)(JSON.stringify({version:2,heartbeats:ht}));return X._heartbeatsCache.lastSentHeartbeatDate=Oe,Et.length>0?(X._heartbeatsCache.heartbeats=Et,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Bt})()}}function Ht(){return(new Date).toISOString().substring(0,10)}class Pi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,g.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function ve(de){return Q.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Oe=this;return(0,g.Z)(function*(){var ht;if(yield Oe._canUseIndexedDBPromise){const Bt=yield Oe.read();return Ue(Oe.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Oe=this;return(0,g.Z)(function*(){var ht;if(yield Oe._canUseIndexedDBPromise){const Bt=yield Oe.read();return Ue(Oe.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...X.heartbeats]})}})()}}function Wi(de){return(0,ie.L)(JSON.stringify({version:2,heartbeats:de})).length}!function Ca(de){hi(new Y.wA("platform-logger",X=>new Je(X),"PRIVATE")),hi(new Y.wA("heartbeat",X=>new on(X),"PRIVATE")),$n(at,"0.9.13",de),$n(at,"0.9.13","esm2017"),$n("fire-js","")}("")},4859:(mt,xe,k)=>{k.d(xe,{H0:()=>we,wA:()=>O});var g=k(5861),Y=k(2090);class O{constructor(H,$,W){this.name=H,this.instanceFactory=$,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ie="[DEFAULT]";class se{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const W=new Y.BH;if(this.instancesDeferred.set($,W),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&W.resolve(je)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const W=this.normalizeInstanceIdentifier(H?.identifier),je=null!==($=H?.optional)&&void 0!==$&&$;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ce){if(je)return null;throw Ce}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ye(pe){return"EAGER"===pe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[$,W]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const Ce=this.getOrInitializeService({instanceIdentifier:je});W.resolve(Ce)}catch{}}}}clearInstance(H=ie){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,g.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...$.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ie){return this.instances.has(H)}getOptions(H=ie){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,W=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:W,options:$});for(const[Ce,qe]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ce)&&qe.resolve(je);return je}onInit(H,$){var W;const je=this.normalizeInstanceIdentifier($),Ce=null!==(W=this.onInitCallbacks.get(je))&&void 0!==W?W:new Set;Ce.add(H),this.onInitCallbacks.set(je,Ce);const qe=this.instances.get(je);return qe&&H(qe,je),()=>{Ce.delete(H)}}invokeOnInitCallbacks(H,$){const W=this.onInitCallbacks.get($);if(W)for(const je of W)try{je(H,$)}catch{}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let W=this.instances.get(H);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=H,pe===ie?void 0:pe),options:$}),this.instances.set(H,W),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(W,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,W)}catch{}var pe;return W||null}normalizeInstanceIdentifier(H=ie){return this.component?this.component.multipleInstances?H:ie:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new se(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,xe,k)=>{k.d(xe,{Am:()=>pe,Ub:()=>we,Yd:()=>ye,in:()=>Y});const g=[];var Y=(()=>{return(H=Y||(Y={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Y;var H})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ie=Y.INFO,se={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},re=(H,$,...W)=>{if($<H.logLevel)return;const je=(new Date).toISOString(),Ce=se[$];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ce](`[${je}]  ${H.name}:`,...W)};class ye{constructor($){this.name=$,this._logLevel=ie,this._logHandler=re,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function we(H){g.forEach($=>{$.setLogLevel(H)})}function pe(H,$){for(const W of g){let je=null;$&&$.level&&(je=O[$.level]),W.userLogHandler=null===H?null:(Ce,qe,...ut)=>{const ge=ut.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");qe>=(je??Ce.logLevel)&&H({level:Y[qe].toLowerCase(),message:ge,args:ut,type:Ce.name})}}}},259:(mt,xe,k)=>{k.d(xe,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(6881);(0,g.registerVersion)("firebase","9.23.0","app")},9260:(mt,xe,k)=>{k.d(xe,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(mt,xe,k)=>{k.r(xe);var g=k(5861),Y=k(3942),O=k(2090),ie=k(6881),se=k(7582),re=k(1877),ye=k(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W_EMAIL_SIGNIN="EMAIL_SIGNIN",W_PASSWORD_RESET="PASSWORD_RESET",W_RECOVER_EMAIL="RECOVER_EMAIL",W_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",W_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",W_VERIFY_EMAIL="VERIFY_EMAIL";const qe=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ut=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new re.Yd("@firebase/auth");function Ne(y,...h){Pe.logLevel<=re.in.ERROR&&Pe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Ie(y,...h){throw tt(y,...h)}function Ee(y,...h){return tt(y,...h)}function He(y,h,f){const _=Object.assign(Object.assign({},ut()),{[h]:f});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Le(y,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Ie(y,"argument-error"),He(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(y,...h){if("string"!=typeof y){const f=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(f,..._)}return ge.create(y,...h)}function ne(y,h,...f){if(!y)throw tt(h,...f)}function Dt(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ne(h),new Error(h)}function Je(y,h){y||Dt(h)}function $t(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Ps()||"https:"===Ps()}function Ps(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class zi{constructor(h,f){this.shortDelay=h,this.longDelay=f,Je(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Yr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ae(y,h){Je(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class le{static initialize(h,f,_){this.fetchImpl=h,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new zi(3e4,6e4);function Te(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function De(y,h,f,_){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(y,h,f,_,T={}){return lt(y,T,(0,g.Z)(function*(){let M={},U={};_&&("GET"===h?U=_:M={body:JSON.stringify(_)});const K=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Se=yield y._getAdditionalHeaders();return Se["Content-Type"]="application/json",y.languageCode&&(Se["X-Firebase-Locale"]=y.languageCode),le.fetch()(In(y,y.config.apiHost,f,K),Object.assign({method:h,headers:Se,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function lt(y,h,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(y,h,f){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},me),h);try{const T=new gn(y),M=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw On(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const K=M.ok?U.errorMessage:U.error.message,[Se,$e]=K.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw On(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Se)throw On(y,"email-already-in-use",U);if("USER_DISABLED"===Se)throw On(y,"user-disabled",U);const et=_[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw He(y,et,$e);Ie(y,et)}}catch(T){if(T instanceof O.ZR)throw T;Ie(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function ft(y,h,f,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(function*(y,h,f,_,T={}){const M=yield De(y,h,f,_,T);return"mfaPendingCredential"in M&&Ie(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function In(y,h,f,_){const T=`${h}${f}?${_}`;return y.config.emulator?ae(y.config,T):`${y.config.apiScheme}://${T}`}class gn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(Ee(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(y,h,f){const _={appName:y.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const T=Ee(y,h,_);return T.customData._tokenResponse=f,T}function Sn(){return(Sn=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function pt(){return(pt=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Jr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Br(){return(Br=(0,g.Z)(function*(y,h=!1){const f=(0,O.m9)(y),_=yield f.getIdToken(h),T=Qt(_);ne(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,U=M?.sign_in_provider;return{claims:T,token:_,authTime:Jr(Gi(T.auth_time)),issuedAtTime:Jr(Gi(T.iat)),expirationTime:Jr(Gi(T.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Gi(y){return 1e3*Number(y)}function Qt(y){const[h,f,_]=y.split(".");if(void 0===h||void 0===f||void 0===_)return Ne("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(f);return T?JSON.parse(T):(Ne("Failed to decode base64 JWT payload"),null)}catch(T){return Ne("Caught error parsing JWT payload as JSON",T?.toString()),null}}function nt(y,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,g.Z)(function*(y,h,f=!1){if(f)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&function hi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class Xr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield f.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class lr{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(y){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,g.Z)(function*(y){var h;const f=y.auth,_=yield y.getIdToken(),T=yield nt(y,function Ar(y,h){return pt.apply(this,arguments)}(f,{idToken:_}));ne(T?.users.length,f,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const U=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?function Wt(y){return y.map(h=>{var{providerId:f}=h,_=(0,se._T)(h,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(M.providerUserInfo):[],K=function Ns(y,h){return[...y.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(y.providerData,U),et=!!y.isAnonymous&&!(y.email&&M.passwordHash||K?.length),Xe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:K,metadata:new lr(M.createdAt,M.lastLoginAt),isAnonymous:et};Object.assign(y,Xe)}),Tn.apply(this,arguments)}function dn(){return(dn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield jr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(y,h){const f=yield lt(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,U=In(y,T,"/v1/token",`key=${M}`),K=yield y._getAdditionalHeaders();return K["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(U,{method:"POST",headers:K,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(typeof h.idToken<"u","internal-error"),ne(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Xt(y){const h=Qt(y);return ne(h,"internal-error"),ne(typeof h.exp<"u","internal-error"),ne(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var _=this;return(0,g.Z)(function*(){return ne(!_.accessToken||_.refreshToken,h,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var _=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:U}=yield function qi(y,h){return en.apply(this,arguments)}(h,f);_.updateTokensAndExpiration(T,M,Number(U))})()}updateTokensAndExpiration(h,f,_){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,f){const{refreshToken:_,accessToken:T,expirationTime:M}=f,U=new fi;return _&&(ne("string"==typeof _,"internal-error",{appName:h}),U.refreshToken=_),T&&(ne("string"==typeof T,"internal-error",{appName:h}),U.accessToken=T),M&&(ne("number"==typeof M,"internal-error",{appName:h}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return Dt("not implemented")}}function An(y,h){ne("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class $n{constructor(h){var{uid:f,auth:_,stsTokenManager:T}=h,M=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new lr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,g.Z)(function*(){const _=yield nt(f,f.stsTokenManager.getToken(f.auth,h));return ne(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(h){return function wr(y){return Br.apply(this,arguments)}(this,h)}reload(){return function ei(y){return dn.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new $n(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var _=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),f&&(yield jr(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const f=yield h.getIdToken();return yield nt(h,function cr(y,h){return Sn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var _,T,M,U,K,Se,$e,et;const Xe=null!==(_=f.displayName)&&void 0!==_?_:void 0,yn=null!==(T=f.email)&&void 0!==T?T:void 0,Ws=null!==(M=f.phoneNumber)&&void 0!==M?M:void 0,Dl=null!==(U=f.photoURL)&&void 0!==U?U:void 0,by=null!==(K=f.tenantId)&&void 0!==K?K:void 0,Kn=null!==(Se=f._redirectEventId)&&void 0!==Se?Se:void 0,nh=null!==($e=f.createdAt)&&void 0!==$e?$e:void 0,mg=null!==(et=f.lastLoginAt)&&void 0!==et?et:void 0,{uid:bl,emailVerified:Mf,isAnonymous:rh,providerData:Di,stsTokenManager:Rf}=f;ne(bl&&Rf,h,"internal-error");const Cl=fi.fromJSON(this.name,Rf);ne("string"==typeof bl,h,"internal-error"),An(Xe,h.name),An(yn,h.name),ne("boolean"==typeof Mf,h,"internal-error"),ne("boolean"==typeof rh,h,"internal-error"),An(Ws,h.name),An(Dl,h.name),An(by,h.name),An(Kn,h.name),An(nh,h.name),An(mg,h.name);const ih=new $n({uid:bl,auth:h,email:yn,emailVerified:Mf,displayName:Xe,isAnonymous:rh,photoURL:Dl,phoneNumber:Ws,tenantId:by,stsTokenManager:Cl,createdAt:nh,lastLoginAt:mg});return Di&&Array.isArray(Di)&&(ih.providerData=Di.map(f0=>Object.assign({},f0))),Kn&&(ih._redirectEventId=Kn),ih}static _fromIdTokenResponse(h,f,_=!1){return(0,g.Z)(function*(){const T=new fi;T.updateFromServerResponse(f);const M=new $n({uid:f.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield jr(M),M})()}}const Mi=new Map;function _n(y){Je(y instanceof Function,"Expected a class definition");let h=Mi.get(y);return h?(Je(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Mi.set(y,h),h)}const $r=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(f,_){var T=this;return(0,g.Z)(function*(){T.storage[f]=_})()}_get(f){var _=this;return(0,g.Z)(function*(){const T=_.storage[f];return void 0===T?null:T})()}_remove(f){var _=this;return(0,g.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return y.type="NONE",y})();function V(y,h,f){return`firebase:${y}:${h}:${f}`}class F{constructor(h,f,_){this.persistence=h,this.auth=f,this.userKey=_;const{config:T,name:M}=this.auth;this.fullUserKey=V(this.userKey,T.apiKey,M),this.fullPersistenceKey=V("persistence",T.apiKey,M),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?$n._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,g.Z)(function*(){if(f.persistence===h)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,_="authUser"){return(0,g.Z)(function*(){if(!f.length)return new F(_n($r),h,_);const T=(yield Promise.all(f.map(function(){var $e=(0,g.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return $e.apply(this,arguments)}}()))).filter($e=>$e);let M=T[0]||_n($r);const U=V(_,h.config.apiKey,h.name);let K=null;for(const $e of f)try{const et=yield $e._get(U);if(et){const Xe=$n._fromJSON(h,et);$e!==M&&(K=Xe),M=$e;break}}catch{}const Se=T.filter($e=>$e._shouldAllowMigration);return M._shouldAllowMigration&&Se.length?(M=Se[0],K&&(yield M._set(U,K.toJSON())),yield Promise.all(f.map(function(){var $e=(0,g.Z)(function*(et){if(et!==M)try{yield et._remove(U)}catch{}});return function(et){return $e.apply(this,arguments)}}())),new F(M,h,_)):new F(M,h,_)})()}}function G(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ct(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ve(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(kn(h))return"Blackberry";if(En(h))return"Webos";if(Q(h))return"Safari";if((h.includes("chrome/")||Ue(h))&&!h.includes("edge/"))return"Chrome";if(Kt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ve(y=(0,O.z$)()){return/firefox\//i.test(y)}function Q(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ue(y=(0,O.z$)()){return/crios\//i.test(y)}function Ct(y=(0,O.z$)()){return/iemobile/i.test(y)}function Kt(y=(0,O.z$)()){return/android/i.test(y)}function kn(y=(0,O.z$)()){return/blackberry/i.test(y)}function En(y=(0,O.z$)()){return/webos/i.test(y)}function on(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Wi(y=(0,O.z$)()){return on(y)||Kt(y)||En(y)||kn(y)||/windows phone/i.test(y)||Ct(y)}function de(y,h=[]){let f;switch(y){case"Browser":f=G((0,O.z$)());break;case"Worker":f=`${G((0,O.z$)())}-${y}`;break;default:f=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${ie.SDK_VERSION}/${_}`}function Oe(){return(Oe=(0,g.Z)(function*(y){return(yield De(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(y,h){return De(y,"GET","/v2/recaptchaConfig",Te(y,h))})).apply(this,arguments)}function Bt(y){return void 0!==y&&void 0!==y.getResponse}function gt(y){return void 0!==y&&void 0!==y.enterprise}class Jt{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(f=>"EMAIL_PASSWORD_PROVIDER"===f.provider&&"OFF"!==f.enforcementState)}}function dr(y){return new Promise((h,f)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=T=>{const M=Ee("internal-error");M.customData=T,f(M)},_.type="text/javascript",_.charset="UTF-8",function Yt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Hn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ro="NO_RECAPTCHA";class pi{constructor(h){this.type="recaptcha-enterprise",this.auth=un(h)}verify(h="verify",f=!1){var _=this;return(0,g.Z)(function*(){function M(){return M=(0,g.Z)(function*(K){if(!f){if(null==K.tenantId&&null!=K._agentRecaptchaConfig)return K._agentRecaptchaConfig.siteKey;if(null!=K.tenantId&&void 0!==K._tenantRecaptchaConfigs[K.tenantId])return K._tenantRecaptchaConfigs[K.tenantId].siteKey}return new Promise(function(){var Se=(0,g.Z)(function*($e,et){ht(K,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Xe=>{if(void 0!==Xe.recaptchaKey){const yn=new Jt(Xe);return null==K.tenantId?K._agentRecaptchaConfig=yn:K._tenantRecaptchaConfigs[K.tenantId]=yn,$e(yn.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(Xe=>{et(Xe)})});return function($e,et){return Se.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(K,Se,$e){const et=window.grecaptcha;gt(et)?et.enterprise.ready(()=>{et.enterprise.execute(K,{action:h}).then(Xe=>{Se(Xe)}).catch(()=>{Se(ro)})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((K,Se)=>{(function T(K){return M.apply(this,arguments)})(_.auth).then($e=>{if(!f&&gt(window.grecaptcha))U($e,K,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));dr("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{U($e,K,Se)}).catch(et=>{Se(et)})}}).catch($e=>{Se($e)})})})()}}function We(y,h,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(y,h,f,_=!1){const T=new pi(y);let M;try{M=yield T.verify(f)}catch{M=yield T.verify(f,!0)}const U=Object.assign({},h);return Object.assign(U,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class wn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const _=M=>new Promise((U,K)=>{try{U(h(M))}catch(Se){K(Se)}});_.onAbort=f,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,g.Z)(function*(){if(f.auth.currentUser===h)return;const _=[];try{for(const T of f.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const M of _)try{M()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class gi{constructor(h,f,_,T){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zn(this),this.idTokenSubscription=new zn(this),this.beforeStateQueue=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,f){var _=this;return f&&(this._popupRedirectResolver=_n(f)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,M;if(!_._deleted&&(_.persistenceManager=yield F.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUser(h){var f=this;return(0,g.Z)(function*(){var _;const T=yield f.assertedPersistence.getCurrentUser();let M=T,U=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const K=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Se=M?._redirectEventId,$e=yield f.tryRedirectSignIn(h);(!K||K===Se)&&$e?.user&&(M=$e.user,U=!0)}if(!M)return f.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield f.beforeStateQueue.runMiddleware(M)}catch(K){M=T,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(K))}return M?f.reloadAndSetCurrentUserOrClear(M):f.directlySetCurrentUser(null)}return ne(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===M._redirectEventId?f.directlySetCurrentUser(M):f.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var f=this;return(0,g.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,g.Z)(function*(){try{yield jr(h)}catch(_){if("auth/network-request-failed"!==_?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function no(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&ne(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(h,f=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&ne(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var f=this;return this.queue((0,g.Z)(function*(){yield f.assertedPersistence.setPersistence(_n(h))}))}initializeRecaptchaConfig(){var h=this;return(0,g.Z)(function*(){const f=yield ht(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Jt(f);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new pi(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,f,_){return this.registerStateListener(this.authStateSubscription,h,f,_)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,_){return this.registerStateListener(this.idTokenSubscription,h,f,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var _=this;return(0,g.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(f);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,g.Z)(function*(){if(!f.redirectPersistenceManager){const _=h&&_n(h)||f._popupRedirectResolver;ne(_,f,"argument-error"),f.redirectPersistenceManager=yield F.create(f,[_n(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,g.Z)(function*(){var _,T;return f._isInitialized&&(yield f.queue((0,g.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===h?f._currentUser:(null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,g.Z)(function*(){if(h===f.currentUser)return f.queue((0,g.Z)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,_,T){if(this._deleted)return()=>{};const M="function"==typeof f?f:f.next.bind(f),U=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof f?h.addObserver(f,_,T):h.addObserver(f)}directlySetCurrentUser(h){var f=this;return(0,g.Z)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var f;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const M=yield h._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var h=this;return(0,g.Z)(function*(){var f;const _=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return _?.error&&function Be(y,...h){Pe.logLevel<=re.in.WARN&&Pe.warn(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function un(y){return(0,O.m9)(y)}class zn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(f=>this.observer=f)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ls(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Sa(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ds{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Dt("not implemented")}_getIdTokenResponse(h){return Dt("not implemented")}_linkToIdToken(h,f){return Dt("not implemented")}_getReauthenticationResolver(h){return Dt("not implemented")}}function oo(y,h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:resetPassword",Te(y,h))})).apply(this,arguments)}function Vo(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bo(){return(Bo=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:update",Te(y,h))})).apply(this,arguments)}function Ir(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithPassword",Te(y,h))})).apply(this,arguments)}function ti(y,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:sendOobCode",Te(y,h))})).apply(this,arguments)}function jo(){return(jo=(0,g.Z)(function*(y,h){return ti(y,h)})).apply(this,arguments)}function Os(y,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,g.Z)(function*(y,h){return ti(y,h)})).apply(this,arguments)}function hr(y,h){return wu.apply(this,arguments)}function wu(){return(wu=(0,g.Z)(function*(y,h){return ti(y,h)})).apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(y,h){return ti(y,h)})).apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithEmailLink",Te(y,h))})).apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithEmailLink",Te(y,h))})).apply(this,arguments)}class Iu extends ds{constructor(h,f,_,T=null){super("password",_),this._email=h,this._password=f,this._tenantId=T}static _fromEmailAndPassword(h,f){return new Iu(h,f,"password")}static _fromEmailAndCode(h,f,_=null){return new Iu(h,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,g.Z)(function*(){var _;switch(f.signInMethod){case"password":const T={returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield We(h,T,"signInWithPassword");return Ir(h,M)}return Ir(h,T).catch(function(){var M=(0,g.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const K=yield We(h,T,"signInWithPassword");return Ir(h,K)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function xa(y,h){return $o.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:Ie(h,"internal-error")}})()}_linkToIdToken(h,f){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return Vo(h,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Bc(y,h){return mi.apply(this,arguments)}(h,{idToken:f,email:_._email,oobCode:_._password});default:Ie(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ni(y,h){return md.apply(this,arguments)}function md(){return(md=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithIdp",Te(y,h))})).apply(this,arguments)}class fs extends ds{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new fs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Ie("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=f,M=(0,se._T)(f,["providerId","signInMethod"]);if(!_||!T)return null;const U=new fs(_,T);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,Ni(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ni(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,O.xO)(f)}return h}}function jc(){return(jc=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:sendVerificationCode",Te(y,h))})).apply(this,arguments)}function yd(){return(yd=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,h))})).apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(y,h){const f=yield ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,h));if(f.temporaryProof)throw On(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const vd={USER_NOT_FOUND:"user-not-found"};function Du(){return(Du=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),vd)})).apply(this,arguments)}class yi extends ds{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new yi({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new yi({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function qp(y,h){return yd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Wp(y,h){return Eu.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ay(y,h){return Du.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:_,verificationCode:T}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:M}=h;return _||f||T||M?new yi({verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:M}):null}}class Ho{constructor(h){var f,_,T,M,U,K;const Se=(0,O.zd)((0,O.pd)(h)),$e=null!==(f=Se.apiKey)&&void 0!==f?f:null,et=null!==(_=Se.oobCode)&&void 0!==_?_:null,Xe=function nf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);ne($e&&et&&Xe,"argument-error"),this.apiKey=$e,this.operation=Xe,this.code=et,this.continueUrl=null!==(M=Se.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Se.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(K=Se.tenantId)&&void 0!==K?K:null}static parseLink(h){const f=function _d(y){const h=(0,O.zd)((0,O.pd)(y)).link,f=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||f||h||y}(h);try{return new Ho(f)}catch{return null}}}let rf=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,_){return Iu._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const T=Ho.parseLink(_);return ne(T,"argument-error"),Iu._fromEmailAndCode(f,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ps{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ki extends ps{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class uo extends Ki{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ne("providerId"in f&&"signInMethod"in f,"argument-error"),fs._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return uo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return uo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:M,nonce:U,providerId:K}=h;if(!_&&!T&&!f&&!M||!K)return null;try{return new uo(K)._credential({idToken:f,accessToken:_,nonce:U,pendingToken:M})}catch{return null}}}let $c=(()=>{class y extends Ki{constructor(){super("facebook.com")}static credential(f){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ma=(()=>{class y extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:T}=f;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),wd=(()=>{class y extends Ki{constructor(){super("github.com")}static credential(f){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ks extends ds{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,Ni(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ni(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:M}=f;return _&&T&&M&&_===T?new ks(_,M):null}static _create(h,f){return new ks(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ra extends ps{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ra.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ra.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=ks.fromJSON(h);return ne(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:_}=h;if(!f||!_)return null;try{return ks._create(_,f)}catch{return null}}}let bu=(()=>{class y extends Ki{constructor(){super("twitter.com")}static credential(f,_){return fs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=f;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ls(y,h){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signUp",Te(y,h))})).apply(this,arguments)}class Mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,_,T=!1){return(0,g.Z)(function*(){const M=yield $n._fromIdTokenResponse(h,_,T),U=Pa(_);return new Mr({user:M,providerId:U,_tokenResponse:_,operationType:f})})()}static _forOperation(h,f,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=Pa(_);return new Mr({user:h,providerId:T,_tokenResponse:_,operationType:f})})()}}function Pa(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function zo(){return(zo=(0,g.Z)(function*(y){var h;const f=un(y);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new Mr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield Ls(f,{returnSecureToken:!0}),T=yield Mr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(T.user),T})).apply(this,arguments)}class gs extends O.ZR{constructor(h,f,_,T){var M;super(f.code,f.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,gs.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,f,_,T){return new gs(h,f,_,T)}}function pr(y,h,f,_){return("reauthenticate"===h?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?gs._fromErrorAndOperation(y,M,h,_):M})}function Id(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Rr(){return Rr=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y);yield ms(!0,f,h);const{providerUserInfo:_}=yield function Vr(y,h){return Qr.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),T=Id(_||[]);return f.providerData=f.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),Rr.apply(this,arguments)}function Xn(y,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(y,h,f=!1){const _=yield nt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),f);return Mr._forOperation(y,"link",_)})).apply(this,arguments)}function ms(y,h,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(y,h,f){yield jr(h);const T=!1===y?"provider-already-linked":"no-such-provider";ne(Id(h.providerData).has(f)===y,h.auth,T)})).apply(this,arguments)}function Fs(y,h){return Go.apply(this,arguments)}function Go(){return(Go=(0,g.Z)(function*(y,h,f=!1){const{auth:_}=y,T="reauthenticate";try{const M=yield nt(y,pr(_,T,h,y),f);ne(M.idToken,_,"internal-error");const U=Qt(M.idToken);ne(U,_,"internal-error");const{sub:K}=U;return ne(y.uid===K,_,"user-mismatch"),Mr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ie(_,"user-mismatch"),M}})).apply(this,arguments)}function Na(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(y,h,f=!1){const _="signIn",T=yield pr(y,_,h),M=yield Mr._fromIdTokenResponse(y,_,T);return f||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Oa(y,h){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(y,h){return Na(un(y),h)})).apply(this,arguments)}function bd(y,h){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y);return yield ms(!1,f,h.providerId),Xn(f,h)})).apply(this,arguments)}function Cd(y,h){return Su.apply(this,arguments)}function Su(){return(Su=(0,g.Z)(function*(y,h){return Fs((0,O.m9)(y),h)})).apply(this,arguments)}function Td(){return(Td=(0,g.Z)(function*(y,h){return ft(y,"POST","/v1/accounts:signInWithCustomToken",Te(y,h))})).apply(this,arguments)}function kt(){return kt=(0,g.Z)(function*(y,h){const f=un(y),_=yield function Zp(y,h){return Td.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),T=yield Mr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(T.user),T}),kt.apply(this,arguments)}class ka{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?La._fromServerResponse(h,f):"totpInfo"in f?er._fromServerResponse(h,f):Ie(h,"internal-error")}}class La extends ka{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new La(f)}}class er extends ka{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new er(f)}}function co(y,h,f){var _;ne((null===(_=f.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),ne(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ne(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ne(f.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function zr(){return zr=(0,g.Z)(function*(y,h,f){var _;const T=un(y),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const U=yield We(T,M,"getOobCode",!0);f&&co(T,U,f),yield Os(T,U)}else f&&co(T,M,f),yield Os(T,M).catch(function(){var U=(0,g.Z)(function*(K){if("auth/missing-recaptcha-token"!==K.code)return Promise.reject(K);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield We(T,M,"getOobCode",!0);f&&co(T,Se,f),yield Os(T,Se)}});return function(K){return U.apply(this,arguments)}}())}),zr.apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(y,h,f){yield oo((0,O.m9)(y),{oobCode:h,newPassword:f})})).apply(this,arguments)}function ys(){return ys=(0,g.Z)(function*(y,h){yield function Zi(y,h){return Bo.apply(this,arguments)}((0,O.m9)(y),{oobCode:h})}),ys.apply(this,arguments)}function Fa(y,h){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y),_=yield oo(f,{oobCode:h}),T=_.requestType;switch(ne(T,f,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(_.mfaInfo,f,"internal-error");default:ne(_.email,f,"internal-error")}let M=null;return _.mfaInfo&&(M=ka._fromServerResponse(un(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,h){const{data:f}=yield Fa((0,O.m9)(y),h);return f.email})).apply(this,arguments)}function _i(){return _i=(0,g.Z)(function*(y,h,f){var _;const T=un(y),M={returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const $e=yield We(T,M,"signUpPassword");U=Ls(T,$e)}else U=Ls(T,M).catch(function(){var $e=(0,g.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Xe=yield We(T,M,"signUpPassword");return Ls(T,Xe)}return Promise.reject(et)});return function(et){return $e.apply(this,arguments)}}());const K=yield U.catch($e=>Promise.reject($e)),Se=yield Mr._fromIdTokenResponse(T,"signIn",K);return yield T._updateCurrentUser(Se.user),Se}),_i.apply(this,arguments)}function Mu(){return Mu=(0,g.Z)(function*(y,h,f){var _;const T=un(y),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function U(K,Se){ne(Se.handleCodeInApp,T,"argument-error"),Se&&co(T,K,Se)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const K=yield We(T,M,"getOobCode",!0);U(K,f),yield hr(T,K)}else U(M,f),yield hr(T,M).catch(function(){var K=(0,g.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield We(T,M,"getOobCode",!0);U($e,f),yield hr(T,$e)}});return function(Se){return K.apply(this,arguments)}}())}),Mu.apply(this,arguments)}function qo(){return(qo=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),T=rf.credentialWithLink(h,f||$t());return ne(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Oa(_,T)})).apply(this,arguments)}function Ru(){return(Ru=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:createAuthUri",Te(y,h))})).apply(this,arguments)}function Pu(){return Pu=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:at()?$t():"http://localhost"},{signinMethods:T}=yield function Gc(y,h){return Ru.apply(this,arguments)}((0,O.m9)(y),_);return T||[]}),Pu.apply(this,arguments)}function Va(){return Va=(0,g.Z)(function*(y,h){const f=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&co(f.auth,T,h);const{email:M}=yield function Vc(y,h){return jo.apply(this,arguments)}(f.auth,T);M!==y.email&&(yield y.reload())}),Va.apply(this,arguments)}function Ba(){return Ba=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};f&&co(_.auth,M,f);const{email:U}=yield function ni(y,h){return ri.apply(this,arguments)}(_.auth,M);U!==y.email&&(yield y.reload())}),Ba.apply(this,arguments)}function Ou(){return(Ou=(0,g.Z)(function*(y,h){return De(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ku(){return ku=(0,g.Z)(function*(y,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const _=(0,O.m9)(y),M={idToken:yield _.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},U=yield nt(_,function Md(y,h){return Ou.apply(this,arguments)}(_.auth,M));_.displayName=U.displayName||null,_.photoURL=U.photoUrl||null;const K=_.providerData.find(({providerId:Se})=>"password"===Se);K&&(K.displayName=_.displayName,K.photoURL=_.photoURL),yield _._updateTokensIfNecessary(U)}),ku.apply(this,arguments)}function Dn(y,h,f){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,g.Z)(function*(y,h,f){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(M.email=h),f&&(M.password=f);const U=yield nt(y,Vo(_,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class ho{constructor(h,f,_={}){this.isNewUser=h,this.providerId=f,this.profile=_}}class cf extends ho{constructor(h,f,_,T){super(h,f,_),this.username=T}}class Rd extends ho{constructor(h,f){super(h,"facebook.com",f)}}class Qp extends cf{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Fu extends ho{constructor(h,f){super(h,"google.com",f)}}class Wc extends cf{constructor(h,f,_){super(h,"twitter.com",f,_)}}function Zc(y){const{user:h,_tokenResponse:f}=y;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function uf(y){var h,f;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const U=null===(f=null===(h=Qt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(U)return new ho(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!_)return null;switch(_){case"facebook.com":return new Rd(M,T);case"github.com":return new Qp(M,T);case"google.com":return new Fu(M,T);case"twitter.com":return new Wc(M,T,y.screenName||null);case"custom":case"anonymous":return new ho(M,null);default:return new ho(M,_,T)}}(f)}class fo{constructor(h,f,_){this.type=h,this.credential=f,this.auth=_}static _fromIdtoken(h,f){return new fo("enroll",h,f)}static _fromMfaPendingCredential(h){return new fo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,_;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return fo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return fo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class po{constructor(h,f,_){this.session=h,this.hints=f,this.signInResolver=_}static _fromError(h,f){const _=un(h),T=f.customData._serverResponse,M=(T.mfaInfo||[]).map(K=>ka._fromServerResponse(_,K));ne(T.mfaPendingCredential,_,"internal-error");const U=fo._fromMfaPendingCredential(T.mfaPendingCredential);return new po(U,M,function(){var K=(0,g.Z)(function*(Se){const $e=yield Se._process(_,U);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(f.operationType){case"signIn":const Xe=yield Mr._fromIdTokenResponse(_,f.operationType,et);return yield _._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return ne(f.user,_,"internal-error"),Mr._forOperation(f.user,f.operationType,et);default:Ie(_,"internal-error")}});return function(Se){return K.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,g.Z)(function*(){return f.signInResolver(h)})()}}class yo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>ka._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new yo(h)}getSession(){var h=this;return(0,g.Z)(function*(){return fo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var _=this;return(0,g.Z)(function*(){const T=h,M=yield _.getSession(),U=yield nt(_.user,T._process(_.user.auth,M,f));return yield _.user._updateTokensIfNecessary(U),_.user.reload()})()}unenroll(h){var f=this;return(0,g.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield f.user.getIdToken();try{const M=yield nt(f.user,function Bu(y,h){return De(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Te(y,h))}(f.user.auth,{idToken:T,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:U})=>U!==_),yield f.user._updateTokensIfNecessary(M),yield f.user.reload()}catch(M){throw M}})()}}const Us=new WeakMap,vo="__sak";class ju{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _o=(()=>{class y extends ju{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $a(){const y=(0,O.z$)();return Q(y)||on(y)}()&&function Ca(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Wi(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),M=this.localCache[_];T!==M&&f(_,M,T)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((K,Se,$e)=>{this.notifyListeners(K,$e)});const T=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const K=this.storage.getItem(T);if(f.newValue!==K)null!==f.newValue?this.storage.setItem(T,f.newValue):this.storage.removeItem(T);else if(this.localCache[T]===f.newValue&&!_)return}const M=()=>{const K=this.storage.getItem(T);!_&&this.localCache[T]===K||this.notifyListeners(T,K)},U=this.storage.getItem(T);!function Pi(){return(0,O.w1)()&&10===document.documentMode}()||U===f.newValue||f.newValue===f.oldValue?M():setTimeout(M,10)}notifyListeners(f,_){this.localCache[f]=_;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var T=()=>super._set,M=this;return(0,g.Z)(function*(){yield T().call(M,f,_),M.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,T=this;return(0,g.Z)(function*(){const M=yield _().call(T,f);return T.localCache[f]=JSON.stringify(M),M})()}_remove(f){var _=()=>super._remove,T=this;return(0,g.Z)(function*(){yield _().call(T,f),delete T.localCache[f]})()}}return y.type="LOCAL",y})(),ws=(()=>{class y extends ju{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return y.type="SESSION",y})();let Yo=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(M=>M.isListeningto(f));if(_)return _;const T=new y(f);return this.receivers.push(T),T}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,g.Z)(function*(){const T=f,{eventId:M,eventType:U,data:K}=T.data,Se=_.handlersMap[U];if(!Se?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const $e=Array.from(Se).map(function(){var Xe=(0,g.Z)(function*(yn){return yn(T.origin,K)});return function(yn){return Xe.apply(this,arguments)}}()),et=yield function Qc(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return h.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:et})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Qo(y="",h=10){let f="";for(let _=0;_<h;_++)f+=Math.floor(10*Math.random());return y+f}class kd{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,_=50){var T=this;return(0,g.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,K;return new Promise((Se,$e)=>{const et=Qo("",20);M.port1.start();const Xe=setTimeout(()=>{$e(new Error("unsupported_event"))},_);K={messageChannel:M,onMessage(yn){const Ws=yn;if(Ws.data.eventId===et)switch(Ws.data.status){case"ack":clearTimeout(Xe),U=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Se(Ws.data.response);break;default:clearTimeout(Xe),clearTimeout(U),$e(new Error("invalid_response"))}}},T.handlers.add(K),M.port1.addEventListener("message",K.onMessage),T.target.postMessage({eventType:h,eventId:et,data:f},[M.port2])}).finally(()=>{K&&T.removeMessageHandler(K)})})()}}function hn(){return window}function Hu(){return typeof hn().WorkerGlobalScope<"u"&&"function"==typeof hn().importScripts}function zu(){return(zu=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wo="firebaseLocalStorageDb",Fn=1,Xc="firebaseLocalStorage",Ha="fbase_key";class za{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Is(y,h){return y.transaction([Xc],h?"readwrite":"readonly").objectStore(Xc)}function qu(){const y=indexedDB.open(wo,Fn);return new Promise((h,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Xc,{keyPath:Ha})}catch(T){f(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Xc)?h(_):(_.close(),yield function hf(){const y=indexedDB.deleteDatabase(wo);return new za(y).toPromise()}(),h(yield qu()))}))})}function Io(y,h,f){return el.apply(this,arguments)}function el(){return(el=(0,g.Z)(function*(y,h,f){const _=Is(y,!0).put({[Ha]:h,value:f});return new za(_).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,h){const f=Is(y,!1).get(h),_=yield new za(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Vs(y,h){const f=Is(y,!0).delete(h);return new za(f).toPromise()}const Eo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,g.Z)(function*(){return f.db||(f.db=yield qu()),f.db})()}_withRetries(f){var _=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const M=yield _._openDb();return yield f(M)}catch(M){if(T++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,g.Z)(function*(){return Hu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,g.Z)(function*(){f.receiver=Yo._getInstance(function tr(){return Hu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(T,M){return{keyProcessed:(yield f._poll()).includes(M.key)}});return function(T,M){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,g.Z)(function*(){var _,T;if(f.activeServiceWorker=yield function Jc(){return zu.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new kd(f.activeServiceWorker);const M=yield f.sender._send("ping",{},800);M&&null!==(_=M[0])&&void 0!==_&&_.fulfilled&&null!==(T=M[0])&&void 0!==T&&T.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Gu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const f=yield qu();return yield Io(f,vo,"1"),yield Vs(f,vo),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(M=>Io(M,f,_)),T.localCache[f]=_,T.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,g.Z)(function*(){const T=yield _._withRetries(M=>function Ga(y,h){return Jo.apply(this,arguments)}(M,f));return _.localCache[f]=T,T})()}_remove(f){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(T=>Vs(T,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,g.Z)(function*(){const _=yield f._withRetries(U=>{const K=Is(U,!1).getAll();return new za(K).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:U,value:K}of _)M.add(U),JSON.stringify(f.localCache[U])!==JSON.stringify(K)&&(f.notifyListeners(U,K),T.push(U));for(const U of Object.keys(f.localCache))f.localCache[U]&&!M.has(U)&&(f.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(f,_){this.localCache[f]=_;const T=this.listeners[f];if(T)for(const M of Array.from(T))M(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Wa=1e12;class tl{constructor(h){this.auth=h,this.counter=Wa,this._widgets=new Map}render(h,f){const _=this.counter;return this._widgets.set(_,new nl(h,this.auth.name,f||{})),this.counter++,_}reset(h){var f;const _=h||Wa;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Wa))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,g.Z)(function*(){var _;return null===(_=f._widgets.get(h||Wa))||void 0===_||_.execute(),""})()}}class nl{constructor(h,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:f}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ly(y){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(f.charAt(Math.floor(Math.random()*f.length)));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gf=Hn("rcb"),dy=new zi(3e4,6e4);class hy{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=hn().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ne(function mf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Bt(hn().grecaptcha)?Promise.resolve(hn().grecaptcha):new Promise((_,T)=>{const M=hn().setTimeout(()=>{T(Ee(h,"network-request-failed"))},dy.get());hn()[gf]=()=>{hn().clearTimeout(M),delete hn()[gf];const K=hn().grecaptcha;if(!K||!Bt(K))return void T(Ee(h,"internal-error"));const Se=K.render;K.render=($e,et)=>{const Xe=Se($e,et);return this.counter++,Xe},this.hostLanguage=f,_(K)},dr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:gf,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(M),T(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=hn().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(h){return(0,g.Z)(function*(){return new tl(h)})()}clearedOneInstance(){}}const Za="recaptcha",Wu={theme:"light",type:"image"};class rl{constructor(h,f=Object.assign({},Wu),_){this.parameters=f,this.type=Za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(_),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new hy,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const f=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(f)||new Promise(M=>{const U=K=>{K&&(h.tokenChangeListeners.delete(U),M(K))};h.tokenChangeListeners.add(U),h.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof h)h(f);else if("string"==typeof h){const _=hn()[h];"function"==typeof _&&_(f)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){ne(at()&&!Hu(),h.auth,"internal-error"),yield function ki(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function X(y){return Oe.apply(this,arguments)}(h.auth);ne(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qi{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=yi._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function Co(){return(Co=(0,g.Z)(function*(y,h,f){const _=un(y),T=yield Yu(_,h,(0,O.m9)(f));return new Qi(T,M=>Oa(_,M))})).apply(this,arguments)}function Ku(){return(Ku=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);yield ms(!1,_,"phone");const T=yield Yu(_.auth,h,(0,O.m9)(f));return new Qi(T,M=>bd(_,M))})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y),T=yield Yu(_.auth,h,(0,O.m9)(f));return new Qi(T,M=>Cd(_,M))})).apply(this,arguments)}function Yu(y,h,f){return Gr.apply(this,arguments)}function Gr(){return Gr=(0,g.Z)(function*(y,h,f){var _;const T=yield f.verify();try{let M;if(ne("string"==typeof T,y,"argument-error"),ne(f.type===Za,y,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const U=M.session;if("phoneNumber"in M)return ne("enroll"===U.type,y,"internal-error"),(yield function Ko(y,h){return De(y,"POST","/v2/accounts/mfaEnrollment:start",Te(y,h))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===U.type,y,"internal-error");const K=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return ne(K,y,"missing-multi-factor-info"),(yield function Do(y,h){return De(y,"POST","/v2/accounts/mfaSignIn:start",Te(y,h))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:K,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Gp(y,h){return jc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return U}}finally{f._reset()}}),Gr.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,h){yield Xn((0,O.m9)(y),h)})).apply(this,arguments)}let Ji=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=un(f)}verifyPhoneNumber(f,_){return Yu(this.auth,f,(0,O.m9)(_))}static credential(f,_){return yi._fromVerification(f,_)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:T}=f;return _&&T?yi._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function it(y,h){return h?_n(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Wn extends ds{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ni(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ni(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ni(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function ii(y){return Na(y.auth,new Wn(y),y.bypassAuthState)}function Ud(y){const{auth:h,user:f}=y;return ne(f,h,"internal-error"),Fs(f,new Wn(y),y.bypassAuthState)}function To(y){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y){const{auth:h,user:f}=y;return ne(f,h,"internal-error"),Xn(f,new Wn(y),y.bypassAuthState)})).apply(this,arguments)}class sl{constructor(h,f,_,T,M=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,g.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(_,T){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:M,tenantId:U,error:K,type:Se}=h;if(K)return void f.reject(K);const $e={auth:f.auth,requestUri:_,sessionId:T,tenantId:U||void 0,postBody:M||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Se)($e))}catch(et){f.reject(et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ii;case"linkViaPopup":case"linkViaRedirect":return To;case"reauthViaPopup":case"reauthViaRedirect":return Ud;default:Ie(this.auth,"internal-error")}}resolve(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ii=new zi(2e3,1e4);function Qu(){return(Qu=(0,g.Z)(function*(y,h,f){const _=un(y);Le(y,h,ps);const T=it(_,f);return new Xu(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Le(_.auth,h,ps);const T=it(_.auth,f);return new Xu(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Le(_.auth,h,ps);const T=it(_.auth,f);return new Xu(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Xu=(()=>{class y extends sl{constructor(f,_,T,M,U){super(f,_,M,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,g.Z)(function*(){const _=yield f.execute();return ne(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,g.Z)(function*(){Je(1===f.filter.length,"Popup operations only handle one event");const _=Qo();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(Ee(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Ii.get())};f()}}return y.currentPopupAction=null,y})();const So="pendingRedirect",Ao=new Map;class _f extends sl{constructor(h,f,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,g.Z)(function*(){let _=Ao.get(f.auth._key());if(!_){try{const M=(yield function gr(y,h){return Vd.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;_=()=>Promise.resolve(M)}catch(T){_=()=>Promise.reject(T)}Ao.set(f.auth._key(),_)}return f.bypassAuthState||Ao.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,f().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Vd(){return(Vd=(0,g.Z)(function*(y,h){const f=Ya(h),_=Bd(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(f));return yield _._remove(f),T})).apply(this,arguments)}function js(y,h){return ta.apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(y,h){return Bd(y)._set(Ya(h),"true")})).apply(this,arguments)}function na(y,h){Ao.set(y._key(),h)}function Bd(y){return _n(y._redirectPersistence)}function Ya(y){return V(So,y.config.apiKey,y.name)}function ol(y,h,f){return function jd(y,h,f){return al.apply(this,arguments)}(y,h,f)}function al(){return(al=(0,g.Z)(function*(y,h,f){const _=un(y);Le(y,h,ps),yield _._initializationPromise;const T=it(_,f);return yield js(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function ul(y,h,f){return function $s(y,h,f){return Li.apply(this,arguments)}(y,h,f)}function Li(){return(Li=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Le(_.auth,h,ps),yield _.auth._initializationPromise;const T=it(_.auth,f);yield js(T,_.auth);const M=yield mr(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function $d(y,h,f){return function Nr(y,h,f){return ec.apply(this,arguments)}(y,h,f)}function ec(){return(ec=(0,g.Z)(function*(y,h,f){const _=(0,O.m9)(y);Le(_.auth,h,ps),yield _.auth._initializationPromise;const T=it(_.auth,f);yield ms(!1,_,h.providerId),yield js(T,_.auth);const M=yield mr(_);return T._openRedirect(_.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(y,h){return yield un(y)._initializationPromise,Es(y,h,!1)})).apply(this,arguments)}function Es(y,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h,f=!1){const _=un(y),T=it(_,h),U=yield new _f(_,T,f).execute();return U&&!f&&(delete U.user._redirectEventId,yield _._persistUserIfCurrent(U.user),yield _._setRedirectUser(null,h)),U})).apply(this,arguments)}function mr(y){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(y){const h=Qo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class xo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(f=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ds(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fi(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var _;if(h.error&&!Fi(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(Ee(this.auth,T))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const _=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ll(h))}saveEventToCache(h){this.cachedEventUids.add(ll(h)),this.lastProcessedEventTime=Date.now()}}function ll(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Fi({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Or(y){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h={}){return De(y,"GET","/v1/projects",h)})).apply(this,arguments)}const eg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ia=/^https?/;function Xi(){return(Xi=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Or(y);for(const f of h)try{if(dl(f))return}catch{}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function dl(y){const h=$t(),{protocol:f,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===_?"chrome-extension:"===f&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&U.hostname===_}if(!ia.test(f))return!1;if(eg.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Hd=new zi(3e4,6e4);function si(){const y=hn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let zs=null;const sa=new zi(5e3,15e3),zd="__/auth/iframe",Gd="emulator/auth/iframe",es={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wd(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const f=h.emulator?ae(h,Gd):`https://${y.config.authDomain}/${zd}`,_={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},T=qd.get(y.config.apiHost);T&&(_.eid=T);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${f}?${(0,O.xO)(_).slice(1)}`}function D(){return D=(0,g.Z)(function*(y){const h=yield function Mo(y){return zs=zs||function Tt(y){return new Promise((h,f)=>{var _,T,M;function U(){si(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{si(),f(Ee(y,"network-request-failed"))},timeout:Hd.get()})}if(null!==(T=null===(_=hn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(M=hn().gapi)||void 0===M||!M.load){const K=Hn("iframefcb");return hn()[K]=()=>{gapi.load?U():f(Ee(y,"network-request-failed"))},dr(`https://apis.google.com/js/api.js?onload=${K}`).catch(Se=>f(Se))}U()}}).catch(h=>{throw zs=null,h})}(y),zs}(y),f=hn().gapi;return ne(f,y,"internal-error"),h.open({where:document.body,url:Wd(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:es,dontclear:!0},_=>new Promise(function(){var T=(0,g.Z)(function*(M,U){yield _.restyle({setHideOnLeave:!1});const K=Ee(y,"network-request-failed"),Se=hn().setTimeout(()=>{U(K)},sa.get());function $e(){hn().clearTimeout(Se),M(_)}_.ping($e).then($e,()=>{U(K)})});return function(M,U){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const S={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N=500,j=600,Z="_blank",te="http://localhost";class ze{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rt="__/auth/handler",At="emulator/auth/handler",oi=encodeURIComponent("fac");function bn(y,h,f,_,T,M){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(y,h,f,_,T,M){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:_,v:ie.SDK_VERSION,eventId:T};if(h instanceof ps){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[et,Xe]of Object.entries(M||{}))U[et]=Xe}if(h instanceof Ki){const et=h.getScopes().filter(Xe=>""!==Xe);et.length>0&&(U.scopes=et.join(","))}y.tenantId&&(U.tid=y.tenantId);const K=U;for(const et of Object.keys(K))void 0===K[et]&&delete K[et];const Se=yield y._getAppCheckToken(),$e=Se?`#${oi}=${encodeURIComponent(Se)}`:"";return`${function Lt({config:y}){return y.emulator?ae(y,At):`https://${y.authDomain}/${Rt}`}(y)}?${(0,O.xO)(K).slice(1)}${$e}`})).apply(this,arguments)}const Ui="webStorageSupport",yr=class Vi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ws,this._completeRedirectFn=Es,this._overrideRedirectResult=na}_openPopup(h,f,_,T){var M=this;return(0,g.Z)(function*(){var U;Je(null===(U=M.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const K=yield bn(h,f,_,$t(),T);return function Ge(y,h,f,_=N,T=j){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-_)/2,0).toString();let K="";const Se=Object.assign(Object.assign({},S),{width:_.toString(),height:T.toString(),top:M,left:U}),$e=(0,O.z$)().toLowerCase();f&&(K=Ue($e)?Z:f),ve($e)&&(h=h||te,Se.scrollbars="yes");const et=Object.entries(Se).reduce((yn,[Ws,Dl])=>`${yn}${Ws}=${Dl},`,"");if(function xr(y=(0,O.z$)()){var h;return on(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($e)&&"_self"!==K)return function st(y,h){const f=document.createElement("a");f.href=y,f.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(h||"",K),new ze(null);const Xe=window.open(h||"",K,et);ne(Xe,y,"popup-blocked");try{Xe.focus()}catch{}return new ze(Xe)}(h,K,Qo())})()}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M._originValidation(h),function Ld(y){hn().location.href=y}(yield bn(h,f,_,$t(),T)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:T,promise:M}=this.eventManagers[f];return T?Promise.resolve(T):(Je(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(h);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(h){var f=this;return(0,g.Z)(function*(){const _=yield function I(y){return D.apply(this,arguments)}(h),T=new xo(h);return _.register("authEvent",M=>(ne(M?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:T},f.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Ui,{type:Ui},T=>{var M;const U=null===(M=T?.[0])||void 0===M?void 0:M[Ui];void 0!==U&&f(!!U),Ie(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ja(y){return Xi.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Wi()||Q()||on()}};class tc{constructor(h){this.factorId=h}_process(h,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,_);case"signin":return this._finalizeSignIn(h,f.credential);default:return Dt("unexpected MultiFactorSessionType")}}}class Xa extends tc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Xa(h)}_finalizeEnroll(h,f,_){return function Yc(y,h){return De(y,"POST","/v2/accounts/mfaEnrollment:finalize",Te(y,h))}(h,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function pf(y,h){return De(y,"POST","/v2/accounts/mfaSignIn:finalize",Te(y,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let eu=(()=>{class y{constructor(){}static assertion(f){return Xa._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var rc="@firebase/auth";class hl{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,g.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ru(){return window}(0,O.Pz)("authIdTokenMaxAge"),function tg(y){(0,ie._registerComponent)(new ye.wA("auth",(h,{options:f})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),M=h.getProvider("app-check-internal"),{apiKey:U,authDomain:K}=_.options;ne(U&&!U.includes(":"),"invalid-api-key",{appName:_.name});const Se={apiKey:U,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(y)},$e=new gi(_,T,M,Se);return function xn(y,h){const f=h?.persistence||[],_=(Array.isArray(f)?f:[f]).map(_n);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}($e,f),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,_)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ye.wA("auth-internal",h=>{const f=un(h.getProvider("auth").getImmediate());return new hl(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(rc,"0.23.2",function fl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(rc,"0.23.2","esm2017")}("Browser");const gy=2e3;function pl(){return pl=(0,g.Z)(function*(y,h,f){var _;const{BuildInfo:T}=ru();Je(h.sessionId,"AuthEvent did not contain a session ID");const M=yield function ic(y){return gl.apply(this,arguments)}(h.sessionId),U={};return on()?U.ibi=T.packageName:Kt()?U.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=M,bn(y,f,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,U)}),pl.apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(y){const{BuildInfo:h}=ru(),f={};on()?f.iosBundleId=h.packageName:Kt()?f.androidPackageName=h.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Or(y,f)})).apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h,f){const{cordova:_}=ru();let T=()=>{};try{yield new Promise((M,U)=>{let K=null;function Se(){var Xe;M();const yn=null===(Xe=_.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof yn&&yn(),"function"==typeof f?.close&&f.close()}function $e(){K||(K=window.setTimeout(()=>{U(Ee(y,"redirect-cancelled-by-user"))},gy))}function et(){"visible"===document?.visibilityState&&$e()}h.addPassiveListener(Se),document.addEventListener("resume",$e,!1),Kt()&&document.addEventListener("visibilitychange",et,!1),T=()=>{h.removePassiveListener(Se),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",et,!1),K&&window.clearTimeout(K)}})}finally{T()}})).apply(this,arguments)}function gl(){return(gl=(0,g.Z)(function*(y){const h=function Ef(y){if(Je(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),f=new Uint8Array(h);for(let _=0;_<y.length;_++)f[_]=y.charCodeAt(_);return f}(y),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const yy=20;class Qd extends xo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Jd(y){return ml.apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(y){const h=yield Xd()._get(oc(y));return h&&(yield Xd()._remove(oc(y))),h})).apply(this,arguments)}function ua(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<yy;f++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Xd(){return _n(_o)}function oc(y){return V("authEvent",y.config.apiKey,y.name)}function ca(y){if(!y?.includes("?"))return{};const[h,...f]=y.split("?");return(0,O.zd)(f.join("?"))}const su=class bf{constructor(){this._redirectPersistence=ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Es,this._overrideRedirectResult=na}_initialize(h){var f=this;return(0,g.Z)(function*(){const _=h._key();let T=f.eventManagers.get(_);return T||(T=new Qd(h),f.eventManagers.set(_,T),f.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ie(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){!function Yd(y){var h,f,_,T,M,U,K,Se,$e,et;const Xe=ru();ne("function"==typeof(null===(h=Xe?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(f=Xe?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(M=null===(T=null===(_=Xe?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Se=null===(K=null===(U=Xe?.cordova)||void 0===U?void 0:U.plugins)||void 0===K?void 0:K.browsertab)||void 0===Se?void 0:Se.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(et=null===($e=Xe?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===et?void 0:et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield M._initialize(h);yield U.initialized(),U.resetRedirect(),function wf(){Ao.clear()}(),yield M._originValidation(h);const K=function aa(y,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:ua(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(h,_,T);yield function sc(y,h){return Xd()._set(oc(y),h)}(h,K);const Se=yield function rg(y,h,f){return pl.apply(this,arguments)}(h,K,f),$e=yield function Kd(y){const{cordova:h}=ru();return new Promise(f=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Ht(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),f(T)})})}(Se);return function my(y,h,f){return Gs.apply(this,arguments)}(h,U,$e)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ig(y){return iu.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:_,handleOpenURL:T,BuildInfo:M}=ru(),U=setTimeout((0,g.Z)(function*(){yield Jd(h),f.onEvent(og())}),500),K=function(){var et=(0,g.Z)(function*(Xe){clearTimeout(U);const yn=yield Jd(h);let Ws=null;yn&&Xe?.url&&(Ws=function Df(y,h){var f,_;const T=function sg(y){const h=ca(y),f=h.link?decodeURIComponent(h.link):void 0,_=ca(f).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return ca(T).link||T||_||f||y}(h);if(T.includes("/__/auth/callback")){const M=ca(T),U=M.firebaseError?function yl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,K=null===(_=null===(f=U?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Se=K?Ee(K):null;return Se?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(yn,Xe.url)),f.onEvent(Ws||og())});return function(yn){return et.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,K);const Se=T,$e=`${M.packageName.toLowerCase()}://`;ru().handleOpenURL=function(){var et=(0,g.Z)(function*(Xe){if(Xe.toLowerCase().startsWith($e)&&K({url:Xe}),"function"==typeof Se)try{Se(Xe)}catch(yn){console.error(yn)}});return function(Xe){return et.apply(this,arguments)}}()}};function og(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}const qs=1e3;function da(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function fa(y=(0,O.z$)()){return!("file:"!==da()&&"ionic:"!==da()&&"capacitor:"!==da()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function wy(){try{const y=self.localStorage,h=Qo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function _y(y=(0,O.z$)()){return function pa(){return(0,O.w1)()&&11===document?.documentMode}()||function vy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Tf()&&(0,O.hl)()}return!1}function Tf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _l(){return(function ha(){return"http:"===da()||"https:"===da()}()||(0,O.ru)()||fa())&&!function ac(){return(0,O.b$)()||(0,O.UG)()}()&&wy()&&!Tf()}function ug(){return fa()&&typeof document<"u"}function uc(){return(uc=(0,g.Z)(function*(){return!!ug()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},qs);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ei={LOCAL:"local",NONE:"none",SESSION:"session"},cc=ne,eh="persistence";function Af(y){return xf.apply(this,arguments)}function xf(){return(xf=(0,g.Z)(function*(y){yield y._initializationPromise;const h=dg(),f=V(eh,y.config.apiKey,y.name);h&&h.setItem(f,y._getPersistence())})).apply(this,arguments)}function dg(){var y;try{return(null===(y=function Sf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const hg=ne;class kr{constructor(){this.browserResolver=_n(yr),this.cordovaResolver=_n(su),this.underlyingResolver=null,this._redirectPersistence=ws,this._completeRedirectFn=Es,this._overrideRedirectResult=na}_initialize(h){var f=this;return(0,g.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,f,_,T)})()}_openRedirect(h,f,_,T){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,f,_,T)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return ug()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const f=yield function cg(){return uc.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function ga(y){return y.unwrap()}function wl(y){return fg(y)}function fg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ji.credentialFromResult(y);const f=h.providerId;if(!f||f===pe.PASSWORD)return null;let _;switch(f){case pe.GOOGLE:_=Ma;break;case pe.FACEBOOK:_=$c;break;case pe.GITHUB:_=wd;break;case pe.TWITTER:_=bu;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:K,nonce:Se}=h;return M||U||T||K?K?f.startsWith("saml.")?ks._create(f,K):fs._fromParams({providerId:f,signInMethod:f,pendingToken:K,idToken:T,accessToken:M}):new uo(f).credential({idToken:T,accessToken:M,rawNonce:Se}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Bi(y,h){return h.catch(f=>{throw f instanceof O.ZR&&function Ey(y,h){var f;const _=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Dy(y,function Vu(y,h){var f;const _=(0,O.m9)(y),T=h;return ne(h.customData.operationType,_,"argument-error"),ne(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),po._fromError(_,T)}(y,h));else if(_){const T=fg(h),M=h;T&&(M.credential=T,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:wl(f),additionalUserInfo:Zc(f),user:ts.getOrCreate(T)}})}function ou(y,h){return Il.apply(this,arguments)}function Il(){return(Il=(0,g.Z)(function*(y,h){const f=yield h;return{verificationId:f.verificationId,confirm:_=>Bi(y,f.confirm(_))}})).apply(this,arguments)}class Dy{constructor(h,f){this.resolver=f,this.auth=function Ro(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Bi(ga(this.auth),this.resolver.resolveSignIn(h))}}class ts{constructor(h){this._delegate=h,this.multiFactor=function Nd(y){const h=(0,O.m9)(y);return Us.has(h)||Us.set(h,yo._fromUser(h)),Us.get(h)}(h)}static getOrCreate(h){return ts.USER_MAP.has(h)||ts.USER_MAP.set(h,new ts(h)),ts.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,g.Z)(function*(){return Bi(f.auth,bd(f._delegate,h))})()}linkWithPhoneNumber(h,f){var _=this;return(0,g.Z)(function*(){return ou(_.auth,function Zu(y,h,f){return Ku.apply(this,arguments)}(_._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,g.Z)(function*(){return Bi(f.auth,function Bs(y,h,f){return vt.apply(this,arguments)}(f._delegate,h,kr))})()}linkWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield Af(un(f.auth)),$d(f._delegate,h,kr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,g.Z)(function*(){return Bi(f.auth,Cd(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return ou(this.auth,function vf(y,h,f){return il.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return Bi(this.auth,function Ka(y,h,f){return Ju.apply(this,arguments)}(this._delegate,h,kr))}reauthenticateWithRedirect(h){var f=this;return(0,g.Z)(function*(){return yield Af(un(f.auth)),ul(f._delegate,h,kr)})()}sendEmailVerification(h){return function Nu(y,h){return Va.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,g.Z)(function*(){return yield function Ed(y,h){return Rr.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Er(y,h){return Dn((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function vs(y,h){return Dn((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Pr(y,h){return tn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function af(y,h){return ku.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function qc(y,h,f){return Ba.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ts.USER_MAP=new WeakMap;const lc=ne;let th=(()=>{class y{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=f.options;lc(T,"invalid-api-key",{appName:f.name}),lc(T,"invalid-api-key",{appName:f.name});const M=typeof window<"u"?kr:void 0;this._delegate=_.initialize({options:{persistence:bs(T,f.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ts.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function Ta(y,h,f){const _=un(y);ne(_._canInitEmulator,_,"emulator-config-failed"),ne(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!f?.disableWarnings,M=ls(h),{host:U,port:K}=function Vt(y){const h=ls(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const M=T[1];return{host:M,port:Sa(_.substr(M.length+1))}}{const[M,U]=_.split(":");return{host:M,port:Sa(U)}}}(h);_.config.emulator={url:`${M}//${U}${null===K?"":`:${K}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:U,port:K,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function so(){function y(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,f,_)}applyActionCode(f){return function Kp(y,h){return ys.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Fa(this._delegate,f)}confirmPasswordReset(f,_){return function Sd(y,h,f){return xu.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var T=this;return(0,g.Z)(function*(){return Bi(T._delegate,function lo(y,h,f){return _i.apply(this,arguments)}(T._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function xd(y,h){return Pu.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Yp(y,h){return"EMAIL_SIGNIN"===Ho.parseLink(h)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,g.Z)(function*(){lc(_l(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function cl(y,h){return Zn.apply(this,arguments)}(f._delegate,kr);return _?Bi(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Cf(y,h){un(y)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,_,T){const{next:M,error:U,complete:K}=El(f,_,T);return this._delegate.onAuthStateChanged(M,U,K)}onIdTokenChanged(f,_,T){const{next:M,error:U,complete:K}=El(f,_,T);return this._delegate.onIdTokenChanged(M,U,K)}sendSignInLinkToEmail(f,_){return function Ua(y,h,f){return Mu.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function Au(y,h,f){return zr.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,g.Z)(function*(){let T;switch(function lg(y,h){cc(Object.values(Ei).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?cc(h!==Ei.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?cc(h===Ei.NONE,y,"unsupported-persistence-type"):Tf()?cc(h===Ei.NONE||h===Ei.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):cc(h===Ei.NONE||wy(),y,"unsupported-persistence-type")}(_._delegate,f),f){case Ei.SESSION:T=ws;break;case Ei.LOCAL:T=(yield _n(Eo)._isAvailable())?Eo:_o;break;case Ei.NONE:T=$r;break;default:return Ie("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return Bi(this._delegate,function fr(y){return zo.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return Bi(this._delegate,Oa(this._delegate,f))}signInWithCustomToken(f){return Bi(this._delegate,function he(y,h){return kt.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return Bi(this._delegate,function Ad(y,h,f){return Oa((0,O.m9)(y),rf.credential(h,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return Bi(this._delegate,function qn(y,h,f){return qo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return ou(this._delegate,function yf(y,h,f){return Co.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,g.Z)(function*(){return lc(_l(),_._delegate,"operation-not-supported-in-this-environment"),Bi(_._delegate,function ea(y,h,f){return Qu.apply(this,arguments)}(_._delegate,f,kr))})()}signInWithRedirect(f){var _=this;return(0,g.Z)(function*(){return lc(_l(),_._delegate,"operation-not-supported-in-this-environment"),yield Af(_._delegate),ol(_._delegate,f,kr)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function vi(y,h){return Yi.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ei,y})();function El(y,h,f){let _=y;"function"!=typeof y&&({next:_,error:h,complete:f}=y);const T=_;return{next:U=>T(U&&ts.getOrCreate(U)),error:h,complete:f}}function bs(y,h){const f=function Iy(y,h){const f=dg();if(!f)return[];const _=V(eh,y,h);switch(f.getItem(_)){case Ei.NONE:return[$r];case Ei.LOCAL:return[Eo,ws];case Ei.SESSION:return[ws];default:return[]}}(y,h);if(typeof self<"u"&&!f.includes(Eo)&&f.push(Eo),typeof window<"u")for(const _ of[_o,ws])f.includes(_)||f.push(_);return f.includes($r)||f.push($r),f}class Po{constructor(){this.providerId="phone",this._delegate=new Ji(ga(Y.Z.auth()))}static credential(h,f){return Ji.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Po.PHONE_SIGN_IN_METHOD=Ji.PHONE_SIGN_IN_METHOD,Po.PROVIDER_ID=Ji.PROVIDER_ID;const pg=ne;class dc{constructor(h,f,_=Y.Z.app()){var T;pg(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new rl(h,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function h0(y){y.INTERNAL.registerComponent(new ye.wA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new th(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W_EMAIL_SIGNIN,PASSWORD_RESET:W_PASSWORD_RESET,RECOVER_EMAIL:W_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W_VERIFY_EMAIL}},EmailAuthProvider:rf,FacebookAuthProvider:$c,GithubAuthProvider:wd,GoogleAuthProvider:Ma,OAuthProvider:uo,SAMLAuthProvider:Ra,PhoneAuthProvider:Po,PhoneMultiFactorGenerator:eu,RecaptchaVerifier:dc,TwitterAuthProvider:bu,Auth:th,AuthCredential:ds,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},5861:(mt,xe,k)=>{function g(O,ie,se,re,ye,we,pe){try{var H=O[we](pe),$=H.value}catch(W){return void se(W)}H.done?ie($):Promise.resolve($).then(re,ye)}function Y(O){return function(){var ie=this,se=arguments;return new Promise(function(re,ye){var we=O.apply(ie,se);function pe($){g(we,re,ye,pe,H,"next",$)}function H($){g(we,re,ye,pe,H,"throw",$)}pe(void 0)})}}k.d(xe,{Z:()=>Y})},7582:(mt,xe,k)=>{function ie(ae,le){var me={};for(var oe in ae)Object.prototype.hasOwnProperty.call(ae,oe)&&le.indexOf(oe)<0&&(me[oe]=ae[oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(oe=Object.getOwnPropertySymbols(ae);Te<oe.length;Te++)le.indexOf(oe[Te])<0&&Object.prototype.propertyIsEnumerable.call(ae,oe[Te])&&(me[oe[Te]]=ae[oe[Te]])}return me}function W(ae,le,me,oe){return new(me||(me=Promise))(function(De,ct){function lt(Gt){try{ft(oe.next(Gt))}catch(In){ct(In)}}function vn(Gt){try{ft(oe.throw(Gt))}catch(In){ct(In)}}function ft(Gt){Gt.done?De(Gt.value):function Te(De){return De instanceof me?De:new me(function(ct){ct(De)})}(Gt.value).then(lt,vn)}ft((oe=oe.apply(ae,le||[])).next())})}function Ne(ae){return this instanceof Ne?(this.v=ae,this):new Ne(ae)}function Ie(ae,le,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,oe=me.apply(ae,le||[]),De=[];return Te={},ct("next"),ct("throw"),ct("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function ct(gn){oe[gn]&&(Te[gn]=function(On){return new Promise(function(cr,Sn){De.push([gn,On,cr,Sn])>1||lt(gn,On)})})}function lt(gn,On){try{!function vn(gn){gn.value instanceof Ne?Promise.resolve(gn.value.v).then(ft,Gt):In(De[0][2],gn)}(oe[gn](On))}catch(cr){In(De[0][3],cr)}}function ft(gn){lt("next",gn)}function Gt(gn){lt("throw",gn)}function In(gn,On){gn(On),De.shift(),De.length&&lt(De[0][0],De[0][1])}}function He(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,le=ae[Symbol.asyncIterator];return le?le.call(ae):(ae=function ut(ae){var le="function"==typeof Symbol&&Symbol.iterator,me=le&&ae[le],oe=0;if(me)return me.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&oe>=ae.length&&(ae=void 0),{value:ae&&ae[oe++],done:!ae}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),me={},oe("next"),oe("throw"),oe("return"),me[Symbol.asyncIterator]=function(){return this},me);function oe(De){me[De]=ae[De]&&function(ct){return new Promise(function(lt,vn){!function Te(De,ct,lt,vn){Promise.resolve(vn).then(function(ft){De({value:ft,done:lt})},ct)}(lt,vn,(ct=ae[De](ct)).done,ct.value)})}}}k.d(xe,{FC:()=>Ie,KL:()=>He,_T:()=>ie,mG:()=>W,qq:()=>Ne}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{mt(mt.s=3168)}]);