"use strict";(self.webpackChunkscholarsMart=self.webpackChunkscholarsMart||[]).push([[179],{2011:(vt,Ae,k)=>{k.d(Ae,{Dh:()=>we,GT:()=>re,cc:()=>be,hO:()=>je,on:()=>$,pX:()=>se,xv:()=>pe});var h=k(4650),Y=k(9260),N=k(4976);vt=k.hmd(vt);const ie=["ngOnDestroy"],se=(Re,Oe,Be,Pe={})=>new Proxy(Re,{get:(Ee,Ie)=>Be.runOutsideAngular(()=>{var $e;if(Re[Ie])return!(null===($e=Pe?.spy)||void 0===$e)&&$e.get&&Pe.spy.get(Ie,Re[Ie]),Re[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const Fe=Oe.toPromise().then(nt=>{const ne=nt&&nt[Ie];return"function"==typeof ne?ne.bind(nt):ne&&ne.then?ne.then(Dt=>Be.run(()=>Dt)):Be.run(()=>ne)});return new Proxy(()=>{},{get:(nt,ne)=>Fe[ne],apply:(nt,ne,Dt)=>Fe.then(Je=>{var Ht;const at=Je&&Je(...Dt);return!(null===(Ht=Pe?.spy)||void 0===Ht)&&Ht.apply&&Pe.spy.apply(Ie,Dt,at),at})})})}),re=(Re,Oe)=>{Oe.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Pe=>{Object.defineProperty(Re.prototype,Pe,Object.getOwnPropertyDescriptor(Be.prototype||Be,Pe))})})};class ye{constructor(Oe){return Oe}}const we=new h.OlP("angularfire2.app.options"),pe=new h.OlP("angularfire2.app.name");function $(Re,Oe,Be){const Ee="object"==typeof Be&&Be||{};Ee.name=Ee.name||"string"==typeof Be&&Be||"[DEFAULT]";const $e=Y.Z.apps.filter(Fe=>Fe&&Fe.name===Ee.name)[0]||Oe.runOutsideAngular(()=>Y.Z.initializeApp(Re,Ee));try{JSON.stringify(Re)!==JSON.stringify($e.options)&&H("error",`${$e.name} Firebase App already initialized with different options${vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye($e)}const H=(Re,...Oe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Re](...Oe)},W={provide:ye,useFactory:$,deps:[we,h.R0b,[new h.FiY,pe]]};let je=(()=>{class Re{constructor(Be){Y.Z.registerVersion("angularfire",N.q4.full,"core"),Y.Z.registerVersion("angularfire",N.q4.full,"app-compat"),Y.Z.registerVersion("angular",h.q4F.full,Be.toString())}static initializeApp(Be,Pe){return{ngModule:Re,providers:[{provide:we,useValue:Be},{provide:pe,useValue:Pe}]}}}return Re.\u0275fac=function(Be){return new(Be||Re)(h.LFG(h.Lbi))},Re.\u0275mod=h.oAB({type:Re}),Re.\u0275inj=h.cJS({providers:[W]}),Re})();function be(Re,Oe,Be,Pe,Ee){const[,Ie,$e]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Re)||[];if(Ie)return function qe(Re,Oe){try{return Re.toString()===Oe.toString()}catch{return Re===Oe}}(Ee,$e)||(ge("error",`${Oe} was already initialized on the ${Be} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:$e})),Ie;{const Fe=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Re,Fe,Ee]),Fe}}const ct=!!vt.hot,ge=(Re,...Oe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Re](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(vt,Ae,k)=>{k.d(Ae,{q4:()=>ca,iC:()=>Wd,HU:()=>ri,vb:()=>eu,JM:()=>la});var h=k(4650),Y=k(259),N=k(5861),ie=k(6881),se=k(2090),re=k(4859),ye=k(1877);const we=(E,D)=>D.some(A=>E instanceof A);let pe,$;const je=new WeakMap,be=new WeakMap,qe=new WeakMap,ct=new WeakMap,ge=new WeakMap;let Be={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return be.get(E);if("objectStoreNames"===D)return E.objectStoreNames||qe.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return $e(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Ie(E){return"function"==typeof E?function Ee(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Fe(this),D),$e(je.get(this))}:function(...D){return $e(E.apply(Fe(this),D))}:function(D,...A){const P=E.call(Fe(this),D,...A);return qe.set(P,D.sort?D.sort():[D]),$e(P)}}(E):(E instanceof IDBTransaction&&function Oe(E){if(be.has(E))return;const D=new Promise((A,P)=>{const j=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",te),E.removeEventListener("abort",te)},Z=()=>{A(),j()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),j()};E.addEventListener("complete",Z),E.addEventListener("error",te),E.addEventListener("abort",te)});be.set(E,D)}(E),we(E,function H(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Be):E)}function $e(E){if(E instanceof IDBRequest)return function Re(E){const D=new Promise((A,P)=>{const j=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",te)},Z=()=>{A($e(E.result)),j()},te=()=>{P(E.error),j()};E.addEventListener("success",Z),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&je.set(A,E)}).catch(()=>{}),ge.set(D,E),D}(E);if(ct.has(E))return ct.get(E);const D=Ie(E);return D!==E&&(ct.set(E,D),ge.set(D,E)),D}const Fe=E=>ge.get(E),Dt=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],Ht=new Map;function at(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Ht.get(D))return Ht.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,j=Je.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!j&&!Dt.includes(A))return;const Z=function(){var te=(0,N.Z)(function*(Ge,...ze){const ot=this.transaction(Ge,j?"readwrite":"readonly");let Rt=ot.store;return P&&(Rt=Rt.index(ze.shift())),(yield Promise.all([Rt[A](...ze),j&&ot.done]))[0]});return function(ze){return te.apply(this,arguments)}}();return Ht.set(D,Z),Z}!function Pe(E){Be=E(Be)}(E=>({...E,get:(D,A,P)=>at(D,A)||E.get(D,A,P),has:(D,A)=>!!at(D,A)||E.has(D,A)}));const Ns="@firebase/installations",Wr="0.6.4",lo=1e4,qi=`w:${Wr}`,ue="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",me=36e5,lt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function _n({projectId:E}){return`${le}/projects/${E}/installations`}function ft(E){return{token:E.token,requestStatus:2,expiresIn:Fr(E.expiresIn),creationTime:Date.now()}}function Wt(E,D){return In.apply(this,arguments)}function In(){return(In=(0,N.Z)(function*(E,D){const P=(yield D.json()).error;return lt.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function fn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function ar(E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Fr(E){return Number(E.replace("s","000"))}function pt(){return(pt=(0,N.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const P=_n(E),j=fn(E),Z=D.getImmediate({optional:!0});if(Z){const ot=yield Z.getHeartbeatsHeader();ot&&j.append("x-firebase-client",ot)}const Ge={method:"POST",headers:j,body:JSON.stringify({fid:A,authVersion:ue,appId:E.appId,sdkVersion:qi})},ze=yield ar(()=>fetch(P,Ge));if(ze.ok){const ot=yield ze.json();return{fid:ot.fid||A,registrationStatus:2,refreshToken:ot.refreshToken,authToken:ft(ot.authToken)}}throw yield Wt("Create Installation",ze)})).apply(this,arguments)}function Kr(E){return new Promise(D=>{setTimeout(D,E)})}const yr=/^[cdef][\w-]{21}$/,Lr="";function Wi(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Jt(E){return function qc(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return yr.test(A)?A:Lr}catch{return Lr}}function tn(E){return`${E.appName}!${E.appId}`}const rt=new Map;function xt(E,D){const A=tn(E);ur(A,D),function Vr(E,D){const A=function Qr(){return!Sn&&"BroadcastChannel"in self&&(Sn=new BroadcastChannel("[Firebase] FID Change"),Sn.onmessage=E=>{ur(E.data.key,E.data.fid)}),Sn}();A&&A.postMessage({key:E,fid:D}),function ln(){0===rt.size&&Sn&&(Sn.close(),Sn=null)}()}(A,D)}function ur(E,D){const A=rt.get(E);if(A)for(const P of A)P(D)}let Sn=null;const ks="firebase-installations-database",Zt=1,Zi="firebase-installations-store";let nn=null;function fi(){return nn||(nn=function nt(E,D,{blocked:A,upgrade:P,blocking:j,terminated:Z}={}){const te=indexedDB.open(E,D),Ge=$e(te);return P&&te.addEventListener("upgradeneeded",ze=>{P($e(te.result),ze.oldVersion,ze.newVersion,$e(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),Ge.then(ze=>{Z&&ze.addEventListener("close",()=>Z()),j&&ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ge}(ks,Zt,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Zi)}})),nn}function Rn(E,D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,N.Z)(function*(E,D){const A=tn(E),j=(yield fi()).transaction(Zi,"readwrite"),Z=j.objectStore(Zi),te=yield Z.get(A);return yield Z.put(D,A),yield j.done,(!te||te.fid!==D.fid)&&xt(E,D.fid),D})).apply(this,arguments)}function Ai(E){return wn.apply(this,arguments)}function wn(){return(wn=(0,N.Z)(function*(E){const D=tn(E),P=(yield fi()).transaction(Zi,"readwrite");yield P.objectStore(Zi).delete(D),yield P.done})).apply(this,arguments)}function xi(E,D){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,N.Z)(function*(E,D){const A=tn(E),j=(yield fi()).transaction(Zi,"readwrite"),Z=j.objectStore(Zi),te=yield Z.get(A),Ge=D(te);return void 0===Ge?yield Z.delete(A):yield Z.put(Ge,A),yield j.done,Ge&&(!te||te.fid!==Ge.fid)&&xt(E,Ge.fid),Ge})).apply(this,arguments)}function U(E){return L.apply(this,arguments)}function L(){return L=(0,N.Z)(function*(E){let D;const A=yield xi(E.appConfig,P=>{const j=function z(E){return Cn(E||{fid:Wi(),registrationStatus:0})}(P),Z=function ve(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(lt.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},P=function J(E,D){return Ve.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:P}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:bt(E)}:{installationEntry:D}}(E,j);return D=Z.registrationPromise,Z.installationEntry});return A.fid===Lr?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}}),L.apply(this,arguments)}function Ve(){return Ve=(0,N.Z)(function*(E,D){try{const A=yield function Ir(E,D){return pt.apply(this,arguments)}(E,D);return Rn(E.appConfig,A)}catch(A){throw dt(A)&&409===A.customData.serverCode?yield Ai(E.appConfig):yield Rn(E.appConfig,{fid:D.fid,registrationStatus:0}),A}}),Ve.apply(this,arguments)}function bt(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,N.Z)(function*(E){let D=yield Fn(E.appConfig);for(;1===D.registrationStatus;)yield Kr(100),D=yield Fn(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield U(E);return P||A}return D})).apply(this,arguments)}function Fn(E){return xi(E,D=>{if(!D)throw lt.create("installation-not-found");return Cn(D)})}function Cn(E){return function on(E){return 1===E.registrationStatus&&E.registrationTime+lo<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Cr(){return(Cr=(0,N.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const P=function Mi(E,{fid:D}){return`${_n(E)}/${D}/authTokens:generate`}(E,A),j=function kn(E,{refreshToken:D}){const A=fn(E);return A.append("Authorization",function Zr(E){return`${ue} ${E}`}(D)),A}(E,A),Z=D.getImmediate({optional:!0});if(Z){const ot=yield Z.getHeartbeatsHeader();ot&&j.append("x-firebase-client",ot)}const Ge={method:"POST",headers:j,body:JSON.stringify({installation:{sdkVersion:qi,appId:E.appId}})},ze=yield ar(()=>fetch(P,Ge));if(ze.ok)return ft(yield ze.json());throw yield Wt("Generate Auth Token",ze)})).apply(this,arguments)}function Ki(E){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,N.Z)(function*(E,D=!1){let A;const P=yield xi(E.appConfig,Z=>{if(!Bt(Z))throw lt.create("not-registered");const te=Z.authToken;if(!D&&function gt(E){return 2===E.requestStatus&&!function Xt(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+me}(E)}(te))return Z;if(1===te.requestStatus)return A=function de(E,D){return X.apply(this,arguments)}(E,D),Z;{if(!navigator.onLine)throw lt.create("app-offline");const Ge=function Qt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(Z);return A=function ht(E,D){return It.apply(this,arguments)}(E,Ge),Ge}});return A?yield A:P.authToken}),Aa.apply(this,arguments)}function X(){return(X=(0,N.Z)(function*(E,D){let A=yield Ne(E.appConfig);for(;1===A.authToken.requestStatus;)yield Kr(100),A=yield Ne(E.appConfig);const P=A.authToken;return 0===P.requestStatus?Ki(E,D):P})).apply(this,arguments)}function Ne(E){return xi(E,D=>{if(!Bt(D))throw lt.create("not-registered");return function cr(E){return 1===E.requestStatus&&E.requestTime+lo<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function It(){return It=(0,N.Z)(function*(E,D){try{const A=yield function Gt(E,D){return Cr.apply(this,arguments)}(E,D),P=Object.assign(Object.assign({},D),{authToken:A});return yield Rn(E.appConfig,P),A}catch(A){if(!dt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Rn(E.appConfig,P)}else yield Ai(E.appConfig);throw A}}),It.apply(this,arguments)}function Bt(E){return void 0!==E&&2===E.registrationStatus}function wu(){return(wu=(0,N.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:P}=yield U(D);return P?P.catch(console.error):Ki(D).catch(console.error),A.fid})).apply(this,arguments)}function ho(){return ho=(0,N.Z)(function*(E,D=!1){const A=E;return yield function pi(E){return We.apply(this,arguments)}(A),(yield Ki(A,D)).token}),ho.apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(E){const{registrationPromise:D}=yield U(E);D&&(yield D)})).apply(this,arguments)}function fs(E){return lt.create("missing-app-config-values",{valueName:E})}const Vt="installations",fo=E=>{const D=E.getProvider("app").getImmediate(),A=function xa(E){if(!E||!E.options)throw fs("App Configuration");if(!E.name)throw fs("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw fs(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ps=E=>{const D=E.getProvider("app").getImmediate(),A=(0,ie._getProvider)(D,Vt).getImmediate();return{getId:()=>function $n(E){return wu.apply(this,arguments)}(A),getToken:j=>function lf(E){return ho.apply(this,arguments)}(A,j)}};(function po(){(0,ie._registerComponent)(new re.wA(Vt,fo,"PUBLIC")),(0,ie._registerComponent)(new re.wA("installations-internal",ps,"PRIVATE"))})(),(0,ie.registerVersion)(Ns,Wr),(0,ie.registerVersion)(Ns,Wr,"esm2017");const Ln="@firebase/remote-config",vr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ms{constructor(D,A,P,j){this.client=D,this.storage=A,this.storageCache=P,this.logger=j}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,j=P<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${j}.`),j}fetch(D){var A=this;return(0,N.Z)(function*(){const[P,j]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(j&&A.isCachedDataFresh(D.cacheMaxAgeMillis,P))return j;D.eTag=j&&j.eTag;const Z=yield A.client.fetch(D),te=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&te.push(A.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(te),Z})()}}function ig(E=navigator){return E.languages&&E.languages[0]||E.language}class Kc{constructor(D,A,P,j,Z,te){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=P,this.projectId=j,this.apiKey=Z,this.appId=te}fetch(D){var A=this;return(0,N.Z)(function*(){const[P,j]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},ze={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:j,app_id:A.appId,language_code:ig()},ot={method:"POST",headers:Ge,body:JSON.stringify(ze)},Rt=fetch(te,ot),At=new Promise((Vi,pr)=>{D.signal.addEventListener(()=>{const rc=new Error("The operation was aborted.");rc.name="AbortError",pr(rc)})});let ii;try{yield Promise.race([Rt,At]),ii=yield Rt}catch(Vi){let pr="fetch-client-network";throw"AbortError"===Vi?.name&&(pr="fetch-timeout"),vr.create(pr,{originalErrorMessage:Vi?.message})}let bn=ii.status;const si=ii.headers.get("ETag")||void 0;let Ft,Li;if(200===ii.status){let Vi;try{Vi=yield ii.json()}catch(pr){throw vr.create("fetch-client-parse",{originalErrorMessage:pr?.message})}Ft=Vi.entries,Li=Vi.state}if("INSTANCE_STATE_UNSPECIFIED"===Li?bn=500:"NO_CHANGE"===Li?bn=304:("NO_TEMPLATE"===Li||"EMPTY_CONFIG"===Li)&&(Ft={}),304!==bn&&200!==bn)throw vr.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:si,config:Ft}})()}}class og{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,N.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,P)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:P}){var j=this;return(0,N.Z)(function*(){yield function sg(E,D){return new Promise((A,P)=>{const j=Math.max(D-Date.now(),0),Z=setTimeout(A,j);E.addEventListener(()=>{clearTimeout(Z),P(vr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const Z=yield j.client.fetch(D);return yield j.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function vd(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Z))throw Z;const te={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield j.storage.setThrottleMetadata(te),j.attemptFetch(D,te)}})()}}class Iy{constructor(D,A,P,j,Z){this.app=D,this._client=A,this._storageCache=P,this._storage=j,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Du(E,D){const A=E.target.error||void 0;return vr.create(D,{originalErrorMessage:A&&A?.message})}const yi="app_namespace_store";class Cy{constructor(D,A,P,j=function Zo(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{D(Du(P,"storage-open"))},A.onsuccess=P=>{E(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(yi,{keyPath:"compositeKey"})}}catch(A){D(vr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=P,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,N.Z)(function*(){const P=yield A.openDbPromise;return new Promise((j,Z)=>{const Ge=P.transaction([yi],"readonly").objectStore(yi),ze=A.createCompositeKey(D);try{const ot=Ge.get(ze);ot.onerror=Rt=>{Z(Du(Rt,"storage-get"))},ot.onsuccess=Rt=>{const At=Rt.target.result;j(At?At.value:void 0)}}catch(ot){Z(vr.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(D,A){var P=this;return(0,N.Z)(function*(){const j=yield P.openDbPromise;return new Promise((Z,te)=>{const ze=j.transaction([yi],"readwrite").objectStore(yi),ot=P.createCompositeKey(D);try{const Rt=ze.put({compositeKey:ot,value:A});Rt.onerror=At=>{te(Du(At,"storage-set"))},Rt.onsuccess=()=>{Z()}}catch(Rt){te(vr.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(D){var A=this;return(0,N.Z)(function*(){const P=yield A.openDbPromise;return new Promise((j,Z)=>{const Ge=P.transaction([yi],"readwrite").objectStore(yi),ze=A.createCompositeKey(D);try{const ot=Ge.delete(ze);ot.onerror=Rt=>{Z(Du(Rt,"storage-delete"))},ot.onsuccess=()=>{j()}}catch(ot){Z(vr.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ff{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const A=D.storage.getLastFetchStatus(),P=D.storage.getLastSuccessfulFetchTimestampMillis(),j=D.storage.getActiveConfig(),Z=yield A;Z&&(D.lastFetchStatus=Z);const te=yield P;te&&(D.lastSuccessfulFetchTimestampMillis=te);const Ge=yield j;Ge&&(D.activeConfig=Ge)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Yc(){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,N.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function ys(){(0,ie._registerComponent)(new re.wA("remote-config",function E(D,{instanceIdentifier:A}){const P=D.getProvider("app").getImmediate(),j=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,se.hl)())throw vr.create("indexed-db-unavailable");const{projectId:Z,apiKey:te,appId:Ge}=P.options;if(!Z)throw vr.create("registration-project-id");if(!te)throw vr.create("registration-api-key");if(!Ge)throw vr.create("registration-app-id");const ze=new Cy(Ge,P.name,A=A||"firebase"),ot=new ff(ze),Rt=new ye.Yd(Ln);Rt.logLevel=ye.in.ERROR;const At=new Kc(j,ie.SDK_VERSION,A,Z,te,Ge),ii=new og(At,ze),bn=new ms(ii,ze,ot,Rt),si=new Iy(P,bn,ot,ze,Rt);return function Xr(E){const D=(0,se.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(si),si},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ln,"0.4.4"),(0,ie.registerVersion)(Ln,"0.4.4","esm2017")}();const Ed=(E,D)=>D.some(A=>E instanceof A);let Qc,Vs;const bu=new WeakMap,Us=new WeakMap,Br=new WeakMap,Dr=new WeakMap,ka=new WeakMap;let vs={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Us.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Br.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return br(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Cd(E){return"function"==typeof E?function Id(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Na(){return Vs||(Vs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Xn(this),D),br(bu.get(this))}:function(...D){return br(E.apply(Xn(this),D))}:function(D,...A){const P=E.call(Xn(this),D,...A);return Br.set(P,D.sort?D.sort():[D]),br(P)}}(E):(E instanceof IDBTransaction&&function Ko(E){if(Us.has(E))return;const D=new Promise((A,P)=>{const j=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",te),E.removeEventListener("abort",te)},Z=()=>{A(),j()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),j()};E.addEventListener("complete",Z),E.addEventListener("error",te),E.addEventListener("abort",te)});Us.set(E,D)}(E),Ed(E,function pf(){return Qc||(Qc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,vs):E)}function br(E){if(E instanceof IDBRequest)return function dr(E){const D=new Promise((A,P)=>{const j=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",te)},Z=()=>{A(br(E.result)),j()},te=()=>{P(E.error),j()};E.addEventListener("success",Z),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&bu.set(A,E)}).catch(()=>{}),ka.set(D,E),D}(E);if(Dr.has(E))return Dr.get(E);const D=Cd(E);return D!==E&&(Dr.set(E,D),ka.set(D,E)),D}const Xn=E=>ka.get(E);function Tu(E,D,{blocked:A,upgrade:P,blocking:j,terminated:Z}={}){const te=indexedDB.open(E,D),Ge=br(te);return P&&te.addEventListener("upgradeneeded",ze=>{P(br(te.result),ze.oldVersion,ze.newVersion,br(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),Ge.then(ze=>{Z&&ze.addEventListener("close",()=>Z()),j&&ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ge}function _s(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),br(A).then(()=>{})}const Jc=["get","getKey","getAll","getAllKeys","count"],Bs=["put","add","delete","clear"],Yo=new Map;function Fa(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Yo.get(D))return Yo.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,j=Bs.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!j&&!Jc.includes(A))return;const Z=function(){var te=(0,N.Z)(function*(Ge,...ze){const ot=this.transaction(Ge,j?"readwrite":"readonly");let Rt=ot.store;return P&&(Rt=Rt.index(ze.shift())),(yield Promise.all([Rt[A](...ze),j&&ot.done]))[0]});return function(ze){return te.apply(this,arguments)}}();return Yo.set(D,Z),Z}!function hr(E){vs=E(vs)}(E=>({...E,get:(D,A,P)=>Fa(D,A)||E.get(D,A,P),has:(D,A)=>!!Fa(D,A)||E.has(D,A)}));const Mt="/firebase-messaging-sw.js",La="/firebase-cloud-messaging-push-scope",Dd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bd="https://fcmregistrations.googleapis.com/v1",Su="google.c.a.c_id",Td="google.c.a.c_l",Au="google.c.a.ts",ag="google.c.a.e";var he=(()=>{return(E=he||(he={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",he;var E})();function kt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Va(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),j=new Uint8Array(P.length);for(let Z=0;Z<P.length;++Z)j[Z]=P.charCodeAt(Z);return j}const Ua="fcm_token_details_db",er=5,yo="fcm_token_object_Store";function jr(){return jr=(0,N.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(Ua))return null;let D=null;return(yield Tu(Ua,er,{upgrade:(P=(0,N.Z)(function*(j,Z,te,Ge){var ze;if(Z<2||!j.objectStoreNames.contains(yo))return;const ot=Ge.objectStore(yo),Rt=yield ot.index("fcmSenderId").get(E);if(yield ot.clear(),Rt)if(2===Z){const At=Rt;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(ze=At.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:kt(At.vapidKey)}}}else if(3===Z){const At=Rt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:kt(At.auth),p256dh:kt(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:kt(At.vapidKey)}}}else if(4===Z){const At=Rt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:kt(At.auth),p256dh:kt(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:kt(At.vapidKey)}}}}),function(Z,te,Ge,ze){return P.apply(this,arguments)})})).close(),yield _s(Ua),yield _s("fcm_vapid_details_db"),yield _s("undefined"),function Ad(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var P}),jr.apply(this,arguments)}const Mu="firebase-messaging-database",ug=1,ws="firebase-messaging-store";let Ba=null;function zn(){return Ba||(Ba=Tu(Mu,ug,{upgrade:(E,D)=>{0===D&&E.createObjectStore(ws)}})),Ba}function vi(E){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,N.Z)(function*(E){const D=Ru(E),P=yield(yield zn()).transaction(ws).objectStore(ws).get(D);if(P)return P;{const j=yield function xu(E){return jr.apply(this,arguments)}(E.appConfig.senderId);if(j)return yield vo(E,j),j}}),Ji.apply(this,arguments)}function vo(E,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,N.Z)(function*(E,D){const A=Ru(E),j=(yield zn()).transaction(ws,"readwrite");return yield j.objectStore(ws).put(D,A),yield j.done,D})).apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(E){const D=Ru(E),P=(yield zn()).transaction(ws,"readwrite");yield P.objectStore(ws).delete(D),yield P.done})).apply(this,arguments)}function Ru({appConfig:E}){return E.appId}const qn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qo(E,D){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,N.Z)(function*(E,D){const A=yield el(E),P=Rd(D),j={method:"POST",headers:A,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(Ha(E.appConfig),j)).json()}catch(te){throw qn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(Z.error)throw qn.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw qn.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Md(){return(Md=(0,N.Z)(function*(E,D){const A=yield el(E),P=Rd(D.subscriptionOptions),j={method:"PATCH",headers:A,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(`${Ha(E.appConfig)}/${D.token}`,j)).json()}catch(te){throw qn.create("token-update-failed",{errorInfo:te?.toString()})}if(Z.error)throw qn.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw qn.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Pu(E,D){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,N.Z)(function*(E,D){const P={method:"DELETE",headers:yield el(E)};try{const Z=yield(yield fetch(`${Ha(E.appConfig)}/${D}`,P)).json();if(Z.error)throw qn.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(j){throw qn.create("token-unsubscribe-failed",{errorInfo:j?.toString()})}})).apply(this,arguments)}function Ha({projectId:E}){return`${bd}/projects/${E}/registrations`}function el(E){return $a.apply(this,arguments)}function $a(){return($a=(0,N.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Rd({p256dh:E,auth:D,endpoint:A,vapidKey:P}){const j={web:{endpoint:A,auth:D,p256dh:E}};return P!==Dd&&(j.web.applicationPubKey=P),j}const ku=6048e5;function Fu(){return Fu=(0,N.Z)(function*(E){const D=yield function yf(E,D){return Od.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:kt(D.getKey("auth")),p256dh:kt(D.getKey("p256dh"))},P=yield vi(E.firebaseDependencies);if(P){if(function lg(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(P.subscriptionOptions,A))return Date.now()>=P.createTime+ku?function Dn(E,D){return Lu.apply(this,arguments)}(E,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield Pu(E.firebaseDependencies,P.token)}catch(j){console.warn(j)}return mf(E.firebaseDependencies,A)}return mf(E.firebaseDependencies,A)}),Fu.apply(this,arguments)}function Es(){return Es=(0,N.Z)(function*(E){const D=yield vi(E.firebaseDependencies);D&&(yield Pu(E.firebaseDependencies,D.token),yield function xd(E){return ja.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Es.apply(this,arguments)}function Lu(){return Lu=(0,N.Z)(function*(E,D){try{const A=yield function Ou(E,D){return Md.apply(this,arguments)}(E.firebaseDependencies,D),P=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield vo(E.firebaseDependencies,P),A}catch(A){throw yield function _r(E){return Es.apply(this,arguments)}(E),A}}),Lu.apply(this,arguments)}function mf(E,D){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(E,D){const P={token:yield Qo(E,D),createTime:Date.now(),subscriptionOptions:D};return yield vo(E,P),P.token})).apply(this,arguments)}function Od(){return(Od=(0,N.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Va(D)})})).apply(this,arguments)}function Vu(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function tl(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const P=D.notification.body;P&&(E.notification.body=P);const j=D.notification.image;j&&(E.notification.image=j);const Z=D.notification.icon;Z&&(E.notification.icon=Z)}(D,E),function nl(E,D){D.data&&(E.data=D.data)}(D,E),function Pd(E,D){var A,P,j,Z,te;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Ge=null!==(j=null===(P=D.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==j?j:null===(Z=D.notification)||void 0===Z?void 0:Z.click_action;Ge&&(E.fcmOptions.link=Ge);const ze=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;ze&&(E.fcmOptions.analyticsLabel=ze)}(D,E),D}function Jo(E,D){const A=[];for(let P=0;P<E.length;P++)A.push(E.charAt(P)),P<D.length&&A.push(D.charAt(P));return A.join("")}function Is(E){return qn.create("missing-app-config-values",{valueName:E})}Jo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class dg{constructor(D,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Xo(E){if(!E||!E.options)throw Is("App Configuration Object");if(!E.name)throw Is("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const P of D)if(!A[P])throw Is(P);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:j,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function vf(E){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,N.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Mt,{scope:La}),E.swRegistration.update().catch(()=>{})}catch(D){throw qn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ga(){return(Ga=(0,N.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield vf(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw qn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function Eo(){return(Eo=(0,N.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Dd)})).apply(this,arguments)}function ea(){return ea=(0,N.Z)(function*(E,D){if(!navigator)throw qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw qn.create("permission-blocked");return yield function wo(E,D){return Eo.apply(this,arguments)}(E,D?.vapidKey),yield function Dy(E,D){return Ga.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function gf(E){return Fu.apply(this,arguments)}(E)}),ea.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(E,D,A){const P=function Co(E){switch(E){case he.NOTIFICATION_CLICKED:return"notification_open";case he.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[Su],message_name:A[Td],message_time:A[Au],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Do(){return Do=(0,N.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===he.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Vu(A)):E.onMessageHandler.next(Vu(A)));const P=A.data;(function rl(E){return"object"==typeof E&&!!E&&Su in E})(P)&&"1"===P[ag]&&(yield function il(E,D,A){return Io.apply(this,arguments)}(E,A.messageType,P))}),Do.apply(this,arguments)}const js="@firebase/messaging",bo=E=>{const D=new dg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function ju(E,D){return Do.apply(this,arguments)}(D,A)),D},Hu=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:P=>function Bu(E,D){return ea.apply(this,arguments)}(D,P)}};function _f(){return $u.apply(this,arguments)}function $u(){return($u=(0,N.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function za(){(0,ie._registerComponent)(new re.wA("messaging",bo,"PUBLIC")),(0,ie._registerComponent)(new re.wA("messaging-internal",Hu,"PRIVATE")),(0,ie.registerVersion)(js,"0.12.4"),(0,ie.registerVersion)(js,"0.12.4","esm2017")}();const dn="analytics",Ld="firebase_id",Gu="origin",ol=6e4,zu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qu="https://www.googletagmanager.com/gtag/js",tr=new ye.Yd("@firebase/analytics"),Vn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function al(E){if(!E.startsWith(qu)){const D=Vn.create("invalid-gtag-resource",{gtagURL:E});return tr.warn(D.message),""}return E}function qa(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function Ao(){return(Ao=(0,N.Z)(function*(E,D,A,P,j,Z){const te=P[j];try{if(te)yield D[te];else{const ze=(yield qa(A)).find(ot=>ot.measurementId===j);ze&&(yield D[ze.appId])}}catch(Ge){tr.error(Ge)}E("config",j,Z)})).apply(this,arguments)}function Za(){return(Za=(0,N.Z)(function*(E,D,A,P,j){try{let Z=[];if(j&&j.send_to){let te=j.send_to;Array.isArray(te)||(te=[te]);const Ge=yield qa(A);for(const ze of te){const ot=Ge.find(At=>At.measurementId===ze),Rt=ot&&D[ot.appId];if(!Rt){Z=[];break}Z.push(Rt)}}0===Z.length&&(Z=Object.values(D)),yield Promise.all(Z),E("event",P,j||{})}catch(Z){tr.error(Z)}})).apply(this,arguments)}const Ka=30,Mo=new class xo{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function If(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Kt(){return(Kt=(0,N.Z)(function*(E){var D;const{appId:A,apiKey:P}=E,j={method:"GET",headers:If(P)},Z=zu.replace("{app-id}",A),te=yield fetch(Z,j);if(200!==te.status&&304!==te.status){let Ge="";try{const ze=yield te.json();null!==(D=ze.error)&&void 0!==D&&D.message&&(Ge=ze.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:te.status,responseMessage:Ge})}return te.json()})).apply(this,arguments)}function Ya(){return(Ya=(0,N.Z)(function*(E,D=Mo,A){const{appId:P,apiKey:j,measurementId:Z}=E.options;if(!P)throw Vn.create("no-app-id");if(!j){if(Z)return{measurementId:Z,appId:P};throw Vn.create("no-api-key")}const te=D.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Ty;return setTimeout((0,N.Z)(function*(){Ge.abort()}),void 0!==A?A:ol),cl({appId:P,apiKey:j,measurementId:Z},te,Ge,D)})).apply(this,arguments)}function cl(E,D,A){return ll.apply(this,arguments)}function ll(){return ll=(0,N.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},P,j=Mo){var Z;const{appId:te,measurementId:Ge}=E;try{yield function by(E,D){return new Promise((A,P)=>{const j=Math.max(D-Date.now(),0),Z=setTimeout(A,j);E.addEventListener(()=>{clearTimeout(Z),P(Vn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(P,D)}catch(ze){if(Ge)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${ze?.message}]`),{appId:te,measurementId:Ge};throw ze}try{const ze=yield function Vd(E){return Kt.apply(this,arguments)}(E);return j.deleteThrottleMetadata(te),ze}catch(ze){const ot=ze;if(!function Cf(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ot)){if(j.deleteThrottleMetadata(te),Ge)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:te,measurementId:Ge};throw ze}const Rt=503===Number(null===(Z=ot?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,se.$s)(A,j.intervalMillis,Ka):(0,se.$s)(A,j.intervalMillis),At={throttleEndTimeMillis:Date.now()+Rt,backoffCount:A+1};return j.setThrottleMetadata(te,At),tr.debug(`Calling attemptFetch again in ${Rt} millis`),cl(E,At,P,j)}}),ll.apply(this,arguments)}class Ty{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Ro,Tf;function Df(){return(Df=(0,N.Z)(function*(E,D,A,P,j){if(j&&j.global)E("event",A,P);else{const Z=yield D;E("event",A,Object.assign(Object.assign({},P),{send_to:Z}))}})).apply(this,arguments)}function Tr(){return(Tr=(0,N.Z)(function*(){if(!(0,se.hl)())return tr.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return tr.warn(Vn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ni(){return Ni=(0,N.Z)(function*(E,D,A,P,j,Z,te){var Ge;const ze=function hg(E){return Ya.apply(this,arguments)}(E);ze.then(bn=>{A[bn.measurementId]=bn.appId,E.options.measurementId&&bn.measurementId!==E.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>tr.error(bn)),D.push(ze);const ot=function Hr(){return Tr.apply(this,arguments)}().then(bn=>{if(bn)return P.getId()}),[Rt,At]=yield Promise.all([ze,ot]);(function ia(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(qu)&&A.src.includes(E))return A;return null})(Z)||function Ds(E,D){const A=function Wa(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:al}),P=document.createElement("script"),j=`${qu}?l=${E}&id=${D}`;P.src=A?A?.createScriptURL(j):j,P.async=!0,document.head.appendChild(P)}(Z,Rt.measurementId),Tf&&(j("consent","default",Tf),function hl(E){Tf=E}(void 0)),j("js",new Date);const ii=null!==(Ge=te?.config)&&void 0!==Ge?Ge:{};return ii[Gu]="firebase",ii.update=!0,null!=At&&(ii[Ld]=At),j("config",Rt.measurementId,ii),Ro&&(j("set",Ro),function Qu(E){Ro=E}(void 0)),Rt.measurementId}),Ni.apply(this,arguments)}class st{constructor(D){this.app=D}_delete(){return delete Wn[this.app.options.appId],Promise.resolve()}}let Wn={},ti=[];const Ud={};let fl,wi,Po="dataLayer",ni="gtag",sa=!1;function Xu(E,D,A){!function oa(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((P,j)=>`(${j+1}) ${P}`).join(" "),A=Vn.create("invalid-analytics-context",{errorInfo:D});tr.warn(A.message)}}();const P=E.options.appId;if(!P)throw Vn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Vn.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wn[P])throw Vn.create("already-exists",{id:P});if(!sa){!function wf(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(Po);const{wrappedGtag:Z,gtagCore:te}=function Hs(E,D,A,P,j){let Z=function(...te){window[P].push(arguments)};return window[j]&&"function"==typeof window[j]&&(Z=window[j]),window[j]=function ra(E,D,A,P){function Z(){return Z=(0,N.Z)(function*(te,...Ge){try{if("event"===te){const[ze,ot]=Ge;yield function ul(E,D,A,P,j){return Za.apply(this,arguments)}(E,D,A,ze,ot)}else if("config"===te){const[ze,ot]=Ge;yield function Wu(E,D,A,P,j,Z){return Ao.apply(this,arguments)}(E,D,A,P,ze,ot)}else if("consent"===te){const[ze]=Ge;E("consent","update",ze)}else if("get"===te){const[ze,ot,Rt]=Ge;E("get",ze,ot,Rt)}else if("set"===te){const[ze]=Ge;E("set",ze)}else E(te,...Ge)}catch(ze){tr.error(ze)}}),Z.apply(this,arguments)}return function j(te){return Z.apply(this,arguments)}}(Z,E,D,A),{gtagCore:Z,wrappedGtag:window[j]}}(Wn,ti,Ud,Po,ni);wi=Z,fl=te,sa=!0}return Wn[P]=function en(E,D,A,P,j,Z,te){return Ni.apply(this,arguments)}(E,ti,Ud,D,fl,Po,A),new st(E)}function ec(){return No.apply(this,arguments)}function No(){return(No=(0,N.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Ja="@firebase/analytics";!function $d(){(0,ie._registerComponent)(new re.wA(dn,(D,{options:A})=>Xu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ie._registerComponent)(new re.wA("analytics-internal",function E(D){try{const A=D.getProvider(dn).getImmediate();return{logEvent:(P,j,Z)=>function ua(E,D,A,P){E=(0,se.m9)(E),function Sy(E,D,A,P,j){return Df.apply(this,arguments)}(wi,Wn[E.app.options.appId],D,A,P).catch(j=>tr.error(j))}(A,P,j,Z)}}catch(A){throw Vn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ie.registerVersion)(Ja,"0.10.0"),(0,ie.registerVersion)(Ja,"0.10.0","esm2017")}();var pl=k(4408),qs=k(7565);const Gd=new class ki extends qs.v{}(class gl extends pl.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,A,P):(D.flush(this),0)}});var nc=k(4986),ml=k(8505),Zn=k(9468),bs=k(5363);const ca=new h.GfV("7.6.1"),fr="__angularfire_symbol__analyticsIsSupportedValue",ir="__angularfire_symbol__analyticsIsSupported",Xa="__angularfire_symbol__remoteConfigIsSupportedValue",ko="__angularfire_symbol__remoteConfigIsSupported",yl="__angularfire_symbol__messagingIsSupportedValue",Fi="__angularfire_symbol__messagingIsSupported";function la(E,D,A){if(D){if(1===D.length)return D[0];const Z=D.filter(te=>te.app===A);if(1===Z.length)return Z[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[ir]||(globalThis[ir]=ec().then(E=>globalThis[fr]=E).catch(()=>globalThis[fr]=!1)),globalThis[Fi]||(globalThis[Fi]=_f().then(E=>globalThis[yl]=E).catch(()=>globalThis[yl]=!1)),globalThis[ko]||(globalThis[ko]=Yc().then(E=>globalThis[Xa]=E).catch(()=>globalThis[Xa]=!1));const eu=(E,D)=>{const A=D?[D]:(0,Y.C6)(),P=[];return A.forEach(j=>{j.container.getProvider(E).instances.forEach(te=>{P.includes(te)||P.push(te)})}),P};function es(){}class vl{constructor(D,A=Gd){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,P){const j=this.zone;return this.delegate.schedule(function(te){j.runGuarded(()=>{D.apply(this,[te])})},A,P)}}class zd{constructor(D){this.zone=D,this.task=null}call(D,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es)),A.pipe((0,ml.b)({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ri=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new vl(Zone.current)),this.insideAngular=A.run(()=>new vl(Zone.current,nc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Tt(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Wd(E){return Tt(),function ts(E){return function(A){return(A=A.lift(new zd(E.ngZone))).pipe((0,Zn.R)(E.outsideAngular),(0,bs.Q)(E.insideAngular))}}(Tt())(E)}},2090:(vt,Ae,k)=>{k.d(Ae,{$s:()=>Ai,BH:()=>Ie,G6:()=>qi,L:()=>pe,LL:()=>Ce,Pz:()=>Ee,Sg:()=>$e,UG:()=>ne,US:()=>re,ZB:()=>W,ZR:()=>Te,aH:()=>Pe,b$:()=>Ht,eu:()=>le,hl:()=>ue,jU:()=>Dt,m9:()=>Ur,ne:()=>tn,pd:()=>Wi,r3:()=>Mn,ru:()=>Je,tV:()=>$,uI:()=>nt,vZ:()=>pt,w1:()=>Ns,xO:()=>yr,xb:()=>Zr,z$:()=>Fe,zI:()=>me,zd:()=>Lr});const ie=function(U){const L=[];let z=0;for(let ve=0;ve<U.length;ve++){let J=U.charCodeAt(ve);J<128?L[z++]=J:J<2048?(L[z++]=J>>6|192,L[z++]=63&J|128):55296==(64512&J)&&ve+1<U.length&&56320==(64512&U.charCodeAt(ve+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++ve)),L[z++]=J>>18|240,L[z++]=J>>12&63|128,L[z++]=J>>6&63|128,L[z++]=63&J|128):(L[z++]=J>>12|224,L[z++]=J>>6&63|128,L[z++]=63&J|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let J=0;J<U.length;J+=3){const Ve=U[J],bt=J+1<U.length,Yt=bt?U[J+1]:0,Fn=J+2<U.length,Cn=Fn?U[J+2]:0;let Cr=(15&Yt)<<2|Cn>>6,Mi=63&Cn;Fn||(Mi=64,bt||(Cr=64)),ve.push(z[Ve>>2],z[(3&Ve)<<4|Yt>>4],z[Cr],z[Mi])}return ve.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(ie(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,ve=0;for(;z<U.length;){const J=U[z++];if(J<128)L[ve++]=String.fromCharCode(J);else if(J>191&&J<224){const Ve=U[z++];L[ve++]=String.fromCharCode((31&J)<<6|63&Ve)}else if(J>239&&J<365){const Fn=((7&J)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[ve++]=String.fromCharCode(55296+(Fn>>10)),L[ve++]=String.fromCharCode(56320+(1023&Fn))}else{const Ve=U[z++],bt=U[z++];L[ve++]=String.fromCharCode((15&J)<<12|(63&Ve)<<6|63&bt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let J=0;J<U.length;){const Ve=z[U.charAt(J++)],Yt=J<U.length?z[U.charAt(J)]:0;++J;const Cn=J<U.length?z[U.charAt(J)]:64;++J;const Gt=J<U.length?z[U.charAt(J)]:64;if(++J,null==Ve||null==Yt||null==Cn||null==Gt)throw new ye;ve.push(Ve<<2|Yt>>4),64!==Cn&&(ve.push(Yt<<4&240|Cn>>2),64!==Gt&&ve.push(Cn<<6&192|Gt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pe=function(U){return function(U){const L=ie(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},$=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function W(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!je(z)||(U[z]=W(U[z],L[z]));return U}function je(U){return"__proto__"!==U}const Re=()=>{try{return function be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&$(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Pe=()=>{var U;return null===(U=Re())||void 0===U?void 0:U.config},Ee=U=>{var L;return null===(L=Re())||void 0===L?void 0:L[`_${U}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ve)=>{z?this.reject(z):this.resolve(ve),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ve))}}}function $e(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=L||"demo-project",J=U.iat||0,Ve=U.sub||U.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const bt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:J,exp:J+3600,auth_time:J,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},U);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(bt)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ne(){var U;const L=null===(U=Re())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Dt(){return"object"==typeof self&&self.self===self}function Je(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ns(){const U=Fe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function qi(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((U,L)=>{try{let z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ve);J.onsuccess=()=>{J.result.close(),z||self.indexedDB.deleteDatabase(ve),U(!0)},J.onupgradeneeded=()=>{z=!1},J.onerror=()=>{var Ve;L((null===(Ve=J.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(z){L(z)}})}function me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Te extends Error{constructor(L,z,ve){super(z),this.code=L,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(L,z,ve){this.service=L,this.serviceName=z,this.errors=ve}create(L,...z){const ve=z[0]||{},J=`${this.service}/${L}`,Ve=this.errors[L],bt=Ve?function lt(U,L){return U.replace(dt,(z,ve)=>{const J=L[ve];return null!=J?String(J):`<${ve}?>`})}(Ve,ve):"Error";return new Te(J,`${this.serviceName}: ${bt} (${J}).`,ve)}}const dt=/\{\$([^}]+)}/g;function Mn(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Zr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function pt(U,L){if(U===L)return!0;const z=Object.keys(U),ve=Object.keys(L);for(const J of z){if(!ve.includes(J))return!1;const Ve=U[J],bt=L[J];if(Kr(Ve)&&Kr(bt)){if(!pt(Ve,bt))return!1}else if(Ve!==bt)return!1}for(const J of ve)if(!z.includes(J))return!1;return!0}function Kr(U){return null!==U&&"object"==typeof U}function yr(U){const L=[];for(const[z,ve]of Object.entries(U))Array.isArray(ve)?ve.forEach(J=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ve));return L.length?"&"+L.join("&"):""}function Lr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[J,Ve]=ve.split("=");L[decodeURIComponent(J)]=decodeURIComponent(Ve)}}),L}function Wi(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function tn(U,L){const z=new rt(U,L);return z.subscribe.bind(z)}class rt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ve=>{this.error(ve)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ve){let J;if(void 0===L&&void 0===z&&void 0===ve)throw new Error("Missing Observer.");J=function hi(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ve},void 0===J.next&&(J.next=Yr),void 0===J.error&&(J.error=Yr),void 0===J.complete&&(J.complete=Yr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ve){typeof console<"u"&&console.error&&console.error(ve)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yr(){}const nn=1e3,fi=2,Rn=144e5,Hn=.5;function Ai(U,L=nn,z=fi){const ve=L*Math.pow(z,U),J=Math.round(Hn*ve*(Math.random()-.5)*2);return Math.min(Rn,ve+J)}function Ur(U){return U&&U._delegate?U._delegate:U}},5361:(vt,Ae,k)=>{var h=k(4650);let Y=null;function N(){return Y}class se{}const re=new h.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return(0,h.LFG)($)}()},providedIn:"platform"}),n})();const pe=new h.OlP("Location Initialized");let $=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function W(){return new $((0,h.LFG)(re))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ct=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Re)},providedIn:"root"}),n})();const ge=new h.OlP("appBaseHref");let Re=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+qe(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+qe(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(be(Ie(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=je,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(h.LFG(ct))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Pe(){return new Be((0,h.LFG)(ct))}()},providedIn:"root"}),n})();function Ie(n){return n.replace(/\/index.html$/,"")}function ho(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class Gn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Gn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),On(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{On(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function On(n,e){n.context.$implicit=e.item}let fs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Vt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ma("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ma("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Vt{constructor(){this.$implicit=null,this.ngIf=null}}function Ma(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const wd="server";function ys(n){return n===wd}let Pa=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ed((0,h.LFG)(re),window)}),n})();class Ed{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Vs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qc(this.window.history)||Qc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Qc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Na{}class Pd extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rl extends Pd{static makeCurrent(){!function ie(n){Y||(Y=n)}(new rl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xo(){return Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null}();return null==t?null:function dg(n){Is=Is||document.createElement("a"),Is.setAttribute("href",n);const e=Is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ho(document.cookie,e)}}let Is,Jo=null;const vf=new h.OlP("TRANSITION_ID"),Dy=[{provide:h.ip1,useFactory:function Uu(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[vf,re,h.zs3],multi:!0}];let wo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Eo=new h.OlP("EventManagerPlugins");let Bu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ea{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let il=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Io=(()=>{class n extends il{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ju=/%COMP%/g,za=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function kd(n,e){return e.flat(100).map(t=>t.replace(ju,n))}function To(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Oi=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Cs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Ld?i.applyToHost(t):i instanceof dn&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:u=new Ld(l,m,r,this.appId,w);break;case h.ifc.ShadowDom:return new Fd(l,m,t,r);default:u=new dn(l,m,r,w)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bu),h.LFG(Io),h.LFG(h.AFp),h.LFG(za))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Cs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Co[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Co[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,To(r)):this.eventManager.addEventListener(e,t,To(r))}}function na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fd extends Cs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=kd(i.id,i.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class dn extends Cs{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=kd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ld extends dn{constructor(e,t,r,i,u){const l=i+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function _f(n){return"_ngcontent-%COMP%".replace(ju,n)}(l),this.hostAttr=function $u(n){return"_nghost-%COMP%".replace(ju,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Gu=(()=>{class n extends ea{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ol=["alt","control","meta","shift"],zu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tr=(()=>{class n extends ea{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),ol.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=i,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let i=zu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ol.forEach(l=>{l!==i&&(0,qu[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Ds(){rl.makeCurrent()},multi:!0},{provide:re,useFactory:function Wu(){return(0,h.RDi)(document),document},deps:[]}]),Za=new h.OlP(""),ra=[{provide:h.rWj,useClass:class Ga{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};i.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Hs=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function wf(){return new h.qLn},deps:[]},{provide:Eo,useClass:Gu,multi:!0,deps:[re,h.R0b,h.Lbi]},{provide:Eo,useClass:tr,multi:!0,deps:[re]},{provide:Oi,useClass:Oi,deps:[Bu,Io,h.AFp,za]},{provide:h.FYo,useExisting:Oi},{provide:il,useExisting:Io},{provide:Io,useClass:Io,deps:[re]},{provide:Bu,useClass:Bu,deps:[Eo,h.R0b]},{provide:Na,useClass:wo,deps:[]},[]];let ia=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:vf,useExisting:h.AFp},Dy]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Za,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Hs,...ra],imports:[yi,h.hGG]}),n})(),If=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Mo(){return new If((0,h.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Tr=k(2011),en=k(8996),Ni=k(7669);function st(...n){const e=(0,Ni.yG)(n);return(0,en.D)(n,e)}var Wn=k(7579);class ti extends Wn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Po=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ni=k(9751);const{isArray:fl}=Array,{getPrototypeOf:wi,prototype:sa,keys:Ju}=Object;function oa(n){if(1===n.length){const e=n[0];if(fl(e))return{args:e,keys:null};if(function Xu(n){return n&&"object"==typeof n&&wi(n)===sa}(e)){const t=Ju(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var $s=k(4671),_t=k(4004);const{isArray:ec}=Array;function Gs(n){return(0,_t.U)(e=>function No(n,e){return ec(e)?n(...e):n(e)}(n,e))}function Bd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var rr=k(5403),jd=k(9672);function zs(...n){const e=(0,Ni.yG)(n),t=(0,Ni.jO)(n),{args:r,keys:i}=oa(n);if(0===r.length)return(0,en.D)([],e);const u=new ni.y(function aa(n,e,t=$s.y){return r=>{Sf(e,()=>{const{length:i}=n,u=new Array(i);let l=i,m=i;for(let w=0;w<i;w++)Sf(e,()=>{const b=(0,en.D)(n[w],e);let S=!1;b.subscribe((0,rr.x)(r,O=>{u[w]=O,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Bd(i,l):$s.y));return t?u.pipe(Gs(t)):u}function Sf(n,e,t){n?(0,jd.f)(t,n,e):e()}var ua=k(8189);function Ja(...n){return function Hd(){return(0,ua.J)(1)}()((0,en.D)(n,(0,Ni.yG)(n)))}var tc=k(8421);function $d(n){return new ni.y(e=>{(0,tc.Xf)(n()).subscribe(e)})}var pl=k(9635),gl=k(576);function qs(n,e){const t=(0,gl.m)(n)?n:()=>n,r=i=>i.error(t());return new ni.y(e?i=>e.schedule(r,0,i):r)}var ki=k(515),Gd=k(727),Sr=k(4482);function nc(){return(0,Sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,rr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ml extends ni.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,rr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gd.w0.EMPTY)}return e}refCount(){return nc()(this)}}function Zn(n,e){return(0,Sr.e)((t,r)=>{let i=null,u=0,l=!1;const m=()=>l&&!i&&r.complete();t.subscribe((0,rr.x)(r,w=>{i?.unsubscribe();let b=0;const S=u++;(0,tc.Xf)(n(w,S)).subscribe(i=(0,rr.x)(r,O=>r.next(e?e(w,O,S,b++):O),()=>{i=null,m()}))},()=>{l=!0,m()}))})}function bs(n){return n<=0?()=>ki.E:(0,Sr.e)((e,t)=>{let r=0;e.subscribe((0,rr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ca(...n){const e=(0,Ni.yG)(n);return(0,Sr.e)((t,r)=>{(e?Ja(n,t,e):Ja(n,t)).subscribe(r)})}function fr(n,e){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,rr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var ir=k(5577);function Xa(n){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ko(n=yl){return(0,Sr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yl(){return new Po}function Fi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fr((i,u)=>n(i,u,r)):$s.y,bs(1),t?Xa(e):ko(()=>new Po))}function Ts(n,e){return(0,gl.m)(e)?(0,ir.z)(n,e,1):(0,ir.z)(n,1)}var Ar=k(8505);function Ws(n){return(0,Sr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,rr.x)(t,void 0,void 0,l=>{u=(0,tc.Xf)(n(l,Ws(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function la(n,e){return(0,Sr.e)(function fg(n,e,t,r,i){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,rr.x)(l,S=>{const O=b++;w=m?n(w,S,O):(m=!0,S),r&&l.next(w)},i&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function eu(n){return n<=0?()=>ki.E:(0,Sr.e)((e,t)=>{let r=[];e.subscribe((0,rr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function es(n,e){const t=arguments.length>=2;return r=>r.pipe(n?fr((i,u)=>n(i,u,r)):$s.y,eu(1),t?Xa(e):ko(()=>new Po))}function ri(n){return(0,Sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",Zs=Symbol("RouteTitle");class Fo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function da(n){return new Fo(n)}function qd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))i[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Zd(n[i],e[i]))return!1;return!0}function Zd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Kd(n){return Array.prototype.concat.apply([],n)}function E(n){return n.length>0?n[n.length-1]:null}function A(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function P(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,en.D)(Promise.resolve(n)):st(n)}const j=!1,Z={exact:function ot(n,e,t){if(!pr(n.segments,e.segments)||!bn(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ot(n.children[r],e.children[r],t))return!1;return!0},subset:At},te={exact:function ze(n,e){return ts(n,e)},subset:function Rt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Zd(n[t],e[t]))},ignored:()=>!0};function Ge(n,e,t){return Z[t.paths](n.root,e.root,t.matrixParams)&&te[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function At(n,e,t){return ii(n,e,e.segments,t)}function ii(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!pr(i,t)||e.hasChildren()||!bn(i,t,r))}if(n.segments.length===t.length){if(!pr(n.segments,t)||!bn(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!At(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(pr(n.segments,i)&&bn(n.segments,i,r)&&n.children[Tt])&&ii(n.children[Tt],e,u,r)}}function bn(n,e,t){return e.every((r,i)=>te[t](n[i].parameters,r.parameters))}class si{constructor(e=new Ft([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=da(this.queryParams)),this._queryParamMap}toString(){return R0.serialize(this)}}class Ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,A(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ic(this)}}class Li{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=da(this.parameters)),this._parameterMap}toString(){return Yd(this)}}function pr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let tu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new nu},providedIn:"root"}),n})();class nu{parse(e){const t=new yg(e);return new si(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ha(e.root,!0)}`,r=function gg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sc(t)}=${sc(i)}`).join("&"):`${sc(t)}=${sc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function iu(n){return encodeURI(n)}(e.fragment)}`:""}`}}const R0=new nu;function ic(n){return n.segments.map(e=>Yd(e)).join("/")}function ha(n,e){if(!n.hasChildren())return ic(n);if(e){const t=n.children[Tt]?ha(n.children[Tt],!1):"",r=[];return A(n.children,(i,u)=>{u!==Tt&&r.push(`${u}:${ha(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function rc(n,e){let t=[];return A(n.children,(r,i)=>{i===Tt&&(t=t.concat(e(r,i)))}),A(n.children,(r,i)=>{i!==Tt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Tt?[ha(n.children[Tt],!1)]:[`${i}:${ha(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${ic(n)}/${t[0]}`:`${ic(n)}/(${t.join("//")})`}}function ru(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sc(n){return ru(n).replace(/%3B/gi,";")}function _l(n){return ru(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wl(n){return decodeURIComponent(n)}function pg(n){return wl(n.replace(/\+/g,"%20"))}function Yd(n){return`${_l(n.path)}${function Ay(n){return Object.keys(n).map(e=>`;${_l(e)}=${_l(n[e])}`).join("")}(n.parameters)}`}const xy=/^[^\/()?;=#]+/;function Af(n){const e=n.match(xy);return e?e[0]:""}const su=/^[^=?&#]+/,mg=/^[^&#]+/;class yg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new Ft(e,t)),r}parseSegment(){const e=Af(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,j);return this.capture(e),new Li(wl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Af(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Af(this.remaining);i&&(r=i,this.capture(r))}e[wl(t)]=wl(r)}parseQueryParam(e){const t=function My(n){const e=n.match(su);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function El(n){const e=n.match(mg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=pg(t),u=pg(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Af(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,j);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Tt]:new Ft([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,j)}}function ou(n){return n.segments.length>0?new Ft([],{[Tt]:n}):n}function Qd(n){const e={};for(const r of Object.keys(n.children)){const u=Qd(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ry(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new Ft(n.segments.concat(e.segments),e.children)}return n}(new Ft(n.segments,e))}function Ks(n){return n instanceof si}const Jd=!1;function Oy(n,e,t,r,i){if(0===t.length)return ac(e.root,e.root,e.root,r,i);const u=function Mf(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Cl(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return A(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new Cl(t,e,r)}(t);return u.toRoot()?ac(e.root,e.root,new Ft([],{}),r,i):function l(w){const b=function uc(n,e,t,r){if(n.isAbsolute)return new pa(e.root,!0,0);if(-1===r)return new pa(t,t===e.root,0);return function Dl(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,Jd&&"Invalid number of '../'");i=r.segments.length}return new pa(r,!1,i-u)}(t,r+(Xd(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?ma(b.segmentGroup,b.index,u.commands):ga(b.segmentGroup,b.index,u.commands);return ac(e.root,b.segmentGroup,S,r,i)}(n.snapshot?._lastPathIndex)}function Xd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fa(n){return"object"==typeof n&&null!=n&&n.outlets}function ac(n,e,t,r,i){let l,u={};r&&A(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:eh(n,e,t);const m=ou(Qd(l));return new si(m,u,i)}function eh(n,e,t){const r={};return A(n.children,(i,u)=>{r[u]=i===e?t:eh(i,e,t)}),new Ft(n.segments,r)}class Cl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xd(r[0]))throw new h.vHH(4003,Jd&&"Root segment cannot have matrix parameters");const i=r.find(fa);if(i&&i!==E(r))throw new h.vHH(4004,Jd&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ga(n,e,t){if(n||(n=new Ft([],{})),0===n.segments.length&&n.hasChildren())return ma(n,e,t);const r=function Rf(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],m=t[r];if(fa(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!wg(w,b,l))return u;r+=2}else{if(!wg(w,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ft(n.segments.slice(0,r.pathIndex),{});return u.children[Tt]=new Ft(n.segments.slice(r.pathIndex),n.children),ma(u,0,i)}return r.match&&0===i.length?new Ft(n.segments,{}):r.match&&!n.hasChildren()?au(n,e,t):r.match?ma(n,0,i):au(n,e,t)}function ma(n,e,t){if(0===t.length)return new Ft(n.segments,{});{const r=function vg(n){return fa(n[0])?n[0].outlets:{[Tt]:n}}(t),i={};if(!r[Tt]&&n.children[Tt]&&1===n.numberOfChildren&&0===n.children[Tt].segments.length){const u=ma(n.children[Tt],e,t);return new Ft(n.segments,u.children)}return A(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=ga(n.children[l],e,u))}),A(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Ft(n.segments,i)}}function au(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(fa(u)){const w=_g(u.outlets);return new Ft(r,w)}if(0===i&&Xd(t[0])){r.push(new Li(n.segments[e].path,Of(t[0]))),i++;continue}const l=fa(u)?u.outlets[Tt]:`${u}`,m=i<t.length-1?t[i+1]:null;l&&m&&Xd(m)?(r.push(new Li(l,Of(m))),i+=2):(r.push(new Li(l,{})),i++)}return new Ft(r,{})}function _g(n){const e={};return A(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=au(new Ft([],{}),0,t))}),e}function Of(n){const e={};return A(n,(t,r)=>e[r]=`${t}`),e}function wg(n,e,t){return n==t.path&&ts(e,t.parameters)}const bl="imperative";class Ys{constructor(e,t){this.id=e,this.url=t}}class ya extends Ys{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class va extends Ys{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _a extends Ys{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cc extends Ys{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class wa extends Ys{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Py extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ny extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ky extends Ys{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pf extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tl extends Ys{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ig{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lc{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ei{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ff=(()=>{class n{createUrlTree(t,r,i,u,l,m){return Oy(t||r.root,i,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return Ff.\u0275fac(e)},providedIn:"root"}),n})();class bg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xr(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xr(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ea(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ea(e,this._root).map(t=>t.value)}}function xr(n,e){if(n===e.value)return e;for(const t of e.children){const r=xr(n,t);if(r)return r}return null}function Ea(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ea(n,t);if(r.length)return r.unshift(e),r}return[]}class Lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Sl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ly extends bg{constructor(e,t){super(e),this.snapshot=t,rh(this,e)}toString(){return this.snapshot.toString()}}function Tg(n,e){const t=function Ui(n,e){const l=new ns([],{},{},"",{},Tt,e,null,n.root,-1,{});return new hc("",new Lo(l,[]))}(n,e),r=new ti([new Li("",{})]),i=new ti({}),u=new ti({}),l=new ti({}),m=new ti(""),w=new uu(r,i,l,m,u,Tt,e,t.root);return w.snapshot=t.root,new Ly(new Lo(w,[]),t)}class uu{constructor(e,t,r,i,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,_t.U)(b=>b[Zs]))??st(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>da(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>da(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Al(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Vy(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ns{get title(){return this.data?.[Zs]}constructor(e,t,r,i,u,l,m,w,b,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=da(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=da(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hc extends bg{constructor(e,t){super(t),this.url=e,rh(this,t)}toString(){return xl(this._root)}}function rh(n,e){e.value._routerState=n,e.children.forEach(t=>rh(n,t))}function xl(n){const e=n.children.length>0?` { ${n.children.map(xl).join(", ")} } `:"";return`${n.value}${e}`}function Ss(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function Wd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Vo(n,e){const t=ts(n.params,e.params)&&function Vi(n,e){return pr(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Vo(n.parent,e.parent))}function fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ag(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fc(n,r,i);return fc(n,r)})}(n,e,t);return new Lo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>fc(n,m)),l}}const r=function O0(n){return new uu(new ti(n.url),new ti(n.params),new ti(n.queryParams),new ti(n.fragment),new ti(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>fc(n,u));return new Lo(r,i)}}const y="ngNavigationCancelingError";function f(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=p(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function p(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[y]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _(n){return T(n)&&Ks(n.url)}function T(n){return n&&n[y]}class M{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new V,this.attachRef=null}}let V=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K=!1;let Se=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(V),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,K);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,K);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,K);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,K);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new He(t,m,i.injector);if(r&&function tt(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=i.createComponent(b,i.length,w)}else this.activated=i.createComponent(l,{index:i.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class He{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uu?this.route:e===V?this.childContexts:this.parent.get(e,t)}}let Xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Se],encapsulation:2}),n})();function yn(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sh(n){const e=n.children&&n.children.map(sh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=Xe),t}function Ii(n){return n.outlet||Tt}function Vf(n,e){const t=n.filter(r=>Ii(r)===e);return t.push(...n.filter(r=>Ii(r)!==e)),t}function Ol(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class P0{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ss(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Sl(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),A(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Sl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Sl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Sl(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new dc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Nf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Ss(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Ss(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=Ol(i.snapshot),w=m?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class XC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pc{constructor(e,t){this.component=e,this.route=t}}function By(n,e,t){const r=n._root;return ah(r,e?e._root:null,t,[r.value])}function Pl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function ah(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Sl(e);return n.children.forEach(l=>{(function eD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function tD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pr(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vo(n,e)||!ts(n.queryParams,e.queryParams);default:return!Vo(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?i.canActivateChecks.push(new XC(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ah(n,e,u.component?m?m.children:null:t,r,i),w&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new pc(m.outlet.component,l))}else l&&uh(e,m,i),i.canActivateChecks.push(new XC(r)),ah(n,null,u.component?m?m.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),A(u,(l,m)=>uh(l,t.getContext(m),i)),i}function uh(n,e,t){const r=Sl(n),i=n.value;A(r,(u,l)=>{uh(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new pc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ch(n){return"function"==typeof n}function Gy(n){return n instanceof Po||"EmptyError"===n?.name}const lh=Symbol("INITIAL_VALUE");function cu(){return Zn(n=>zs(n.map(e=>e.pipe(bs(1),ca(lh)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===lh)return lh;if(!1===t||t instanceof si)return t}return!0}),fr(e=>e!==lh),bs(1)))}function Fl(n){return(0,pl.z)((0,Ar.b)(e=>{if(Ks(e))throw f(0,e)}),(0,_t.U)(e=>!0===e))}const Wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function V0(n,e,t,r,i){const u=Uf(n,e,t);return u.matched?function aD(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(l=>{const m=Pl(l,n);return P(function k0(n){return n&&ch(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(cu(),Fl()):st(!0)}(r=yn(e,r),e,t).pipe((0,_t.U)(l=>!0===l?u:{...Wy})):st(u)}function Uf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Wy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qd)(t,n,e);if(!i)return{...Wy};const u={};A(i.posParams,(m,w)=>{u[w]=m.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Rg(n,e,t,r){if(t.length>0&&function B0(n,e,t){return t.some(r=>Og(n,e,r)&&Ii(r)!==Tt)}(n,t,r)){const u=new Ft(e,function uD(n,e,t,r){const i={};i[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ii(u)!==Tt){const l=new Ft([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ii(u)]=l}return i}(n,e,r,new Ft(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function YA(n,e,t){return t.some(r=>Og(n,e,r))}(n,t,r)){const u=new Ft(n.segments,function U0(n,e,t,r,i){const u={};for(const l of r)if(Og(n,t,l)&&!i[Ii(l)]){const m=new Ft([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[Ii(l)]=m}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Ft(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Og(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function dh(n,e,t,r){return!!(Ii(n)===r||r!==Tt&&Og(e,t,n))&&("**"===n.path||Uf(e,n,t).matched)}function j0(n,e,t){return 0===e.length&&!n.children[t]}const lu=!1;class gc{constructor(e){this.segmentGroup=e||null}}class H0{constructor(e){this.urlTree=e}}function hh(n){return qs(new gc(n))}function $0(n){return qs(new H0(n))}class z0{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Rg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ft(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,_t.U)(u=>this.createUrlTree(Qd(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ws(u=>{if(u instanceof H0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof gc?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,_t.U)(i=>this.createUrlTree(Qd(i),e.queryParams,e.fragment))).pipe(Ws(i=>{throw i instanceof gc?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,lu)}createUrlTree(e,t,r){const i=ou(e);return new si(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(u=>new Ft([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,en.D)(i).pipe(Ts(u=>{const l=r.children[u],m=Vf(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,_t.U)(w=>({segment:w,outlet:u})))}),la((u,l)=>(u[l.outlet]=l.segment,u),{}),es())}expandSegment(e,t,r,i,u,l){return(0,en.D)(r).pipe(Ts(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,l).pipe(Ws(b=>{if(b instanceof gc)return st(null);throw b}))),Fi(m=>!!m),Ws((m,w)=>{if(Gy(m))return j0(t,i,u)?st(new Ft([],{})):hh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,l,m){return dh(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):hh(t):hh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$0(u):this.lineralizeSegments(r,u).pipe((0,ir.z)(l=>{const m=new Ft(l,{});return this.expandSegment(e,m,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=Uf(t,i,u);if(!m)return hh(t);const O=this.applyRedirectCommands(w,i.redirectTo,S);return i.redirectTo.startsWith("/")?$0(O):this.lineralizeSegments(i,O).pipe((0,ir.z)(B=>this.expandSegment(e,t,r,B.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=yn(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ft(i,{})))):st(new Ft(i,{}))):V0(t,r,i,e).pipe(Zn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ir.z)(S=>{const O=S.injector??e,B=S.routes,{segmentGroup:q,slicedSegments:ce}=Rg(t,m,w,B),Me=new Ft(q.segments,q.children);if(0===ce.length&&Me.hasChildren())return this.expandChildren(O,B,Me).pipe((0,_t.U)(wt=>new Ft(m,wt)));if(0===B.length&&0===ce.length)return st(new Ft(m,{}));const ke=Ii(r)===u;return this.expandSegment(O,Me,B,ce,ke?Tt:u,!0).pipe((0,_t.U)(Et=>new Ft(m.concat(Et.segments),Et.children)))})):hh(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function L0(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(l=>{const m=Pl(l,n);return P(function KA(n){return n&&ch(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(cu(),Fl())}(e,t,r).pipe((0,ir.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Ar.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function lD(n){return qs(p(lu,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Tt])return e.redirectTo,qs(new h.vHH(4e3,lu));i=i.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new si(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return A(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return A(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,i)}),new Ft(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,lu);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class dD{}class hD{constructor(e,t,r,i,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=Rg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new ns([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Lo(r,t),u=new hc(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Al(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,en.D)(Object.keys(r.children)).pipe(Ts(i=>{const u=r.children[i],l=Vf(t,i);return this.processSegmentGroup(e,l,u,i)}),la((i,u)=>i&&u?(i.push(...u),i):null),function vl(n,e=!1){return(0,Sr.e)((t,r)=>{let i=0;t.subscribe((0,rr.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),Xa(null),es(),(0,_t.U)(i=>{if(null===i)return null;const u=q0(i);return function fD(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,en.D)(t).pipe(Ts(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),Fi(l=>!!l),Ws(l=>{if(Gy(l))return j0(r,i,u)?st([]):st(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!dh(t,r,i,u))return st(null);let l;if("**"===t.path){const m=i.length>0?E(i).parameters:{},w=Ll(r)+i.length;l=st({snapshot:new ns(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Z0(t),Ii(t),t.component??t._loadedComponent??null,t,W0(r),w,K0(t)),consumedSegments:[],remainingSegments:[]})}else l=V0(r,t,i,e).pipe((0,_t.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const O=Ll(r)+w.length;return{snapshot:new ns(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Z0(t),Ii(t),t.component??t._loadedComponent??null,t,W0(r),O,K0(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(Zn(m=>{if(null===m)return st(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const O=t._loadedInjector??e,B=function pD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:ce}=Rg(r,b,S,B.filter(ke=>void 0===ke.redirectTo));if(0===ce.length&&q.hasChildren())return this.processChildren(O,B,q).pipe((0,_t.U)(ke=>null===ke?null:[new Lo(w,ke)]));if(0===B.length&&0===ce.length)return st([new Lo(w,[])]);const Me=Ii(t)===u;return this.processSegment(O,B,q,ce,Me?Tt:u).pipe((0,_t.U)(ke=>null===ke?null:[new Lo(w,ke)]))}))}}function gD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function q0(n){const e=[],t=new Set;for(const r of n){if(!gD(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=q0(r.children);e.push(new Lo(r.value,i))}return e.filter(r=>!t.has(r))}function W0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ll(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Z0(n){return n.data||{}}function K0(n){return n.resolve||{}}function X0(n){return"string"==typeof n.title||null===n.title}function Ng(n){return Zn(e=>{const t=n(e);return t?(0,en.D)(t).pipe((0,_t.U)(()=>e)):st(e)})}const fh=new h.OlP("ROUTES");let As=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=P(t.loadComponent()).pipe((0,_t.U)(Yy),(0,Ar.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ri(()=>{this.componentLoaders.delete(t)})),i=new ml(r,()=>new Wn.x).pipe(nc());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Kd(w.get(fh,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(sh),injector:w}}),ri(()=>{this.childrenLoaders.delete(r)})),l=new ml(u,()=>new Wn.x).pipe(nc());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return P(t()).pipe((0,_t.U)(Yy),(0,ir.z)(r=>r instanceof h.YKP||Array.isArray(r)?st(r):(0,en.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yy(n){return function yD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Fg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Wn.x,this.configLoader=(0,h.f3M)(As),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(tu),this.rootContexts=(0,h.f3M)(V),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Ig(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Eg(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ti({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fr(r=>0!==r.id),(0,_t.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Zn(r=>{let i=!1,u=!1;return st(r).pipe((0,Ar.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new cc(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),ki.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return tw(l.source)&&(t.browserUrlTree=l.extractedUrl),st(l).pipe(Zn(S=>{const O=this.transitions?.getValue();return this.events.next(new ya(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions?.getValue()?ki.E:Promise.resolve(S)}),function Zy(n,e,t,r){return Zn(i=>function G0(n,e,t,r,i){return new z0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Ar.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function QA(n,e,t,r,i){return(0,ir.z)(u=>function Bf(n,e,t,r,i,u,l="emptyOnly"){return new hD(n,e,t,r,i,l,u).recognize().pipe(Zn(m=>null===m?function Ky(n){return new ni.y(e=>e.error(n))}(new dD):st(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,_t.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Ar.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const B=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(B,S)}t.browserUrlTree=S.urlAfterRedirects}const O=new Py(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(O)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:O,source:B,restoredState:q,extras:ce}=l,Me=new ya(S,this.urlSerializer.serialize(O),B,q);this.events.next(Me);const ke=Tg(O,this.rootComponentType).snapshot;return st(r={...l,targetSnapshot:ke,urlAfterRedirects:O,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new cc(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),ki.E}}),(0,Ar.b)(l=>{const m=new Ny(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,_t.U)(l=>r={...l,guards:By(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function iD(n,e){return(0,ir.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?st({...t,guardsResult:!0}):function zy(n,e,t,r){return(0,en.D)(n).pipe((0,ir.z)(i=>function oD(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const w=Ol(e)??i,b=Pl(m,w);return P(function $y(n){return n&&ch(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Fi())})).pipe(cu()):st(!0)}(i.component,i.route,t,e,r)),Fi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ir.z)(m=>m&&function jy(n){return"boolean"==typeof n}(m)?function Mg(n,e,t,r){return(0,en.D)(e).pipe(Ts(i=>Ja(function F0(n,e){return null!==n&&e&&e(new lc(n)),st(!0)}(i.route.parent,r),function kl(n,e){return null!==n&&e&&e(new Ei(n)),st(!0)}(i.route,r),function sD(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function N0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>$d(()=>st(l.guards.map(w=>{const b=Ol(l.node)??t,S=Pl(w,b);return P(function nD(n){return n&&ch(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Fi())})).pipe(cu())));return st(u).pipe(cu())}(n,i.path,t),function qy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>$d(()=>{const l=Ol(e)??t,m=Pl(u,l);return P(function Hy(n){return n&&ch(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Fi())}));return st(i).pipe(cu())}(n,i.route,t))),Fi(i=>!0!==i,!0))}(r,u,n,e):st(m)),(0,_t.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Ar.b)(l=>{if(r.guardsResult=l.guardsResult,Ks(l.guardsResult))throw f(0,l.guardsResult);const m=new ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),fr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Ng(l=>{if(l.guards.canActivateChecks.length)return st(l).pipe((0,Ar.b)(m=>{const w=new Pf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Zn(m=>{let w=!1;return st(m).pipe(function JA(n,e){return(0,ir.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,en.D)(i).pipe(Ts(l=>function Y0(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!X0(i)&&(u[Zs]=i.title),function XA(n,e,t,r){const i=function Q0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const u={};return(0,en.D)(i).pipe((0,ir.z)(l=>function J0(n,e,t,r){const i=Ol(e)??r,u=Pl(n,i);return P(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Fi(),(0,Ar.b)(m=>{u[l]=m}))),eu(1),function zd(n){return(0,_t.U)(()=>n)}(u),Ws(l=>Gy(l)?ki.E:qs(l)))}(u,n,e,r).pipe((0,_t.U)(l=>(n._resolvedData=l,n.data=Al(n,t).resolve,i&&X0(i)&&(n.data[Zs]=i.title),null)))}(l.route,r,n,e)),(0,Ar.b)(()=>u++),eu(1),(0,ir.z)(l=>u===i.length?st(t):ki.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Ar.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Ar.b)(m=>{const w=new Tl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),Ng(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Ar.b)(S=>{w.component=S}),(0,_t.U)(()=>{})));for(const S of w.children)b.push(...m(S));return b};return zs(m(l.targetSnapshot.root)).pipe(Xa(),bs(1))}),Ng(()=>this.afterPreactivation()),(0,_t.U)(l=>{const m=function Sg(n,e,t){const r=fc(n,e._root,t?t._root:void 0);return new Ly(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Ar.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new P0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),bs(1),(0,Ar.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new va(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),ri(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ws(l=>{if(u=!0,T(l)){_(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new _a(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),_(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||tw(r.source)};t.scheduleNavigation(w,bl,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new wa(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return ki.E}))}))}cancelNavigationTransition(t,r,i){const u=new _a(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tw(n){return n!==bl}let nw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[Zs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(rw)},providedIn:"root"}),n})(),rw=(()=>{class n extends nw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(If))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wD)},providedIn:"root"}),n})();class _D{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let wD=(()=>{class n extends _D{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jf=new h.OlP("",{providedIn:"root",factory:()=>({})});let iw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(sw)},providedIn:"root"}),n})(),sw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ED(n){throw n}function ow(n,e,t){return e.parse("/")}const ID={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(jf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ED,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ow,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(iw),this.routeReuseStrategy=(0,h.f3M)(vD),this.urlCreationStrategy=(0,h.f3M)(Dg),this.titleStrategy=(0,h.f3M)(nw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Kd((0,h.f3M)(fh,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(Fg),this.urlSerializer=(0,h.f3M)(tu),this.location=(0,h.f3M)(Be),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new si,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Tg(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const w={...i};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(sh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ks(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,bl,null,r)}navigate(t,r={skipLocationChange:!1}){return function CD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ID}:!1===r?{...aw}:r,Ks(t))return Ge(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Ge(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,S;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((O,B)=>{m=O,w=B}),S="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vl=(()=>{class n{constructor(t,r,i,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Wn.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof va&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,u=this.el.nativeElement;null!==r?i.setAttribute(u,t,r):i.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rs),h.Y36(uu),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ct))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class yc{}let Jy=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(fr(t=>t instanceof va),Ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,en.D)(i).pipe((0,ua.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const u=i.pipe((0,ir.z)(l=>null===l?st(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,en.D)([u,l]).pipe((0,ua.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rs),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(yc),h.LFG(As))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xy=new h.OlP("");let DD=(()=>{class n{constructor(t,r,i,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ya?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof va&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var Js=(()=>((Js=Js||{})[Js.COMPLETE=0]="COMPLETE",Js[Js.FAILED=1]="FAILED",Js[Js.REDIRECTING=2]="REDIRECTING",Js))();const ph=!1;function vc(n,e){return{\u0275kind:n,\u0275providers:e}}const _c=new h.OlP("",{providedIn:"root",factory:()=>!1});function dw(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(rs),i=n.get(tv);1===n.get(nv)&&r.initialNavigation(),n.get(hw,null,h.XFs.Optional)?.setUpPreloading(),n.get(Xy,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const tv=new h.OlP(ph?"bootstrap done indicator":"",{factory:()=>new Wn.x}),nv=new h.OlP(ph?"initial navigation":"",{providedIn:"root",factory:()=>1});function RD(){let n=[];return n=ph?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(rs);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function Cg(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],vc(1,n)}const hw=new h.OlP(ph?"router preloader":"");function fw(n){return vc(0,[{provide:hw,useExisting:Jy},{provide:yc,useExisting:n}])}const Ul=!1,Lg=new h.OlP(Ul?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ND=[Be,{provide:tu,useClass:nu},rs,V,{provide:uu,useFactory:function TD(n){return n.routerState.root},deps:[rs]},As,Ul?{provide:_c,useValue:!0}:[]];function rx(){return new h.PXZ("Router",rs)}let Bl=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ND,Ul&&r?.enableTracing?RD().\u0275providers:[],{provide:fh,multi:!0,useValue:t},{provide:Lg,useFactory:FD,deps:[[rs,new h.FiY,new h.tp0]]},{provide:jf,useValue:r||{}},r?.useHash?{provide:ct,useClass:Oe}:{provide:ct,useClass:Re},{provide:Xy,useFactory:()=>{const n=(0,h.f3M)(Pa),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(jf),r=(0,h.f3M)(Fg),i=(0,h.f3M)(tu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DD(i,r,n,e,t)}},r?.preloadingStrategy?fw(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:rx},r?.initialNavigation?LD(r):[],[{provide:Hf,useFactory:dw},{provide:h.tb,multi:!0,useExisting:Hf}]]}}static forChild(t){return{ngModule:n,providers:[{provide:fh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lg,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Xe]}),n})();function FD(n){if(Ul&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function LD(n){return["disabled"===n.initialNavigation?vc(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(rs);return()=>{e.setUpLocationChangeListener()}}},{provide:nv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?vc(2,[{provide:nv,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(rs),u=e.get(tv);(function tx(n,e){n.events.pipe(fr(t=>t instanceof va||t instanceof _a||t instanceof wa||t instanceof cc),(0,_t.U)(t=>t instanceof va||t instanceof cc?Js.COMPLETE:t instanceof _a&&(0===t.code||1===t.code)?Js.REDIRECTING:Js.FAILED),fr(t=>t!==Js.REDIRECTING),bs(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Fg).afterPreactivation=()=>(r(!0),u.closed?st(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Hf=new h.OlP(Ul?"Router Initializer":"");var fe=k(5861),rv=k(6451),jl=k(5363),yw=k(6063);class iv extends Wn.x{constructor(e=1/0,t=1/0,r=yw.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var sv=k(3099);function Vg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,sv.B)({connector:()=>new iv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ov(n,e){return(0,gl.m)(e)?Zn(()=>n,e):Zn(()=>n)}var $f=k(9468),oi=k(4976);k(259);var Hl=k(6881),mh=k(4859),cn=k(2090),wc=k(1877);const uv=new Map,Ew={activated:!1,tokenObservers:[]},GD={initialized:!1,enabled:!1};function hn(n){return uv.get(n)||Object.assign({},Ew)}function Ug(){return GD}const lv="https://content-firebaseappcheck.googleapis.com/v1",qD="exchangeDebugToken",Cw={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class WD{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function ZD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const wr=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dw(n){if(!hn(n).activated)throw wr.create("use-before-activation",{appName:n.name})}function qf(n,e){return jg.apply(this,arguments)}function jg(){return(jg=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const O=yield i.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(O){throw wr.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==l.status)throw wr.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(O){throw wr.create("fetch-parse-error",{originalErrorMessage:O?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw wr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}})).apply(this,arguments)}function Hg(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lv}/projects/${t}/apps/${r}:${qD}?key=${i}`,body:{debug_token:e}}}const du="firebase-app-check-database",$g=1,Ec="firebase-app-check-store";let Gg=null;function Aw(n,e){return xw.apply(this,arguments)}function xw(){return(xw=(0,fe.Z)(function*(n,e){const r=(yield function fv(){return Gg||(Gg=new Promise((n,e)=>{try{const t=indexedDB.open(du,$g);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(wr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ec,{keyPath:"compositeKey"})}}catch(t){e(wr.create("storage-open",{originalErrorMessage:t?.message}))}}),Gg)}()).transaction(Ec,"readwrite"),u=r.objectStore(Ec).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(wr.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Zf=new wc.Yd("@firebase/app-check");function mv(n,e){return(0,cn.hl)()?function KD(n,e){return Aw(function Rw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function yv(){return Ug().enabled}function Yf(){return vv.apply(this,arguments)}function vv(){return(vv=(0,fe.Z)(function*(){const n=Ug();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const XD={error:"UNKNOWN_ERROR"};function eb(n){return cn.US.encodeString(JSON.stringify(n),!1)}function zg(n){return _v.apply(this,arguments)}function _v(){return(_v=(0,fe.Z)(function*(n,e=!1){const t=n.app;Dw(t);const r=hn(t);let u,i=r.token;if(i&&!hu(i)&&(r.token=void 0,i=void 0),!i){const w=yield r.cachedTokenPromise;w&&(hu(w)?i=w:yield mv(t,void 0))}if(!e&&i&&hu(i))return{token:i.token};let m,l=!1;if(yv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qf(Hg(t,yield Yf()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield mv(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield hn(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Zf.warn(w.message):Zf.error(w),u=w}return i?u?m=hu(i)?{token:i.token,internalError:u}:kw(u):(m={token:i.token},r.token=i,yield mv(t,i)):m=kw(u),l&&function nb(n,e){const t=hn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function Pw(n){return qg.apply(this,arguments)}function qg(){return(qg=(0,fe.Z)(function*(n){const e=n.app;Dw(e);const{provider:t}=hn(e);if(yv()){const r=yield Yf(),{token:i}=yield qf(Hg(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function wv(n,e){const t=hn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function tb(n){const{app:e}=n,t=hn(e);let r=t.tokenRefresher;r||(r=function Nw(n){const{app:e}=n;return new WD((0,fe.Z)(function*(){let r;if(r=hn(e).token?yield zg(n,!0):yield zg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Cw.RETRIAL_MIN_WAIT,Cw.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hu(n){return n.expireTimeMillis-Date.now()>0}function kw(n){return{token:eb(XD),error:n}}class rb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=hn(this.app);for(const t of e)wv(this.app,t.next);return Promise.resolve()}}const Lw="app-check-internal";!function Vw(){(0,Hl._registerComponent)(new mh.wA("app-check",n=>function Ev(n,e){return new rb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Lw).initialize()})),(0,Hl._registerComponent)(new mh.wA(Lw,n=>function ib(n){return{getToken:e=>zg(n,e),getLimitedUseToken:()=>Pw(n),addTokenListener:e=>function Wg(n,e,t,r){const{app:i}=n,u=hn(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&hu(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),tb(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>tb(n))}(n,"INTERNAL",e),removeTokenListener:e=>wv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hl.registerVersion)("@firebase/app-check","0.8.0")}();class Jf{constructor(){return(0,oi.vb)("app-check")}}typeof window<"u"&&window;var mb=k(9260);const Sv=new h.OlP("angularfire2.auth.use-emulator"),Av=new h.OlP("angularfire2.auth.settings"),xv=new h.OlP("angularfire2.auth.tenant-id"),qw=new h.OlP("angularfire2.auth.langugage-code"),Ww=new h.OlP("angularfire2.auth.use-device-language"),Zw=new h.OlP("angularfire.auth.persistence"),Xg=(n,e,t,r,i,u,l,m)=>(0,Tr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=i,u&&w.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,i,u,l,m]);let Xf=(()=>{class n{constructor(t,r,i,u,l,m,w,b,S,O,B,q){const ce=new Wn.x,Me=st(void 0).pipe((0,jl.Q)(l.outsideAngular),Zn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,_t.U)(()=>(0,Tr.on)(t,u,r)),(0,_t.U)(ke=>Xg(ke,u,m,b,S,O,w,B)),Vg({bufferSize:1,refCount:!1}));if(ys(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Me.pipe(Fi()).subscribe();const it=Me.pipe(Zn(Ot=>Ot.getRedirectResult().then(qt=>qt,()=>null)),oi.iC,Vg({bufferSize:1,refCount:!1})),Et=Me.pipe(Zn(Ot=>new ni.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(an=>qt.next(an),an=>qt.error(an),()=>qt.complete()))})))),wt=Me.pipe(Zn(Ot=>new ni.y(qt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(an=>qt.next(an),an=>qt.error(an),()=>qt.complete()))}))));this.authState=it.pipe(ov(Et),(0,$f.R)(l.outsideAngular),(0,jl.Q)(l.insideAngular)),this.user=it.pipe(ov(wt),(0,$f.R)(l.outsideAngular),(0,jl.Q)(l.insideAngular)),this.idToken=this.user.pipe(Zn(Ot=>Ot?(0,en.D)(Ot.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Zn(Ot=>Ot?(0,en.D)(Ot.getIdTokenResult()):st(null))),this.credential=(0,rv.T)(it,ce,this.authState.pipe(fr(Ot=>!Ot))).pipe((0,_t.U)(Ot=>Ot?.user?Ot:null),(0,$f.R)(l.outsideAngular),(0,jl.Q)(l.insideAngular))}return(0,Tr.pX)(this,Me,u,{spy:{apply:(ke,it,Et)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&Et.then(wt=>ce.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tr.Dh),h.LFG(Tr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(oi.HU),h.LFG(Sv,8),h.LFG(Av,8),h.LFG(xv,8),h.LFG(qw,8),h.LFG(Ww,8),h.LFG(Zw,8),h.LFG(Jf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Kw=k(4986);function em(){return(0,Sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,rr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function Qw(n,e){return n===e}k(2644);var Ze,Jw=k(3942),Xw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},is={},Mv=Mv||{},Ut=Xw||self;function Ih(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Uo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ov="closure_uid_"+(1e9*Math.random()>>>0),Pv=0;function cx(n,e,t){return n.call.apply(n.bind,arguments)}function lx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cx:lx).apply(null,arguments)}function tm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[i].apply(r,l)}}function Cc(){this.s=this.s,this.o=this.o}Cc.prototype.s=!1,Cc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Rv(n){Object.prototype.hasOwnProperty.call(n,Ov)&&n[Ov]||(n[Ov]=++Pv)}(this)},Cc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function eE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ih(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ai.prototype.h=function(){this.defaultPrevented=!0};var _b=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",()=>{},e),Ut.removeEventListener("test",()=>{},e)}catch{}return n}();function Ch(n){return/^[\s\xa0]*$/.test(n)}function ep(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function Bi(n){return-1!=ep().indexOf(n)}function Fv(n){return Fv[" "](n),n}Fv[" "]=function(){};var Bv,n,tE=Bi("Opera"),Dh=Bi("Trident")||Bi("MSIE"),Lv=Bi("Edge"),nE=Lv||Dh,Vv=Bi("Gecko")&&!(-1!=ep().toLowerCase().indexOf("webkit")&&!Bi("Edge"))&&!(Bi("Trident")||Bi("MSIE"))&&!Bi("Edge"),Uv=-1!=ep().toLowerCase().indexOf("webkit")&&!Bi("Edge");function Bo(){var n=Ut.document;return n?n.documentMode:void 0}e:{var jv="",to=(n=ep(),Vv?/rv:([^\);]+)(\)|;)/.exec(n):Lv?/Edge\/([\d\.]+)/.exec(n):Dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Uv?/WebKit\/(\S+)/.exec(n):tE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(to&&(jv=to?to[1]:""),Dh){var xs=Bo();if(null!=xs&&xs>parseFloat(jv)){Bv=String(xs);break e}}Bv=jv}var rE=Ut.document&&Dh&&(Bo()||parseInt(Bv,10))||void 0;function tp(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Vv){e:{try{Fv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Eb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tp.$.h.call(this)}}Mr(tp,ai);var Eb={2:"touch",3:"pen",4:"mouse"};tp.prototype.h=function(){tp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),Ib=0;function $v(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Ib,this.fa=this.ia=!1}function Dc(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Gv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sE(n){const e={};for(const t in n)e[t]=n[t];return e}const oE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<oE.length;u++)t=oE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function rp(n){this.src=n,this.g={},this.h=0}function bh(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Nv(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Dc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}rp.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=qv(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new $v(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var nm="closure_lm_"+(1e6*Math.random()|0),rm={};function im(n,e,t,r,i){if(r&&r.once)return Wv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)im(n,e[u],t,r,i);return null}return t=Yv(t),n&&n[np]?n.O(e,t,Uo(r)?!!r.capture:!!r,i):ip(n,e,t,!1,r,i)}function ip(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=Uo(i)?!!i.capture:!!i,m=om(n);if(m||(n[nm]=m=new rp(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function aE(){const e=uE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_b||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Kv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Wv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Wv(n,e[u],t,r,i);return null}return t=Yv(t),n&&n[np]?n.P(e,t,Uo(r)?!!r.capture:!!r,i):ip(n,e,t,!0,r,i)}function Zv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Zv(n,e[u],t,r,i);else r=Uo(r)?!!r.capture:!!r,t=Yv(t),n&&n[np]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qv(u=n.g[e],t,r,i))&&(Dc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=om(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qv(e,t,r,i)),(t=-1<n?e[n]:null)&&sm(t))}function sm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[np])bh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Kv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=om(e))?(bh(t,n),0==t.h&&(t.src=null,e[nm]=null)):Dc(n)}}}function Kv(n){return n in rm?rm[n]:rm[n]="on"+n}function uE(n,e){if(n.fa)n=!0;else{e=new tp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&sm(n),n=t.call(r,e)}return n}function om(n){return(n=n[nm])instanceof rp?n:null}var am="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yv(n){return"function"==typeof n?n:(n[am]||(n[am]=function(e){return n.handleEvent(e)}),n[am])}function $r(){Cc.call(this),this.i=new rp(this),this.S=this,this.J=null}function ui(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var i=e;zv(e=new ai(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=um(l,r,!0,e)&&i}if(i=um(l=e.g=n,r,!0,e)&&i,i=um(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=um(l=e.g=t[u],r,!1,e)&&i}function um(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&bh(n.i,l),i=!1!==m.call(w,r)&&i}}return i&&!r.defaultPrevented}Mr($r,Cc),$r.prototype[np]=!0,$r.prototype.removeEventListener=function(n,e,t,r){Zv(this,n,e,t,r)},$r.prototype.N=function(){if($r.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dc(t[r]);delete n.g[e],n.h--}}this.J=null},$r.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},$r.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Qv=Ut.JSON.stringify;function Db(){var n=Jv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cE=new class Cb{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Tb,n=>n.reset());class Tb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sb(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Ab(n){Ut.setTimeout(()=>{throw n},0)}let sp,op=!1,Jv=new class bb{constructor(){this.h=this.g=null}add(e,t){const r=cE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},lE=()=>{const n=Ut.Promise.resolve(void 0);sp=()=>{n.then(xb)}};var xb=()=>{for(var n;n=Db();){try{n.h.call(n.g)}catch(t){Ab(t)}var e=cE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}op=!1};function cm(n,e){$r.call(this),this.h=n||1,this.g=e||Ut,this.j=Di(this.qb,this),this.l=Date.now()}function lm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function dm(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Xv(n){n.g=dm(()=>{n.g=null,n.i&&(n.i=!1,Xv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mr(cm,$r),(Ze=cm.prototype).ga=!1,Ze.T=null,Ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ui(this,"tick"),this.ga&&(lm(this),this.start()))}},Ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.N=function(){cm.$.N.call(this),lm(this),delete this.g};class dE extends Cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xv(this)}N(){super.N(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Th(n){Cc.call(this),this.h=n,this.g={}}Mr(Th,Cc);var e_=[];function t_(n,e,t,r){Array.isArray(t)||(t&&(e_[0]=t.toString()),t=e_);for(var i=0;i<t.length;i++){var u=im(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function n_(n){Gv(n.g,function(e,t){this.g.hasOwnProperty(t)&&sm(e)},n),n.g={}}function ap(){this.g=!0}function no(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return Qv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Th.prototype.N=function(){Th.$.N.call(this),n_(this)},Th.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ap.prototype.Ea=function(){this.g=!1},ap.prototype.info=function(){};var ro={},Ob=null;function Sh(){return Ob=Ob||new $r}function Pb(n){ai.call(this,ro.Ta,n)}function Ah(n){const e=Sh();ui(e,new Pb(e))}function r_(n,e){ai.call(this,ro.STAT_EVENT,n),this.stat=e}function ss(n){const e=Sh();ui(e,new r_(e,n))}function St(n,e){ai.call(this,ro.Ua,n),this.size=e}function up(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}ro.Ta="serverreachability",Mr(Pb,ai),ro.STAT_EVENT="statevent",Mr(r_,ai),ro.Ua="timingevent",Mr(St,ai);var hm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bc(){}function cp(){}bc.prototype.h=null;var fm,Tc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Un(){ai.call(this,"d")}function mE(){ai.call(this,"c")}function lp(){}function dp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Th(this),this.P=yE,this.V=new cm(n=nE?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new i_}function i_(){this.i=null,this.g="",this.h=!1}Mr(Un,ai),Mr(mE,ai),Mr(lp,bc),lp.prototype.g=function(){return new XMLHttpRequest},lp.prototype.i=function(){return{}},fm=new lp;var yE=45e3,pm={},hp={};function s_(n,e,t){n.L=1,n.v=mm(Ca(e)),n.s=t,n.S=!0,vE(n,null)}function vE(n,e){n.G=Date.now(),fp(n),n.A=Ca(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),bE(t.i,"t",r),n.C=0,t=n.l.J,n.h=new i_,n.g=$E(n.l,t?e:null,!n.s),0<n.O&&(n.M=new dE(Di(n.Pa,n,n.g),n.O)),t_(n.U,n.g,"readystatechange",n.nb),e=n.I?sE(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ah(),function hE(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var O=S.split("_");l=2<=O.length&&"type"==O[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function _E(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function xh(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Nb(n,t),i==hp){4==e&&(n.o=4,ss(14),r=!1),no(n.j,n.m,null,"[Incomplete Response]");break}if(i==pm){n.o=4,ss(15),no(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}no(n.j,n.m,i,null),gm(n,i)}_E(n)&&i!=hp&&i!=pm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ss(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ac(e),e.M=!0,ss(11))):(no(n.j,n.m,t,"[Invalid Chunked Response]"),Sc(n),Mh(n))}function Nb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?hp:(t=Number(e.substring(t,r)),isNaN(t)?pm:(r+=1)+t>e.length?hp:(e=e.slice(r,r+t),n.C=r+t,e))}function fp(n){n.Y=Date.now()+n.P,wE(n,n.P)}function wE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=up(Di(n.lb,n),e)}function Yl(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Mh(n){0==n.l.H||n.J||qb(n.l,n)}function Sc(n){Yl(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,lm(n.V),n_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function gm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Jl(t.i,n)))if(!n.K&&Jl(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;bm(t),kh(t)}Dm(t),ss(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=up(Di(t.ib,t),6e3));if(1>=xE(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else pu(t,11)}else if((n.K||t.g==n)&&bm(t),!Ch(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const S=b[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const O=b[4];null!=O&&(t.Ga=O,t.l.info("SVER="+t.Ga));const B=b[5];null!=B&&"number"==typeof B&&0<B&&(t.L=r=1.5*B,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ce=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var u=r.i;u.g||-1==ce.indexOf("spdy")&&-1==ce.indexOf("quic")&&-1==ce.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(o_(u,u.h),u.h=null))}if(r.F){const Me=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Me&&(r.Da=Me,An(r.I,r.F,Me))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Tm(r,r.J?r.pa:null,r.Y),l.K){a_(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(Yl(m),fp(m)),r.g=l}else jE(r);0<t.j.length&&Dp(t)}else"stop"!=b[0]&&"close"!=b[0]||pu(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?pu(t,7):d_(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Ah()}catch{}}function Rh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ih(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function pp(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ih(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function kb(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ih(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(Ze=dp.prototype).setTimeout=function(n){this.P=n},Ze.nb=function(n){n=n.target;const e=this.M;e&&3==jo(n)?e.l():this.Pa(n)},Ze.Pa=function(n){try{if(n==this.g)e:{const S=jo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||nE||this.g&&(this.h.h||this.g.ja()||l_(this.g)))){this.J||4!=S||7==e||Ah(),Yl(this);var t=this.g.da();this.ca=t;t:if(_E(this)){var r=l_(this.g);n="";var i=r.length,u=4==jo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sc(this),Mh(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function fE(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ch(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,ss(12),Sc(this),Mh(this);break e}no(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gm(this,t)}this.S?(xh(this,S,l),nE&&this.i&&3==S&&(t_(this.U,this.V,"tick",this.mb),this.V.start())):(no(this.j,this.m,l,null),gm(this,l)),4==S&&Sc(this),this.i&&!this.J&&(4==S?qb(this.l,this):(this.i=!1,fp(this)))}else(function zb(n){const e={};n=(n.g&&2<=jo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Ch(n[r]))continue;var t=Sb(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function iE(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ss(12)):(this.o=0,ss(13)),Sc(this),Mh(this)}}}catch{}},Ze.mb=function(){if(this.g){var n=jo(this.g),e=this.g.ja();this.C<e.length&&(Yl(this),xh(this,n,e),this.i&&4!=n&&fp(this))}},Ze.cancel=function(){this.J=!0,Sc(this)},Ze.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Mb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ah(),ss(17)),Sc(this),this.o=2,Mh(this)):wE(this,this.Y-n)};var EE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ql(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ql){this.h=n.h,gp(this,n.j),this.s=n.s,this.g=n.g,mp(this,n.m),this.l=n.l;var e=n.i,t=new vp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),IE(this,t),this.o=n.o}else n&&(e=String(n).match(EE))?(this.h=!1,gp(this,e[1]||"",!0),this.s=yp(e[2]||""),this.g=yp(e[3]||"",!0),mp(this,e[4]),this.l=yp(e[5]||"",!0),IE(this,e[6]||"",!0),this.o=yp(e[7]||"")):(this.h=!1,this.i=new vp(null,this.h))}function Ca(n){return new Ql(n)}function gp(n,e,t){n.j=t?yp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function IE(n,e,t){e instanceof vp?(n.i=e,function Ub(n,e){e&&!n.j&&(fu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Oh(this,r),bE(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ym(e,vm)),n.i=new vp(e,n.h))}function An(n,e,t){n.i.set(e,t)}function mm(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ym(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,dx),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dx(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ql.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ym(e,Lb,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ym(e,Lb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ym(t,"/"==t.charAt(0)?CE:hx,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ym(t,Vb)),n.join("")};var Lb=/[#\/\?@]/g,hx=/[#\?:]/g,CE=/[#\?]/g,vm=/[#\?@]/g,Vb=/#/g;function vp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Fb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Oh(n,e){fu(n),e=Ph(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function DE(n,e){return fu(n),e=Ph(n,e),n.g.has(e)}function bE(n,e,t){Oh(n,e),0<t.length&&(n.i=null,n.g.set(Ph(n,e),kv(t)),n.h+=t.length)}function Ph(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function TE(n){this.l=n||SE,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ka&&Ut.g.Ka()&&Ut.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=vp.prototype).add=function(n,e){fu(this),this.i=null,n=Ph(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){fu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.ta=function(){fu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},Ze.Z=function(n){fu(this);let e=[];if("string"==typeof n)DE(this,n)&&(e=e.concat(this.g.get(Ph(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return fu(this),this.i=null,DE(this,n=Ph(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var SE=10;function AE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xE(n){return n.h?1:n.g?n.g.size:0}function Jl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function o_(n,e){n.g?n.g.add(e):n.h=e}function a_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ME(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kv(n.i)}TE.prototype.cancel=function(){if(this.i=ME(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var RE=class{stringify(n){return Ut.JSON.stringify(n,void 0)}parse(n){return Ut.JSON.parse(n,void 0)}};function Bb(){this.g=new RE}function OE(n,e,t){const r=t||"";try{Rh(n,function(i,u){let l=i;Uo(i)&&(l=Qv(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _p(n){this.l=n.fc||null,this.j=n.ob||!1}function wp(n,e){$r.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=_m,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mr(_p,bc),_p.prototype.g=function(){return new wp(this.l,this.j)},_p.prototype.i=function(n){return function(){return n}}({}),Mr(wp,$r);var _m=0;function PE(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ep(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ip(n)}function Ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=wp.prototype).open=function(n,e){if(this.readyState!=_m)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ip(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Ut).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ep(this)),this.readyState=_m},Ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ip(this)),this.g&&(this.readyState=3,Ip(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PE(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ep(this):Ip(this),3==this.readyState&&PE(this)}},Ze.Za=function(n){this.g&&(this.response=this.responseText=n,Ep(this))},Ze.Ya=function(n){this.g&&(this.response=n,Ep(this))},Ze.ka=function(){this.g&&Ep(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(wp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var u_=Ut.JSON.parse;function sr(n){$r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=c_,this.L=this.M=!1}Mr(sr,$r);var c_="",Hb=/^https?$/i,$b=["POST","PUT"];function NE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kE(n),wm(n)}function kE(n){n.F||(n.F=!0,ui(n,"complete"),ui(n,"error"))}function FE(n){if(n.h&&typeof Mv<"u"&&(!n.C[1]||4!=jo(n)||2!=n.da()))if(n.v&&4==jo(n))dm(n.La,0,n);else if(ui(n,"readystatechange"),4==jo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(EE)[1]||null;!i&&Ut.self&&Ut.self.location&&(i=Ut.self.location.protocol.slice(0,-1)),r=!Hb.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var u=2<jo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",kE(n)}}finally{wm(n)}}}function wm(n,e){if(n.g){LE(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function LE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function jo(n){return n.g?n.g.readyState:0}function l_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case c_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VE(n){let e="";return Gv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Em(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=VE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Cp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function UE(n){this.Ga=0,this.j=[],this.l=new ap,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cp("baseRetryDelayMs",5e3,n),this.hb=Cp("retryDelaySeedMs",1e4,n),this.eb=Cp("forwardChannelMaxRetries",2,n),this.xa=Cp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new TE(n&&n.concurrentRequestLimit),this.Ja=new Bb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function d_(n){if(Im(n),3==n.H){var e=n.W++,t=Ca(n.I);if(An(t,"SID",n.K),An(t,"RID",e),An(t,"TYPE","terminate"),bp(n,t),(e=new dp(n,n.l,e)).L=2,e.v=mm(Ca(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon)try{t=Ut.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=$E(e.l,null),e.g.ha(e.v)),e.G=Date.now(),fp(e)}HE(n)}function kh(n){n.g&&(Ac(n),n.g.cancel(),n.g=null)}function Im(n){kh(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),bm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function Dp(n){if(!AE(n.i)&&!n.m){n.m=!0;var e=n.Na;sp||lE(),op||(sp(),op=!0),Jv.add(e,n),n.C=0}}function BE(n,e){var t;t=e?e.m:n.W++;const r=Ca(n.I);An(r,"SID",n.K),An(r,"RID",t),An(r,"AID",n.V),bp(n,r),n.o&&n.s&&Em(r,n.o,n.s),t=new dp(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Cm(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),o_(n.i,t),s_(t,r,e)}function bp(n,e){n.na&&Gv(n.na,function(t,r){An(e,r,t)}),n.h&&Rh({},function(t,r){An(e,r,t)})}function Cm(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Di(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=i[w].g;const S=i[w].map;if(b-=u,0>b)u=Math.max(0,i[w].g-100),m=!1;else try{OE(S,l,"req"+b+"_")}catch{r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function jE(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;sp||lE(),op||(sp(),op=!0),Jv.add(e,n),n.A=0}}function Dm(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=up(Di(n.Ma,n),p_(n,n.A)),n.A++,0))}function Ac(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function f_(n){n.g=new dp(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ca(n.wa);An(e,"RID","rpc"),An(e,"SID",n.K),An(e,"AID",n.V),An(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&An(e,"TO",n.qa),An(e,"TYPE","xmlhttp"),bp(n,e),n.o&&n.s&&Em(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=mm(Ca(e)),t.s=null,t.S=!0,vE(t,n)}function bm(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function qb(n,e){var t=null;if(n.g==e){bm(n),Ac(n),n.g=null;var r=2}else{if(!Jl(n.i,e))return;t=e.F,a_(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;ui(r=Sh(),new St(r,t)),Dp(n)}else jE(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function h_(n,e){return!(xE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=up(Di(n.Na,n,e),p_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Dm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:pu(n,5);break;case 4:pu(n,10);break;case 3:pu(n,6);break;default:pu(n,2)}}function p_(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function pu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Di(n.pb,n);t||(t=new Ql("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||gp(t,"https"),mm(t)),function jb(n,e){const t=new ap;if(Ut.Image){const r=new Image;r.onload=tm(Nh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=tm(Nh,t,r,"TestLoadImage: error",!1,e),r.onabort=tm(Nh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=tm(Nh,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ss(2);n.H=0,n.h&&n.h.za(e),HE(n),Im(n)}function HE(n){if(n.H=0,n.ma=[],n.h){const e=ME(n.i);(0!=e.length||0!=n.j.length)&&(eE(n.ma,e),eE(n.ma,n.j),n.i.i.length=0,kv(n.j),n.j.length=0),n.h.ya()}}function Tm(n,e,t){var r=t instanceof Ql?Ca(t):new Ql(t);if(""!=r.g)e&&(r.g=e+"."+r.g),mp(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Ql(null);r&&gp(u,r),e&&(u.g=e),i&&mp(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&An(r,t,e),An(r,"VER",n.ra),bp(n,r),r}function $E(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Ha&&!n.va?new _p({ob:!0}):n.va)).Oa(n.J),e}function g_(){}function Fh(){if(Dh&&!(10<=Number(rE)))throw Error("Environmental error: no available transport.")}function os(n,e){$r.call(this),this.g=new UE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ch(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ch(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Xl(this)}function m_(n){Un.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function y_(){mE.call(this),this.status=1}function Xl(n){this.g=n}function Ho(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function v_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=u+((l=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(Ze=sr.prototype).Oa=function(n){this.M=n},Ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fm.g(),this.C=function gE(n){return n.h||(n.h=n.i())}(this.u?this.u:fm),this.g.onreadystatechange=Di(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void NE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=Nv($b,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LE(this),0<this.B&&((this.L=function Gb(n){return Dh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.ua,this)):this.A=dm(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){NE(this,u)}},Ze.ua=function(){typeof Mv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),wm(this))},Ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wm(this,!0)),sr.$.N.call(this)},Ze.La=function(){this.s||(this.G||this.v||this.l?FE(this):this.kb())},Ze.kb=function(){FE(this)},Ze.isActive=function(){return!!this.g},Ze.da=function(){try{return 2<jo(this)?this.g.status:-1}catch{return-1}},Ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),u_(e)}},Ze.Ia=function(){return this.m},Ze.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=UE.prototype).ra=8,Ze.H=1,Ze.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new dp(this,this.l,n);let u=this.s;if(this.U&&(u?(u=sE(u),zv(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cm(this,i,e),An(t=Ca(this.I),"RID",n),An(t,"CVER",22),this.F&&An(t,"X-HTTP-Session-Id",this.F),bp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(VE(u)))+"&"+e:this.o&&Em(t,this.o,u)),o_(this.i,i),this.bb&&An(t,"TYPE","init"),this.P?(An(t,"$req",e),An(t,"SID","null"),i.aa=!0,s_(i,t,null)):s_(i,t,e),this.H=2}}else 3==this.H&&(n?BE(this,n):0==this.j.length||AE(this.i)||BE(this))},Ze.Ma=function(){if(this.u=null,f_(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=up(Di(this.jb,this),n)}},Ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ss(10),kh(this),f_(this))},Ze.ib=function(){null!=this.v&&(this.v=null,kh(this),Dm(this),ss(19))},Ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ss(2)):(this.l.info("Failed to ping google.com"),ss(1))},Ze.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ze=g_.prototype).Ba=function(){},Ze.Aa=function(){},Ze.za=function(){},Ze.ya=function(){},Ze.isActive=function(){return!0},Ze.Va=function(){},Fh.prototype.g=function(n,e){return new os(n,e)},Mr(os,$r),os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ss(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Tm(n,null,n.Y),Dp(n)},os.prototype.close=function(){d_(this.g)},os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Qv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Dp(e)},os.prototype.N=function(){this.g.h=null,delete this.j,d_(this.g),delete this.g,os.$.N.call(this)},Mr(m_,Un),Mr(y_,mE),Mr(Xl,g_),Xl.prototype.Ba=function(){ui(this.g,"a")},Xl.prototype.Aa=function(n){ui(this.g,new m_(n))},Xl.prototype.za=function(n){ui(this.g,new y_)},Xl.prototype.ya=function(){ui(this.g,"b")},Mr(Ho,function Wb(){this.blockSize=-1}),Ho.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ho.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)v_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){v_(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){v_(this,r),i=0;break}}this.h=i,this.i+=e},Ho.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var GE={};function zE(n){return-128<=n&&128>n?function wb(n,e){var t=GE;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function $o(n){if(isNaN(n)||!isFinite(n))return Tp;if(0>n)return ci($o(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=__;return new vn(e,0)}var __=4294967296,Tp=zE(0),w_=zE(1),WE=zE(16777216);function gu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function io(n){return-1==n.h}function ci(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(w_)}function Sm(n,e){return n.add(ci(e))}function Am(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Sp(n,e){this.g=n,this.h=e}function xm(n,e){if(gu(e))throw Error("division by zero");if(gu(n))return new Sp(Tp,Tp);if(io(n))return e=xm(ci(n),e),new Sp(ci(e.g),ci(e.h));if(io(e))return e=xm(n,ci(e)),new Sp(ci(e.g),e.h);if(30<n.g.length){if(io(n)||io(e))throw Error("slowDivide_ only works with positive integers.");for(var t=w_,r=e;0>=r.X(n);)t=ZE(t),r=ZE(r);var i=Lh(t,1),u=Lh(r,1);for(r=Lh(r,2),t=Lh(t,2);!gu(r);){var l=u.add(r);0>=l.X(n)&&(i=i.add(t),u=l),r=Lh(r,1),t=Lh(t,1)}return e=Sm(n,i.R(e)),new Sp(i,e)}for(i=Tp;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=$o(t)).R(e);io(l)||0<l.X(n);)l=(u=$o(t-=r)).R(e);gu(u)&&(u=w_),i=i.add(u),n=Sm(n,l)}return new Sp(i,n)}function ZE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function Lh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(i,n.h)}(Ze=vn.prototype).ea=function(){if(io(this))return-ci(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:__+r)*e,e*=__}return n},Ze.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(gu(this))return"0";if(io(this))return"-"+ci(this).toString(n);for(var e=$o(Math.pow(n,6)),t=this,r="";;){var i=xm(t,e).g,u=((0<(t=Sm(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(gu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ze.X=function(n){return io(n=Sm(this,n))?-1:gu(n)?0:1},Ze.abs=function(){return io(this)?ci(this):this},Ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),l=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},Ze.R=function(n){if(gu(this)||gu(n))return Tp;if(io(this))return io(n)?ci(this).R(ci(n)):ci(ci(this).R(n));if(io(n))return ci(this.R(ci(n)));if(0>this.X(WE)&&0>n.X(WE))return $o(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(i)>>>16,w=65535&n.D(i);t[2*r+2*i]+=l*w,Am(t,2*r+2*i),t[2*r+2*i+1]+=u*w,Am(t,2*r+2*i+1),t[2*r+2*i+1]+=l*m,Am(t,2*r+2*i+1),t[2*r+2*i+2]+=u*m,Am(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},Ze.gb=function(n){return xm(this,n).h},Ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},Ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},Ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},Fh.prototype.createWebChannel=Fh.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,hm.NO_ERROR=0,hm.TIMEOUT=8,hm.HTTP_ERROR=6,pE.COMPLETE="complete",cp.EventType=Tc,Tc.OPEN="a",Tc.CLOSE="b",Tc.ERROR="c",Tc.MESSAGE="d",$r.prototype.listen=$r.prototype.O,sr.prototype.listenOnce=sr.prototype.P,sr.prototype.getLastError=sr.prototype.Sa,sr.prototype.getLastErrorCode=sr.prototype.Ia,sr.prototype.getStatus=sr.prototype.da,sr.prototype.getResponseJson=sr.prototype.Wa,sr.prototype.getResponseText=sr.prototype.ja,sr.prototype.send=sr.prototype.ha,sr.prototype.setWithCredentials=sr.prototype.Oa,Ho.prototype.digest=Ho.prototype.l,Ho.prototype.reset=Ho.prototype.reset,Ho.prototype.update=Ho.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=$o,vn.fromString=function qE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return ci(qE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=$o(Math.pow(e,8)),r=Tp,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+u),e);8>u?(u=$o(Math.pow(e,u)),r=r.R(u).add($o(l))):r=(r=r.R(t)).add($o(l))}return r};var Zb=is.createWebChannelTransport=function(){return new Fh},Ap=is.getStatEventTarget=function(){return Sh()},Mm=is.ErrorCode=hm,KE=is.EventType=pE,YE=is.Event=ro,E_=is.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},QE=is.FetchXmlHttpFactory=_p,Rm=is.WebChannel=cp,Kb=is.XhrIo=sr,px=is.Md5=Ho,Vh=is.Integer=vn;const JE="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let Uh="9.23.0";const xc=new wc.Yd("@firebase/firestore");function ed(){return xc.logLevel}function Le(n,...e){if(xc.logLevel<=wc.in.DEBUG){const t=e.map(xp);xc.debug(`Firestore (${Uh}): ${n}`,...t)}}function gn(n,...e){if(xc.logLevel<=wc.in.ERROR){const t=e.map(xp);xc.error(`Firestore (${Uh}): ${n}`,...t)}}function so(n,...e){if(xc.logLevel<=wc.in.WARN){const t=e.map(xp);xc.warn(`Firestore (${Uh}): ${n}`,...t)}}function xp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Uh}) INTERNAL ASSERTION FAILED: `+n;throw gn(e),new Error(e)}function yt(n,e){n||et()}function Qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class XE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class tI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class I_{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,fe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new XE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Gr(e)}}class nI{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class C_{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new nI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Om{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.T=t.token,new Om(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function D_(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class sI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=D_(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function Bh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function oI(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Pn(0,0))}static max(){return new mt(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jh{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends jh{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const aI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends jh{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return aI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new De(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new De(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[i+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new De(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,i+=2}else"`"===m?(l=!l,i++):"."!==m||l?(r+=m,i++):(u(),i++)}if(u(),l)throw new De(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(rn.fromString(e))}static fromName(e){return new Ke(rn.fromString(e).popFirst(5))}static empty(){return new Ke(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new rn(e.slice()))}}class Mp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Pm(n){return n.fields.find(e=>2===e.kind)}function td(n){return n.fields.filter(e=>2!==e.kind)}Mp.UNKNOWN_ID=-1;class Nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Da{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Da(0,oo.min())}}function cI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=mt.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new oo(i,Ke.empty(),e)}function lI(n){return new oo(n.readTime,n.key,-1)}class oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new oo(mt.min(),Ke.empty(),-1)}static max(){return new oo(mt.max(),Ke.empty(),-1)}}function dI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const b_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class km{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ao(n){return T_.apply(this,arguments)}function T_(){return T_=(0,fe.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==b_)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),T_.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,u=0,l=!1;e.forEach(m=>{++i,m.next(()=>{++u,l&&u===i&&t()},w=>r(w))}),l=!0,u===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{l[b]=S,++m,m===u&&r(l)},S=>i(S))}})}static doWhile(e,t){return new ee((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Fm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Rp(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=Hh(r.target.error);this.v.reject(new Rp(e,i))}}static open(e,t,r,i){try{return new Fm(t,e.transaction(i,r))}catch(u){throw new Rp(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new S_(t)}}class uo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===uo.S((0,cn.z$)())&&gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Rc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,cn.hl)())return!1;if(uo.C())return!0;const e=(0,cn.z$)(),t=uo.S(e),r=0<t&&t<10,i=uo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new Rp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;i("VersionError"===m.name?new De(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Rp(e,m))},u.onupgradeneeded=l=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,fe.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=Fm.open(u.db,e,l?"readonly":"readwrite",r),b=i(w).next(S=>(w.P(),S)).catch(S=>(w.abort(S),ee.reject(S))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Le("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Jb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Rc(this.L.delete())}}class Rp extends De{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mc(n){return"IndexedDbTransactionError"===n.name}class S_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rc(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Rc(this.store.add(e))}get(e){return Rc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Rc(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(l,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ee((u,l)=>{i.onerror=m=>{l(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=u=>{const l=Hh(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void i();const w=new Jb(m),b=t(m.primaryKey,m.value,w);if(b instanceof ee){const S=b.catch(O=>(w.done(),ee.reject(O)));r.push(S)}w.isDone?i():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rc(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Hh(r.target.error);t(i)}})}let A_=!1;function Hh(n){const e=uo.S((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A_||(A_=!0,setTimeout(()=>{throw r},0)),r}}return n}class x_{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Le("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Le("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Mc(r)?Le("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ao(r)}yield t.et(6e4)}))}}class gx{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ee.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Le("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(m=>{i-=m,r.add(l)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,u)).next(m=>(Le("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=lI(u);dI(l,r)>0&&(r=l)}),new oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let as=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Op(n){return null==n}function $h(n){return 0===n&&1/n==-1/0}function nd(n){return"number"==typeof n&&Number.isInteger(n)&&!$h(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lm(e)),e=hI(n.get(t),e);return Lm(e)}function hI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Lm(n){return n+"\x01\x01"}function mu(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===i.length?w=m:(i+=m,w=i,i=""),r.push(w);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:et()}u=l+2}return new rn(r)}const fI=["userId","batchId"];function M_(n,e){return[n,bi(e)]}function pI(n,e,t){return[n,bi(e),t]}const Xb={},eT=["prefixPath","collectionGroup","readTime","documentId"],gI=["prefixPath","collectionGroup","documentId"],mI=["collectionGroup","readTime","prefixPath","documentId"],tT=["canonicalId","targetId"],yI=["targetId","path"],vI=["path","targetId"],nT=["collectionId","parent"],rT=["indexId","uid"],_I=["uid","sequenceNumber"],iT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wI=["indexId","uid","orderedDocumentKey"],EI=["userId","collectionPath","documentId"],II=["userId","collectionPath","largestBatchId"],CI=["userId","collectionGroup","largestBatchId"],DI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sT=[...DI,"documentOverlays"],oT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],R_=oT,mx=[...R_,"indexConfiguration","indexState","indexEntries"];class bI extends km{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function li(n,e){const t=Qe(n);return uo.M(t.ht,e)}function aT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new O_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new O_(this.root,e,this.comparator,!1)}getReverseIterator(){return new O_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new O_(this.root,e,this.comparator,!0)}}class O_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=u??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Er(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Er(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yu(n){return n.hasNext()?n.getNext():void 0}class Hi{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new Hi([])}unionWith(e){let t=new Bn(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class N_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new N_("Invalid base64 string: "+i):i}}(e);return new gr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const TI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oc(n){if(yt(!!n),"string"==typeof n){let e=0;const t=TI.exec(n);if(yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pc(n){return"string"==typeof n?gr.fromBase64String(n):gr.fromUint8Array(n)}function Vm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Um(n){const e=n.mapValue.fields.__previous_value__;return Vm(e)?Um(e):e}function Nc(n){const e=Oc(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class cT{constructor(e,t,r,i,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class id{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new id("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof id&&e.projectId===this.projectId&&e.database===this.database}}const sd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},k_={nullValue:"NULL_VALUE"};function kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vm(n)?4:jm(n)?9007199254740991:10:et()}function ba(n,e){if(n===e)return!0;const t=kc(n);if(t!==kc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nc(n).isEqual(Nc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Oc(r.timestampValue),l=Oc(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pc(n.bytesValue).isEqual(Pc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return mr(r.geoPointValue.latitude)===mr(i.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mr(r.integerValue)===mr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=mr(r.doubleValue),l=mr(i.doubleValue);return u===l?$h(u)===$h(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Bh(n.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(aT(u)!==aT(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ba(u[m],l[m])))return!1;return!0}(n,e);default:return et()}var i}function Pp(n,e){return void 0!==(n.values||[]).find(t=>ba(t,e))}function od(n,e){if(n===e)return 0;const t=kc(n),r=kc(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=mr(i.integerValue||i.doubleValue),m=mr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return SI(n.timestampValue,e.timestampValue);case 4:return SI(Nc(n),Nc(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Pc(i),m=Pc(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Lt(l[w],m[w]);if(0!==b)return b}return Lt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Lt(mr(i.latitude),mr(u.latitude));return 0!==l?l:Lt(mr(i.longitude),mr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=od(l[w],m[w]);if(b)return b}return Lt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===sd.mapValue&&u===sd.mapValue)return 0;if(i===sd.mapValue)return 1;if(u===sd.mapValue)return-1;const l=i.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const O=Lt(m[S],b[S]);if(0!==O)return O;const B=od(l[m[S]],w[b[S]]);if(0!==B)return B}return Lt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw et()}}function SI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Oc(n),r=Oc(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function ad(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Oc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pc(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=Bm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of i)l?l=!1:u+=",",u+=`${m}:${Bm(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function di(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function L_(n){return!!n&&"integerValue"in n}function ud(n){return!!n&&"arrayValue"in n}function AI(n){return!!n&&"nullValue"in n}function lT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $i(n){return!!n&&"mapValue"in n}function Np(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return rd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Np(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Np(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dT(n){return"nullValue"in n?k_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?di(id.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function hT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?di(id.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sd:et()}function Hm(n,e){const t=od(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function V_(n,e){const t=od(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$i(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Np(t)}setAll(e){let t=Yn.emptyPath(),r={},i=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,i),r={},i=[],t=m.popLast()}l?r[m.lastSegment()]=Np(l):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());$i(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$i(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){rd(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new zr(Np(this.value))}}function xI(n){const e=[];return rd(n.fields,(t,r)=>{const i=new Yn([t]);if($i(r)){const u=xI(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new Hi(e)}class xn{constructor(e,t,r,i,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new xn(e,0,mt.min(),mt.min(),mt.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new xn(e,1,t,mt.min(),r,i,0)}static newNoDocument(e,t){return new xn(e,2,t,mt.min(),mt.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,mt.min(),mt.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vu{constructor(e,t){this.position=e,this.inclusive=t}}function MI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):od(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function U_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ba(n.position[t],e.position[t]))return!1;return!0}class Gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function B_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ta{}class $t extends Ta{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new NI(e,t,r):"array-contains"===t?new LI(e,r):"in"===t?new pT(e,r):"not-in"===t?new $_(e,r):"array-contains-any"===t?new VI(e,r):new $t(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new vx(e,r):new kI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(od(t,this.value)):null!==t&&kc(this.value)===kc(t)&&this.matchesComparison(od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mn extends Ta{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new mn(e,t)}matches(e){return Fc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Fc(n){return"and"===n.op}function $m(n){return"or"===n.op}function j_(n){return fT(n)&&Fc(n)}function fT(n){for(const e of n.filters)if(e instanceof mn)return!1;return!0}function H_(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+ad(n.value);if(j_(n))return n.filters.map(e=>H_(e)).join(",");{const e=n.filters.map(t=>H_(t)).join(",");return`${n.op}(${e})`}}function RI(n,e){return n instanceof $t?(t=n,(r=e)instanceof $t&&t.op===r.op&&t.field.isEqual(r.field)&&ba(t.value,r.value)):n instanceof mn?function(t,r){return r instanceof mn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,l)=>i&&RI(u,r.filters[l]),!0)}(n,e):void et();var t,r}function OI(n,e){const t=n.filters.concat(e);return mn.create(t,n.op)}function PI(n){return n instanceof $t?`${(e=n).field.canonicalString()} ${e.op} ${ad(e.value)}`:n instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(PI).join(" ,")+"}"}(n):"Filter";var e}class NI extends $t{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class vx extends $t{constructor(e,t){super(e,"in",t),this.keys=FI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kI extends $t{constructor(e,t){super(e,"not-in",t),this.keys=FI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class LI extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ud(t)&&Pp(t.arrayValue,this.value)}}class pT extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pp(this.value.arrayValue,t)}}class $_ extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pp(this.value.arrayValue,t)}}class VI extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ud(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pp(this.value.arrayValue,r))}}class UI{constructor(e,t=null,r=[],i=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function Gm(n,e=null,t=[],r=[],i=null,u=null,l=null){return new UI(n,e,t,r,i,u,l)}function Lc(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>H_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Op(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ad(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ad(r)).join(",")),e.dt=t}return e.dt}function zh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!U_(n.startAt,e.startAt)&&U_(n.endAt,e.endAt)}function cd(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ld(n,e){return n.filters.filter(t=>t instanceof $t&&t.field.isEqual(e))}function G_(n,e,t){let r=k_,i=!0;for(const u of ld(n,e)){let l=k_,m=!0;switch(u.op){case"<":case"<=":l=dT(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=k_}Hm({value:r,inclusive:i},{value:l,inclusive:m})<0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Hm({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function BI(n,e,t){let r=sd,i=!0;for(const u of ld(n,e)){let l=sd,m=!0;switch(u.op){case">=":case">":l=hT(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=sd}V_({value:r,inclusive:i},{value:l,inclusive:m})>0&&(r=l,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];V_({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class _u{constructor(e,t=null,r=[],i=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function gT(n,e,t,r,i,u,l,m){return new _u(n,e,t,r,i,u,l,m)}function kp(n){return new _u(n)}function mT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function zm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function z_(n){return null!==n.collectionGroup}function dd(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=qm(e),r=zm(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Gh(t)),e.wt.push(new Gh(Yn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Gh(Yn.keyField(),u))}}}return e.wt}function us(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=Gm(e.path,e.collectionGroup,dd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of dd(e))t.push(new Gh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vu(e.startAt.position,e.startAt.inclusive):null;e._t=Gm(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function jI(n,e){e.getFirstInequalityField(),qm(n);const t=n.filters.concat([e]);return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function q_(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wm(n,e){return zh(us(n),us(e))&&n.limitType===e.limitType}function yT(n){return`${Lc(us(n))}|lt:${n.limitType}`}function W_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>PI(r)).join(", ")}]`),Op(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ad(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ad(r)).join(",")),`Target(${t})`}(us(n))}; limitType=${n.limitType})`}function Vc(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of dd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const m=MI(i,u,l);return i.inclusive?m<=0:m<0}(t.startAt,dd(t),r)||t.endAt&&!function(i,u,l){const m=MI(i,u,l);return i.inclusive?m>=0:m>0}(t.endAt,dd(t),r)));var t,r}function HI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $I(n){return(e,t)=>{let r=!1;for(const i of dd(n)){const u=GI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function GI(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,u,l){const m=u.data.field(i),w=l.data.field(i);return null!==m&&null!==w?od(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}class Gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rd(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}const zI=new Nn(Ke.comparator);function Ti(){return zI}const Zm=new Nn(Ke.comparator);function Fp(...n){let e=Zm;for(const t of n)e=e.insert(t.key,t);return e}function Km(n){let e=Zm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function co(){return Ym()}function Lp(){return Ym()}function Ym(){return new Gi(n=>n.toString(),(n,e)=>n.isEqual(e))}const _x=new Nn(Ke.comparator),wx=new Bn(Ke.comparator);function zt(...n){let e=wx;for(const t of n)e=e.add(t);return e}const qI=new Bn(Lt);function Z_(){return qI}function WI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function ZI(n){return{integerValue:""+n}}function KI(n,e){return nd(e)?ZI(e):WI(n,e)}class Vp{constructor(){this._=void 0}}function YI(n,e,t){return n instanceof qh?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Vm(i)&&(i=Um(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Uc?Qm(n,e):n instanceof Wh?K_(n,e):function(r,i){const u=JI(r,i),l=XI(u)+XI(r.gt);return L_(u)&&L_(r.gt)?ZI(l):WI(r.serializer,l)}(n,e)}function QI(n,e,t){return n instanceof Uc?Qm(n,e):n instanceof Wh?K_(n,e):t}function JI(n,e){return n instanceof Bc?L_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qh extends Vp{}class Uc extends Vp{constructor(e){super(),this.elements=e}}function Qm(n,e){const t=eC(e);for(const r of n.elements)t.some(i=>ba(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wh extends Vp{constructor(e){super(),this.elements=e}}function K_(n,e){let t=eC(e);for(const r of n.elements)t=t.filter(i=>!ba(i,r));return{arrayValue:{values:t}}}class Bc extends Vp{constructor(e,t){super(),this.serializer=e,this.gt=t}}function XI(n){return mr(n.integerValue||n.doubleValue)}function eC(n){return ud(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jm{constructor(e,t){this.field=e,this.transform=t}}class vT{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Y_{}function _T(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new s(n.key,jn.none()):new Up(n.key,n.data,jn.none());{const t=n.data,r=zr.empty();let i=new Bn(Yn.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new jc(n.key,r,new Hi(i.toArray()),jn.none())}}function Ix(n,e,t){n instanceof Up?function(r,i,u){const l=r.value.clone(),m=CT(r.fieldTransforms,i,u.transformResults);l.setAll(m),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof jc?function(r,i,u){if(!Xm(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=CT(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(IT(r)),m.setAll(l),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ey(n,e,t,r){return n instanceof Up?function(i,u,l,m){if(!Xm(i.precondition,u))return l;const w=i.value.clone(),b=DT(i.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof jc?function(i,u,l,m){if(!Xm(i.precondition,u))return l;const w=DT(i.fieldTransforms,m,u),b=u.data;return b.setAll(IT(i)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,Xm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function wT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=JI(r.transform,i||null);null!=u&&(null===t&&(t=zr.empty()),t.set(r.field,u))}return t||null}function ET(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bh(t,r,(i,u)=>function Ex(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uc&&r instanceof Uc||t instanceof Wh&&r instanceof Wh?Bh(t.elements,r.elements,ba):t instanceof Bc&&r instanceof Bc?ba(t.gt,r.gt):t instanceof qh&&r instanceof qh);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Up extends Y_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jc extends Y_{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function IT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function CT(n,e,t){const r=new Map;yt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,m=e.data.field(u.field);r.set(u.field,QI(l,m,t[i]))}return r}function DT(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,YI(u,l,e))}return r}class s extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o extends Y_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class a{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&Ix(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ey(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ey(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Lp();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(i.key)?null:m;const w=_T(l,m);null!==w&&r.set(i.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&Bh(this.mutations,e.mutations,(t,r)=>ET(t,r))&&Bh(this.baseMutations,e.baseMutations,(t,r)=>ET(t,r))}}class c{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length);let i=_x;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new c(e,t,r,i)}}class d{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class v{constructor(e,t){this.count=e,this.unchangedNames=t}}var I,C;function x(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function R(n){if(void 0===n)return gn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case I.OK:return ae.OK;case I.CANCELLED:return ae.CANCELLED;case I.UNKNOWN:return ae.UNKNOWN;case I.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case I.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case I.INTERNAL:return ae.INTERNAL;case I.UNAVAILABLE:return ae.UNAVAILABLE;case I.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case I.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case I.NOT_FOUND:return ae.NOT_FOUND;case I.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case I.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case I.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case I.ABORTED:return ae.ABORTED;case I.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case I.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case I.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(C=I||(I={}))[C.OK=0]="OK",C[C.CANCELLED=1]="CANCELLED",C[C.UNKNOWN=2]="UNKNOWN",C[C.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",C[C.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",C[C.NOT_FOUND=5]="NOT_FOUND",C[C.ALREADY_EXISTS=6]="ALREADY_EXISTS",C[C.PERMISSION_DENIED=7]="PERMISSION_DENIED",C[C.UNAUTHENTICATED=16]="UNAUTHENTICATED",C[C.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",C[C.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",C[C.ABORTED=10]="ABORTED",C[C.OUT_OF_RANGE=11]="OUT_OF_RANGE",C[C.UNIMPLEMENTED=12]="UNIMPLEMENTED",C[C.INTERNAL=13]="INTERNAL",C[C.UNAVAILABLE=14]="UNAVAILABLE",C[C.DATA_LOSS=15]="DATA_LOSS";class F{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return G}static getOrCreateInstance(){return null===G&&(G=new F),G}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let G=null;function Q(){return new TextEncoder}const _e=new Vh([4294967295,4294967295],0);function Ue(n){const e=Q().encode(n),t=new px;return t.update(e),new Uint8Array(t.digest())}function Ye(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Vh([t,r],0),new Vh([i,u],0)]}class ut{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ct(`Invalid padding: ${t}`);if(r<0)throw new Ct(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ct(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Ct(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Vh.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Vh.fromNumber(r)));return 1===i.compare(_e)&&(i=new Vh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ue(e),[r,i]=Ye(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new ut(u,i,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=Ue(e),[r,i]=Ye(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,i,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Ct extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xe{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pt.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xe(mt.min(),i,new Nn(Lt),Ti(),zt())}}class Pt{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pt(r,t,zt(),zt(),zt())}}class Tn{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class or{constructor(e,t){this.targetId=e,this.Vt=t}}class bT{constructor(e,t,r=gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Cx{constructor(){this.St=0,this.Dt=bx(),this.Ct=gr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=zt(),t=zt(),r=zt();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new Pt(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=bx()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class gP{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ti(),this.zt=Dx(),this.Wt=new Nn(Lt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(cd(l))if(0===i){const m=new Ke(l.path);this.Yt(r,m,xn.newNoDocument(m,mt.min()))}else yt(1===i);else{const m=this.ie(r);if(m!==i){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=F.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,S,O){var B,q,ce,Me,ke,it;const Et={localCacheCount:S,existenceFilterCount:O.count},wt=O.unchangedNames;return wt&&(Et.bloomFilter={applied:0===b,hashCount:null!==(B=wt?.hashCount)&&void 0!==B?B:0,bitmapLength:null!==(Me=null===(ce=null===(q=wt?.bits)||void 0===q?void 0:q.bitmap)||void 0===ce?void 0:ce.length)&&void 0!==Me?Me:0,padding:null!==(it=null===(ke=wt?.bits)||void 0===ke?void 0:ke.padding)&&void 0!==it?it:0}),Et}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=Pc(u).toUint8Array()}catch(S){if(S instanceof N_)return so("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{b=new ut(w,l,m)}catch(S){return so(S instanceof Ct?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===b.It?1:i!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&cd(m.target)){const w=new Ke(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,xn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=zt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const i=new xe(e,t,this.Wt,this.jt,r);return this.jt=Ti(),this.zt=Dx(),this.Wt=new Nn(Lt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Cx,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Bn(Lt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Cx),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Dx(){return new Nn(Ke.comparator)}function bx(){return new Nn(Ke.comparator)}const mP={asc:"ASCENDING",desc:"DESCENDING"},yP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vP={and:"AND",or:"OR"};class _P{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TT(n,e){return n.useProto3Json||Op(e)?e:{value:e}}function ty(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wP(n,e){return ty(n,e.toTimestamp())}function Pr(n){return yt(!!n),mt.fromTimestamp(function(e){const t=Oc(e);return new Pn(t.seconds,t.nanos)}(n))}function ST(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sx(n){const e=rn.fromString(n);return yt(Fx(e)),e}function Q_(n,e){return ST(n.databaseId,e.path)}function Hc(n,e){const t=Sx(e);if(t.get(1)!==n.databaseId.projectId)throw new De(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(xx(t))}function AT(n,e){return ST(n.databaseId,e)}function Ax(n){const e=Sx(n);return 4===e.length?rn.emptyPath():xx(e)}function J_(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xx(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mx(n,e,t){return{name:Q_(n,e),fields:t.value.mapValue.fields}}function Rx(n,e,t){const r=Hc(n,e.name),i=Pr(e.updateTime),u=e.createTime?Pr(e.createTime):mt.min(),l=new zr({mapValue:{fields:e.fields}}),m=xn.newFoundDocument(r,i,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function X_(n,e){let t;if(e instanceof Up)t={update:Mx(n,e.key,e.value)};else if(e instanceof s)t={delete:Q_(n,e.key)};else if(e instanceof jc)t={update:Mx(n,e.key,e.data),updateMask:AP(e.fieldMask)};else{if(!(e instanceof o))return et();t={verify:Q_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof qh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Uc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bc)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:wP(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function xT(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?jn.updateTime(Pr(i.updateTime)):void 0!==i.exists?jn.exists(i.exists):jn.none():jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let m=null;"setToServerValue"in l?(yt("REQUEST_TIME"===l.setToServerValue),m=new qh):"appendMissingElements"in l?m=new Uc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Wh(l.removeAllFromArray.values||[]):"increment"in l?m=new Bc(u,l.increment):et();const w=Yn.fromServerFormat(l.fieldPath);return new Jm(w,m)}(n,i)):[];var i;if(e.update){const i=Hc(n,e.update.name),u=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Hi((e.updateMask.fieldPaths||[]).map(b=>Yn.fromServerFormat(b)));return new jc(i,u,l,t,r)}return new Up(i,u,t,r)}if(e.delete){const i=Hc(n,e.delete);return new s(i,t)}if(e.verify){const i=Hc(n,e.verify);return new o(i,t)}return et()}function Ox(n,e){return{documents:[AT(n,e.path)]}}function MT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=AT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=AT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(w){if(0!==w.length)return kx(mn.create(w,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Zh((S=b).field),direction:bP(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=TT(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Px(n){let e=Ax(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const O=Nx(S);return O instanceof mn&&j_(O)?O.getFilters():[O]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new Gh(ny((O=S).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(S){let O;return O="object"==typeof S?S.value:S,Op(O)?null:O}(t.limit));let w=null;var S;t.startAt&&(w=new vu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new vu(S.values||[],!S.before)}(t.endAt)),gT(e,i,l,u,m,"F",w,b)}function Nx(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ny(e.unaryFilter.field);return $t.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ny(e.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ny(e.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ny(e.unaryFilter.field);return $t.create(u,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?$t.create(ny((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(t=>Nx(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function bP(n){return mP[n]}function TP(n){return yP[n]}function SP(n){return vP[n]}function Zh(n){return{fieldPath:n.canonicalString()}}function ny(n){return Yn.fromServerFormat(n.fieldPath)}function kx(n){return n instanceof $t?function(e){if("=="===e.op){if(lT(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NAN"}};if(AI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lT(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NAN"}};if(AI(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(e.field),op:TP(e.op),value:e.value}}}(n):n instanceof mn?function(e){const t=e.getFilters().map(r=>kx(r));return 1===t.length?t[0]:{compositeFilter:{op:SP(e.op),filters:t}}}(n):et()}function AP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hd{constructor(e,t,r,i,u=mt.min(),l=mt.min(),m=gr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Lx{constructor(e){this.fe=e}}function Vx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Q_(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ty(i,u.version.toTimestamp()),createTime:ty(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Bp(e.version)}}var i,u;return r}function tC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jp(n){const e=new Pn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Hp(n,e){const t=(e.baseMutations||[]).map(u=>xT(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>xT(n.fe,u)),i=Pn.fromMillis(e.localWriteTimeMs);return new a(e.batchId,i,t,r)}function e0(n){const e=jp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jp(n.lastLimboFreeSnapshotVersion):mt.min();let r;var i;return void 0!==n.query.documents?(yt(1===(i=n.query).documents.length),r=us(kp(Ax(i.documents[0])))):r=us(Px(n.query)),new hd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gr.fromBase64String(n.resumeToken))}function Ux(n,e){const t=Bp(e.snapshotVersion),r=Bp(e.lastLimboFreeSnapshotVersion);let i;i=cd(e.target)?Ox(n.fe,e.target):MT(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function RT(n){const e=Px({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?q_(e,e.limit,"L"):e}function OT(n,e){return new d(e.largestBatchId,xT(n.fe,e.overlayMutation))}function Bx(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function jx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bp(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class MP{getBundleMetadata(e,t){return Hx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:jp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Hx(e).put({bundleId:(r=t).id,createTime:Bp(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $x(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:RT(i.bundledQuery),readTime:jp(i.readTime)};var i})}saveNamedQuery(e,t){return $x(e).put({name:(r=t).name,readTime:Bp(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Hx(n){return li(n,"bundles")}function $x(n){return li(n,"namedQueries")}class nC{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new nC(e,t.uid||"")}getOverlay(e,t){return t0(e).get(Bx(this.userId,t)).next(r=>r?OT(this.serializer,r):null)}getOverlays(e,t){const r=co();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const m=new d(t,l);i.push(this.we(e,m))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(bi(l.getCollectionPath())));const u=[];return i.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(t0(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const i=co(),u=bi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return t0(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=OT(this.serializer,w);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=co();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return t0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const O=OT(this.serializer,b);u.size()<i||O.largestBatchId===l?(u.set(O.getKey(),O),l=O.largestBatchId):S.done()}).next(()=>u)}we(e,t){return t0(e).put(function(r,i,u){const[l,m,w]=Bx(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:X_(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function t0(n){return li(n,"documentOverlays")}class $p{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),$h(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Pc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?jm(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function RP(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Gx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=RP(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}$p.Ve=new $p;class OP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=Gx(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=Gx(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PP{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class NP{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class n0{constructor(){this.je=new OP,this.ze=new PP(this.je),this.We=new NP(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Gp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gp(this.indexId,this.documentKey,this.arrayValue,r)}}function Kh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zx(n.arrayValue,e.arrayValue),0!==t?t:(t=zx(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function zx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class kP{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){yt(e.collectionGroup===this.collectionId);const t=Pm(e);if(void 0!==t&&!this.en(t))return!1;const r=td(e);let i=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function qx(n){var e,t;if(yt(n instanceof $t||n instanceof mn),n instanceof $t){if(n instanceof pT){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>$t.create(n.field,"==",u)))||[];return mn.create(i,"or")}return n}const r=n.filters.map(i=>qx(i));return mn.create(r,n.op)}function FP(n){if(0===n.getFilters().length)return[];const e=kT(qx(n));return yt(Wx(e)),PT(e)||NT(e)?[e]:e.getFilters()}function PT(n){return n instanceof $t}function NT(n){return n instanceof mn&&j_(n)}function Wx(n){return PT(n)||NT(n)||function(e){if(e instanceof mn&&$m(e)){for(const t of e.getFilters())if(!PT(t)&&!NT(t))return!1;return!0}return!1}(n)}function kT(n){if(yt(n instanceof $t||n instanceof mn),n instanceof $t)return n;if(1===n.filters.length)return kT(n.filters[0]);const e=n.filters.map(r=>kT(r));let t=mn.create(e,n.op);return t=rC(t),Wx(t)?t:(yt(t instanceof mn),yt(Fc(t)),yt(t.filters.length>1),t.filters.reduce((r,i)=>FT(r,i)))}function FT(n,e){let t;return yt(n instanceof $t||n instanceof mn),yt(e instanceof $t||e instanceof mn),t=n instanceof $t?e instanceof $t?mn.create([n,e],"and"):Zx(n,e):e instanceof $t?Zx(e,n):function(r,i){if(yt(r.filters.length>0&&i.filters.length>0),Fc(r)&&Fc(i))return OI(r,i.getFilters());const u=$m(r)?r:i,l=$m(r)?i:r,m=u.filters.map(w=>FT(w,l));return mn.create(m,"or")}(n,e),rC(t)}function Zx(n,e){if(Fc(e))return OI(e,n.getFilters());{const t=e.filters.map(r=>FT(n,r));return mn.create(t,"or")}}function rC(n){if(yt(n instanceof $t||n instanceof mn),n instanceof $t)return n;const e=n.getFilters();if(1===e.length)return rC(e[0]);if(fT(n))return n;const t=e.map(i=>rC(i)),r=[];return t.forEach(i=>{i instanceof $t?r.push(i):i instanceof mn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:mn.create(r,n.op)}class LP{constructor(){this.rn=new LT}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(oo.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class LT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(rn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(rn.comparator)).toArray()}}const iC=new Uint8Array(0);class VP{constructor(e,t){this.user=e,this.databaseId=t,this.on=new LT,this.un=new Gi(r=>Lc(r),(r,i)=>zh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:bi(i)};return Kx(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[oI(t),""],!1,!0);return Kx(e).j(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(mu(l.parent))}return r})}addFieldIndex(e,t){const r=sC(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=s0(e);return u.next(m=>{l.put(jx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=sC(e),i=s0(e),u=r0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=r0(e);let i=!0;const u=new Map;return ee.forEach(this.cn(t),l=>this.an(e,l).next(m=>{i&&(i=!!m),u.set(l,m)})).next(()=>{if(i){let l=zt();const m=[];return ee.forEach(u,(w,b)=>{var S;Le("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${Lc(t)}`);const O=function(wt,Ot){const qt=Pm(Ot);if(void 0===qt)return null;for(const an of ld(wt,qt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(b,w),B=function(wt,Ot){const qt=new Map;for(const an of td(Ot))for(const hs of ld(wt,an.fieldPath))switch(hs.op){case"==":case"in":qt.set(an.fieldPath.canonicalString(),hs.value);break;case"not-in":case"!=":return qt.set(an.fieldPath.canonicalString(),hs.value),Array.from(qt.values())}return null}(b,w),q=function(wt,Ot){const qt=[];let an=!0;for(const hs of td(Ot)){const rg=0===hs.kind?G_(wt,hs.fieldPath,wt.startAt):BI(wt,hs.fieldPath,wt.startAt);qt.push(rg.value),an&&(an=rg.inclusive)}return new vu(qt,an)}(b,w),ce=function(wt,Ot){const qt=[];let an=!0;for(const hs of td(Ot)){const rg=0===hs.kind?BI(wt,hs.fieldPath,wt.endAt):G_(wt,hs.fieldPath,wt.endAt);qt.push(rg.value),an&&(an=rg.inclusive)}return new vu(qt,an)}(b,w),Me=this.hn(w,b,q),ke=this.hn(w,b,ce),it=this.ln(w,b,B),Et=this.fn(w.indexId,O,Me,q.inclusive,ke,ce.inclusive,it);return ee.forEach(Et,wt=>r.H(wt,t.limit).next(Ot=>{Ot.forEach(qt=>{const an=Ke.fromSegments(qt.documentKey);l.has(an)||(l=l.add(an),m.push(an))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:FP(mn.create(e.filters,"and")).map(r=>Gm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let O=0;O<w;++O){const B=t?this.dn(t[O/b]):iC,q=this.wn(e,B,r[O%b],i),ce=this._n(e,B,u[O%b],l),Me=m.map(ke=>this.wn(e,B,ke,!0));S.push(...this.createRange(q,ce,Me))}return S}wn(e,t,r,i){const u=new Gp(e,Ke.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new Gp(e,Ke.empty(),t,r);return i?u.Je():u}an(e,t){const r=new kP(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ee.forEach(i,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Bn(Yn.comparator),b=!1;for(const S of m.filters)for(const O of S.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:w=w.add(O.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new n0;for(const i of td(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.He(i.kind);$p.Ve._e(u,l)}return r.Qe()}dn(e){const t=new n0;return $p.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new n0;return $p.Ve._e(di(this.databaseId,t),r.He(function(i){const u=td(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new n0);let u=0;for(const l of td(e)){const m=r[u++];for(const w of i)if(this.yn(t,l.fieldPath)&&ud(m))i=this.pn(i,l,m);else{const b=w.He(l.kind);$p.Ve._e(m,b)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of i){const w=new n0;w.seed(m.Qe()),$p.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof $t&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sC(e),i=s0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>i.get([m.indexId,this.uid]).next(w=>{l.push(function(b,S){const O=S?new Da(S.sequenceNumber,new oo(jp(S.readTime),new Ke(mu(S.documentKey)),S.largestBatchId)):Da.empty(),B=b.fields.map(([q,ce])=>new Nm(Yn.fromServerFormat(q),ce));return new Mp(b.indexId,b.collectionGroup,B,O)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sC(e),u=s0(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(jx(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),ee.forEach(m,w=>this.En(e,i,w).next(b=>{const S=this.An(u,w);return b.isEqual(S)?ee.resolve():this.vn(e,u,w,b,S)}))))})}Rn(e,t,r,i){return r0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return r0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=r0(e);let u=new Bn(Kh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new Gp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Bn(Kh);const i=this.mn(t,e);if(null==i)return r;const u=Pm(t);if(null!=u){const l=e.data.field(u.fieldPath);if(ud(l))for(const m of l.arrayValue.values||[])r=r.add(new Gp(t.indexId,e.key,this.dn(m),i))}else r=r.add(new Gp(t.indexId,e.key,iC,i));return r}vn(e,t,r,i,u){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,S,O){const B=m.getIterator(),q=w.getIterator();let ce=yu(B),Me=yu(q);for(;ce||Me;){let ke=!1,it=!1;if(ce&&Me){const Et=b(ce,Me);Et<0?it=!0:Et>0&&(ke=!0)}else null!=ce?it=!0:ke=!0;ke?(S(Me),Me=yu(q)):it?(O(ce),ce=yu(B)):(ce=yu(B),Me=yu(q))}}(i,u,Kh,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ee.waitFor(l)}Tn(e){let t=1;return s0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Kh(l,m)).filter((l,m,w)=>!m||0!==Kh(l,w[m-1]));const i=[];i.push(e);for(const l of r){const m=Kh(l,e),w=Kh(l,t);if(0===m)i[0]=e.Je();else if(m>0&&w<0)i.push(l),i.push(l.Je());else if(w>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,iC,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,iC,[]]))}return u}bn(e,t){return Kh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yx)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||et())).next(Yx)}}function Kx(n){return li(n,"collectionParents")}function r0(n){return li(n,"indexEntries")}function sC(n){return li(n,"indexConfiguration")}function s0(n){return li(n,"indexState")}function Yx(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;dI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const Qx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(S,O,B)=>(m++,B.delete()));u.push(w.next(()=>{yt(1===m)}));const b=[];for(const S of t.mutations){const O=pI(e,S.key.path,t.batchId);u.push(i.delete(O)),b.push(S.key)}return ee.waitFor(u).next(()=>b)}function oC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class aC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){yt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new aC(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).X({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=ry(e),l=Yh(e);return l.add({}).next(m=>{yt("number"==typeof m);const w=new a(m,t,r,i),b=function(B,q,ce){const Me=ce.baseMutations.map(it=>X_(B.fe,it)),ke=ce.mutations.map(it=>X_(B.fe,it));return{userId:q,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Me,mutations:ke}}(this.serializer,this.userId,w),S=[];let O=new Bn((B,q)=>Lt(B.canonicalString(),q.canonicalString()));for(const B of i){const q=pI(this.userId,B.key.path,m);O=O.add(B.key.path.popLast()),S.push(l.put(b)),S.push(u.put(q,Xb))}return O.forEach(B=>{S.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return Yh(e).get(t).next(r=>r?(yt(r.userId===this.userId),Hp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Yh(e).X({index:"userMutationsIndex",range:i},(l,m,w)=>{m.userId===this.userId&&(yt(m.batchId>=r),u=Hp(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Hp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=M_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return ry(e).X({range:i},(l,m,w)=>{const[b,S,O]=l,B=mu(S);if(b===this.userId&&t.path.isEqual(B))return Yh(e).get(O).next(q=>{if(!q)throw et();yt(q.userId===this.userId),u.push(Hp(this.serializer,q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Lt);const i=[];return t.forEach(u=>{const l=M_(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=ry(e).X({range:m},(b,S,O)=>{const[B,q,ce]=b,Me=mu(q);B===this.userId&&u.path.isEqual(Me)?r=r.add(ce):O.done()});i.push(w)}),ee.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=M_(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Bn(Lt);return ry(e).X({range:l},(w,b,S)=>{const[O,B,q]=w,ce=mu(B);O===this.userId&&r.isPrefixOf(ce)?ce.length===i&&(m=m.add(q)):S.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Yh(e).get(u).next(l=>{if(null===l)throw et();yt(l.userId===this.userId),r.push(Hp(this.serializer,l))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Jx(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ry(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=mu(u[1]);i.push(w)}else m.done()}).next(()=>{yt(0===i.length)})})}containsKey(e,t){return Xx(e,this.userId,t)}xn(e){return eM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Xx(n,e,t){const r=M_(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return ry(n).X({range:u,Y:!0},(m,w,b)=>{const[S,O,B]=m;S===e&&O===i&&(l=!0),b.done()}).next(()=>l)}function Yh(n){return li(n,"mutations")}function ry(n){return li(n,"documentMutations")}function eM(n){return li(n,"mutationQueues")}class zp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new zp(0)}static Mn(){return new zp(-1)}}class UP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new zp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>mt.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>iy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return iy(e).X((l,m)=>{const w=e0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(i++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>i)}forEachTarget(e,t){return iy(e).X((r,i)=>{const u=e0(i);t(u)})}$n(e){return tM(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}On(e,t){return tM(e).put("targetGlobalKey",t)}Fn(e,t){return iy(e).put(Ux(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return iy(e).X({range:i,index:"queryTargetsIndex"},(l,m,w)=>{const b=e0(m);zh(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Qh(e);return t.forEach(l=>{const m=bi(l.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qh(e);return ee.forEach(t,u=>{const l=bi(u.path);return ee.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Qh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qh(e);let u=zt();return i.X({range:r,Y:!0},(l,m,w)=>{const b=mu(l[1]),S=new Ke(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=bi(t.path),i=IDBKeyRange.bound([r],[oI(r)],!1,!0);let u=0;return Qh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return iy(e).get(t).next(r=>r?e0(r):null)}}function iy(n){return li(n,"targets")}function tM(n){return li(n,"targetGlobal")}function Qh(n){return li(n,"targetDocuments")}function nM([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class BP{constructor(e){this.Ln=e,this.buffer=new Bn(nM),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Mc(r)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ao(r)}yield t.Qn(3e5)}))}}class jP{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(as.ct);const r=new BP(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Qx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qx):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,l,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),i=this.params.maximumSequenceNumbersToCollect):i=O,l=Date.now(),this.nthSequenceNumber(e,i))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),ed()<=wc.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${i} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:O})))}}class HP{constructor(e,t){this.db=e,this.garbageCollector=function iM(n,e){return new jP(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return uC(e,r)}removeReference(e,t,r){return uC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return uC(e,t)}Xn(e,t){return function(r,i){let u=!1;return eM(r).Z(l=>Xx(r,l,i).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),Qh(e).delete([0,bi(l.path)])))});i.push(w)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return uC(e,t)}Yn(e,t){const r=Qh(e);let i,u=as.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==as.ct&&t(new Ke(mu(i)),u),u=b,i=w):u=as.ct}).next(()=>{u!==as.ct&&t(new Ke(mu(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uC(n,e){return Qh(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class sM{constructor(){this.changes=new Gi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $P{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qp(e).put(r)}removeEntry(e,t,r){return qp(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],tC(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(o0(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return qp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(o0(t))},(i,u)=>{r={document:this.ts(t,u),size:oC(u)}}).next(()=>r)}getEntries(e,t){let r=Ti();return this.ns(e,t,(i,u)=>{const l=this.ts(i,u);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ti(),i=new Nn(Ke.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),i=i.insert(u,oC(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let i=new Bn(cM);t.forEach(w=>i=i.add(w));const u=IDBKeyRange.bound(o0(i.first()),o0(i.last())),l=i.getIterator();let m=l.getNext();return qp(e).X({index:"documentKeyIndex",range:u},(w,b,S)=>{const O=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&cM(m,O)<0;)r(m,null),m=l.getNext();m&&m.isEqual(O)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?S.G(o0(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),tC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qp(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=Ti();for(const S of w){const O=this.ts(Ke.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);O.isFoundDocument()&&(Vc(t,O)||i.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,r,i){let u=Ti();const l=uM(t,r),m=uM(t,oo.max());return qp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,S)=>{const O=this.ts(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new GP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return aM(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Zn(e,t){return aM(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function xP(n,e){let t;if(e.document)t=Rx(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=jp(e.noDocument.readTime);t=xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ke.fromSegments(e.unknownDocument.path),i=jp(e.unknownDocument.version);t=xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Pn(r[0],r[1]);return mt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return xn.newInvalidDocument(e)}}function oM(n){return new $P(n)}class GP extends sM{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Gi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Bn((u,l)=>Lt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=Vx(this.os.serializer,l);i=i.add(u.path.popLast());const b=oC(w);r+=b-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Vx(this.os.serializer,l.convertToNoDocument(mt.min()));t.push(this.os.addEntry(e,u,w))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function aM(n){return li(n,"remoteDocumentGlobal")}function qp(n){return li(n,"remoteDocumentsV14")}function o0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uM(n,e){const t=e.documentKey.path.toArray();return[n,tC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function cM(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Lt(t[u],r[u]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class zP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&ey(r.mutation,i,Hi.empty(),Pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const i=co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=Fp();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,i){let u=Ti();const l=Ym(),m=Ym();return t.forEach((w,b)=>{const S=r.get(b.key);i.has(b.key)&&(void 0===S||S.mutation instanceof jc)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),ey(S.mutation,b,S.mutation.getFieldMask(),Pn.now())):l.set(b.key,Hi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var O;return m.set(b,new zP(S,null!==(O=l.get(b))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ym();let i=new Nn((l,m)=>l-m),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||Hi.empty();S=m.applyToLocalView(b,S),r.set(w,S);const O=(i.get(m.batchId)||zt()).add(w);i=i.insert(m.batchId,O)})}).next(()=>{const l=[],m=i.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,O=Lp();S.forEach(B=>{if(!u.has(B)){const q=_T(t.get(B),r.get(B));null!==q&&O.set(B,q),u=u.add(B)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,O))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):z_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ee.resolve(co());let m=-1,w=u;return l.next(b=>ee.forEach(b,(S,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(S)?ee.resolve():this.remoteDocumentCache.getEntry(e,S).next(B=>{w=w.insert(S,B)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,zt())).next(S=>({batchId:m,changes:Km(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Fp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Fp();return this.indexManager.getCollectionParents(e,i).next(l=>ee.forEach(l,m=>{const w=(b=t,S=m.child(i),new _u(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,xn.newInvalidDocument(b)))});let l=Fp();return u.forEach((m,w)=>{const b=i.get(m);void 0!==b&&ey(b.mutation,w,Hi.empty(),Pn.now()),Vc(t,w)&&(l=l.insert(m,w))}),l})}}class qP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:RT(r.bundledQuery),readTime:Pr(r.readTime)}),ee.resolve();var r}}class WP{constructor(){this.overlays=new Nn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=co();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=co(),u=t.length+1,l=new Ke(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&i.set(w.getKey(),w)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Nn((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=co(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=co(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=i)););return ee.resolve(m)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new d(t,r));let u=this.ls.get(t);void 0===u&&(u=zt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class VT{constructor(){this.fs=new Bn(Si.ds),this.ws=new Bn(Si._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Si(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Si(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new rn([])),r=new Si(t,e),i=new Si(t,e+1),u=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new rn([])),r=new Si(t,e),i=new Si(t,e+1);let u=zt();return this.ws.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Si(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Si{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Lt(e.As,t.As)}static _s(e,t){return Lt(e.As,t.As)||Ke.comparator(e.key,t.key)}}class ZP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Bn(Si.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const l=new a(u,t,r,i);this.mutationQueue.push(l);for(const m of i)this.Rs=this.Rs.add(new Si(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Si(t,0),i=new Si(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],l=>{const m=this.Ps(l.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Lt);return t.forEach(i=>{const u=new Si(i,0),l=new Si(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new Si(new Ke(u),0);let m=new Bn(Lt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(m=m.add(w.As)),!0)},l),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){yt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,i=>{const u=new Si(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Si(t,0),i=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KP{constructor(e){this.Ds=e,this.docs=new Nn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():xn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Ti();const l=t.path,m=new Ke(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:S}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||dI(lI(S),r)<=0||(i.has(S.key)||Vc(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,i){et()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YP(this)}getSize(e){return ee.resolve(this.size)}}class YP extends sM{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class QP{constructor(e){this.persistence=e,this.xs=new Gi(t=>Lc(t),zh),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new VT,this.targetCount=0,this.Ms=zp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ee.waitFor(u).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class UT{constructor(e,t){this.$s={},this.overlays={},this.Os=new as(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new QP(this),this.indexManager=new LP,this.remoteDocumentCache=new KP(r=>this.referenceDelegate.Ls(r)),this.serializer=new Lx(t),this.qs=new qP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new ZP(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new JP(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class JP extends km{constructor(e){super(),this.currentSequenceNumber=e}}class cC{constructor(e){this.persistence=e,this.Qs=new VT,this.js=null}static zs(e){return new cC(e)}get Ws(){if(this.js)return this.js;throw et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,mt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class XP{constructor(e){this.serializer=e}O(e,t,r,i){const u=new Fm("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fI,{unique:!0}),m.createObjectStore("documentMutations"),dM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),dM(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fI,{unique:!0});const S=w.store("mutations"),O=b.map(B=>S.put(B));return ee.waitFor(O)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(u))),r<6&&i>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(u))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(u))),r<11&&i>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:EI});w.createIndex("collectionPathOverlayIndex",II,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",CI,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:eT});w.createIndex("documentKeyIndex",gI),w.createIndex("collectionGroupIndex",mI)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,u))),r<15&&i>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:rT}).createIndex("sequenceNumberIndex",_I,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:iT}).createIndex("documentKeyIndex",wI,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=oC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ee.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{yt(w.userId===u.userId);const b=Hp(this.serializer,w);return Jx(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((l,m)=>{const w=new rn(l),b=[0,bi(w)];u.push(t.get(b).next(S=>S?ee.resolve():t.put({targetId:0,path:bi(w),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:nT});const r=t.store("collectionParents"),i=new LT,u=l=>{if(i.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:bi(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new rn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const S=mu(m);return u(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=e0(i),l=Ux(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ke(rn.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):et()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(m.put(S))}).next(()=>ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=oM(this.serializer),u=new UT(cC.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:zt();Hp(this.serializer,w).keys().forEach(O=>S=S.add(O)),m.set(w.userId,S)}),ee.forEach(m,(w,b)=>{const S=new Gr(b),O=nC.de(this.serializer,S),B=u.getIndexManager(S),q=aC.de(S,this.serializer,B,u.referenceDelegate);return new lM(i,q,O,B).recalculateAndSaveOverlaysForDocumentKeys(new bI(t,as.ct),w).next()})})}}function dM(n){n.createObjectStore("targetDocuments",{keyPath:yI}).createIndex("documentTargetsIndex",vI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tT,{unique:!0}),n.createObjectStore("targetGlobal")}const BT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jT{constructor(e,t,r,i,u,l,m,w,b,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=S,this.ui=O,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=B=>Promise.resolve(),!jT.D())throw new De(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HP(this,i),this.di=t+"main",this.serializer=new Lx(w),this.wi=new uo(this.di,this.ui,new XP(this.serializer)),this.Bs=new UP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oM(this.serializer),this.qs=new MP,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&gn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(ae.FAILED_PRECONDITION,BT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new as(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Mc(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return a0(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return dC(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>i.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):a0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(ae.FAILED_PRECONDITION,BT);return!1}}return!(!this.networkEnabled||!this.inForeground)||dC(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bI(t,as.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>dC(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return aC.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VP(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return nC.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?mx:14===l?R_:13===l?oT:12===l?sT:11===l?DI:void et();var l;let m;return this.wi.runTransaction(e,i,u,w=>(m=new bI(w,this.Os?this.Os.next():as.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(ae.FAILED_PRECONDITION,b_);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return a0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(ae.FAILED_PRECONDITION,BT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return a0(e).put("owner",t)}static D(){return uo.D()}Ai(e){const t=a0(e);return t.get("owner").next(r=>this.Ri(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gn(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){gn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function a0(n){return li(n,"owner")}function dC(n){return li(n,"clientMetadata")}function HT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $T{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=zt(),i=zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new $T(e,t.fromCache,r,i)}}class hM{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(mT(t))return ee.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=q_(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=zt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,q_(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,i){return mT(t)||i.isEqual(mt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,i)?this.Qi(e,t):(ed()<=wc.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),W_(t)),this.Wi(e,l,t,cI(i,-1)))})}ji(e,t){let r=new Bn($I(e));return t.forEach((i,u)=>{Vc(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return ed()<=wc.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",W_(t)),this.Ui.getDocumentsMatchingQuery(e,t,oo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class e1{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Nn(Lt),this.Yi=new Gi(u=>Lc(u),zh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function fM(n,e,t,r){return new e1(n,e,t,r)}function pM(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,fe.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=zt();for(const b of i){l.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),GT.apply(this,arguments)}function gM(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function mM(n,e,t){let r=zt(),i=zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ti();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Le("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:i}})}function r1(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sy(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,ee.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new hd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function oy(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=(0,fe.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Mc(l))throw l;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),zT.apply(this,arguments)}function hC(n,e,t){const r=Qe(n);let i=mt.min(),u=zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const S=Qe(m),O=S.Yi.get(b);return void 0!==O?ee.resolve(S.Ji.get(O)):S.Bs.getTargetData(w,b)}(r,l,us(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:mt.min(),t?u:zt())).next(m=>(_M(r,HI(e),m),{documents:m,ir:u})))}function yM(n,e){const t=Qe(n),r=Qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function vM(n,e){const t=Qe(n),r=t.Xi.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,cI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(_M(t,e,i),i))}function _M(n,e,t){let r=n.Xi.get(e)||mt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function qT(){return qT=(0,fe.Z)(function*(n,e,t,r){const i=Qe(n);let u=zt(),l=Ti();for(const b of t){const S=e.rr(b.metadata.name);b.document&&(u=u.add(S));const O=e.ur(b);O.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(S,O)}const m=i.Zi.newChangeBuffer({trackRemovals:!0}),w=yield sy(i,(b=r,us(kp(rn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>mM(b,m,l).next(S=>(m.apply(b),S)).next(S=>i.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>i.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,S.nr,S.sr)).next(()=>S.nr)))}),qT.apply(this,arguments)}function s1(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,fe.Z)(function*(n,e,t=zt()){const r=yield sy(n,us(RT(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Pr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(u,e);const m=r.withResumeToken(gr.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(m.targetId,m),i.Bs.updateTargetData(u,m).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),WT.apply(this,arguments)}function wM(n,e){return`firestore_clients_${n}_${e}`}function EM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZT(n,e){return`firestore_targets_${n}_${e}`}class fC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new De(i.error.code,i.error.message))),l?new fC(e,t,i.state,u):(gn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new De(r.error.code,r.error.message))),u?new u0(e,r.state,i):(gn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Z_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=nd(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new pC(e,u):(gn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KT(t.clientId,t.onlineState):(gn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YT{constructor(){this.activeTargetIds=Z_()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QT{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Nn(Lt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=wM(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new YT),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(wM(e.persistenceKey,i));if(u){const l=pC.ar(i,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZT(this.persistenceKey,e));if(r){const i=u0.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZT(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let l=as.ct;if(null!=u)try{const m=JSON.parse(u);yt("number"==typeof m),l=m}catch(m){gn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);i!==as.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new fC(this.currentUser,e,t,r),u=EM(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=EM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=ZT(this.persistenceKey,e),u=new u0(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return pC.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return fC.ar(new Gr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return u0.ar(i,t)}br(e){return KT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{i.has(w)||l.push(w)}),i.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Z_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class IM{constructor(){this.Hr=new YT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new YT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o1{Yr(e){}shutdown(){}}class CM{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gC=null;function JT(){return null===gC?gC=268435456+Math.round(2147483648*Math.random()):gC++,"0x"+gC.toString(16)}const a1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u1{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ls="WebChannelConnection";class c1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const l=JT(),m=this.To(e,t);Le("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,i,u),this.Ao(e,m,w,r).then(b=>(Le("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw so("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,i,u,l){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${a1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=JT();return new Promise((l,m)=>{const w=new Kb;w.setWithCredentials(!0),w.listenOnce(KE.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Mm.NO_ERROR:const S=w.getResponseJson();Le(ls,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case Mm.TIMEOUT:Le(ls,`RPC '${e}' ${u} timed out`),m(new De(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Mm.HTTP_ERROR:const O=w.getStatus();if(Le(ls,`RPC '${e}' ${u} failed with status:`,O,"response text:",w.getResponseText()),O>0){let B=w.getResponseJson();Array.isArray(B)&&(B=B[0]);const q=B?.error;if(q&&q.status&&q.message){const ce=function(Me){const ke=Me.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ke)>=0?ke:ae.UNKNOWN}(q.status);m(new De(ce,q.message))}else m(new De(ae.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new De(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Le(ls,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(i);Le(ls,`RPC '${e}' ${u} sending request:`,i),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const i=JT(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Zb(),m=Ap(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new QE({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const S=u.join("");Le(ls,`Creating RPC '${e}' stream ${i}: ${S}`,w);const O=l.createWebChannel(S,w);let B=!1,q=!1;const ce=new u1({ro:ke=>{q?Le(ls,`Not sending because RPC '${e}' stream ${i} is closed:`,ke):(B||(Le(ls,`Opening RPC '${e}' stream ${i} transport.`),O.open(),B=!0),Le(ls,`RPC '${e}' stream ${i} sending:`,ke),O.send(ke))},oo:()=>O.close()}),Me=(ke,it,Et)=>{ke.listen(it,wt=>{try{Et(wt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Me(O,Rm.EventType.OPEN,()=>{q||Le(ls,`RPC '${e}' stream ${i} transport opened.`)}),Me(O,Rm.EventType.CLOSE,()=>{q||(q=!0,Le(ls,`RPC '${e}' stream ${i} transport closed`),ce.wo())}),Me(O,Rm.EventType.ERROR,ke=>{q||(q=!0,so(ls,`RPC '${e}' stream ${i} transport errored:`,ke),ce.wo(new De(ae.UNAVAILABLE,"The operation could not be completed")))}),Me(O,Rm.EventType.MESSAGE,ke=>{var it;if(!q){const Et=ke.data[0];yt(!!Et);const Ot=Et.error||(null===(it=Et[0])||void 0===it?void 0:it.error);if(Ot){Le(ls,`RPC '${e}' stream ${i} received error:`,Ot);const qt=Ot.status;let an=function(rg){const hP=I[rg];if(void 0!==hP)return R(hP)}(qt),hs=Ot.message;void 0===an&&(an=ae.INTERNAL,hs="Unknown error status: "+qt+" with message "+Ot.message),q=!0,ce.wo(new De(an,hs)),O.close()}else Le(ls,`RPC '${e}' stream ${i} received:`,Et),ce._o(Et)}}),Me(m,YE.STAT_EVENT,ke=>{ke.stat===E_.PROXY?Le(ls,`RPC '${e}' stream ${i} detected buffering proxy`):ke.stat===E_.NOPROXY&&Le(ls,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ce.fo()},0),ce}}function DM(){return typeof window<"u"?window:null}function mC(){return typeof document<"u"?document:null}function c0(n){return new _P(n,!0)}class XT{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class bM{constructor(e,t,r,i,u,l,m,w){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new XT(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new De(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l1 extends bM{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function IP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),i=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(yt(void 0===b||"string"==typeof b),gr.fromBase64String(b||"")):(yt(void 0===b||b instanceof Uint8Array),gr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ae.UNKNOWN:R(w.code);return new De(b,w.message||"")}(l);t=new bT(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=Hc(n,r.document.name),u=Pr(r.document.updateTime),l=r.document.createTime?Pr(r.document.createTime):mt.min(),m=new zr({mapValue:{fields:r.document.fields}}),w=xn.newFoundDocument(i,u,l,m);t=new Tn(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,i=Hc(n,r.document),u=r.readTime?Pr(r.readTime):mt.min(),l=xn.newNoDocument(i,u);t=new Tn([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Hc(n,r.document);t=new Tn([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,{count:i=0,unchangedNames:u}=r,l=new v(i,u);t=new or(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return mt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?Pr(u.readTime):mt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=J_(this.serializer),t.addTarget=function(i,u){let l;const m=u.target;if(l=cd(m)?{documents:Ox(i,m)}:{query:MT(i,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Tx(i,u.resumeToken);const w=TT(i,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(mt.min())>0){l.readTime=ty(i,u.snapshotVersion.toTimestamp());const w=TT(i,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function DP(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=J_(this.serializer),t.removeTarget=e,this.Wo(t)}}class d1 extends bM{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function CP(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,i){let u=Pr(r.updateTime?r.updateTime:i);return u.isEqual(mt.min())&&(u=Pr(i)),new vT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.cu(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=J_(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>X_(this.serializer,r))};this.Wo(t)}}class h1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new De(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(ae.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(ae.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class p1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gn(t),this.mu=!1):Le("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class g1{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,fe.Z)(function*(){var w;Jh(l)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,fe.Z)(function*(b){const S=Qe(b);S.vu.add(4),yield ay(S),S.bu.set("Unknown"),S.vu.delete(4),yield l0(S)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new p1(r,i)}}function l0(n){return tS.apply(this,arguments)}function tS(){return tS=(0,fe.Z)(function*(n){if(Jh(n))for(const e of n.Ru)yield e(!0)}),tS.apply(this,arguments)}function ay(n){return nS.apply(this,arguments)}function nS(){return nS=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),nS.apply(this,arguments)}function yC(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),sS(t)?iS(t):cy(t).Ko()&&rS(t,e))}function d0(n,e){const t=Qe(n),r=cy(t);t.Au.delete(e),r.Ko()&&TM(t,e),0===t.Au.size&&(r.Ko()?r.jo():Jh(t)&&t.bu.set("Unknown"))}function rS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cy(n).su(e)}function TM(n,e){n.Vu.qt(e),cy(n).iu(e)}function iS(n){n.Vu=new gP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),cy(n).start(),n.bu.gu()}function sS(n){return Jh(n)&&!cy(n).Uo()&&n.Au.size>0}function Jh(n){return 0===Qe(n).vu.size}function SM(n){n.Vu=void 0}function m1(n){return oS.apply(this,arguments)}function oS(){return oS=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{rS(n,e)})}),oS.apply(this,arguments)}function y1(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,fe.Z)(function*(n,e){SM(n),sS(n)?(n.bu.Iu(e),iS(n)):n.bu.set("Unknown")}),aS.apply(this,arguments)}function v1(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof bT&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,u){const l=u.cause;for(const m of u.targetIds)i.Au.has(m)&&(yield i.remoteSyncer.rejectListen(m,l),i.Au.delete(m),i.Vu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vC(n,r)}else if(e instanceof Tn?n.Vu.Ht(e):e instanceof or?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(mt.min()))try{const r=yield gM(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=i.Au.get(w);b&&i.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=i.Au.get(m);if(!b)return;i.Au.set(m,b.withResumeToken(gr.EMPTY_BYTE_STRING,b.snapshotVersion)),TM(i,m);const S=new hd(b.target,m,w,b.sequenceNumber);rS(i,S)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield vC(n,r)}var r}),uS.apply(this,arguments)}function vC(n,e,t){return cS.apply(this,arguments)}function cS(){return cS=(0,fe.Z)(function*(n,e,t){if(!Mc(e))throw e;n.vu.add(1),yield ay(n),n.bu.set("Offline"),t||(t=()=>gM(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield l0(n)}))}),cS.apply(this,arguments)}function AM(n,e){return e().catch(t=>vC(n,t,e))}function uy(n){return lS.apply(this,arguments)}function lS(){return lS=(0,fe.Z)(function*(n){const e=Qe(n),t=Xh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;_1(e);)try{const i=yield r1(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,w1(e,i)}catch(i){yield vC(e,i)}xM(e)&&MM(e)}),lS.apply(this,arguments)}function _1(n){return Jh(n)&&n.Eu.length<10}function w1(n,e){n.Eu.push(e);const t=Xh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function xM(n){return Jh(n)&&!Xh(n).Uo()&&n.Eu.length>0}function MM(n){Xh(n).start()}function E1(n){return dS.apply(this,arguments)}function dS(){return dS=(0,fe.Z)(function*(n){Xh(n).hu()}),dS.apply(this,arguments)}function I1(n){return hS.apply(this,arguments)}function hS(){return hS=(0,fe.Z)(function*(n){const e=Xh(n);for(const t of n.Eu)e.uu(t.mutations)}),hS.apply(this,arguments)}function C1(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),i=c.from(r,e,t);yield AM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield uy(n)}),fS.apply(this,arguments)}function D1(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,fe.Z)(function*(n,e){var t;e&&Xh(n).ou&&(yield(t=(0,fe.Z)(function*(r,i){if(x(u=i.code)&&u!==ae.ABORTED){const l=r.Eu.shift();Xh(r).Qo(),yield AM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield uy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),xM(n)&&MM(n)}),pS.apply(this,arguments)}function RM(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,fe.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=Jh(t);t.vu.add(3),yield ay(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield l0(t)}),gS.apply(this,arguments)}function mS(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,fe.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield l0(t)):e||(t.vu.add(2),yield ay(t),t.bu.set("Unknown"))}),yS.apply(this,arguments)}function cy(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new l1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:m1.bind(null,n),ao:y1.bind(null,n),nu:v1.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),sS(n)?iS(n):n.bu.set("Unknown")):(yield n.Su.stop(),SM(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Xh(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new d1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:E1.bind(null,n),ao:D1.bind(null,n),au:I1.bind(null,n),cu:C1.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield uy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class vS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,m=new vS(e,t,l,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(n,e){if(gn("AsyncQueue",`${e}: ${n}`),Mc(n))return new De(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class dy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Fp(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new dy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new dy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class OM{constructor(){this.Cu=new Nn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class hy{constructor(e,t,r,i,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new hy(e,t,dy.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class b1{constructor(){this.Nu=void 0,this.listeners=[]}}class T1{constructor(){this.queries=new Gi(e=>yT(e),Wm),this.onlineState="Unknown",this.ku=new Set}}function _S(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new b1),i)try{u.Nu=yield t.onListen(r)}catch(l){const m=ly(l,`Initialization of query '${W_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&CS(t)}),wS.apply(this,arguments)}function ES(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),IS.apply(this,arguments)}function S1(n,e){const t=Qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const m of l.listeners)m.$u(i)&&(r=!0);l.Nu=i}}r&&CS(t)}function A1(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function CS(n){n.ku.forEach(e=>{e.next()})}class DS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new hy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=hy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class x1{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class PM{constructor(e){this.serializer=e}rr(e){return Hc(this.serializer,e)}ur(e){return e.metadata.exists?Rx(this.serializer,e.document,!1):xn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Pr(e)}}class M1{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NM(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=rn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new PM(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const l of i.metadata.queries){const m=(t.get(l)||zt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function i1(n,e,t,r){return qT.apply(this,arguments)}(e.localStore,new PM(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield s1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function NM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kM{constructor(e){this.key=e}}class FM{constructor(e){this.key=e}}class LM{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=zt(),this.mutatedKeys=zt(),this.tc=$I(e),this.ec=new dy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new OM,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,m=!1;const w="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,O)=>{const B=i.get(S),q=Vc(this.query,O)?O:null,ce=!!B&&this.mutatedKeys.has(B.key),Me=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let ke=!1;B&&q?B.data.isEqual(q.data)?ce!==Me&&(r.track({type:3,doc:q}),ke=!0):this.rc(B,q)||(r.track({type:2,doc:q}),ke=!0,(w&&this.tc(q,w)>0||b&&this.tc(q,b)<0)&&(m=!0)):!B&&q?(r.track({type:0,doc:q}),ke=!0):B&&!q&&(r.track({type:1,doc:B}),ke=!0,(w||b)&&(m=!0)),ke&&(q?(l=l.add(q),u=Me?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,S)=>function(O,B){const q=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return q(O)-q(B)}(b.type,S.type)||this.tc(b.doc,S.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new hy(this.query,e.ec,i,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new OM,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=zt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new FM(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new kM(r))}),t}hc(e){this.Yu=e.ir,this.Zu=zt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return hy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class R1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class O1{constructor(e){this.key=e,this.fc=!1}}class P1{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Gi(m=>yT(m),Wm),this._c=new Map,this.mc=new Set,this.gc=new Nn(Ke.comparator),this.yc=new Map,this.Ic=new VT,this.Tc={},this.Ec=new Map,this.Ac=zp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function N1(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,fe.Z)(function*(n,e){const t=ZS(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const l=yield sy(t.localStore,us(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield TS(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&yC(t.remoteStore,l)}return i}),bS.apply(this,arguments)}function TS(n,e,t,r,i){return SS.apply(this,arguments)}function SS(){return SS=(0,fe.Z)(function*(n,e,t,r,i){n.Rc=(O,B,q)=>{return(ce=(0,fe.Z)(function*(Me,ke,it,Et){let wt=ke.view.sc(it);wt.zi&&(wt=yield hC(Me.localStore,ke.query,!1).then(({documents:an})=>ke.view.sc(an,wt)));const Ot=Et&&Et.targetChanges.get(ke.targetId),qt=ke.view.applyChanges(wt,Me.isPrimaryClient,Ot);return LS(Me,ke.targetId,qt.cc),qt.snapshot}),function(Me,ke,it,Et){return ce.apply(this,arguments)})(n,O,B,q);var ce};const u=yield hC(n.localStore,e,!0),l=new LM(e,u.ir),m=l.sc(u.documents),w=Pt.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=l.applyChanges(m,n.isPrimaryClient,w);LS(n,t,b.cc);const S=new R1(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),SS.apply(this,arguments)}function k1(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!Wm(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield oy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),d0(t.remoteStore,r.targetId),fy(t,r.targetId)}).catch(ao))):(fy(t,r.targetId),yield oy(t.localStore,r.targetId,!0))}),AS.apply(this,arguments)}function xS(){return xS=(0,fe.Z)(function*(n,e,t){const r=KS(n);try{const i=yield function(u,l){const m=Qe(u),w=Pn.now(),b=l.reduce((B,q)=>B.add(q.key),zt());let S,O;return m.persistence.runTransaction("Locally write mutations","readwrite",B=>{let q=Ti(),ce=zt();return m.Zi.getEntries(B,b).next(Me=>{q=Me,q.forEach((ke,it)=>{it.isValidDocument()||(ce=ce.add(ke))})}).next(()=>m.localDocuments.getOverlayedDocuments(B,q)).next(Me=>{S=Me;const ke=[];for(const it of l){const Et=wT(it,S.get(it.key).overlayedDocument);null!=Et&&ke.push(new jc(it.key,Et,xI(Et.value.mapValue),jn.exists(!0)))}return m.mutationQueue.addMutationBatch(B,w,ke,l)}).next(Me=>{O=Me;const ke=Me.applyToLocalDocumentSet(S,ce);return m.documentOverlayCache.saveOverlays(B,Me.batchId,ke)})}).then(()=>({batchId:O.batchId,changes:Km(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new Nn(Lt)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,i.batchId,t),yield fd(r,i.changes),yield uy(r.remoteStore)}catch(i){const u=ly(i,"Failed to persist write");t.reject(u)}}),xS.apply(this,arguments)}function VM(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,fe.Z)(function*(n,e){const t=Qe(n);try{const r=yield function n1(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const m=[];e.targetChanges.forEach((S,O)=>{const B=i.get(O);if(!B)return;m.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,O)));let q=B.withSequenceNumber(u.currentSequenceNumber);var ce,Me,ke;null!==e.targetMismatches.get(O)?q=q.withResumeToken(gr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(S.resumeToken,r)),i=i.insert(O,q),Me=q,ke=S,(0===(ce=B).resumeToken.approximateByteSize()||Me.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,q))});let w=Ti(),b=zt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(mM(u,l,e.documentUpdates).next(S=>{w=S.nr,b=S.sr})),!r.isEqual(mt.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(O=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.yc.get(u);l&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?yt(l.fc):i.removedDocuments.size>0&&(yt(l.fc),l.fc=!1))}),yield fd(t,r,e)}catch(r){yield ao(r)}}),MS.apply(this,arguments)}function UM(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&i.push(m.snapshot)}),function(u,l){const m=Qe(u);m.onlineState=l;let w=!1;m.queries.forEach((b,S)=>{for(const O of S.listeners)O.Mu(l)&&(w=!0)}),w&&CS(m)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function L1(n,e,t){return RS.apply(this,arguments)}function RS(){return RS=(0,fe.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let l=new Nn(Ke.comparator);l=l.insert(u,xn.newNoDocument(u,mt.min()));const m=zt().add(u),w=new xe(mt.min(),new Map,new Nn(Lt),l,m);yield VM(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),VS(r)}else yield oy(r.localStore,e,!1).then(()=>fy(r,e,t)).catch(ao)}),RS.apply(this,arguments)}function V1(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield function t1(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const S=w.batch,O=S.keys();let B=ee.resolve();return O.forEach(q=>{B=B.next(()=>b.getEntry(m,q)).next(ce=>{const Me=w.docVersions.get(q);yt(null!==Me),ce.version.compareTo(Me)<0&&(S.applyToRemoteDocument(ce,w),ce.isValidDocument()&&(ce.setReadTime(w.commitVersion),b.addEntry(ce)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=zt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);FS(t,r,null),kS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fd(t,i)}catch(i){yield ao(i)}}),OS.apply(this,arguments)}function U1(n,e,t){return PS.apply(this,arguments)}function PS(){return PS=(0,fe.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(u,l){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(S=>(yt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);FS(r,e,t),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fd(r,i)}catch(i){yield ao(i)}}),PS.apply(this,arguments)}function NS(){return NS=(0,fe.Z)(function*(n,e){const t=Qe(n);Jh(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=ly(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NS.apply(this,arguments)}function kS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function FS(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||BM(n,r)})}function BM(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(d0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),VS(n))}function LS(n,e,t){for(const r of t)r instanceof kM?(n.Ic.addReference(r.key,e),j1(n,r)):r instanceof FM?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||BM(n,r.key)):et()}function j1(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.mc.add(r),VS(n))}function VS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(rn.fromString(e)),r=n.Ac.next();n.yc.set(r,new O1(t)),n.gc=n.gc.insert(t,r),yC(n.remoteStore,new hd(us(kp(t.path)),r,"TargetPurposeLimboResolution",as.ct))}}function fd(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,fe.Z)(function*(n,e,t){const r=Qe(n),i=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const S=$T.Li(w.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(i),yield(m=(0,fe.Z)(function*(w,b){const S=Qe(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>ee.forEach(b,B=>ee.forEach(B.Fi,q=>S.persistence.referenceDelegate.addReference(O,B.targetId,q)).next(()=>ee.forEach(B.Bi,q=>S.persistence.referenceDelegate.removeReference(O,B.targetId,q)))))}catch(O){if(!Mc(O))throw O;Le("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const B=O.targetId;if(!O.fromCache){const q=S.Ji.get(B),Me=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);S.Ji=S.Ji.insert(B,Me)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),US.apply(this,arguments)}function H1(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,fe.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield pM(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new De(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fd(t,r.er)}var i}),BS.apply(this,arguments)}function $1(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return zt().add(r.key);{let i=zt();const u=t._c.get(e);if(!u)return i;for(const l of u){const m=t.wc.get(l);i=i.unionWith(m.view.nc)}return i}}function G1(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,fe.Z)(function*(n,e){const t=Qe(n),r=yield hC(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&LS(t,e.targetId,i.cc),i}),jS.apply(this,arguments)}function z1(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,fe.Z)(function*(n,e){const t=Qe(n);return vM(t.localStore,e).then(r=>fd(t,r))}),HS.apply(this,arguments)}function q1(n,e,t,r){return $S.apply(this,arguments)}function $S(){return $S=(0,fe.Z)(function*(n,e,t,r){const i=Qe(n),u=yield function(l,m){const w=Qe(l),b=Qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Sn(S,m).next(O=>O?w.localDocuments.getDocuments(S,O):ee.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield uy(i.remoteStore):"acknowledged"===t||"rejected"===t?(FS(i,e,r||null),kS(i,e),m=e,Qe(Qe(i.localStore).mutationQueue).Cn(m)):et(),yield fd(i,u)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),$S.apply(this,arguments)}function GS(){return GS=(0,fe.Z)(function*(n,e){const t=Qe(n);if(ZS(t),KS(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield jM(t,r.toArray());t.vc=!0,yield mS(t.remoteStore,!0);for(const u of i)yC(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(fy(t,l),oy(t.localStore,l,!0))),d0(t.remoteStore,l)}),yield i,yield jM(t,r),function(u){const l=Qe(u);l.yc.forEach((m,w)=>{d0(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Nn(Ke.comparator)}(t),t.vc=!1,yield mS(t.remoteStore,!1)}}),GS.apply(this,arguments)}function jM(n,e,t){return zS.apply(this,arguments)}function zS(){return zS=(0,fe.Z)(function*(n,e,t){const r=Qe(n),i=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield sy(r.localStore,us(w[0]));for(const b of w){const S=r.wc.get(b),O=yield G1(r,S);O.snapshot&&u.push(O.snapshot)}}else{const b=yield yM(r.localStore,l);m=yield sy(r.localStore,b),yield TS(r,HM(b),l,!1,m.resumeToken)}i.push(m)}return r.dc.nu(u),i}),zS.apply(this,arguments)}function HM(n){return gT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Z1(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function K1(n,e,t,r){return qS.apply(this,arguments)}function qS(){return qS=(0,fe.Z)(function*(n,e,t,r){const i=Qe(n);if(i.vc)return void Le("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield vM(i.localStore,HI(u[0])),m=xe.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gr.EMPTY_BYTE_STRING);yield fd(i,l,m);break}case"rejected":yield oy(i.localStore,e,!0),fy(i,e,r);break;default:et()}}),qS.apply(this,arguments)}function Y1(n,e,t){return WS.apply(this,arguments)}function WS(){return WS=(0,fe.Z)(function*(n,e,t){const r=ZS(n);if(r.vc){for(const i of e){if(r._c.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const u=yield yM(r.localStore,i),l=yield sy(r.localStore,u);yield TS(r,HM(u),l.targetId,!1,l.resumeToken),yC(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield oy(r.localStore,i,!1).then(()=>{d0(r.remoteStore,i),fy(r,i)}).catch(ao))}}),WS.apply(this,arguments)}function ZS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L1.bind(null,e),e.dc.nu=S1.bind(null,e.eventManager),e.dc.Pc=A1.bind(null,e.eventManager),e}function KS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U1.bind(null,e),e}class h0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=c0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return fM(this.persistence,new hM,e.initialUser,this.serializer)}createPersistence(e){return new UT(cC.zs,this.serializer)}createSharedClientState(e){return new IM}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YS extends h0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield KS(r.Vc.syncEngine),yield uy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return fM(this.persistence,new hM,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new rM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new gx(t,this.persistence);return new x_(e.asyncQueue,r)}createPersistence(e){const t=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new jT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DM(),mC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new IM}}class $M extends YS{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof QT&&(r.sharedClientState.syncEngine={jr:q1.bind(null,i),zr:K1.bind(null,i),Wr:Y1.bind(null,i),$i:Z1.bind(null,i),Qr:z1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,fe.Z)(function*(l){yield function W1(n,e){return GS.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=DM();if(!QT.D(t))throw new De(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class py{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>UM(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=H1.bind(null,r.syncEngine),yield mS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new T1}createDatastore(e){const t=c0(e.databaseInfo.databaseId),r=new c1(e.databaseInfo);return new h1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>UM(this.syncEngine,m,0),l=CM.D()?new CM:new o1,new g1(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,m,w,b){const S=new P1(r,i,u,l,m,w);return b&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Qe(t);Le("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ay(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GM(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class _C{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class X1{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new x1(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(u,l){const m=Qe(u),w=J_(m.serializer)+"/documents",b={documents:l.map(q=>Q_(m.serializer,q))},S=yield m.vo("BatchGetDocuments",w,b,l.length),O=new Map;S.forEach(q=>{const ce=function EP(n,e){return"found"in e?function(t,r){yt(!!r.found);const i=Hc(t,r.found.name),u=Pr(r.found.updateTime),l=r.found.createTime?Pr(r.found.createTime):mt.min(),m=new zr({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(i,u,l,m)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const i=Hc(t,r.missing),u=Pr(r.readTime);return xn.newNoDocument(i,u)}(n,e):et()}(m.serializer,q);O.set(ce.key.toString(),ce)});const B=[];return l.forEach(q=>{const ce=O.get(q.toString());yt(!!ce),B.push(ce)}),B}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new s(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ke.fromPath(i);e.mutations.push(new o(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(i,u){const l=Qe(i),m=J_(l.serializer)+"/documents",w={writes:u.map(b=>X_(l.serializer,b))};yield l.Io("Commit",m,w)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?jn.exists(!1):jn.updateTime(t):jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new De(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(t)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tN{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new XT(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new eN(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Op(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!x(t)}return!1}}class nN{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gr.UNAUTHENTICATED,this.clientId=sI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(m){Le("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Le("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ly(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function wC(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(u){r.isEqual(u)||(yield pM(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QS.apply(this,arguments)}function JS(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eA(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>RM(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>RM(e.remoteStore,u)),n._onlineComponents=e}),XS.apply(this,arguments)}function zM(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function eA(n){return tA.apply(this,arguments)}function tA(){return tA=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!zM(t))throw t;so("Error using user provided cache. Falling back to memory cache: "+t),yield wC(n,new h0)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield wC(n,new h0);return n._offlineComponents}),tA.apply(this,arguments)}function EC(n){return nA.apply(this,arguments)}function nA(){return nA=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield JS(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield JS(n,new py))),n._onlineComponents}),nA.apply(this,arguments)}function qM(n){return eA(n).then(e=>e.persistence)}function IC(n){return eA(n).then(e=>e.localStore)}function WM(n){return EC(n).then(e=>e.remoteStore)}function rA(n){return EC(n).then(e=>e.syncEngine)}function gy(n){return iA.apply(this,arguments)}function iA(){return iA=(0,fe.Z)(function*(n){const e=yield EC(n),t=e.eventManager;return t.onListen=N1.bind(null,e.syncEngine),t.onUnlisten=k1.bind(null,e.syncEngine),t}),iA.apply(this,arguments)}function KM(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,u,l,m,w){const b=new _C({next:O=>{u.enqueueAndForget(()=>ES(i,S));const B=O.docs.has(l);!B&&O.fromCache?w.reject(new De(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&O.fromCache&&m&&"server"===m.source?w.reject(new De(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new DS(kp(l.path),b,{includeMetadataChanges:!0,Ku:!0});return _S(i,S)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}function YM(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,u,l,m,w){const b=new _C({next:O=>{u.enqueueAndForget(()=>ES(i,S)),O.fromCache&&"server"===m.source?w.reject(new De(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new DS(l,b,{includeMetadataChanges:!0,Ku:!0});return _S(i,S)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}function QM(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const JM=new Map;function sA(n,e,t){if(!t)throw new De(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XM(n,e,t,r){if(!0===e&&!0===r)throw new De(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eR(n){if(!Ke.isDocumentKey(n))throw new De(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tR(n){if(Ke.isDocumentKey(n))throw new De(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CC(n);throw new De(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nR(n,e){if(e<=0)throw new De(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class rR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=QM(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class f0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new eI;switch(t.type){case"firstParty":return new C_(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JM.get(e);t&&(Le("ComponentProvider","Removing Datastore"),JM.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class $c extends zi{constructor(e,t,r){super(e,t,kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ke(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function sR(n,e,...t){if(n=(0,cn.m9)(n),sA("collection","path",e),n instanceof f0){const r=rn.fromString(e,...t);return tR(r),new $c(n,null,r)}{if(!(n instanceof Qn||n instanceof $c))throw new De(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return tR(r),new $c(n.firestore,null,r)}}function DC(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=sI.A()),sA("doc","path",e),n instanceof f0){const r=rn.fromString(e,...t);return eR(r),new Qn(n,null,new Ke(r))}{if(!(n instanceof Qn||n instanceof $c))throw new De(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return eR(r),new Qn(n.firestore,n instanceof $c?n.converter:null,new Ke(r))}}function oR(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Qn||n instanceof $c)&&(e instanceof Qn||e instanceof $c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oA(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&Wm(n._query,e._query)&&n.converter===e.converter}class hN{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new XT(this,"async_queue_retry"),this.Xc=()=>{const t=mC();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=mC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=mC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Or;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Mc(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,gn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=vS.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&et()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function aA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class fN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends f0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hN,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aR(this),this._firestoreClient.terminate()}}function Nr(n){return n._firestoreClient||aR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function aR(n){var e,t,r;const i=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new cT(n._databaseId,m,n._persistenceKey,(b=i).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,QM(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new nN(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function uR(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield wC(n,t),yield JS(n,e),r.resolve()}catch(i){const u=i;if(!zM(u))throw u;so("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function cR(n){if(n._initialized||n._terminated)throw new De(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gc(gr.fromBase64String(e))}catch(t){throw new De(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gc(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._methodName=e}}class bC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const DN=/^__.*__$/;class bN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Up(e,this.data,t,this.fieldTransforms)}}class lR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class TC{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new TC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return xC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dR(this.ca)&&DN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class TN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||c0(e)}ya(e,t,r,i=!1){return new TC({ca:e,methodName:t,ga:r,path:Yn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zp(n){const e=n._freezeSettings(),t=c0(n._databaseId);return new TN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SC(n,e,t,r,i,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,i);dA("Data must be an object, but it was:",l,r);const m=pR(r,l);let w,b;if(u.merge)w=new Hi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const B=m0(e,O,t);if(!l.contains(B))throw new De(ae.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);mR(S,B)||S.push(B)}w=new Hi(S),b=l.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,b=l.fieldTransforms;return new bN(new zr(m),w,b)}class g0 extends Wp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof g0}}function hR(n,e,t){return new TC({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uA extends Wp{_toFieldTransform(e){return new Jm(e.path,new qh)}isEqual(e){return e instanceof uA}}class SN extends Wp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hR(this,e,!0),r=this.pa.map(u=>Kp(u,t)),i=new Uc(r);return new Jm(e.path,i)}isEqual(e){return this===e}}class AN extends Wp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hR(this,e,!0),r=this.pa.map(u=>Kp(u,t)),i=new Wh(r);return new Jm(e.path,i)}isEqual(e){return this===e}}class xN extends Wp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Bc(e.serializer,KI(e.serializer,this.Ia));return new Jm(e.path,t)}isEqual(e){return this===e}}function cA(n,e,t,r){const i=n.ya(1,e,t);dA("Data must be an object, but it was:",i,r);const u=[],l=zr.empty();rd(r,(w,b)=>{const S=AC(e,w,t);b=(0,cn.m9)(b);const O=i.da(S);if(b instanceof g0)u.push(S);else{const B=Kp(b,O);null!=B&&(u.push(S),l.set(S,B))}});const m=new Hi(u);return new lR(l,m,i.fieldTransforms)}function lA(n,e,t,r,i,u){const l=n.ya(1,e,t),m=[m0(e,r,t)],w=[i];if(u.length%2!=0)throw new De(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<u.length;B+=2)m.push(m0(e,u[B])),w.push(u[B+1]);const b=[],S=zr.empty();for(let B=m.length-1;B>=0;--B)if(!mR(b,m[B])){const q=m[B];let ce=w[B];ce=(0,cn.m9)(ce);const Me=l.da(q);if(ce instanceof g0)b.push(q);else{const ke=Kp(ce,Me);null!=ke&&(b.push(q),S.set(q,ke))}}const O=new Hi(b);return new lR(S,O,l.fieldTransforms)}function fR(n,e,t,r=!1){return Kp(t,n.ya(r?4:3,e))}function Kp(n,e){if(gR(n=(0,cn.m9)(n)))return dA("Unsupported field value:",e,n),pR(n,e);if(n instanceof Wp)return function(t,r){if(!dR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let m=Kp(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return KI(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Pn.fromDate(t);return{timestampValue:ty(r.serializer,i)}}if(t instanceof Pn){const i=new Pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ty(r.serializer,i)}}if(t instanceof bC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gc)return{bytesValue:Tx(r.serializer,t._byteString)};if(t instanceof Qn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ST(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${CC(t)}`)}(n,e)}function pR(n,e){const t={};return uT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rd(n,(r,i)=>{const u=Kp(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function gR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof bC||n instanceof Gc||n instanceof Qn||n instanceof Wp)}function dA(n,e,t){if(!gR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function m0(n,e,t){if((e=(0,cn.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return AC(n,e);throw xC("Field path arguments must be of type string or ",n,!1,void 0,t)}const MN=new RegExp("[~\\*/\\[\\]]");function AC(n,e,t){if(e.search(MN)>=0)throw xC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw xC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xC(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${i}`),w+=")"),new De(ae.INVALID_ARGUMENT,m+n+w)}function mR(n,e){return n.some(t=>t.isEqual(e))}class y0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RN extends y0{data(){return super.data()}}function MC(n,e){return"string"==typeof e?AC(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function yR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hA{}class v0 extends hA{}function ef(n,e,...t){let r=[];e instanceof hA&&r.push(e),r=r.concat(t),function(i){const u=i.filter(m=>m instanceof my).length,l=i.filter(m=>m instanceof _0).length;if(u>1||u>0&&l>0)throw new De(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _0 extends v0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _0(e,t,r)}_apply(e){const t=this._parse(e);return ER(e._query,t),new zi(e.firestore,e.converter,jI(e._query,t))}_parse(e){const t=Zp(e.firestore);return function(i,u,l,m,w,b,S){let O;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new De(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){wR(S,b);const B=[];for(const q of S)B.push(_R(m,i,q));O={arrayValue:{values:B}}}else O=_R(m,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||wR(S,b),O=fR(l,"where",S,"in"===b||"not-in"===b);return $t.create(w,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class my extends hA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new my(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const l=i.getFlattenedFilters();for(const m of l)ER(u,m),u=jI(u,m)}(e._query,t),new zi(e.firestore,e.converter,jI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fA extends v0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fA(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new De(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Gh(i,u);return function(m,w){if(null===zm(m)){const b=qm(m);null!==b&&IR(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new _u(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RC extends v0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new RC(e,t,r)}_apply(e){return new zi(e.firestore,e.converter,q_(e._query,this._limit,this._limitType))}}class OC extends v0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new OC(e,t,r)}_apply(e){const t=vR(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PC extends v0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PC(e,t,r)}_apply(e){const t=vR(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function vR(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof y0)return function(i,u,l,m,w){if(!m)throw new De(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of dd(i))if(S.field.isKeyField())b.push(di(u,m.key));else{const O=m.data.field(S.field);if(Vm(O))throw new De(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const B=S.field.canonicalString();throw new De(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}b.push(O)}return new vu(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Zp(n.firestore);return function(u,l,m,w,b,S){const O=u.explicitOrderBy;if(b.length>O.length)throw new De(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let q=0;q<b.length;q++){const ce=b[q];if(O[q].field.isKeyField()){if("string"!=typeof ce)throw new De(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ce}`);if(!z_(u)&&-1!==ce.indexOf("/"))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ce}' contains a slash.`);const Me=u.path.child(rn.fromString(ce));if(!Ke.isDocumentKey(Me))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Me}' is not because it contains an odd number of segments.`);const ke=new Ke(Me);B.push(di(l,ke))}else{const Me=fR(m,w,ce);B.push(Me)}}return new vu(B,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _R(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new De(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&-1!==t.indexOf("/"))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ke.isDocumentKey(r))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return di(n,new Ke(r))}if(t instanceof Qn)return di(n,t._key);throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CC(t)}.`)}function wR(n,e){if(!Array.isArray(n)||0===n.length)throw new De(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ER(n,e){if(e.isInequality()){const r=qm(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new De(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=zm(n);null!==u&&IR(0,i,u)}const t=function(r,i){for(const u of r)for(const l of u.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function IR(n,e,t){if(!t.isEqual(e))throw new De(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pA{convertValue(e,t="none"){switch(kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return rd(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new bC(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Um(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nc(e));default:return null}}convertTimestamp(e){const t=Oc(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);yt(Fx(r));const i=new id(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return i.isEqual(t)||gn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function NC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class BN extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class Yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gd extends y0{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new w0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class w0 extends gd{data(e={}){return super.data(e)}}class tf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new w0(this._firestore,this._userDataWriter,r.key,r,new Yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new w0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const m=new w0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:HN(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function DR(n,e){return n instanceof gd&&e instanceof gd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tf&&e instanceof tf&&n._firestore===e._firestore&&oA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class nf extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function bR(n,e,t){n=sn(n,Qn);const r=sn(n.firestore,Jn),i=NC(n.converter,e,t);return yy(r,[SC(Zp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,jn.none())])}function TR(n,e,t,...r){n=sn(n,Qn);const i=sn(n.firestore,Jn),u=Zp(i);let l;return l="string"==typeof(e=(0,cn.m9)(e))||e instanceof pd?lA(u,"updateDoc",n._key,e,t,r):cA(u,"updateDoc",n._key,e),yy(i,[l.toMutation(n._key,jn.exists(!0))])}function SR(n,...e){var t,r,i;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||aA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(aA(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(i=O.complete)||void 0===i?void 0:i.bind(O)}let w,b,S;if(n instanceof Qn)b=sn(n.firestore,Jn),S=kp(n._key.path),w={next:O=>{e[l]&&e[l](gA(b,n,O))},error:e[l+1],complete:e[l+2]};else{const O=sn(n,zi);b=sn(O.firestore,Jn),S=O._query;const B=new nf(b);w={next:q=>{e[l]&&e[l](new tf(b,B,O,q))},error:e[l+1],complete:e[l+2]},yR(n._query)}return function(O,B,q,ce){const Me=new _C(ce),ke=new DS(B,Me,q);return O.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return _S(yield gy(O),ke)})),()=>{Me.Dc(),O.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return ES(yield gy(O),ke)}))}}(Nr(b),S,m,w)}function yy(n,e){return function(t,r){const i=new Or;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function F1(n,e,t){return xS.apply(this,arguments)}(yield rA(t),r,i)})),i.promise}(Nr(n),e)}function gA(n,e,t){const r=t.docs.get(e._key),i=new nf(n);return new gd(n,i,e._key,r,new Yp(t.hasPendingWrites,t.fromCache),e.converter)}const ok={maxAttempts:5};class AR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zp(e)}set(e,t,r){this._verifyNotCommitted();const i=rf(e,this._firestore),u=NC(i.converter,t,r),l=SC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=rf(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof pd?lA(this._dataReader,"WriteBatch.update",u._key,t,r,i):cA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rf(e,this._firestore);return this._mutations=this._mutations.concat(new s(t._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rf(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new De(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ak extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zp(e)}get(e){const t=rf(e,this._firestore),r=new BN(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const u=i[0];if(u.isFoundDocument())return new y0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new y0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=rf(e,this._firestore),u=NC(i.converter,t,r),l=SC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=rf(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof pd?lA(this._dataReader,"Transaction.update",u._key,t,r,i):cA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=rf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rf(e,this._firestore),r=new nf(this._firestore);return super.get(e).then(i=>new gd(this._firestore,r,t._key,i._document,new Yp(!1,!1),t.converter))}}!function(n,e=!0){Uh=Hl.SDK_VERSION,(0,Hl._registerComponent)(new mh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(new I_(t.getProvider("auth-internal")),new rI(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new De(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new id(m.options.projectId,w)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Hl.registerVersion)(JE,"3.13.0",n),(0,Hl.registerVersion)(JE,"3.13.0","esm2017")}();function mA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MR(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function RR(){if(!function yx(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}class E0{constructor(e){this._delegate=e}static fromBase64String(e){return RR(),new E0(Gc.fromBase64String(e))}static fromUint8Array(e){return MR(),new E0(Gc.fromUint8Array(e))}toBase64(){return RR(),this._delegate.toBase64()}toUint8Array(){return MR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yA(n){return function mk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yk{enableIndexedDbPersistence(e,t){return function gN(n,e){cR(n=sn(n,Jn));const t=Nr(n);if(t._uninitializedComponentsProvider)throw new De(ae.FAILED_PRECONDITION,"SDK cache is already specified.");so("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new py;return uR(t,i,new YS(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mN(n){cR(n=sn(n,Jn));const e=Nr(n);if(e._uninitializedComponentsProvider)throw new De(ae.FAILED_PRECONDITION,"SDK cache is already specified.");so("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new py;return uR(e,r,new $M(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yN(n){if(n._initialized&&!n._terminated)throw new De(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!uo.D())return Promise.resolve();const i=r+"main";yield uo.delete(i)}),function(r){return t.apply(this,arguments)})(HT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof id||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&so("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function iR(n,e,t,r={}){var i;const u=(n=sn(n,f0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Gr.MOCK_USER;else{m=(0,cn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new De(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Gr(b)}n._authCredentials=new tI(new XE(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function _N(n){return function rN(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield qM(n),t=yield WM(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.vu.delete(0),l0(i)}(t)}))}(Nr(n=sn(n,Jn)))}(this._delegate)}disableNetwork(){return function wN(n){return function iN(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield qM(n),t=yield WM(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const u=Qe(i);u.vu.add(0),yield ay(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Nr(n=sn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,XM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vN(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function B1(n,e){return NS.apply(this,arguments)}(yield rA(e),t)})),t.promise}(Nr(n=sn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function QN(n,e){return function aN(n,e){const t=new _C(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield gy(n),i=t,Qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield gy(n),i=t,void Qe(r).ku.delete(i);var r,i}))}}(Nr(n=sn(n,Jn)),aA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,sR(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,DC(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Os(this,function dN(n,e){if(n=sn(n,f0),sA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new _u(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uk(n,e,t){n=sn(n,Jn);const r=Object.assign(Object.assign({},ok),t);return function(i){if(i.maxAttempts<1)throw new De(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const m=new Or;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const w=yield function ZM(n){return EC(n).then(e=>e.datastore)}(i);new tN(i.asyncQueue,w,l,u,m).run()})),m.promise}(Nr(n),i=>e(new ak(n,i)),r)}(this._delegate,t=>e(new PR(this,t)))}batch(){return Nr(this._delegate),new NR(new AR(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function EN(n,e){const t=Nr(n=sn(n,Jn)),r=new fN;return function uN(n,e,t,r){const i=function(u,l){let m;return m="string"==typeof u?Q().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return GM(w,b);if(w instanceof ArrayBuffer)return GM(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new X1(w,l);var w}(t,c0(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function Q1(n,e,t){const r=Qe(n);var i;(i=(0,fe.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(B,q){const ce=Qe(B),Me=Pr(q.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",ke=>ce.qs.getBundleMetadata(ke,q.id)).then(ke=>!!ke&&ke.createTime.compareTo(Me)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(B=w).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);m._updateProgress(NM(w));const b=new M1(w,u.localStore,l.serializer);let S=yield l.bc();for(;S;){const B=yield b.zu(S);B&&m._updateProgress(B),S=yield l.bc()}const O=yield b.complete();return yield fd(u,O.Ju,void 0),yield function(B,q){const ce=Qe(B);return ce.persistence.runTransaction("Save bundle","readwrite",Me=>ce.qs.saveBundleMetadata(Me,q))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.Hu)}catch(w){return so("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var B}),function(u,l,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield rA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IN(n,e){return function cN(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield IC(n),e)}))}(Nr(n=sn(n,Jn)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Os(this,t):null)}}class kC extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new E0(new Gc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class PR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new I0(this._firestore,new gd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jp(e);return r?(mA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class NR{constructor(e){this._delegate=e}set(e,t,r){const i=Jp(e);return r?(mA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Jp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new w0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new C0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Qp(e,new kC(e),t),i.set(t,u)),u}}Qp.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new Qn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Sa(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,sR(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Qn&&oR(this._delegate,e)}set(e,t){t=mA("DocumentReference.set",t);try{return t?bR(this._delegate,e,t):bR(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TR(this._delegate,e):TR(this._delegate,e,t,...r)}catch(i){throw Rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KN(n){return yy(sn(n.firestore,Jn),[new s(n._key,jn.none())])}(this._delegate)}onSnapshot(...e){const t=kR(e),r=FR(e,i=>new I0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return SR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function GN(n){n=sn(n,Qn);const e=sn(n.firestore,Jn),t=Nr(e),r=new nf(e);return function sN(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,u,l){try{const m=yield function(w,b){const S=Qe(w);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,b))}(i,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new De(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=ly(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(i,u,l){return r.apply(this,arguments)})(yield IC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new gd(e,r,n._key,i,new Yp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zN(n){n=sn(n,Qn);const e=sn(n.firestore,Jn);return KM(Nr(e),n._key,{source:"server"}).then(t=>gA(e,n,t))}(this._delegate):function $N(n){n=sn(n,Qn);const e=sn(n.firestore,Jn);return KM(Nr(e),n._key).then(t=>gA(e,n,t))}(this._delegate),t.then(r=>new I0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function kR(n){for(const e of n)if("object"==typeof e&&!yA(e))return e;return{}}function FR(n,e){var t,r;let i;return i=yA(n[0])?n[0]:yA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DR(this._delegate,e._delegate)}}class C0 extends I0{data(e){const t=this._delegate.data(e);return function Qb(n,e){n||et()}(void 0!==t),t}}class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kC(e)}where(e,t,r){try{return new Os(this.firestore,ef(this._delegate,function ON(n,e,t){const r=e,i=MC("where",n);return _0._create(i,r,t)}(e,t,r)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Os(this.firestore,ef(this._delegate,function PN(n,e="asc"){const t=e,r=MC("orderBy",n);return fA._create(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Os(this.firestore,ef(this._delegate,function NN(n){return nR("limit",n),RC._create("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Os(this.firestore,ef(this._delegate,function kN(n){return nR("limitToLast",n),RC._create("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Os(this.firestore,ef(this._delegate,function FN(...n){return OC._create("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Os(this.firestore,ef(this._delegate,function LN(...n){return OC._create("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Os(this.firestore,ef(this._delegate,function VN(...n){return PC._create("endBefore",n,!1)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Os(this.firestore,ef(this._delegate,function UN(...n){return PC._create("endAt",n,!0)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return oA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function WN(n){n=sn(n,zi);const e=sn(n.firestore,Jn),t=Nr(e),r=new nf(e);return function oN(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,u,l){try{const m=yield hC(i,u,!0),w=new LM(u,m.ir),b=w.sc(m.documents),S=w.applyChanges(b,!1);l.resolve(S.snapshot)}catch(m){const w=ly(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(i,u,l){return r.apply(this,arguments)})(yield IC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate):"server"===e?.source?function ZN(n){n=sn(n,zi);const e=sn(n.firestore,Jn),t=Nr(e),r=new nf(e);return YM(t,n._query,{source:"server"}).then(i=>new tf(e,r,n,i))}(this._delegate):function qN(n){n=sn(n,zi);const e=sn(n.firestore,Jn),t=Nr(e),r=new nf(e);return yR(n._query),YM(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate),t.then(r=>new vA(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=kR(e),r=FR(e,i=>new vA(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return SR(this._delegate,t,r)}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}class _k{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new C0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new C0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _k(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new C0(this._firestore,r))})}isEqual(e){return DR(this._delegate,e._delegate)}}class vy extends Os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?DC(this._delegate):DC(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function YN(n,e){const t=sn(n.firestore,Jn),r=DC(n),i=NC(n.converter,e);return yy(t,[SC(Zp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return oR(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Jp(n){return sn(n,Qn)}class _A{constructor(...e){this._delegate=new pd(...e)}static documentId(){return new _A(Yn.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof pd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lk(){return new uA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xp(e)}static delete(){const e=function ck(){return new g0("deleteField")}();return e._methodName="FieldValue.delete",new Xp(e)}static arrayUnion(...e){const t=function dk(...n){return new SN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xp(t)}static arrayRemove(...e){const t=function hk(...n){return new AN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xp(t)}static increment(e){const t=function fk(n){return new xN("increment",n)}(e);return t._methodName="FieldValue.increment",new Xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wk={Firestore:OR,GeoPoint:bC,Timestamp:Pn,Blob:E0,Transaction:PR,WriteBatch:NR,DocumentReference:Sa,DocumentSnapshot:I0,Query:Os,QueryDocumentSnapshot:C0,QuerySnapshot:vA,CollectionReference:vy,FieldPath:_A,FieldValue:Xp,setLogLevel:function vk(n){!function Yb(n){xc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function LR(n,e){return function Ck(n,e=Kw.z){return new ni.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function wA(n,e){return LR(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function FC(n,e){return wA(n,e).pipe(ca(void 0),em(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=i.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function VR(n,e,t){return FC(n,t).pipe(la((r,i)=>function bk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Tk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return EA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return EA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return EA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Yw(n,e=$s.y){return n=n??Qw,(0,Sr.e)((t,r)=>{let i,u=!0;t.subscribe((0,rr.x)(r,l=>{const m=e(l);(u||!n(i,m))&&(u=!1,i=m,r.next(l))}))})}(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function EA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function UR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Ik(n){(function Ek(n,e){n.INTERNAL.registerComponent(new mh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wk)))})(n,(e,t)=>new OR(e,t,new yk)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Jw.Z);class BR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=FC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ca(void 0),em(),fr(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),oi.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UR(e);return VR(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),oi.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(oi.iC)}add(e){return this.ref.add(e)}doc(e){return new jR(this.ref.doc(e),this.afs)}}class jR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=GR(r,t);return new BR(i,u,this.afs)}snapshotChanges(){return function Dk(n,e){return LR(n,e).pipe(ca(void 0),em(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,en.D)(this.ref.get(e)).pipe(oi.iC)}}class Sk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?FC(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),fr(t=>t.length>0),oi.iC):FC(this.query,this.afs.schedulers.outsideAngular).pipe(oi.iC)}auditTrail(e){return this.stateChanges(e).pipe(la((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UR(e);return VR(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi.iC)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),oi.iC)}get(e){return(0,en.D)(this.query.get(e)).pipe(oi.iC)}}const HR=new h.OlP("angularfire2.enableFirestorePersistence"),$R=new h.OlP("angularfire2.firestore.persistenceSettings"),Ak=new h.OlP("angularfire2.firestore.settings"),xk=new h.OlP("angularfire2.firestore.use-emulator");function GR(n,e=(t=>t)){return{query:e(n),ref:n}}let IA=(()=>{class n{constructor(t,r,i,u,l,m,w,b,S,O,B,q,ce,Me,ke,it,Et){this.schedulers=w;const wt=(0,Tr.on)(t,m,r),Ot=S;O&&Xg(wt,m,B,ce,Me,ke,q,it),[this.firestore,this.persistenceEnabled$]=(0,Tr.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const qt=m.runOutsideAngular(()=>wt.firestore());if(u&&qt.settings(u),Ot&&qt.useEmulator(...Ot),i&&!ys(l)){const an=()=>{try{return(0,en.D)(qt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(hs){return typeof console<"u"&&console.warn(hs),st(!1)}};return[qt,m.runOutsideAngular(an)]}return[qt,st(!1)]},[u,Ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=GR(i,r),m=this.schedulers.ngZone.run(()=>u);return new BR(m,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new Sk(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new jR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tr.Dh),h.LFG(Tr.xv,8),h.LFG(HR,8),h.LFG(Ak,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(oi.HU),h.LFG($R,8),h.LFG(xk,8),h.LFG(Xf,8),h.LFG(Sv,8),h.LFG(Av,8),h.LFG(xv,8),h.LFG(qw,8),h.LFG(Ww,8),h.LFG(Zw,8),h.LFG(Jf,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Mk=(()=>{class n{constructor(){mb.Z.registerVersion("angularfire",oi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:HR,useValue:!0},{provide:$R,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[IA]}),n})(),_y=(()=>{class n{constructor(t,r,i){this.firebaseAuth=t,this.router=r,this.firestoreservice=i,this.isLoggedIn=!1,this.userObj={id:"",email:"",scholar_points:9999999}}signIn(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseAuth.signInWithEmailAndPassword(t,r).then(u=>{i.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(u.user))})})()}signUp(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseAuth.createUserWithEmailAndPassword(t,r).then(u=>{localStorage.setItem("user",JSON.stringify(u.user)),i.isLoggedIn=!0}),i.userObj.email=t,i.userObj.id="",i.userObj.scholar_points=999999,i.addUser(i.userObj)})()}addUser(t){return t.id=this.firestoreservice.createId(),this.firestoreservice.collection("/users").doc(t.email).set(this.userObj)}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user")}forgotPassword(t){this.firebaseAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verify-email"])},r=>{alert("Something went wrong")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xf),h.LFG(rs),h.LFG(IA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rk=(()=>{class n{constructor(t){this.firebaseservice=t,this.isLogout=new h.vpe}logout(){this.firebaseservice.logout(),this.isLogout.emit()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_y))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],inputs:{data:"data"},outputs:{isLogout:"isLogout"},decls:6,vars:1,consts:[[1,"btn","mt-4",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"body")(1,"h1"),h._uU(2),h.qZA(),h.TgZ(3,"div")(4,"a",0),h.NdJ("click",function(){return r.logout()}),h._uU(5,"Logout"),h.qZA()()()),2&t&&(h.xp6(2),h.hij("LOGGED IN ",r.data,""))},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0}h1[_ngcontent-%COMP%]{margin:0}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#123456;color:#ffeba7;box-shadow:0 8px 24px #10277033}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029;height:100vh}"]}),n})(),LC=(()=>{class n{constructor(t){this.firestoreservice=t,this.i=0,this.totalPoints=0,this.updatedPoints=0,this.email="",this.userObj={id:"",email:"",scholar_points:0},this.scholar_points=0,this.id=""}getProducts(){return this.firestoreservice.collection("/products").snapshotChanges()}getPoints(t){return this.firestoreservice.collection("/users").doc(t).get()}addOrder(t){return t.id=this.firestoreservice.createId(),this.firestoreservice.collection("/orders").add(t)}deleteUser(t){return this.firestoreservice.doc("/users/"+t).delete()}updateScholarPoints(t,r){this.getPoints(r).subscribe(i=>(this.user=i.data(),this.email=this.user.email,this.id=this.user.id,this.updatedPoints=this.user.scholar_points-t,console.log(this.updatedPoints),this.userObj.email=this.email,this.userObj.scholar_points=this.updatedPoints,this.userObj.id="",this.deleteUser(this.id),this.addUser(this.userObj),this.user))}addUser(t){return t.id=this.firestoreservice.createId(),this.firestoreservice.collection("/users").doc(t.email).set(this.userObj)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(IA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VC=(()=>{class n{constructor(){this.cartItemList=[],this.productList=new ti([])}getProducts(){return this.productList.asObservable()}setProduct(t){this.cartItemList.push(...t),this.productList.next(t)}addToCart(t){this.cartItemList.push(t),this.productList.next(this.cartItemList),this.getTotalPrice(),console.log(this.cartItemList)}getTotalPrice(){let t=0;return this.cartItemList.map(r=>{t+=r.total}),t}removeCartItem(t){this.cartItemList.map((r,i)=>{t.id===r.id&&this.cartItemList.splice(i,1)}),this.productList.next(this.cartItemList)}removeAllCart(){this.cartItemList=[],this.productList.next(this.cartItemList)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ok(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",3),h._UZ(2,"img",4),h.TgZ(3,"h5",5),h._uU(4),h.qZA(),h.TgZ(5,"p",5),h._uU(6),h.qZA(),h.TgZ(7,"p")(8,"strong"),h._uU(9,"Price"),h.qZA(),h._uU(10),h.qZA(),h.TgZ(11,"button",6),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.addToCart(u))}),h._uU(12,"Add to Cart"),h.qZA()(),h.BQk()}if(2&n){const t=e.$implicit;h.xp6(2),h.s9C("src",t.image,h.LSH),h.xp6(2),h.Oqu(t.title),h.xp6(2),h.Oqu(t.description),h.xp6(4),h.hij(" ",t.price," Scholar Points")}}let Pk=(()=>{class n{constructor(t,r,i){this.api=t,this.firebaseservice=r,this.cartservice=i,this.isLogout=new h.vpe}ngOnInit(){this.api.getProducts().subscribe(t=>{this.productList=t.map(r=>{const i=r.payload.doc.data();return i.id=r.payload.doc.id,i}),this.productList.forEach(r=>{Object.assign(r,{quantity:1,total:Number(r.price)})})})}logout(){this.firebaseservice.logout(),this.isLogout.emit()}addToCart(t){this.cartservice.addToCart(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(LC),h.Y36(_y),h.Y36(VC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-product-page"]],outputs:{isLogout:"isLogout"},decls:4,vars:1,consts:[[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"card","col-md-3"],[3,"src"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis","max-width","100ch"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"body")(1,"div",0)(2,"div",1),h.YNc(3,Ok,13,4,"ng-container",2),h.qZA()()()),2&t&&(h.xp6(3),h.Q6J("ngForOf",r.productList))},dependencies:[Fs],styles:[".card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;margin-bottom:15px;transition:.3s ease-in-out}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:.3s ease-in-out}.card[_ngcontent-%COMP%]{padding:20px;margin:30px}body[_ngcontent-%COMP%]{background-color:#1f2029}"]}),n})();function Nk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._UZ(6,"img",11),h.qZA(),h.TgZ(7,"td",12),h._uU(8),h.qZA(),h.TgZ(9,"th",13),h._uU(10),h.qZA(),h.TgZ(11,"td",13),h._uU(12),h.qZA(),h.TgZ(13,"td",13),h._uU(14),h.qZA(),h.TgZ(15,"td")(16,"button",8),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.removeItem(u))}),h._UZ(17,"i",14),h.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;h.xp6(2),h.Oqu(r+1),h.xp6(2),h.Oqu(t.title),h.xp6(2),h.s9C("src",t.image,h.LSH),h.xp6(2),h.Oqu(t.description),h.xp6(2),h.Oqu(t.price),h.xp6(2),h.Oqu(t.quantity),h.xp6(2),h.Oqu(t.total)}}function kk(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"table",5)(5,"thead")(6,"tr")(7,"th"),h._uU(8,"Sr.No"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Product Name"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Product Image"),h.qZA(),h.TgZ(13,"th"),h._uU(14,"Description"),h.qZA(),h.TgZ(15,"th"),h._uU(16,"Price"),h.qZA(),h.TgZ(17,"th"),h._uU(18,"Quantity"),h.qZA(),h.TgZ(19,"th"),h._uU(20,"Total"),h.qZA(),h.TgZ(21,"th"),h._uU(22,"Action"),h.qZA()()(),h.TgZ(23,"tbody"),h.YNc(24,Nk,18,7,"tr",6),h.TgZ(25,"tr"),h._UZ(26,"td",7),h.TgZ(27,"td")(28,"button",8),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.emptycart())}),h._uU(29,"Empty Cart"),h.qZA()(),h.TgZ(30,"td")(31,"button",9),h._uU(32,"Shop More"),h.qZA()(),h.TgZ(33,"td")(34,"button",10),h._uU(35,"Checkout"),h.qZA()(),h.TgZ(36,"td")(37,"strong"),h._uU(38),h.qZA()()()()()()()(),h.BQk()}if(2&n){const t=h.oxw();h.xp6(24),h.Q6J("ngForOf",t.products),h.xp6(14),h.hij("Grand Total : $",t.grandTotal,"")}}function Fk(n,e){1&n&&(h.ynx(0,15),h.TgZ(1,"div",2)(2,"div",16)(3,"h5",17),h._uU(4,"My Cart"),h.qZA()(),h.TgZ(5,"div",18),h._UZ(6,"img",19),h.TgZ(7,"h4"),h._uU(8,"Your cart is empty!"),h.qZA(),h.TgZ(9,"h6"),h._uU(10,"Add item to it now"),h.qZA(),h.TgZ(11,"button",9),h._uU(12,"Shop Now"),h.qZA()()(),h.BQk())}let Lk=(()=>{class n{constructor(t){this.cartService=t,this.products=[]}ngOnInit(){this.cartService.getProducts().subscribe(t=>{this.products=t,this.grandTotal=this.cartService.getTotalPrice()})}removeItem(t){this.cartService.removeCartItem(t)}emptycart(){this.cartService.removeAllCart()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-mycart"]],decls:3,vars:2,consts:[[4,"ngIf"],["class","noproducts",4,"ngIf"],[1,"container"],[1,"card-table"],[1,"cart-product"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"btn","btn-danger",3,"click"],["routerLink","/products",1,"btn","btn-primary"],["routerLink","/checkout",1,"btn","btn-success"],["alt","",2,"width","120px",3,"src"],[2,"width","25%"],[2,"width","12%"],[1,"fas","fa-trash-alt"],[1,"noproducts"],[1,"card"],[1,"card-title"],[1,"center"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABSlBMVEXvyEnRkz7////gW0q+PiXwzErkk0ngVEorQU+7OSTSkD7Slj/s7e+/QCbIbjPvyUrtxEnuxj/Vm0Dvx0XuxT3z133eoT+8OSP+/ffOgjrWlj3xzkv99+f+/PT02ozs8fTPjjTy0GX89uP78tr02IP57MT35a734aTwy1K9Nxvhb2LcqVvYVEHOjCz78dL357by03L13ZX46r/UhDbEVSzFYC/ksES7MhHoz8zHRzDfTjnKejcjPVDu17T14J7678zouEXXjTnBTCrFWyy5KwDDVUPJcWHGYlDfwLzq5OXRjoPOczPWopnkmY/mrqnfSjPieGrbtbG/STTKdmjgaVfkjYLQiX3dcEfesm3iun7kwI/nn0ngZEnfcEjs0qn05c/Dj0GyhEJjW0pBSkygjUt+aEiQckWymUsRNU+je0NMUEvDpklJTUzftHXhacCyAAAQcElEQVR4nN2d+VvbRhrHJQW1GOOMhWQsZAsk22Bc8AEhXKFASBNytU22aZqwuyRpttkm3fz/v+6MDp865rRFv08bIE9l5tN33mNezUiSIlpmtbPebe6Ueq4rhXLdXmmn2V3vVE3hv18S99Gm3emellxN0wz4r65Lw9J1XfPklnY2hIIKIrQ7G6uuNAQGpBjpOuTX3dWNji1mKAIIzXqzBIxxoyULGtSQSs26AFvyJqzuriK6eJslYhrSarfKeURcCWsbJTjjKNhGjFlq1ngOih9htduDeDS2m4TsbfCzJCdC86ykGXqRHS+ANPRSh5NPciGsNl1DgwPjRQgAgnSbXAzJgbC+Khn+wKjiSwwkYgSr9QwQdqD3ceMaF/TIzowJ112DLXamCU7W9RkSnvUE8/mMvbMZEdZLKLMDfr4Xz1hi8EdqwmpjCvYbMDao4yolodnkktwJGLVTyvxIR3jmGlPlgwIaZcihIbQb0AGL3PI7HiAyY4NmgUVBuKuLS4DJ0vXdKRDCCDPtCTokiohDSri+OSsDSl5ZqG+SmpGQcMeYHZ8PqRs7Aglr7qwBkQy3JopwV5pejk+SLpHkDQLCU2MKFRqejFMBhHbJ4Lj8Y5VWwk6NuIRVV8sOH5Tm4qYNTMLOLJNEpPRNzLUxHuG6TtcBFSodL95gEXaNhLb87GR0eRFuZCELRsnY4EN4mjUXDARzl4aRNdIJvUItg3MUChQxSrhUwp1s+mCodMQ0wqYBprrSJZbRZCPc0DJtQSQtJdwkE3azVKlFCqQmjUTCMyP4kCwLACOxY5xEWNczs5hIlp7UME4grG5mYzmYKqBvJpTh8YSme0MApaKku/Ht4njCUlZrtSgZDXLC5k0CTEqLcYRnmc8TY4oNqDGENTDdGy/MgqONiTYxhL2bEmUG0nskhKc3ywl9xTTgIgnPbiIgrFAjXTGK0L4pqX5MuhvVYowiXM3ooj5V2ioe4Q2do0hRKWOS0LxZaWJIcOBgsnqbJNy5qXMUIWqTTY0Jws7NjDKBgD7RCZ8gvDErimjpvfF5Ok6Y0fY2rsBkT2OM0J71ENkF7ETCGxxmQo13UEcJazfbCX1ptQTC1b8Dob4aT1jP4F1CCagqGAj+kHqFVo8lbGiZ6+ADdX95VEU17RK9EUdYz16YUZfnyuXckOAP91PNOGLEYcKSlrUOMDjPzU2ovJxmRb0UTVib5Za8aKnPIghze8U0Sxi1SMLsLQvB+SQfVGGpCJIrL60RRVid2sCxVblTjiLck5dSI2I1grCZPRMWCxGTdK58Ly8jKyYasTlJaG5ObeRYggSV+wHgcDgtl2/nZdlDTJC+aU4Q7maudwHUQgB4e2VICwhQXsgjK8ZSAmN3grDH72wdFxUl1SrPIcZcIe9BjSnZFwf94ZCwljkTSmAPTtICMmEUoLyQ5IsA9BNGSJi9ZRNYDgPpQhRg4IuxiP2OjRTGmaytKgC46xPm7kaaMM2KUhhrAsLs9UjBfi7FhCkRNeydBoSNzE3SyrM0E6YghisMn9DOVjIEwzX3SgKgLHtJIxJT37SHCM8yV3RXnuW8bFjeSzJhoi8Gt6J8wsx1L9RiwcuFc7mVZMKEiRp0M6SgYsuWDUHlTjBJL9IAExD9aOoR1mkm6aBkAry3L8IPvPCWSXO5e+mE0BelSF806n1CqmUFqKhSsQg/vJK25CaXavkmzF2k83m+GPkp/gLDI+wRDwFUwP79Zw8uLi727t5ZliqsSOPaywU1N4YJ4yYq8GtTRGgTp3tVsvbQigb9b4YqPDvnakd1OfDCAhafHFeGG3ZAuE5GWATAusiNrE3LuXupTT7sTy8C9QGZCeWwRh2xJJCM9YCQsOoGxbthTdyCChgvlrlN1X7BVkgo2KKsOD5VveobEZLcMgSSen7hAbZ+KDx89OjR5dHBgZe6yul9TBzBgap3ywXvExMLtmgrDo8USK5PaBOZUN2fy3nWe/T4yRrS4uHTowMv8N3nYUU4sP1giuQITCj7SWNMuu0Rkq0rihcI8ODyELL5Wlt78tRHTG3VYkn1a+5C7gGJCeUw3AzbEa0vJMJsWPFm0MFTn28twFx7XPD8cZ8DYtgkLeSSa+5YxCGhjCiRFaWodwIt+DwE+/GnwI6HCLG8d16pqGyq9JukKTV3hCbKcNQZlhTTjeWJEOpgQgv6WD/9fPzzi+D7wwNvMfcNu/wOW6F8D46ZFHLcF10TEuL3umEcRR3M1mXogN9t37p1fBj88BwhHn3LrO0gE2EVbBPyq5u+HfUqJOwQ7JVVUTX1w+FaSHgLEYYR5xI1/yAzo8ImKU7NHYkoDT2SS+tAwi72Ad+iilJx61E/iI4Qrr1EefGIFTA0IXbBNia/Vdwn7ELCU/wbv16b/eBxNOHik3+gacpKeBT2uelMKI/6onYKCRv4oRSg23mtJwhuiHAx+HntF5QxeJmQLNuPaGiloTcgoYvthwA8yBVaD9fQjPzu1atX33ljeoW+/fGJH2uYHTEwYXKHDR9RdxWJYLMlAHDl3fplDebBn7dvjaAc/4r+9gc4NjZCHiYc9kUdmBKsSvEZIeHBa8jy4/H40F6FKZGNkIsJ5X4ZDiTNlmoEhH0b/jROuP2Ciw1DE86ldtjSrBjeCNdqUoegKkV3g1qXKKq8OD4+3vZhtrePt49vwYiK0gUjYWhC8oItworekLWOtE5CeBvd7/KLNKRXCPAl+g4F07XXrQJjLA1bBqwmlANfhIS7Updg7aTeycF1hV+mQZuF+XAtSB4PUYhgAdz2u8BzF0vMgHIQUbWuRPLABK9DFNbdEzXNYYs14wcFG1aTNF2eL2obEsETE4JG7cGTyLrUT/gsbhjEGbwmKY4gorZDQigBFTXbW6+jCP1cwTRJ+xsTuJjQR4SEBEUbWn+j9UNYmaK0uL0dTNnFhyjO8DAhW7YfRyxJJSJC775luRDOzF9vvTgM2hmXXhuDxYRhquBnQiirQUYYNKLKrcdBn2Yx+Prk0utFcTBh4l1tCm2REno7JArl1vPFMKIiAz5+6FmQKZDyKthGlCcnLPq9qLmDy5eLa4EOXx+wA4YmJGySpoqYECLe9zbytA4Kvzx/+fjxy6cPfT7Gxe9R0H96wCXbMxCi+4XLhZxXfLQOkFpzfiXCBrgdZnviJilvQiR1/0E5vPVUQP+gPzisfAvexgSebkhLCNPivYvyyOZW5hYb34KNmVBSz/MLt49CMx6xtxC5F2xDhBQbTQBClJd+gwXN9jY7HZIwE8pvJMpNieBcvvctFzgk1iZpvJy3Eu32bnC+wg1QTMHmE15JXdo9e2D/X7wAxZlQbn8v0e/vrvzGa5qy97mTCM/onkuKos0/OREKqrlDwjr1YSewzwfQN2GBc809IKxS750FRU6OGJqQd8GG5LyTTPrdwepvXAA5Nkkn1TYlhX57MODjiGF7hkOTdFIWJKR/nBAfRwxNiLGTlEJLikR/0gKAIg/CYDMw7V3tZDlvISHDmbXKv9kB2TYmpBJeQcJdhlDzDbsjhpP0mZBJ6lxDwjr9c8tAMb/AqHvBMvNCQLZHhO8gIctZC1Bk7Krk/X2OQgo27/NttCeKOpiiA4CMiCsUO0lJtIUI2Y6tAcCCmA82Awsp2GQv0CBC6vVToCXy7WehVoJAWhZkwoCQ7XAlkOgnaj7YTl0m3UmKq/Y7f48w27EuhEhpggWhBRuU4+8RVqjabcOIEp0V87epd5Ji6k2wk32D+fBhkcYX8zLjNsRUITf0COvsB0hpfLFvQjEFm+y7oUdo0q8u1EogdSlPrEGTVFSgMcNzT0R3ukd0pxAsDdBXUoUdNlFe6Hztn+yizYjonnfUkyuIJKBJGhJe9wmrJLv3Bhoct2aSoGwPJ2l1cEqWrjQFVuTDVcgkquaG2hqcIaVcBavLrIQFcTV3kCtCwhpVWxgUC3PBDWB6EwqqueUgV/SfOED3xEt1Ocemcm5PmAnlpeHz+HTPmAdAPV+5zSRR1Yzcn6QhYY32Hpu0lLfk97JFlOqtpffwEu8aYYDhJO0/vYVyoQ8k/cPvH+c//v7Bwv/d1mfiSyi0pYwS0t5kU/9zcjI/P39y8gf2eK0//vQv+SQSsX09Rkj5lHL9v3/O+8Ier/XpJLzks0BEpzpGSNut+RgOd/4j5q9+H14wf/JFIOBXZZyQ6rGQ+l8ng/HiWcT6PHTJB+oOT5rCODP8RDqalf5gkmJP08EkFTpNtyaf16aQHEvIPGH7e2WSkOZhWCOzFC/6j8zS96Imad6MIFRITl709aU/3v/h/vZ+cBIWafLtKyWKkM2ImCYcMuLJ/AdZUFVq2ZGEVG/jBH/Nw/wNs/5nayGPN17rM/rvT04+iipqRkw4QmjTPGlIL3768vHLp/fYo83L1nvCS0hlVWMIoRFJGdEROH3ZsggGCw1teRJWdTvDJhwlpCndAF2zVKTydiwhwcn1EWUL0blW4gkpN9cw3wrmKstMIqR8QmSWEIfKmShCpUe52M8MorOlJBNSvzwgK4iDRUUMIfVd/YxMVOftONAEIfUd4Wwg5ifeETj5vifqx9FmAXE8zEQSoqUw5S4p6hv6vOS8mcSJILQl6i1EM7biQjviPZZR785j2Ms3W8SIORrzhkf65ybP1IpRczSG0KZ/Ju0sESfjaCwhy+6MmSHmJ3J9EiHVcj/UjBBHFvbphEqJPtrMxorOVsyrueMIbYa3BM4EMdoJEwhRCc6COO3UH+OESYRsLy0pCrz1GQl4HcsRT8j0dvUpT9T2xIoCi1BZpevaTB9xcCuNkFDpMbxgfYqIsWE0nZDtzSXTQnSsqJdV4xEqVQ6IwmPOUlyewCFUapuZn6hWbJ7AIlTqION5MT4RYhIyvnxVuBVTAdMJlRqLFcUi5tHJLXZCpc4SboT64kKaD2ISskVUgYhOHgMQi1CpuiwnMkQhOilpgoRQMRmWi6IQna3ERE9ICGvUTJXhsIpof00q1SgIWVcaXPNiPr5nwUCorOsM8Ya3FSM7o6yESo0l3nBFxAui5ISK2chGk7H9Bi/GkBOijWHUd23QyXZOgPEdC3ZCpe7SHSBC4mNFohlKQaiYDCe/eSC235LMUBpCRTnb1JJfih0rVl+EhbaFH0PpCRVz1aDMG4CxyYid5RkJFaXjUjIypX5iD2QgVMwNMM19N8jyTvuK1ANZCOFyo4HMSOyO1A/SaL+pU46UlhAlDqqpSoXY3qKaoIyEsFLt0TCSI7a3yCMoH0LF3HVpNk6TIbbz13QOyIMQMnY3DT3h5diRhCSI7SU2PmZCBc1VjfjBhJiIDtv85EUIY84qIHRILCs67a/08WUgHoQwd2y4hib57wPDMmcqotPOX2E1mlLFhxA6ZL1BZMh4RJTe29bXd4zu1xcvQih7t0QCGYfoONabaz7m88SREKq6u7ppaJiUUYgOtB5PPIU3IZTdafYMQ0cpJMUjxyeq025vXXGbnH1xJ0Sy1097kqGlFecDRAdq6+p7m2JxlCohhEh2Z2Ont6lrmqbHtyGLS07bcfJbbwXRIQkjRDLt2vrGTskFmgYtqhnwD937Cr9DfwHcxtX19Tub+8wcllDCUKZZ7XTWd7vdbnPn9LQJv+6ud+pVU5TZRvR/3jJXaDzHoZQAAAAASUVORK5CYII=","alt",""]],template:function(t,r){1&t&&(h.TgZ(0,"body"),h.YNc(1,kk,39,2,"ng-container",0),h.YNc(2,Fk,13,0,"ng-container",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",0!=r.products.length),h.xp6(1),h.Q6J("ngIf",0==r.products.length))},dependencies:[Fs,fs,Vl],styles:["body[_ngcontent-%COMP%]{background-color:#1f2029;height:300vh}.card[_ngcontent-%COMP%]{height:60vh;padding:25px}.center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{text-decoration:none;color:inherit;border:none;outline:none;height:150px;width:150px;margin:0}h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-weight:400}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}.card-table[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:none;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.2);border-radius:.25rem}.center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important;margin-top:20px!important;font-weight:400;padding:12px 72px;border-radius:3px!important}"]}),n})(),Vk=(()=>{class n{constructor(t,r,i){this.cartService=t,this.firebaseservice=r,this.api=i,this.isLogout=new h.vpe,this.totalItem=0,this.totalPoints=0}ngOnInit(){this.cartService.getProducts().subscribe(t=>{this.totalItem=t.length})}logout(){this.firebaseservice.logout(),this.isLogout.emit()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VC),h.Y36(_y),h.Y36(LC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],outputs:{isLogout:"isLogout"},decls:8,vars:1,consts:[[1,"navbar","navbar-dark","shadow-sm"],["routerLink","cart",1,"btn","btn-primary"],[1,"fas","fa-cart-plus",2,"font-size","30px"],[1,"badge","bg-danger",2,"font-size","10px"],[3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"]],template:function(t,r){1&t&&(h.TgZ(0,"header")(1,"div",0)(2,"button",1),h._UZ(3,"i",2),h.TgZ(4,"div",3),h._uU(5),h.qZA()(),h.TgZ(6,"button",4),h.NdJ("click",function(){return r.logout()}),h._UZ(7,"i",5),h.qZA()()()),2&t&&(h.xp6(5),h.Oqu(r.totalItem))},dependencies:[Vl],styles:["header[_ngcontent-%COMP%]{background-color:#1f2029}"]}),n})();function Uk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"body")(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"h6",12)(7,"span"),h._uU(8,"Log In "),h.qZA(),h.TgZ(9,"span"),h._uU(10,"Sign Up"),h.qZA()(),h._UZ(11,"input",13)(12,"label",14),h.TgZ(13,"div",15)(14,"div",16)(15,"div",17)(16,"div",18)(17,"div",19)(18,"h4",20),h._uU(19,"Log In"),h.qZA(),h.TgZ(20,"div",21),h._UZ(21,"input",22,23)(23,"i",24),h.qZA(),h.TgZ(24,"div",25),h._UZ(25,"input",26,27)(27,"i",28),h.qZA(),h.TgZ(28,"a",29),h.NdJ("click",function(){h.CHM(t);const i=h.MAs(22),u=h.MAs(26),l=h.oxw();return h.KtG(l.signIn(i.value,u.value))}),h._uU(29,"Login"),h.qZA(),h.TgZ(30,"p",30)(31,"a",31),h._uU(32,"Forgot your password?"),h.qZA()()()()(),h.TgZ(33,"div",32)(34,"div",18)(35,"div",19)(36,"h4",33),h._uU(37,"Sign Up"),h.qZA(),h.TgZ(38,"div",21),h._UZ(39,"input",34,35)(41,"i",36),h.qZA(),h.TgZ(42,"div",25),h._UZ(43,"input",37,38)(45,"i",39),h.qZA(),h.TgZ(46,"div",25),h._UZ(47,"input",22,40)(49,"i",24),h.qZA(),h.TgZ(50,"div",25),h._UZ(51,"input",26,41)(53,"i",28),h.qZA(),h.TgZ(54,"a",29),h.NdJ("click",function(){h.CHM(t);const i=h.MAs(48),u=h.MAs(52),l=h.MAs(40),m=h.oxw();return m.signUp(i.value,u.value),h.KtG(m.nameDisplay(l.value))}),h._uU(55,"Register"),h.qZA()()()()()()()()()()()()}}function Bk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-header",42),h.NdJ("isLogout",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.handleLogout())}),h.qZA()}}const zR='@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700,800,900";body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029}a[_ngcontent-%COMP%]:hover{text-decoration:none}.link[_ngcontent-%COMP%]{color:#ffeba7}.link[_ngcontent-%COMP%]:hover{color:#c4c3ca}p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}h4[_ngcontent-%COMP%]{font-weight:600}h6[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 20px;font-weight:700}.section[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.full-height[_ngcontent-%COMP%]{min-height:100vh}[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){display:none}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;display:block;text-align:center;width:60px;height:16px;border-radius:8px;padding:0;margin:10px auto;cursor:pointer;background-color:#ffeba7}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{position:absolute;display:block;width:36px;height:36px;border-radius:50%;color:#ffeba7;background-color:#020305;font-family:unicons;content:"\\eb4f";z-index:20;top:-10px;left:-10px;line-height:36px;text-align:center;font-size:24px;transition:all .5s ease}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{transform:translate(44px) rotate(-270deg)}.card-3d-wrap[_ngcontent-%COMP%]{position:relative;width:440px;max-width:100%;height:400px;transform-style:preserve-3d;perspective:800px;margin-top:60px}.card-3d-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:all .6s ease-out}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#2b2e38;background-image:url(/img/pattern_japanese-pattern-2_1_2_0-0_0_1__ffffff00_000000.png);position:absolute;border-radius:6px;-webkit-transform-style:preserve-3d}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.checkbox[_ngcontent-%COMP%]:checked ~ .card-3d-wrap[_ngcontent-%COMP%]   .card-3d-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.center-wrap[_ngcontent-%COMP%]{position:absolute;width:100%;padding:0 35px;top:50%;left:0;transform:translate3d(0,-50%,35px) perspective(100px);z-index:20;display:block}.form-group[_ngcontent-%COMP%]{position:relative;display:block;margin:0;padding:0}.form-style[_ngcontent-%COMP%]{padding:13px 20px 13px 55px;height:48px;width:100%;font-weight:500;border-radius:4px;font-size:14px;line-height:22px;letter-spacing:.5px;outline:none;color:#c4c3ca;background-color:#1f2029;border:none;transition:all .2s linear;box-shadow:0 4px 8px #15151533}.form-style[_ngcontent-%COMP%]:focus, .form-style[_ngcontent-%COMP%]:active{border:none;outline:none;box-shadow:0 4px 8px #15151533}.input-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:18px;height:48px;font-size:24px;line-height:48px;text-align:left;transition:all .2s linear}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}';let qR=(()=>{class n{constructor(t){this.firebaseService=t,this.title="scholarsMart",this.isSignedIn=!1,this.email="",this.points_email="",this.message=""}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}signUp(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseService.signUp(t,r),i.firebaseService.isLoggedIn&&(i.isSignedIn=!0)})()}signIn(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseService.signIn(t,r),i.firebaseService.isLoggedIn&&(i.isSignedIn=!0)})()}handleLogout(){this.isSignedIn=!1}nameDisplay(t){this.message=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_y))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login-signup"]],decls:11,vars:2,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1, shrink-to-fit=no"],["rel","stylesheet","href","https://unicons.iconscout.com/release/v2.1.9/css/unicons.css"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css"],[4,"ngIf"],[3,"isLogout",4,"ngIf"],[1,"section"],[1,"container"],[1,"row","full-height","justify-content-center"],[1,"col-12","text-center","align-self-center","py-5"],[1,"section","pb-5","pt-5","pt-sm-2","text-center"],[1,"mb-0","pb-3"],["type","checkbox","id","reg-log","name","reg-log",1,"checkbox"],["for","reg-log"],[1,"card-3d-wrap","mx-auto"],[1,"card-3d-wrapper"],[1,"card-front"],[1,"center-wrap"],[1,"section","text-center"],[1,"mb-4","pb-3"],[1,"form-group"],["type","email","placeholder","Email",1,"form-style"],["email",""],[1,"input-icon","uil","uil-at"],[1,"form-group","mt-2"],["type","password","placeholder","Password",1,"form-style"],["password",""],[1,"input-icon","uil","uil-lock-alt"],["routerLink","products",1,"btn","mt-4",3,"click"],[1,"mb-0","mt-4","text-center"],["routerLink","/forgot-password",1,"link"],[1,"card-back"],[1,"mb-3","pb-3"],["type","text ","placeholder","Full Name",1,"form-style"],["fullName",""],[1,"input-icon","uil","uil-user"],["type","tel","placeholder","Phone Number",1,"form-style"],["phoneNumber",""],[1,"input-icon","uil","uil-phone"],["emailSignup",""],["passwordSignup",""],[3,"isLogout"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0)(1,"head")(2,"title"),h._uU(3,"Webleb"),h.qZA(),h._UZ(4,"meta",1)(5,"meta",2)(6,"link",3)(7,"link",4),h.qZA(),h.YNc(8,Uk,56,0,"body",5),h.qZA(),h.YNc(9,Bk,1,0,"app-header",6),h._UZ(10,"router-outlet")),2&t&&(h.xp6(8),h.Q6J("ngIf",!r.isSignedIn),h.xp6(1),h.Q6J("ngIf",r.isSignedIn))},dependencies:[fs,Se,Vl,Vk],styles:[zR,zR]}),n})(),WR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),eg=(()=>{class n extends WR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const zc=new h.OlP("NgValueAccessor"),$k={provide:zc,useExisting:(0,h.Gpc)(()=>UC),multi:!0},zk=new h.OlP("CompositionEventMode");let UC=(()=>{class n extends WR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Gk(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(zk,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([$k]),h.qOj]}),n})();const qk=!1,ds=new h.OlP("NgValidators"),af=new h.OlP("NgAsyncValidators");function iO(n){return null!=n}function sO(n){const e=(0,h.QGY)(n)?(0,en.D)(n):n;if(qk&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function oO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function aO(n,e){return e.map(t=>t(n))}function uO(n){return n.map(e=>function Zk(n){return!n.validate}(e)?e:t=>e.validate(t))}function CA(n){return null!=n?function cO(n){if(!n)return null;const e=n.filter(iO);return 0==e.length?null:function(t){return oO(aO(t,e))}}(uO(n)):null}function DA(n){return null!=n?function lO(n){if(!n)return null;const e=n.filter(iO);return 0==e.length?null:function(t){return function jk(...n){const e=(0,Ni.jO)(n),{args:t,keys:r}=oa(n),i=new ni.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let S=0;S<l;S++){let O=!1;(0,tc.Xf)(t[S]).subscribe((0,rr.x)(u,B=>{O||(O=!0,b--),m[S]=B},()=>w--,void 0,()=>{(!w||!O)&&(b||u.next(r?Bd(r,m):m),u.complete())}))}});return e?i.pipe(Gs(e)):i}(aO(t,e).map(sO)).pipe((0,_t.U)(oO))}}(uO(n)):null}function dO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bA(n){return n?Array.isArray(n)?n:[n]:[]}function jC(n,e){return Array.isArray(n)?n.includes(e):n===e}function pO(n,e){const t=bA(e);return bA(n).forEach(i=>{jC(t,i)||t.push(i)}),t}function gO(n,e){return bA(e).filter(t=>!jC(n,t))}class mO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=CA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ps extends mO{get formDirective(){return null}get path(){return null}}class uf extends mO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vO=(()=>{class n extends yO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uf,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),_O=(()=>{class n extends yO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ps,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function wO(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const AA=!1,D0="VALID",$C="INVALID",wy="PENDING",b0="DISABLED";function xA(n){return(GC(n)?n.validators:n)||null}function MA(n,e){return(GC(e)?e.asyncValidators:n)||null}function GC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class CO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===D0}get invalid(){return this.status===$C}get pending(){return this.status==wy}get disabled(){return this.status===b0}get enabled(){return this.status!==b0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(pO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(pO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gO(e,this._rawAsyncValidators))}hasValidator(e){return jC(this._rawValidators,e)}hasAsyncValidator(e){return jC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=b0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===D0||this.status===wy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?b0:D0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wy,this._hasOwnPendingAsyncValidator=!0;const t=sO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?b0:this.errors?$C:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wy)?wy:this._anyControlsHaveStatus($C)?$C:D0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){GC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function tF(n){return Array.isArray(n)?CA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function nF(n){return Array.isArray(n)?DA(n):n||null}(this._rawAsyncValidators)}}class RA extends CO{constructor(e,t,r){super(xA(t),MA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function IO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,AA?function eF(n,e){return`Must supply a value for form control ${wO(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function EO(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,AA?function Jk(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,AA?function Xk(n,e){return`Cannot find form control ${wO(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const tg=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>T0}),T0="always";function S0(n,e,t=T0){OA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&DO(n,e)})}(n,e),function aF(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&DO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iF(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function WC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OA(n,e){const t=function hO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(dO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function fO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(dO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();WC(e._rawValidators,i),WC(e._rawAsyncValidators,i)}function DO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const hF={provide:Ps,useExisting:(0,h.Gpc)(()=>KC)},A0=(()=>Promise.resolve())();let KC=(()=>{class n extends Ps{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new RA({},CA(t),DA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){A0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),S0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){A0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){A0.then(()=>{const r=this._findContainer(t.path),i=new RA({});(function bO(n,e){OA(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){A0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){A0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function TO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ds,10),h.Y36(af,10),h.Y36(tg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([hF]),h.qOj]}),n})();function SO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function AO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xO=class extends CO{constructor(e=null,t,r){super(xA(t),MA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=AO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){AO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},gF={provide:uf,useExisting:(0,h.Gpc)(()=>FA)},OO=(()=>Promise.resolve())();let FA=(()=>{class n extends uf{constructor(t,r,i,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new xO,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function kA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===UC?t=u:function lF(n){return Object.getPrototypeOf(n.constructor)===eg}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function NA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){S0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){OO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);OO.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function zC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ps,9),h.Y36(ds,10),h.Y36(af,10),h.Y36(zc,10),h.Y36(h.sBO,8),h.Y36(tg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([gF]),h.qOj,h.TTD]}),n})(),PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),kO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const LA=new h.OlP("NgModelWithFormControlWarning");let JO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[kO]}),n})(),BF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tg,useValue:t.callSetDisabledState??T0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[JO]}),n})(),jF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:LA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:tg,useValue:t.callSetDisabledState??T0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[JO]}),n})(),HF=(()=>{class n{constructor(t,r){this.cartService=t,this.firestoreservice=r,this.products=[],this.orderList=[],this.orderObj={id:"",email_address:"",user_address:"",contact_details:"",grandTotal:0,order_info:[]},this.id="",this.email_address="",this.user_address="",this.contact_details=""}ngOnInit(){this.cartService.getProducts().subscribe(t=>{this.products=t,this.grandTotal=this.cartService.getTotalPrice()})}addOrder(){(""==this.email_address||""==this.user_address||""==this.contact_details)&&alert("Fill all input fields"),this.orderObj.id="",this.orderObj.email_address=this.email_address,this.orderObj.user_address=this.user_address,this.orderObj.contact_details=this.contact_details,this.orderObj.order_info=this.products,this.orderObj.grandTotal=this.grandTotal,this.clearFields(),this.firestoreservice.addOrder(this.orderObj)}updateUserPoints(t){this.firestoreservice.updateScholarPoints(this.grandTotal,t.value)}clearFields(){this.id="",this.email_address="",this.user_address="",this.contact_details=""}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(VC),h.Y36(LC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-checkout"]],decls:25,vars:4,consts:[[1,"checkout"],[1,"row"],[1,"col-sm-7"],[1,"common-form"],["orderData","ngForm"],["type","text","name","email","placeholder","Enter User Email",1,"form-input",3,"ngModel","ngModelChange"],["email",""],["type","text","name","address","placeholder","Enter User Address",1,"form-input",3,"ngModel","ngModelChange"],["address",""],["type","text","name","contact","placeholder","Enter contact details",1,"form-input",3,"ngModel","ngModelChange"],["contact",""],["routerLink","/thank-you",1,"btn","form-button",3,"click"],[1,"col-sm-5"]],template:function(t,r){if(1&t){const i=h.EpF();h.TgZ(0,"body")(1,"div",0)(2,"h1"),h._uU(3,"Checkout"),h.qZA(),h.TgZ(4,"div",1)(5,"div",2)(6,"h3"),h._uU(7,"Add shipping address"),h.qZA(),h.TgZ(8,"form",3,4)(10,"input",5,6),h.NdJ("ngModelChange",function(l){return r.email_address=l}),h.qZA(),h.TgZ(12,"input",7,8),h.NdJ("ngModelChange",function(l){return r.user_address=l}),h.qZA(),h.TgZ(14,"input",9,10),h.NdJ("ngModelChange",function(l){return r.contact_details=l}),h.qZA(),h.TgZ(16,"button",11),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(11);return h.KtG(r.updateUserPoints(l))})("click",function(){return r.addOrder()}),h._uU(17,"Order Now"),h.qZA()()(),h.TgZ(18,"div",12)(19,"h3"),h._uU(20),h.qZA(),h.TgZ(21,"h4"),h._uU(22,"Payment Method : "),h.TgZ(23,"b"),h._uU(24,"Scholar Points"),h.qZA()()()()()()}2&t&&(h.xp6(10),h.Q6J("ngModel",r.email_address),h.xp6(2),h.Q6J("ngModel",r.user_address),h.xp6(2),h.Q6J("ngModel",r.contact_details),h.xp6(6),h.hij("Total Amount: ",r.grandTotal,""))},dependencies:[Vl,PO,UC,vO,_O,FA,KC],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029;height:100vh}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}"]}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-thank-you"]],decls:5,vars:0,consts:[["routerLink","/",1,"btn"]],template:function(t,r){1&t&&(h.TgZ(0,"body")(1,"h1"),h._uU(2,"THANK YOU FOR PLACING ORDER DEAR \u{1f618}\u{1f60d}\u{1f970}"),h.qZA(),h.TgZ(3,"button",0),h._uU(4,"Go Back Home"),h.qZA()())},dependencies:[Vl],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029;height:100vh}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}"]}),n})();function GF(n,e){if(1&n&&(h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA()()),2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.id),h.xp6(2),h.Oqu(t.email_address),h.xp6(2),h.Oqu(t.contact_details),h.xp6(2),h.Oqu(t.grandTotal),h.xp6(2),h.Oqu(t.order_info)}}const zF=[{path:"home",component:Rk},{path:"products",component:Pk},{path:"cart",component:Lk},{path:"login",component:qR},{path:"",redirectTo:"products",pathMatch:"full"},{path:"checkout",component:HF},{path:"thank-you",component:$F},{path:"check-orders",component:(()=>{class n{constructor(t){this.api=t,this.id="",this.email_address="",this.user_address="",this.grandtotal="",this.order_info=""}showOrders(t){this.api.getPoints(t.value).subscribe(r=>{this.orders=r.data()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(LC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-check-orders"]],decls:19,vars:1,consts:[["placeholder","please input your email"],["email",""],[3,"click"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const i=h.EpF();h._UZ(0,"input",0,1),h.TgZ(2,"button",2),h.NdJ("click",function(){h.CHM(i);const l=h.MAs(1);return h.KtG(r.showOrders(l))}),h._uU(3,"Display Orders"),h.qZA(),h.TgZ(4,"table",3)(5,"thead")(6,"tr")(7,"th",4),h._uU(8,"Id"),h.qZA(),h.TgZ(9,"th",4),h._uU(10,"Email Address"),h.qZA(),h.TgZ(11,"th",4),h._uU(12,"User Address"),h.qZA(),h.TgZ(13,"th",4),h._uU(14,"Grand Total"),h.qZA(),h.TgZ(15,"th",4),h._uU(16,"Order Info"),h.qZA()()(),h.TgZ(17,"tbody"),h.YNc(18,GF,11,5,"tr",5),h.qZA()()}2&t&&(h.xp6(18),h.Q6J("ngForOf",r.orders))},dependencies:[Fs]}),n})()}];let qF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Bl.forRoot(zF),Bl]}),n})(),WF=(()=>{class n{constructor(t){this.firebaseService=t,this.title="scholarsMart",this.isSignedIn=!1,this.email="",this.message=""}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}signUp(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseService.signUp(t,r),i.firebaseService.isLoggedIn&&(i.isSignedIn=!0)})()}signIn(t,r){var i=this;return(0,fe.Z)(function*(){yield i.firebaseService.signIn(t,r),i.firebaseService.isLoggedIn&&(i.isSignedIn=!0)})()}handleLogout(){this.isSignedIn=!1}nameDisplay(t){this.message=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_y))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-login-signup")(1,"router-outlet")},dependencies:[Se,qR],styles:['@import"https://fonts.googleapis.com/css?family=Poppins:400,500,600,700,800,900";body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:300;line-height:1.7;color:#ffeba7;background-color:#1f2029}a[_ngcontent-%COMP%]:hover{text-decoration:none}.link[_ngcontent-%COMP%]{color:#ffeba7}.link[_ngcontent-%COMP%]:hover{color:#c4c3ca}p[_ngcontent-%COMP%]{font-weight:500;font-size:14px}h4[_ngcontent-%COMP%]{font-weight:600}h6[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 20px;font-weight:700}.section[_ngcontent-%COMP%]{position:relative;width:100%;display:block}.full-height[_ngcontent-%COMP%]{min-height:100vh}[type=checkbox][_ngcontent-%COMP%]:checked, [type=checkbox][_ngcontent-%COMP%]:not(:checked){display:none}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{position:relative;display:block;text-align:center;width:60px;height:16px;border-radius:8px;padding:0;margin:10px auto;cursor:pointer;background-color:#ffeba7}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before, .checkbox[_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]:before{position:absolute;display:block;width:36px;height:36px;border-radius:50%;color:#ffeba7;background-color:#020305;font-family:unicons;content:"\\eb4f";z-index:20;top:-10px;left:-10px;line-height:36px;text-align:center;font-size:24px;transition:all .5s ease}.checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{transform:translate(44px) rotate(-270deg)}.card-3d-wrap[_ngcontent-%COMP%]{position:relative;width:440px;max-width:100%;height:400px;transform-style:preserve-3d;perspective:800px;margin-top:60px}.card-3d-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:all .6s ease-out}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#2b2e38;background-image:url(/img/pattern_japanese-pattern-2_1_2_0-0_0_1__ffffff00_000000.png);position:absolute;border-radius:6px;-webkit-transform-style:preserve-3d}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}.checkbox[_ngcontent-%COMP%]:checked ~ .card-3d-wrap[_ngcontent-%COMP%]   .card-3d-wrapper[_ngcontent-%COMP%]{transform:rotateY(180deg)}.center-wrap[_ngcontent-%COMP%]{position:absolute;width:100%;padding:0 35px;top:50%;left:0;transform:translate3d(0,-50%,35px) perspective(100px);z-index:20;display:block}.form-group[_ngcontent-%COMP%]{position:relative;display:block;margin:0;padding:0}.form-style[_ngcontent-%COMP%]{padding:13px 20px 13px 55px;height:48px;width:100%;font-weight:500;border-radius:4px;font-size:14px;line-height:22px;letter-spacing:.5px;outline:none;color:#c4c3ca;background-color:#1f2029;border:none;transition:all .2s linear;box-shadow:0 4px 8px #15151533}.form-style[_ngcontent-%COMP%]:focus, .form-style[_ngcontent-%COMP%]:active{border:none;outline:none;box-shadow:0 4px 8px #15151533}.input-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:18px;height:48px;font-size:24px;line-height:48px;text-align:left;transition:all .2s linear}.btn[_ngcontent-%COMP%]{border-radius:4px;height:44px;font-size:13px;font-weight:600;text-transform:uppercase;transition:all .2s linear;padding:0 30px;letter-spacing:1px;display:inline-flex;align-items:center;background-color:#ffeba7;color:#000}.btn[_ngcontent-%COMP%]:hover{background-color:#000;color:#ffeba7;box-shadow:0 8px 24px #10277033}']}),n})();class YC{}class GA{}class md{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),i.length>0){const u=t.toLowerCase();this.headers.set(u,i),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof md?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new md;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof md?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ZF{encodeKey(e){return XO(e)}encodeValue(e){return XO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const YF=/%(\d[a-f0-9])/gi,QF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XO(n){return encodeURIComponent(n).replace(YF,(e,t)=>QF[t]??e)}function QC(n){return`${n}`}class cf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ZF,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function KF(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[l,m]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],w=t.get(l)||[];w.push(m),t.set(l,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(QC):[QC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new cf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(QC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(QC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class JF{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tP(n){return typeof Blob<"u"&&n instanceof Blob}function nP(n){return typeof FormData<"u"&&n instanceof FormData}class x0{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function XF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new md),this.context||(this.context=new JF),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new cf,this.urlWithParams=t}serializeBody(){return null===this.body?null:eP(this.body)||tP(this.body)||nP(this.body)||function eL(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof cf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nP(this.body)?null:tP(this.body)?this.body.type||null:eP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,b=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((O,B)=>O.set(B,e.setHeaders[B]),w)),e.setParams&&(b=Object.keys(e.setParams).reduce((O,B)=>O.set(B,e.setParams[B]),b)),new x0(t,r,u,{params:b,headers:w,context:S,reportProgress:m,responseType:i,withCredentials:l})}}var qr=(()=>((qr=qr||{})[qr.Sent=0]="Sent",qr[qr.UploadProgress=1]="UploadProgress",qr[qr.ResponseHeader=2]="ResponseHeader",qr[qr.DownloadProgress=3]="DownloadProgress",qr[qr.Response=4]="Response",qr[qr.User=5]="User",qr))();class zA{constructor(e,t=200,r="OK"){this.headers=e.headers||new md,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class qA extends zA{constructor(e={}){super(e),this.type=qr.ResponseHeader}clone(e={}){return new qA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class JC extends zA{constructor(e={}){super(e),this.type=qr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new JC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rP extends zA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function WA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let tL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof x0)u=t;else{let w,b;w=i.headers instanceof md?i.headers:new md(i.headers),i.params&&(b=i.params instanceof cf?i.params:new cf({fromObject:i.params})),u=new x0(t,r,void 0!==i.body?i.body:null,{headers:w,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=st(u).pipe(Ts(w=>this.handler.handle(w)));if(t instanceof x0||"events"===i.observe)return l;const m=l.pipe(fr(w=>w instanceof JC));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,_t.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,_t.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,_t.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,_t.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new cf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,WA(i,r))}post(t,r,i={}){return this.request("POST",t,WA(i,r))}put(t,r,i={}){return this.request("PUT",t,WA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function iP(n,e){return e(n)}function nL(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const iL=new h.OlP("HTTP_INTERCEPTORS"),M0=new h.OlP("HTTP_INTERCEPTOR_FNS");function sL(){let n=null;return(e,t)=>(null===n&&(n=((0,h.f3M)(iL,{optional:!0})??[]).reduceRight(nL,iP)),n(e,t))}let sP=(()=>{class n extends YC{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(M0)));this.chain=r.reduceRight((i,u)=>function rL(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(i,u,this.injector),iP)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(GA),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const cL=/^\)\]\}',?\n/;let aP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ni.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((q,ce)=>i.setRequestHeader(q,ce.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&i.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();i.responseType="json"!==q?q:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const q=i.statusText||"OK",ce=new md(i.getAllResponseHeaders()),Me=function lL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new qA({headers:ce,status:i.status,statusText:q,url:Me}),l},w=()=>{let{headers:q,status:ce,statusText:Me,url:ke}=m(),it=null;204!==ce&&(it=typeof i.response>"u"?i.responseText:i.response),0===ce&&(ce=it?200:0);let Et=ce>=200&&ce<300;if("json"===t.responseType&&"string"==typeof it){const wt=it;it=it.replace(cL,"");try{it=""!==it?JSON.parse(it):null}catch(Ot){it=wt,Et&&(Et=!1,it={error:Ot,text:it})}}Et?(r.next(new JC({body:it,headers:q,status:ce,statusText:Me,url:ke||void 0})),r.complete()):r.error(new rP({error:it,headers:q,status:ce,statusText:Me,url:ke||void 0}))},b=q=>{const{url:ce}=m(),Me=new rP({error:q,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ce||void 0});r.error(Me)};let S=!1;const O=q=>{S||(r.next(m()),S=!0);let ce={type:qr.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ce.total=q.total),"text"===t.responseType&&i.responseText&&(ce.partialText=i.responseText),r.next(ce)},B=q=>{let ce={type:qr.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ce.total=q.total),r.next(ce)};return i.addEventListener("load",w),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",O),null!==u&&i.upload&&i.upload.addEventListener("progress",B)),i.send(u),r.next({type:qr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",w),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",O),null!==u&&i.upload&&i.upload.removeEventListener("progress",B)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Na))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ZA=new h.OlP("XSRF_ENABLED"),uP=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),cP=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class lP{}let fL=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ho(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(re),h.LFG(h.Lbi),h.LFG(uP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function pL(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(ZA)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(lP).getToken(),i=(0,h.f3M)(cP);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var kr=(()=>((kr=kr||{})[kr.Interceptors=0]="Interceptors",kr[kr.LegacyInterceptors=1]="LegacyInterceptors",kr[kr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",kr[kr.NoXsrfProtection=3]="NoXsrfProtection",kr[kr.JsonpSupport=4]="JsonpSupport",kr[kr.RequestsMadeViaParent=5]="RequestsMadeViaParent",kr))();function Ey(n,e){return{\u0275kind:n,\u0275providers:e}}function gL(...n){const e=[tL,aP,sP,{provide:YC,useExisting:sP},{provide:GA,useExisting:aP},{provide:M0,useValue:pL,multi:!0},{provide:ZA,useValue:!0},{provide:lP,useClass:fL}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const dP=new h.OlP("LEGACY_INTERCEPTOR_FN");let yL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[gL(Ey(kr.LegacyInterceptors,[{provide:dP,useFactory:sL},{provide:M0,useExisting:dP,multi:!0}]))]}),n})(),vL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[WF]}),n.\u0275inj=h.cJS({providers:[_y],imports:[ia,qF,Tr.hO.initializeApp({apiKey:"AIzaSyAupGpwto-DAM6xp5hq1HdHpA8opQgcuVQ",authDomain:"scholarsmart-37766.firebaseapp.com",projectId:"scholarsmart-37766",storageBucket:"scholarsmart-37766.appspot.com",messagingSenderId:"550524140253",appId:"1:550524140253:web:13629867b5fbd7b0f23934"}),Mk,yL,BF,jF]}),n})();ul().bootstrapModule(vL).catch(n=>console.error(n))},9751:(vt,Ae,k)=>{k.d(Ae,{y:()=>we});var h=k(2961),Y=k(727),N=k(8822),ie=k(9635),se=k(2416),re=k(576),ye=k(2806);let we=(()=>{class W{constructor(be){be&&(this._subscribe=be)}lift(be){const qe=new W;return qe.source=this,qe.operator=be,qe}subscribe(be,qe,ct){const ge=function H(W){return W&&W instanceof h.Lv||function $(W){return W&&(0,re.m)(W.next)&&(0,re.m)(W.error)&&(0,re.m)(W.complete)}(W)&&(0,Y.Nn)(W)}(be)?be:new h.Hp(be,qe,ct);return(0,ye.x)(()=>{const{operator:Re,source:Oe}=this;ge.add(Re?Re.call(ge,Oe):Oe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(be){try{return this._subscribe(be)}catch(qe){be.error(qe)}}forEach(be,qe){return new(qe=pe(qe))((ct,ge)=>{const Re=new h.Hp({next:Oe=>{try{be(Oe)}catch(Be){ge(Be),Re.unsubscribe()}},error:ge,complete:ct});this.subscribe(Re)})}_subscribe(be){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(be)}[N.L](){return this}pipe(...be){return(0,ie.U)(be)(this)}toPromise(be){return new(be=pe(be))((qe,ct)=>{let ge;this.subscribe(Re=>ge=Re,Re=>ct(Re),()=>qe(ge))})}}return W.create=je=>new W(je),W})();function pe(W){var je;return null!==(je=W??se.v.Promise)&&void 0!==je?je:Promise}},7579:(vt,Ae,k)=>{k.d(Ae,{x:()=>ye});var h=k(9751),Y=k(727);const ie=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),re=k(2806);let ye=(()=>{class pe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const W=new we(this,this);return W.operator=H,W}_throwIfClosed(){if(this.closed)throw new ie}next(H){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(H)}})}error(H){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:W}=this;for(;W.length;)W.shift().error(H)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:W,isStopped:je,observers:be}=this;return W||je?Y.Lc:(this.currentObservers=null,be.push(H),new Y.w0(()=>{this.currentObservers=null,(0,se.P)(be,H)}))}_checkFinalizedStatuses(H){const{hasError:W,thrownError:je,isStopped:be}=this;W?H.error(je):be&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return pe.create=($,H)=>new we($,H),pe})();class we extends ye{constructor($,H){super(),this.destination=$,this.source=H}next($){var H,W;null===(W=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===W||W.call(H,$)}error($){var H,W;null===(W=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===W||W.call(H,$)}complete(){var $,H;null===(H=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===H||H.call($)}_subscribe($){var H,W;return null!==(W=null===(H=this.source)||void 0===H?void 0:H.subscribe($))&&void 0!==W?W:Y.Lc}}},2961:(vt,Ae,k)=>{k.d(Ae,{Hp:()=>ct,Lv:()=>W});var h=k(576),Y=k(727),N=k(2416),ie=k(7849);function se(){}const re=pe("C",void 0,void 0);function pe(Pe,Ee,Ie){return{kind:Pe,value:Ee,error:Ie}}var $=k(3410),H=k(2806);class W extends Y.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,Y.Nn)(Ee)&&Ee.add(this)):this.destination=Be}static create(Ee,Ie,$e){return new ct(Ee,Ie,$e)}next(Ee){this.isStopped?Oe(function we(Pe){return pe("N",Pe,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Oe(function ye(Pe){return pe("E",void 0,Pe)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Oe(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function be(Pe,Ee){return je.call(Pe,Ee)}class qe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch($e){ge($e)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch($e){ge($e)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){ge(Ie)}}}class ct extends W{constructor(Ee,Ie,$e){let Fe;if(super(),(0,h.m)(Ee)||!Ee)Fe={next:Ee??void 0,error:Ie??void 0,complete:$e??void 0};else{let nt;this&&N.v.useDeprecatedNextContext?(nt=Object.create(Ee),nt.unsubscribe=()=>this.unsubscribe(),Fe={next:Ee.next&&be(Ee.next,nt),error:Ee.error&&be(Ee.error,nt),complete:Ee.complete&&be(Ee.complete,nt)}):Fe=Ee}this.destination=new qe(Fe)}}function ge(Pe){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Pe):(0,ie.h)(Pe)}function Oe(Pe,Ee){const{onStoppedNotification:Ie}=N.v;Ie&&$.z.setTimeout(()=>Ie(Pe,Ee))}const Be={closed:!0,next:se,error:function Re(Pe){throw Pe},complete:se}},727:(vt,Ae,k)=>{k.d(Ae,{Lc:()=>re,w0:()=>se,Nn:()=>ye});var h=k(576);const N=(0,k(3888).d)(pe=>function(H){pe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((W,je)=>`${je+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ie=k(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const be of H)be.remove(this);else H.remove(this);const{initialTeardown:W}=this;if((0,h.m)(W))try{W()}catch(be){$=be instanceof N?be.errors:[be]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const be of je)try{we(be)}catch(qe){$=$??[],qe instanceof N?$=[...$,...qe.errors]:$.push(qe)}}if($)throw new N($)}}add($){var H;if($&&$!==this)if(this.closed)we($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push($)}}_hasParent($){const{_parentage:H}=this;return H===$||Array.isArray(H)&&H.includes($)}_addParent($){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push($),H):H?[H,$]:$}_removeParent($){const{_parentage:H}=this;H===$?this._parentage=null:Array.isArray(H)&&(0,ie.P)(H,$)}remove($){const{_finalizers:H}=this;H&&(0,ie.P)(H,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const re=se.EMPTY;function ye(pe){return pe instanceof se||pe&&"closed"in pe&&(0,h.m)(pe.remove)&&(0,h.m)(pe.add)&&(0,h.m)(pe.unsubscribe)}function we(pe){(0,h.m)(pe)?pe():pe.unsubscribe()}},2416:(vt,Ae,k)=>{k.d(Ae,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(vt,Ae,k)=>{k.d(Ae,{E:()=>Y});const Y=new(k(9751).y)(se=>se.complete())},8996:(vt,Ae,k)=>{k.d(Ae,{D:()=>Ee});var h=k(8421),Y=k(5363),N=k(9468),re=k(9751),we=k(2202),pe=k(576),$=k(9672);function W(Ie,$e){if(!Ie)throw new Error("Iterable cannot be null");return new re.y(Fe=>{(0,$.f)(Fe,$e,()=>{const nt=Ie[Symbol.asyncIterator]();(0,$.f)(Fe,$e,()=>{nt.next().then(ne=>{ne.done?Fe.complete():Fe.next(ne.value)})},0,!0)})})}var je=k(3670),be=k(8239),qe=k(1144),ct=k(6495),ge=k(2206),Re=k(4532),Oe=k(3260);function Ee(Ie,$e){return $e?function Pe(Ie,$e){if(null!=Ie){if((0,je.c)(Ie))return function ie(Ie,$e){return(0,h.Xf)(Ie).pipe((0,N.R)($e),(0,Y.Q)($e))}(Ie,$e);if((0,qe.z)(Ie))return function ye(Ie,$e){return new re.y(Fe=>{let nt=0;return $e.schedule(function(){nt===Ie.length?Fe.complete():(Fe.next(Ie[nt++]),Fe.closed||this.schedule())})})}(Ie,$e);if((0,be.t)(Ie))return function se(Ie,$e){return(0,h.Xf)(Ie).pipe((0,N.R)($e),(0,Y.Q)($e))}(Ie,$e);if((0,ge.D)(Ie))return W(Ie,$e);if((0,ct.T)(Ie))return function H(Ie,$e){return new re.y(Fe=>{let nt;return(0,$.f)(Fe,$e,()=>{nt=Ie[we.h](),(0,$.f)(Fe,$e,()=>{let ne,Dt;try{({value:ne,done:Dt}=nt.next())}catch(Je){return void Fe.error(Je)}Dt?Fe.complete():Fe.next(ne)},0,!0)}),()=>(0,pe.m)(nt?.return)&&nt.return()})}(Ie,$e);if((0,Oe.L)(Ie))return function Be(Ie,$e){return W((0,Oe.Q)(Ie),$e)}(Ie,$e)}throw(0,Re.z)(Ie)}(Ie,$e):(0,h.Xf)(Ie)}},8421:(vt,Ae,k)=>{k.d(Ae,{Xf:()=>je});var h=k(7582),Y=k(1144),N=k(8239),ie=k(9751),se=k(3670),re=k(2206),ye=k(4532),we=k(6495),pe=k(3260),$=k(576),H=k(7849),W=k(8822);function je(Pe){if(Pe instanceof ie.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function be(Pe){return new ie.y(Ee=>{const Ie=Pe[W.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,Y.z)(Pe))return function qe(Pe){return new ie.y(Ee=>{for(let Ie=0;Ie<Pe.length&&!Ee.closed;Ie++)Ee.next(Pe[Ie]);Ee.complete()})}(Pe);if((0,N.t)(Pe))return function ct(Pe){return new ie.y(Ee=>{Pe.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,H.h)})}(Pe);if((0,re.D)(Pe))return Re(Pe);if((0,we.T)(Pe))return function ge(Pe){return new ie.y(Ee=>{for(const Ie of Pe)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Pe);if((0,pe.L)(Pe))return function Oe(Pe){return Re((0,pe.Q)(Pe))}(Pe)}throw(0,ye.z)(Pe)}function Re(Pe){return new ie.y(Ee=>{(function Be(Pe,Ee){var Ie,$e,Fe,nt;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,h.KL)(Pe);!($e=yield Ie.next()).done;)if(Ee.next($e.value),Ee.closed)return}catch(ne){Fe={error:ne}}finally{try{$e&&!$e.done&&(nt=Ie.return)&&(yield nt.call(Ie))}finally{if(Fe)throw Fe.error}}Ee.complete()})})(Pe,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(vt,Ae,k)=>{k.d(Ae,{T:()=>re});var h=k(8189),Y=k(8421),N=k(515),ie=k(7669),se=k(8996);function re(...ye){const we=(0,ie.yG)(ye),pe=(0,ie._6)(ye,1/0),$=ye;return $.length?1===$.length?(0,Y.Xf)($[0]):(0,h.J)(pe)((0,se.D)($,we)):N.E}},5403:(vt,Ae,k)=>{k.d(Ae,{x:()=>Y});var h=k(2961);function Y(ie,se,re,ye,we){return new N(ie,se,re,ye,we)}class N extends h.Lv{constructor(se,re,ye,we,pe,$){super(se),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=re?function(H){try{re(H)}catch(W){se.error(W)}}:super._next,this._error=we?function(H){try{we(H)}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(vt,Ae,k)=>{k.d(Ae,{U:()=>N});var h=k(4482),Y=k(5403);function N(ie,se){return(0,h.e)((re,ye)=>{let we=0;re.subscribe((0,Y.x)(ye,pe=>{ye.next(ie.call(se,pe,we++))}))})}},8189:(vt,Ae,k)=>{k.d(Ae,{J:()=>N});var h=k(5577),Y=k(4671);function N(ie=1/0){return(0,h.z)(Y.y,ie)}},5577:(vt,Ae,k)=>{k.d(Ae,{z:()=>we});var h=k(4004),Y=k(8421),N=k(4482),ie=k(9672),se=k(5403),ye=k(576);function we(pe,$,H=1/0){return(0,ye.m)($)?we((W,je)=>(0,h.U)((be,qe)=>$(W,be,je,qe))((0,Y.Xf)(pe(W,je))),H):("number"==typeof $&&(H=$),(0,N.e)((W,je)=>function re(pe,$,H,W,je,be,qe,ct){const ge=[];let Re=0,Oe=0,Be=!1;const Pe=()=>{Be&&!ge.length&&!Re&&$.complete()},Ee=$e=>Re<W?Ie($e):ge.push($e),Ie=$e=>{be&&$.next($e),Re++;let Fe=!1;(0,Y.Xf)(H($e,Oe++)).subscribe((0,se.x)($,nt=>{je?.(nt),be?Ee(nt):$.next(nt)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Re--;ge.length&&Re<W;){const nt=ge.shift();qe?(0,ie.f)($,qe,()=>Ie(nt)):Ie(nt)}Pe()}catch(nt){$.error(nt)}}))};return pe.subscribe((0,se.x)($,Ee,()=>{Be=!0,Pe()})),()=>{ct?.()}}(W,je,pe,H)))}},5363:(vt,Ae,k)=>{k.d(Ae,{Q:()=>ie});var h=k(9672),Y=k(4482),N=k(5403);function ie(se,re=0){return(0,Y.e)((ye,we)=>{ye.subscribe((0,N.x)(we,pe=>(0,h.f)(we,se,()=>we.next(pe),re),()=>(0,h.f)(we,se,()=>we.complete(),re),pe=>(0,h.f)(we,se,()=>we.error(pe),re)))})}},3099:(vt,Ae,k)=>{k.d(Ae,{B:()=>se});var h=k(8421),Y=k(7579),N=k(2961),ie=k(4482);function se(ye={}){const{connector:we=(()=>new Y.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:H=!0}=ye;return W=>{let je,be,qe,ct=0,ge=!1,Re=!1;const Oe=()=>{be?.unsubscribe(),be=void 0},Be=()=>{Oe(),je=qe=void 0,ge=Re=!1},Pe=()=>{const Ee=je;Be(),Ee?.unsubscribe()};return(0,ie.e)((Ee,Ie)=>{ct++,!Re&&!ge&&Oe();const $e=qe=qe??we();Ie.add(()=>{ct--,0===ct&&!Re&&!ge&&(be=re(Pe,H))}),$e.subscribe(Ie),!je&&ct>0&&(je=new N.Hp({next:Fe=>$e.next(Fe),error:Fe=>{Re=!0,Oe(),be=re(Be,pe,Fe),$e.error(Fe)},complete:()=>{ge=!0,Oe(),be=re(Be,$),$e.complete()}}),(0,h.Xf)(Ee).subscribe(je))})(W)}}function re(ye,we,...pe){if(!0===we)return void ye();if(!1===we)return;const $=new N.Hp({next:()=>{$.unsubscribe(),ye()}});return(0,h.Xf)(we(...pe)).subscribe($)}},9468:(vt,Ae,k)=>{k.d(Ae,{R:()=>Y});var h=k(4482);function Y(N,ie=0){return(0,h.e)((se,re)=>{re.add(N.schedule(()=>se.subscribe(re),ie))})}},8505:(vt,Ae,k)=>{k.d(Ae,{b:()=>se});var h=k(576),Y=k(4482),N=k(5403),ie=k(4671);function se(re,ye,we){const pe=(0,h.m)(re)||ye||we?{next:re,error:ye,complete:we}:re;return pe?(0,Y.e)(($,H)=>{var W;null===(W=pe.subscribe)||void 0===W||W.call(pe);let je=!0;$.subscribe((0,N.x)(H,be=>{var qe;null===(qe=pe.next)||void 0===qe||qe.call(pe,be),H.next(be)},()=>{var be;je=!1,null===(be=pe.complete)||void 0===be||be.call(pe),H.complete()},be=>{var qe;je=!1,null===(qe=pe.error)||void 0===qe||qe.call(pe,be),H.error(be)},()=>{var be,qe;je&&(null===(be=pe.unsubscribe)||void 0===be||be.call(pe)),null===(qe=pe.finalize)||void 0===qe||qe.call(pe)}))}):ie.y}},4408:(vt,Ae,k)=>{k.d(Ae,{o:()=>se});var h=k(727);class Y extends h.w0{constructor(ye,we){super()}schedule(ye,we=0){return this}}const N={setInterval(re,ye,...we){const{delegate:pe}=N;return pe?.setInterval?pe.setInterval(re,ye,...we):setInterval(re,ye,...we)},clearInterval(re){const{delegate:ye}=N;return(ye?.clearInterval||clearInterval)(re)},delegate:void 0};var ie=k(8737);class se extends Y{constructor(ye,we){super(ye,we),this.scheduler=ye,this.work=we,this.pending=!1}schedule(ye,we=0){var pe;if(this.closed)return this;this.state=ye;const $=this.id,H=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(H,$,we)),this.pending=!0,this.delay=we,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(H,this.id,we),this}requestAsyncId(ye,we,pe=0){return N.setInterval(ye.flush.bind(ye,this),pe)}recycleAsyncId(ye,we,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return we;null!=we&&N.clearInterval(we)}execute(ye,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ye,we);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,we){let $,pe=!1;try{this.work(ye)}catch(H){pe=!0,$=H||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ye,scheduler:we}=this,{actions:pe}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(pe,this),null!=ye&&(this.id=this.recycleAsyncId(we,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(vt,Ae,k)=>{k.d(Ae,{v:()=>N});var h=k(6063);class Y{constructor(se,re=Y.now){this.schedulerActionCtor=se,this.now=re}schedule(se,re=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,re)}}Y.now=h.l.now;class N extends Y{constructor(se,re=Y.now){super(se,re),this.actions=[],this._active=!1}flush(se){const{actions:re}=this;if(this._active)return void re.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=re.shift());if(this._active=!1,ye){for(;se=re.shift();)se.unsubscribe();throw ye}}}},4986:(vt,Ae,k)=>{k.d(Ae,{z:()=>N});var h=k(4408);const N=new(k(7565).v)(h.o)},6063:(vt,Ae,k)=>{k.d(Ae,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(vt,Ae,k)=>{k.d(Ae,{z:()=>h});const h={setTimeout(Y,N,...ie){const{delegate:se}=h;return se?.setTimeout?se.setTimeout(Y,N,...ie):setTimeout(Y,N,...ie)},clearTimeout(Y){const{delegate:N}=h;return(N?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(vt,Ae,k)=>{k.d(Ae,{h:()=>Y});const Y=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(vt,Ae,k)=>{k.d(Ae,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(vt,Ae,k)=>{k.d(Ae,{_6:()=>re,jO:()=>ie,yG:()=>se});var h=k(576);function N(ye){return ye[ye.length-1]}function ie(ye){return(0,h.m)(N(ye))?ye.pop():void 0}function se(ye){return function Y(ye){return ye&&(0,h.m)(ye.schedule)}(N(ye))?ye.pop():void 0}function re(ye,we){return"number"==typeof N(ye)?ye.pop():we}},8737:(vt,Ae,k)=>{function h(Y,N){if(Y){const ie=Y.indexOf(N);0<=ie&&Y.splice(ie,1)}}k.d(Ae,{P:()=>h})},3888:(vt,Ae,k)=>{function h(Y){const ie=Y(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Ae,{d:()=>h})},2806:(vt,Ae,k)=>{k.d(Ae,{O:()=>ie,x:()=>N});var h=k(2416);let Y=null;function N(se){if(h.v.useDeprecatedSynchronousErrorHandling){const re=!Y;if(re&&(Y={errorThrown:!1,error:null}),se(),re){const{errorThrown:ye,error:we}=Y;if(Y=null,ye)throw we}}else se()}function ie(se){h.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=se)}},9672:(vt,Ae,k)=>{function h(Y,N,ie,se=0,re=!1){const ye=N.schedule(function(){ie(),re?Y.add(this.schedule(null,se)):this.unsubscribe()},se);if(Y.add(ye),!re)return ye}k.d(Ae,{f:()=>h})},4671:(vt,Ae,k)=>{function h(Y){return Y}k.d(Ae,{y:()=>h})},1144:(vt,Ae,k)=>{k.d(Ae,{z:()=>h});const h=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(vt,Ae,k)=>{k.d(Ae,{D:()=>Y});var h=k(576);function Y(N){return Symbol.asyncIterator&&(0,h.m)(N?.[Symbol.asyncIterator])}},576:(vt,Ae,k)=>{function h(Y){return"function"==typeof Y}k.d(Ae,{m:()=>h})},3670:(vt,Ae,k)=>{k.d(Ae,{c:()=>N});var h=k(8822),Y=k(576);function N(ie){return(0,Y.m)(ie[h.L])}},6495:(vt,Ae,k)=>{k.d(Ae,{T:()=>N});var h=k(2202),Y=k(576);function N(ie){return(0,Y.m)(ie?.[h.h])}},8239:(vt,Ae,k)=>{k.d(Ae,{t:()=>Y});var h=k(576);function Y(N){return(0,h.m)(N?.then)}},3260:(vt,Ae,k)=>{k.d(Ae,{L:()=>ie,Q:()=>N});var h=k(7582),Y=k(576);function N(se){return(0,h.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:we,done:pe}=yield(0,h.qq)(ye.read());if(pe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(we)}}finally{ye.releaseLock()}})}function ie(se){return(0,Y.m)(se?.getReader)}},4482:(vt,Ae,k)=>{k.d(Ae,{A:()=>Y,e:()=>N});var h=k(576);function Y(ie){return(0,h.m)(ie?.lift)}function N(ie){return se=>{if(Y(se))return se.lift(function(re){try{return ie(re,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(vt,Ae,k)=>{k.d(Ae,{U:()=>N,z:()=>Y});var h=k(4671);function Y(...ie){return N(ie)}function N(ie){return 0===ie.length?h.y:1===ie.length?ie[0]:function(re){return ie.reduce((ye,we)=>we(ye),re)}}},7849:(vt,Ae,k)=>{k.d(Ae,{h:()=>N});var h=k(2416),Y=k(3410);function N(ie){Y.z.setTimeout(()=>{const{onUnhandledError:se}=h.v;if(!se)throw ie;se(ie)})}},4532:(vt,Ae,k)=>{function h(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>h})},4650:(vt,Ae,k)=>{k.d(Ae,{$8M:()=>ra,$WT:()=>cr,$Z:()=>pw,AFp:()=>Hi,AaK:()=>we,BQk:()=>Tv,CHM:()=>Va,CRH:()=>Yn,CZH:()=>yu,CqO:()=>pb,D6c:()=>Xm,EJc:()=>cT,EpF:()=>Hw,F4k:()=>fb,FYo:()=>hh,FiY:()=>oa,GfV:()=>G0,Gpc:()=>H,JOm:()=>ri,KtG:()=>Ua,LFG:()=>nn,LSH:()=>Rl,Lbi:()=>Oc,Lck:()=>bm,MAs:()=>Yg,MMx:()=>Tm,MR2:()=>eD,NdJ:()=>Gw,OlP:()=>Kt,Oqu:()=>im,P3R:()=>oh,PXZ:()=>RI,Q6J:()=>Jf,QGY:()=>$w,Qsj:()=>$0,R0b:()=>$i,RDi:()=>Eg,Rgc:()=>et,SBq:()=>gc,Sil:()=>ba,Suo:()=>aI,TTD:()=>Yc,TgZ:()=>bv,X6Q:()=>_u,XFs:()=>pt,Xpm:()=>Mi,Xts:()=>By,Y36:()=>Bl,YKP:()=>f_,YNc:()=>Vw,Yjl:()=>Bt,Yz7:()=>dt,Z0I:()=>In,ZZ4:()=>Qm,_Bn:()=>Dm,_UZ:()=>jw,_Vd:()=>dh,_c5:()=>vT,_uU:()=>rm,aQg:()=>Bc,c2e:()=>Vm,cJS:()=>ft,cg1:()=>Sh,dDg:()=>MI,dqk:()=>Jt,eFA:()=>kI,eJc:()=>km,ekj:()=>Uv,eoX:()=>U_,f3M:()=>Rn,g9A:()=>TI,h0i:()=>Ac,hGG:()=>jn,hij:()=>ip,iGM:()=>jh,ifc:()=>ve,ip1:()=>P_,jDz:()=>g_,kL8:()=>Ah,lG2:()=>It,lqb:()=>kl,lri:()=>xn,n5z:()=>Wu,oAB:()=>X,oxw:()=>xv,q4F:()=>z0,qLn:()=>Bf,qOj:()=>Kf,qZA:()=>Qg,rWj:()=>vu,s9C:()=>Xg,sBO:()=>qm,s_b:()=>De,soG:()=>Nc,tb:()=>$m,tp0:()=>$s,uIk:()=>vh,vHH:()=>ge,vpe:()=>gn,wAp:()=>St,xp6:()=>jf,ynx:()=>Jg,z2F:()=>cd,zSh:()=>lh,zs3:()=>yc});var h=k(7579),Y=k(727),N=k(9751),ie=k(6451),se=k(3099);function re(s){for(let o in s)if(s[o]===re)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function we(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(we).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=re({__forward_ref__:re});function H(s){return s.__forward_ref__=H,s.toString=function(){return we(this())},s}function W(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===H}function be(s){return s&&!!s.\u0275providers}const ct="https://g.co/ng/security#xss";class ge extends Error{constructor(o,a){super(Re(o,a)),this.code=o}}function Re(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new ge(-201,!1)}function me(s,o){null==s&&function oe(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function dt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function Wt(s){return fn(s,Mn)||fn(s,Zr)}function In(s){return null!==Wt(s)}function fn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ar(s){return s&&(s.hasOwnProperty(Fr)||s.hasOwnProperty(Ir))?s[Fr]:null}const Mn=re({\u0275prov:re}),Fr=re({\u0275inj:re}),Zr=re({ngInjectableDef:re}),Ir=re({ngInjectorDef:re});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Kr;function yr(s){const o=Kr;return Kr=s,o}function Lr(s,o,a){const c=Wt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&pt.Optional?null:void 0!==o?o:void $e(we(s))}const Jt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hi={},Yr="__NG_DI_FLAG__",ur="ngTempTokenPath",Vr="ngTokenPath",Sn=/\n/gm,Qr="\u0275",ln="__source";let ks;function Zt(s){const o=ks;return ks=s,o}function Zi(s,o=pt.Default){if(void 0===ks)throw new ge(-203,!1);return null===ks?Lr(s,void 0,o):ks.get(s,o&pt.Optional?null:void 0,o)}function nn(s,o=pt.Default){return(function qc(){return Kr}()||Zi)(W(s),o)}function Rn(s,o=pt.Default){return nn(s,Hn(o))}function Hn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ai(s){const o=[];for(let a=0;a<s.length;a++){const c=W(s[a]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let d,g=pt.Default;for(let v=0;v<c.length;v++){const I=c[v],C=xi(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(nn(d,g))}else o.push(nn(c))}return o}function wn(s,o){return s[Yr]=o,s.prototype[Yr]=o,s}function xi(s){return s[Yr]}function L(s){return{toString:s}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),ve=(()=>{return(s=ve||(ve={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ve;var s})();const J={},Ve=[],bt=re({\u0275cmp:re}),Yt=re({\u0275dir:re}),Fn=re({\u0275pipe:re}),Cn=re({\u0275mod:re}),on=re({\u0275fac:re}),Gt=re({__NG_ELEMENT_ID__:re});let Cr=0;function Mi(s){return L(()=>{const o=wu(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||ve.Emulated,id:"c"+Cr++,styles:s.styles||Ve,_:null,schemas:s.schemas||null,tView:null};lf(a);const c=s.dependencies;return a.directiveDefs=ho(c,!1),a.pipeDefs=ho(c,!0),a})}function Aa(s){return gt(s)||Xt(s)}function de(s){return null!==s}function X(s){return L(()=>({type:s.type,bootstrap:s.bootstrap||Ve,declarations:s.declarations||Ve,imports:s.imports||Ve,exports:s.exports||Ve,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ht(s,o){if(null==s)return J;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}function It(s){return L(()=>{const o=wu(s);return lf(o),o})}function Bt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function gt(s){return s[bt]||null}function Xt(s){return s[Yt]||null}function Qt(s){return s[Fn]||null}function cr(s){const o=gt(s)||Xt(s)||Qt(s);return null!==o&&o.standalone}function $n(s,o){const a=s[Cn]||null;if(!a&&!0===o)throw new Error(`Type ${we(s)} does not have '\u0275mod' property.`);return a}function wu(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ve,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ht(s.inputs,o),outputs:ht(s.outputs)}}function lf(s){s.features?.forEach(o=>o(s))}function ho(s,o){if(!s)return null;const a=o?Qt:Aa;return()=>("function"==typeof s?s():s).map(c=>a(c)).filter(de)}const pi=0,We=1,Nt=2,En=3,gi=4,un=5,Gn=6,Fs=7,On=8,xa=9,fs=10,Vt=11,Ma=12,fo=13,ps=14,po=15,Ln=16,Go=17,gs=18,Yi=19,zo=20,vr=21,pn=22,Ra=1,Wc=2,qo=7,Ls=8,go=9,lr=10;function Xr(s){return Array.isArray(s)&&"object"==typeof s[Ra]}function ei(s){return Array.isArray(s)&&!0===s[Ra]}function Oa(s){return 0!=(4&s.flags)}function Wo(s){return s.componentOffset>-1}function Zc(s){return 1==(1&s.flags)}function mi(s){return!!s.template}function Iu(s){return 0!=(256&s[Nt])}function Qi(s,o){return s.hasOwnProperty(on)?s[on]:null}class mo{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yc(){return Pa}function Pa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Qc),Ed}function Ed(){const s=pf(this),o=s?.current;if(o){const a=s.previous;if(a===J)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Qc(s,o,a,c){const d=this.declaredInputs[a],g=pf(s)||function Na(s,o){return s[Vs]=o}(s,{previous:J,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new mo(C&&C.currentValue,o,I===J),s[c]=o}Yc.ngInherit=!0;const Vs="__ngSimpleChanges__";function pf(s){return s[Vs]||null}const Br=function(s,o,a){};function dr(s){for(;Array.isArray(s);)s=s[pi];return s}function vs(s,o){return dr(o[s])}function hr(s,o){return dr(o[s.index])}function Cd(s,o){return s.data[o]}function Xn(s,o){const a=o[s];return Xr(a)?a:a[pi]}function _s(s){return 64==(64&s[Nt])}function Bs(s,o){return null==o?null:s[o]}function Yo(s){s[gs]=0}function Fa(s,o){s[un]+=o;let a=s,c=s[En];for(;null!==c&&(1===o&&1===a[un]||-1===o&&0===a[un]);)c[un]+=o,a=c,c=c[En]}const Mt={lFrame:el(null),bindingsEnabled:!0};function Au(){return Mt.bindingsEnabled}function he(){return Mt.lFrame.lView}function kt(){return Mt.lFrame.tView}function Va(s){return Mt.lFrame.contextLView=s,s[On]}function Ua(s){return Mt.lFrame.contextLView=null,s}function er(){let s=yo();for(;null!==s&&64===s.type;)s=s.parent;return s}function yo(){return Mt.lFrame.currentTNode}function jr(s,o){const a=Mt.lFrame;a.currentTNode=s,a.isParent=o}function Ad(){return Mt.lFrame.isParent}function Mu(){Mt.lFrame.isParent=!1}function vo(){return Mt.lFrame.bindingIndex++}function Ru(s,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=s,qn(o)}function qn(s){Mt.lFrame.currentDirectiveIndex=s}function Xc(){return Mt.lFrame.currentQueryIndex}function Ou(s){Mt.lFrame.currentQueryIndex=s}function Md(s){const o=s[We];return 2===o.type?o.declTNode:1===o.type?s[Gn]:null}function Pu(s,o,a){if(a&pt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&pt.Host||(d=Md(g),null===d||(g=g[po],10&d.type))););if(null===d)return!1;o=d,s=g}const c=Mt.lFrame=Ha();return c.currentTNode=o,c.lView=s,!0}function Nu(s){const o=Ha(),a=s[We];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ha(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?el(s):o}function el(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function $a(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Rd=$a;function ku(){const s=$a();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _r(){return Mt.lFrame.selectedIndex}function Es(s){Mt.lFrame.selectedIndex=s}function Dn(){const s=Mt.lFrame;return Cd(s.tView,s.selectedIndex)}function Vu(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:R}=g;v&&(s.contentHooks??(s.contentHooks=[])).push(-a,v),I&&((s.contentHooks??(s.contentHooks=[])).push(a,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,I)),C&&(s.viewHooks??(s.viewHooks=[])).push(-a,C),x&&((s.viewHooks??(s.viewHooks=[])).push(a,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,x)),null!=R&&(s.destroyHooks??(s.destroyHooks=[])).push(a,R)}}function tl(s,o,a){rl(s,o,3,a)}function nl(s,o,a,c){(3&s[Nt])===a&&rl(s,o,a,c)}function Pd(s,o){let a=s[Nt];(3&a)===o&&(a&=2047,a+=1,s[Nt]=a)}function rl(s,o,a,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[gs]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[gs]+=65536),(I<g||-1==g)&&(Jo(s,a,o,C),s[gs]=(4294901760&s[gs])+C+2),C++}function Jo(s,o,a,c){const d=a[c]<0,g=a[c+1],I=s[d?-a[c]:a[c]];if(d){if(s[Nt]>>11<s[gs]>>16&&(3&s[Nt])===o){s[Nt]+=2048,Br(4,I,g);try{g.call(I)}finally{Br(5,I,g)}}}else{Br(4,I,g);try{g.call(I)}finally{Br(5,I,g)}}}const Xo=-1;class Is{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function ea(s,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=a[++c];Io(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function il(s){return 3===s||4===s||6===s}function Io(s){return 64===s.charCodeAt(0)}function Co(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||ju(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function ju(s,o,a,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Do(s){return s!==Xo}function js(s){return 32767&s}function bo(s,o){let a=function Nd(s){return s>>16}(s),c=o;for(;a>0;)c=c[po],a--;return c}let Hu=!0;function za(s){const o=Hu;return Hu=s,o}const $u=255,kd=5;let To=0;const Oi={};function sl(s,o){const a=na(s,o);if(-1!==a)return a;const c=o[We];c.firstCreatePass&&(s.injectorIndex=o.length,ta(c.data,s),ta(o,null),ta(c.blueprint,null));const d=Fd(s,o),g=s.injectorIndex;if(Do(d)){const v=js(d),I=bo(d,o),C=I[We].data;for(let x=0;x<8;x++)o[g+x]=I[v+x]|C[v+x]}return o[g+8]=d,g}function ta(s,o){s.push(0,0,0,0,0,0,0,0,o)}function na(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Fd(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Za(d),null===c)return Xo;if(a++,d=d[po],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Xo}function dn(s,o,a){!function Cs(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Gt)&&(c=a[Gt]),null==c&&(c=a[Gt]=To++);const d=c&$u;o.data[s+(d>>kd)]|=1<<d}(s,o,a)}function Gu(s,o,a){if(a&pt.Optional||void 0!==s)return s;$e()}function ol(s,o,a,c){if(a&pt.Optional&&void 0===c&&(c=null),!(a&(pt.Self|pt.Host))){const d=s[xa],g=yr(void 0);try{return d?d.get(o,c,a&pt.Optional):Lr(o,c,a&pt.Optional)}finally{yr(g)}}return Gu(c,0,a)}function zu(s,o,a,c=pt.Default,d){if(null!==s){if(1024&o[Nt]){const v=function ul(s,o,a,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[Nt]&&!(256&v[Nt]);){const I=qu(g,v,a,c|pt.Self,Oi);if(I!==Oi)return I;let C=g.parent;if(!C){const x=v[vr];if(x){const R=x.get(a,Oi,c);if(R!==Oi)return R}C=Za(v),v=v[po]}g=C}return d}(s,o,a,c,Oi);if(v!==Oi)return v}const g=qu(s,o,a,c,Oi);if(g!==Oi)return g}return ol(o,a,c,d)}function qu(s,o,a,c,d){const g=function al(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Gt)?s[Gt]:void 0;return"number"==typeof o?o>=0?o&$u:wf:o}(a);if("function"==typeof g){if(!Pu(o,s,c))return c&pt.Host?Gu(d,0,c):ol(o,a,c,d);try{const v=g(c);if(null!=v||c&pt.Optional)return v;$e()}finally{Rd()}}else if("number"==typeof g){let v=null,I=na(s,o),C=Xo,x=c&pt.Host?o[Ln][Gn]:null;for((-1===I||c&pt.SkipSelf)&&(C=-1===I?Fd(s,o):o[I+8],C!==Xo&&Wa(c,!1)?(v=o[We],I=js(C),o=bo(C,o)):I=-1);-1!==I;){const R=o[We];if(qa(g,I,R.data)){const F=tr(I,o,a,v,c,x);if(F!==Oi)return F}C=o[I+8],C!==Xo&&Wa(c,o[We].data[I+8]===x)&&qa(g,I,o)?(v=R,I=js(C),o=bo(C,o)):I=-1}}return d}function tr(s,o,a,c,d,g){const v=o[We],I=v.data[s+8],R=So(I,v,a,null==c?Wo(I)&&Hu:c!=v&&0!=(3&I.type),d&pt.Host&&g===I);return null!==R?Vn(o,v,R,I):Oi}function So(s,o,a,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,R=g>>20,G=d?I+R:s.directiveEnd;for(let Q=c?I:I+R;Q<G;Q++){const _e=v[Q];if(Q<C&&a===_e||Q>=C&&_e.type===a)return Q}if(d){const Q=v[C];if(Q&&mi(Q)&&Q.type===a)return C}return null}function Vn(s,o,a,c){let d=s[a];const g=o.data;if(function dg(s){return s instanceof Is}(d)){const v=d;v.resolving&&function Pe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ge(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(g[a]));const I=za(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?yr(v.injectImpl):null;Pu(s,c,pt.Default);try{d=s[a]=v.factory(void 0,g,s,c),o.firstCreatePass&&a>=c.directiveStart&&function lg(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Pa(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==C&&yr(C),za(I),v.resolving=!1,Rd()}}return d}function qa(s,o,a){return!!(a[o+(s>>kd)]&1<<s)}function Wa(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Ds{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return zu(this._tNode,this._lView,o,Hn(c),a)}}function wf(){return new Ds(er(),he())}function Wu(s){return L(()=>{const o=s.prototype.constructor,a=o[on]||Ao(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[on]||Ao(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Ao(s){return je(s)?()=>{const o=Ao(W(s));return o&&o()}:Qi(s)}function Za(s){const o=s[We],a=o.type;return 2===a?o.declTNode:1===a?s[Gn]:null}function ra(s){return function Ld(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(il(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(er(),s)}const ia="__parameters__";function Mo(s,o,a){return L(()=>{const c=function xo(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,x,R){const F=C.hasOwnProperty(ia)?C[ia]:Object.defineProperty(C,ia,{value:[]})[ia];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Kt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Xi(s,o){s.forEach(a=>Array.isArray(a)?Xi(a,o):o(a))}function bf(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Oo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Hr(s,o,a){let c=en(s,o);return c>=0?s[1|c]=a:(c=~c,function hl(s,o,a,c){let d=s.length;if(d==o)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Tr(s,o){const a=en(s,o);if(a>=0)return s[1|a]}function en(s,o){return function st(s,o,a){let c=0,d=s.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:c=g+1}return~(d<<a)}(s,o,1)}const oa=wn(Mo("Optional"),8),$s=wn(Mo("SkipSelf"),4);var ri=(()=>((ri=ri||{})[ri.Important=1]="Important",ri[ri.DashCase=2]="DashCase",ri))();const qd=new Map;let Wd=0;const Z="__ngContext__";function te(s,o){Xr(o)?(s[Z]=o[zo],function Zd(s){qd.set(s[zo],s)}(o)):s[Z]=o}let pr;function rc(s,o){return pr(s,o)}function nu(s){const o=s[En];return ei(o)?o[En]:o}function ha(s){return sc(s[fo])}function ru(s){return sc(s[gi])}function sc(s){for(;null!==s&&!ei(s);)s=s[gi];return s}function iu(s,o,a,c,d){if(null!=c){let g,v=!1;ei(c)?g=c:Xr(c)&&(v=!0,c=c[pi]);const I=dr(c);0===s&&null!==a?null==d?Il(o,a,I):oc(o,a,I,d||null,!0):1===s&&null!==a?oc(o,a,I,d||null,!0):2===s?function ma(s,o,a){const c=fa(s,o);c&&function Oy(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function wg(s,o,a,c,d){const g=a[qo];g!==dr(a)&&iu(o,s,c,g,d);for(let I=lr;I<a.length;I++){const C=a[I];au(C[We],C,s,o,c,g)}}(o,s,g,a,d)}}function Yd(s,o,a){return s.createElement(o,a)}function mg(s,o){const a=s[go],c=a.indexOf(o),d=o[En];512&o[Nt]&&(o[Nt]&=-513,Fa(d,-1)),a.splice(c,1)}function El(s,o){if(s.length<=lr)return;const a=lr+o,c=s[a];if(c){const d=c[Go];null!==d&&d!==s&&mg(d,c),o>0&&(s[a-1][gi]=c[gi]);const g=Oo(s,lr+o);!function Ay(s,o){au(s,o,o[Vt],2,null,null),o[pi]=null,o[Gn]=null}(c[We],c);const v=g[Yi];null!==v&&v.detachView(g[We]),c[En]=null,c[gi]=null,c[Nt]&=-65}return c}function yg(s,o){if(!(128&o[Nt])){const a=o[Vt];a.destroyNode&&au(s,o,a,3,null,null),function Af(s){let o=s[fo];if(!o)return ou(s[We],s);for(;o;){let a=null;if(Xr(o))a=o[fo];else{const c=o[lr];c&&(a=c)}if(!a){for(;o&&!o[gi]&&o!==s;)Xr(o)&&ou(o[We],o),o=o[En];null===o&&(o=s),Xr(o)&&ou(o[We],o),a=o&&o[gi]}o=a}}(o)}}function ou(s,o){if(!(128&o[Nt])){o[Nt]&=-65,o[Nt]|=128,function Ry(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Is)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];Br(4,I,C);try{C.call(I)}finally{Br(5,I,C)}}else{Br(4,d,g);try{g.call(d)}finally{Br(5,d,g)}}}}}(s,o),function Qd(s,o){const a=s.cleanup,c=o[Fs];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Fs]=null}}(s,o),1===o[We].type&&o[Vt].destroy();const a=o[Go];if(null!==a&&ei(o[En])){a!==o[En]&&mg(a,o);const c=o[Yi];null!==c&&c.detachView(s)}!function E(s){qd.delete(s[zo])}(o)}}function Ks(s,o,a){return function Jd(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[pi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===ve.None||g===ve.Emulated)return null}return hr(c,a)}}(s,o.parent,a)}function oc(s,o,a,c,d){s.insertBefore(o,a,c,d)}function Il(s,o,a){s.appendChild(o,a)}function xf(s,o,a,c,d){null!==c?oc(s,o,a,c,d):Il(s,o,a)}function fa(s,o){return s.parentNode(o)}let pa,Tl,lc,Mf=function Cl(s,o,a){return 40&s.type?hr(s,a):null};function uc(s,o,a,c){const d=Ks(s,c,o),g=o[Vt],I=function eh(s,o,a){return Mf(s,o,a)}(c.parent||o[Gn],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)xf(g,d,a[C],I,!1);else xf(g,d,a,I,!1);void 0!==pa&&pa(g,c,o,a,d)}function Dl(s,o){if(null!==o){const a=o.type;if(3&a)return hr(o,s);if(4&a)return ga(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Dl(s,c);{const d=s[o.index];return ei(d)?ga(-1,d):dr(d)}}if(32&a)return rc(o,s)()||dr(s[o.index]);{const c=vg(s,o);return null!==c?Array.isArray(c)?c[0]:Dl(nu(s[Ln]),c):Dl(s,o.next)}}return null}function vg(s,o){return null!==o?s[Ln][Gn].projection[o.projection]:null}function ga(s,o){const a=lr+s+1;if(a<o.length){const c=o[a],d=c[We].firstChild;if(null!==d)return Dl(c,d)}return o[qo]}function Rf(s,o,a,c,d,g,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&te(dr(I),c),a.flags|=2),32!=(32&a.flags))if(8&C)Rf(s,o,a.child,c,d,g,!1),iu(o,s,d,I,g);else if(32&C){const x=rc(a,c);let R;for(;R=x();)iu(o,s,d,R,g);iu(o,s,d,I,g)}else 16&C?Of(s,o,c,a,d,g):iu(o,s,d,I,g);a=v?a.projectionNext:a.next}}function au(s,o,a,c,d,g){Rf(a,c,s.firstChild,o,d,g,!1)}function Of(s,o,a,c,d,g){const v=a[Ln],C=v[Gn].projection[c.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)iu(o,s,d,C[x],g);else Rf(s,o,C,v[En],d,g,!0)}function ya(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function va(s,o,a){const{mergedAttrs:c,classes:d,styles:g}=a;null!==c&&ea(s,o,c),null!==d&&ya(s,o,d),null!==g&&function Ys(s,o,a){s.setAttribute(o,"style",a)}(s,o,g)}function Eg(s){Tl=s}function nh(s){return function Nf(){if(void 0===lc&&(lc=null,Jt.trustedTypes))try{lc=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return lc}()?.createScriptURL(s)||s}class Cg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}function xr(s){return s instanceof Cg?s.changingThisBreaksApplicationSecurity:s}function Ea(s,o){const a=function Lo(s){return s instanceof Cg&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ct})`)}return a===o}const rh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function Rl(s){const o=pc();return o?o.sanitize(Kn.URL,s)||"":Ea(s,"URL")?xr(s):function xl(s){return(s=String(s)).match(rh)?s:"unsafe:"+s}(Oe(s))}function Lf(s){const o=pc();if(o)return nh(o.sanitize(Kn.RESOURCE_URL,s)||"");if(Ea(s,"ResourceURL"))return nh(xr(s));throw new ge(904,!1)}function oh(s,o,a){return function Ol(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Lf:Rl}(o,a)(s)}function pc(){const s=he();return s&&s[Ma]}const By=new Kt("ENVIRONMENT_INITIALIZER"),N0=new Kt("INJECTOR",-1),Pl=new Kt("INJECTOR_DEF_TYPES");class ah{get(o,a=hi){if(a===hi){const c=new Error(`NullInjectorError: No provider for ${we(o)}!`);throw c.name="NullInjectorError",c}return a}}function eD(s){return{\u0275providers:s}}function tD(...s){return{\u0275providers:uh(0,s),\u0275fromNgModule:!0}}function uh(s,...o){const a=[],c=new Set;let d;return Xi(o,g=>{const v=g;jy(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&ch(d,a),a}function ch(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Hy(d,g=>{o.push(g)})}}function jy(s,o,a,c){if(!(s=W(s)))return!1;let d=null,g=ar(s);const v=!g&&gt(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(g=ar(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of C)jy(x,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let x;c.add(d);try{Xi(g.imports,R=>{jy(R,o,a,c)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&ch(x,o)}if(!I){const x=Qi(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Ve},{provide:Pl,useValue:d,multi:!0},{provide:By,useValue:()=>nn(d),multi:!0})}const C=g.providers;null==C||I||Hy(C,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function Hy(s,o){for(let a of s)be(a)&&(a=a.\u0275providers),Array.isArray(a)?Hy(a,o):o(a)}const nD=re({provide:String,useValue:re});function $y(s){return null!==s&&"object"==typeof s&&nD in s}function Nl(s){return"function"==typeof s}const lh=new Kt("Set Injector scope."),cu={},iD={};let zy;function Mg(){return void 0===zy&&(zy=new ah),zy}class kl{}class F0 extends kl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uf(o,v=>this.processProvider(v)),this.records.set(N0,Fl(void 0,this)),d.has("environment")&&this.records.set(kl,Fl(void 0,this));const g=this.records.get(lh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Pl.multi,Ve,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Zt(this),c=yr(void 0);try{return o()}finally{Zt(a),yr(c)}}get(o,a=hi,c=pt.Default){this.assertNotDestroyed(),c=Hn(c);const d=Zt(this),g=yr(void 0);try{if(!(c&pt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function V0(s){return"function"==typeof s||"object"==typeof s&&s instanceof Kt}(o)&&Wt(o);I=C&&this.injectableDefInScope(C)?Fl(qy(o),cu):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&pt.Self?Mg():this.parent).get(o,a=c&pt.Optional&&a===hi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[ur]=v[ur]||[]).unshift(we(o)),d)throw v;return function Ur(s,o,a,c){const d=s[ur];throw o[ln]&&d.unshift(o[ln]),s.message=function U(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Qr?s.slice(2):s;let d=we(o);if(Array.isArray(o))d=o.map(we).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):we(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(Sn,"\n  ")}`}("\n"+s.message,d,a,c),s[Vr]=d,s[ur]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{yr(g),Zt(d)}}resolveInjectorInitializers(){const o=Zt(this),a=yr(void 0);try{const c=this.get(By.multi,Ve,pt.Self);for(const d of c)d()}finally{Zt(o),yr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(we(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(o){let a=Nl(o=W(o))?o:W(o&&o.provide);const c=function oD(s){return $y(s)?Fl(void 0,s.useValue):Fl(L0(s),cu)}(o);if(Nl(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Fl(void 0,cu,!0),d.factory=()=>Ai(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===cu&&(a.value=iD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Wy(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function qy(s){const o=Wt(s),a=null!==o?o.factory:Qi(s);if(null!==a)return a;if(s instanceof Kt)throw new ge(204,!1);if(s instanceof Function)return function sD(s){const o=s.length;if(o>0)throw function Ku(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new ge(204,!1);const a=function kn(s){return s&&(s[Mn]||s[Zr])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ge(204,!1)}function L0(s,o,a){let c;if(Nl(s)){const d=W(s);return Qi(d)||qy(d)}if($y(s))c=()=>W(s.useValue);else if(function rD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ai(s.deps||[]));else if(function k0(s){return!(!s||!s.useExisting)}(s))c=()=>nn(W(s.useExisting));else{const d=W(s&&(s.useClass||s.provide));if(!function aD(s){return!!s.deps}(s))return Qi(d)||qy(d);c=()=>new d(...Ai(s.deps))}return c}function Fl(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Uf(s,o){for(const a of s)Array.isArray(a)?Uf(a,o):a&&be(a)?Uf(a.\u0275providers,o):o(a)}class Rg{}class U0{}class Og{resolveComponentFactory(o){throw function uD(s){const o=Error(`No component factory found for ${we(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let dh=(()=>{class s{}return s.NULL=new Og,s})();function j0(){return lu(er(),he())}function lu(s,o){return new gc(hr(s,o))}let gc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=j0,s})();function H0(s){return s instanceof gc?s.nativeElement:s}class hh{}let $0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function cD(){const s=he(),a=Xn(er().index,s);return(Xr(a)?a:s)[Vt]}(),s})(),lD=(()=>{class s{}return s.\u0275prov=dt({token:s,providedIn:"root",factory:()=>null}),s})();class G0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const z0=new G0("15.2.9"),Zy={},Pg="ngOriginalError";function Ky(s){return s[Pg]}class Bf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ky(o);for(;a&&Ky(a);)a=Ky(a);return a||null}}function mc(s){return s instanceof Function?s():s}function Q0(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}a=d+1}}const J0="ng-template";function X0(s,o,a){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const v=s[c++];if(a&&"class"===g&&-1!==Q0(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Ng(s){return 4===s.type&&s.value!==J0}function ew(s,o,a){return o===(4!==s.type||a?s.value:J0)}function fh(s,o,a){let c=4;const d=s.attrs||[],g=function Fg(s){for(let o=0;o<s.length;o++)if(il(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!ew(s,C,a)||""===C&&1===o.length){if(As(c))return!1;v=!0}}else{const x=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!X0(s.attrs,x,a)){if(As(c))return!1;v=!0}continue}const F=yD(8&c?"class":C,d,Ng(s),a);if(-1===F){if(As(c))return!1;v=!0;continue}if(""!==x){let G;G=F>g?"":d[F+1].toLowerCase();const Q=8&c?G:null;if(Q&&-1!==Q0(Q,x,0)||2&c&&x!==G){if(As(c))return!1;v=!0}}}}else{if(!v&&!As(c)&&!As(C))return!1;if(v&&As(C))continue;v=!1,c=C|1&c}}return As(c)||v}function As(s){return 0==(1&s)}function yD(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function tw(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Yy(s,o,a=!1){for(let c=0;c<o.length;c++)if(fh(s,o[c],a))return!0;return!1}function rw(s,o){return s?":not("+o.trim()+")":o}function vD(s){let o=s[0],a=1,c=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&c){const I=s[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!As(v)&&(o+=rw(g,d),d=""),c=v,g=g||!As(c);a++}return""!==d&&(o+=rw(g,d)),o}const jt={};function jf(s){iw(kt(),he(),_r()+s,!1)}function iw(s,o,a,c){if(!c)if(3==(3&o[Nt])){const g=s.preOrderCheckHooks;null!==g&&tl(o,g,a)}else{const g=s.preOrderHooks;null!==g&&nl(o,g,0,a)}Es(a)}function uw(s,o=null,a=null,c){const d=cw(s,o,a,c);return d.resolveInjectorInitializers(),d}function cw(s,o=null,a=null,c,d=new Set){const g=[a||Ve,tD(s)];return c=c||("object"==typeof s?void 0:we(s)),new F0(g,o||Mg(),c||null,d)}let yc=(()=>{class s{static create(a,c){if(Array.isArray(a))return uw({name:""},c,a,"");{const d=a.name??"";return uw({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=hi,s.NULL=new ah,s.\u0275prov=dt({token:s,providedIn:"any",factory:()=>nn(N0)}),s.__NG_ELEMENT_ID__=-1,s})();function Bl(s,o=pt.Default){const a=he();return null===a?nn(s,o):zu(er(),a,W(s),o)}function pw(){throw new Error("invalid")}function gw(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const v=s.data[g];Ou(a[c]),v.contentQueries(2,o[g],g)}}}function Hf(s,o,a,c,d,g,v,I,C,x,R){const F=o.blueprint.slice();return F[pi]=d,F[Nt]=76|c,(null!==R||s&&1024&s[Nt])&&(F[Nt]|=1024),Yo(F),F[En]=F[po]=s,F[On]=a,F[fs]=v||s&&s[fs],F[Vt]=I||s&&s[Vt],F[Ma]=C||s&&s[Ma]||null,F[xa]=x||s&&s[xa]||null,F[Gn]=g,F[zo]=function ts(){return Wd++}(),F[vr]=R,F[Ln]=2==o.type?s[Ln]:F,F}function gh(s,o,a,c,d){let g=s.data[o];if(null===g)g=function mw(s,o,a,c,d){const g=yo(),v=Ad(),C=s.data[o]=function VD(s,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(s,o,a,c,d),function xd(){return Mt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function xu(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return jr(g,!0),g}function fe(s,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function rv(s,o,a){Nu(o);try{const c=s.viewQuery;null!==c&&zf(1,c,a);const d=s.template;null!==d&&yw(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gw(s,o),s.staticViewQueries&&zf(2,s.viewQuery,a);const g=s.components;null!==g&&function LD(s,o){for(let a=0;a<o.length;a++)WD(s,o[a])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Nt]&=-5,ku()}}function jl(s,o,a,c){const d=o[Nt];if(128!=(128&d)){Nu(o);try{Yo(o),function Ji(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&yw(s,o,a,2,c);const v=3==(3&d);if(v){const x=s.preOrderCheckHooks;null!==x&&tl(o,x,null)}else{const x=s.preOrderHooks;null!==x&&nl(o,x,0,null),Pd(o,0)}if(function qD(s){for(let o=ha(s);null!==o;o=ru(o)){if(!o[Wc])continue;const a=o[go];for(let c=0;c<a.length;c++){const d=a[c];512&d[Nt]||Fa(d[En],1),d[Nt]|=512}}}(o),function zD(s){for(let o=ha(s);null!==o;o=ru(o))for(let a=lr;a<o.length;a++){const c=o[a],d=c[We];_s(c)&&jl(d,c,d.template,c[On])}}(o),null!==s.contentQueries&&gw(s,o),v){const x=s.contentCheckHooks;null!==x&&tl(o,x)}else{const x=s.contentHooks;null!==x&&nl(o,x,1),Pd(o,1)}!function kD(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Es(~d);else{const g=d,v=a[++c],I=a[++c];Ru(v,g),I(2,o[g])}}}finally{Es(-1)}}(s,o);const I=s.components;null!==I&&function FD(s,o){for(let a=0;a<o.length;a++)Cw(s,o[a])}(o,I);const C=s.viewQuery;if(null!==C&&zf(2,C,c),v){const x=s.viewCheckHooks;null!==x&&tl(o,x)}else{const x=s.viewHooks;null!==x&&nl(o,x,2),Pd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Nt]&=-41,512&o[Nt]&&(o[Nt]&=-513,Fa(o[En],-1))}finally{ku()}}}function yw(s,o,a,c,d){const g=_r(),v=2&c;try{Es(-1),v&&o.length>pn&&iw(s,o,pn,!1),Br(v?2:0,d),a(c,d)}finally{Es(g),Br(v?3:1,d)}}function iv(s,o,a){if(Oa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function sv(s,o,a){Au()&&(function ax(s,o,a,c){const d=a.directiveStart,g=a.directiveEnd;Wo(a)&&function GD(s,o,a){const c=hr(o,s),d=ov(a),g=s[fs],v=Bg(s,Hf(s,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));s[o.index]=v}(o,a,s.data[d+a.componentOffset]),s.firstCreatePass||sl(a,o),te(c,o);const v=a.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],x=Vn(o,s,I,a);te(x,o),null!==v&&Ug(0,I-d,x,C,0,v),mi(C)&&(Xn(a.index,o)[On]=Vn(o,s,I,a))}}(s,o,a,hr(a,o)),64==(64&a.flags)&&$D(s,o,a))}function Vg(s,o,a=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(o,s):s[v];s[d++]=I}}}function ov(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=$f(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function $f(s,o,a,c,d,g,v,I,C,x){const R=pn+c,F=R+d,G=function oi(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:jt);return a}(R,F),Q="function"==typeof x?x():x;return G[We]={type:s,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function Gf(s,o,a,c){const d=qf(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&jg(s).push(c,d.length-1))}function UD(s,o,a,c){for(let d in s)if(s.hasOwnProperty(d)){a=null===a?{}:a;const g=s[d];null===c?_w(a,o,d,g):c.hasOwnProperty(d)&&_w(a,o,c[d],g)}return a}function _w(s,o,a,c){s.hasOwnProperty(a)?s[a].push(o,c):s[a]=[o,c]}function Xs(s,o,a,c,d,g,v,I){const C=hr(o,a);let R,x=o.inputs;!I&&null!=x&&(R=x[c])?(Hg(s,a,R,c,d),Wo(o)&&function BD(s,o){const a=Xn(o,s);16&a[Nt]||(a[Nt]|=32)}(a,o.index)):3&o.type&&(c=function ix(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}function ww(s,o,a,c){if(Au()){const d=null===c?null:{"":-1},g=function Hl(s,o){const a=s.directiveRegistry;let c=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(Yy(o,v.selectors,!1))if(c||(c=[]),mi(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),mh(s,o,I.length)}else c.unshift(v),mh(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(s,a);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&HD(s,o,a,v,d,I),d&&function cn(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new ge(-301,!1);c.push(o[d],g)}}}(a,c,d)}a.mergedAttrs=Co(a.mergedAttrs,a.attrs)}function HD(s,o,a,c,d,g){for(let x=0;x<c.length;x++)dn(sl(a,o),s,c[x].type);!function uv(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,c.length);for(let x=0;x<c.length;x++){const R=c[x];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=fe(s,o,c.length,null);for(let x=0;x<c.length;x++){const R=c[x];a.mergedAttrs=Co(a.mergedAttrs,R.hostAttrs),Ew(s,a,o,C,R),wc(C,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),v=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function av(s,o,a){const d=o.directiveEnd,g=s.data,v=o.attrs,I=[];let C=null,x=null;for(let R=o.directiveStart;R<d;R++){const F=g[R],G=a?a.get(F):null,_e=G?G.outputs:null;C=UD(F.inputs,R,C,G?G.inputs:null),x=UD(F.outputs,R,x,_e);const Ue=null===C||null===v||Ng(o)?null:lv(C,R,v);I.push(Ue)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=x}(s,a,g)}function $D(s,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function cg(){return Mt.lFrame.currentDirectiveIndex}();try{Es(g);for(let I=c;I<d;I++){const C=s.data[I],x=o[I];qn(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&ux(C,x)}}finally{Es(-1),qn(v)}}function ux(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function mh(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function wc(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;mi(o)&&(a[""]=s)}}function Ew(s,o,a,c,d){s.data[c]=d;const g=d.factory||(d.factory=Qi(d.type)),v=new Is(g,mi(d),Bl);s.blueprint[c]=v,a[c]=v,function sx(s,o,a,c,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function ox(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,g)}}(s,o,c,fe(s,a,d.hostVars,jt),d)}function hn(s,o,a,c,d,g){const v=hr(s,o);!function cv(s,o,a,c,d,g,v){if(null==g)s.removeAttribute(o,d,a);else{const I=null==v?Oe(g):v(g,c||"",d);s.setAttribute(o,d,I,a)}}(o[Vt],v,g,s.value,a,c,d)}function Ug(s,o,a,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const x=v[C++],R=v[C++],F=v[C++];null!==I?c.setInput(a,F,x,R):a[R]=F}}}function lv(s,o,a){let c=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Iw(s,o,a,c){return[s,!0,!1,o,null,0,c,a,null,null]}function Cw(s,o){const a=Xn(o,s);if(_s(a)){const c=a[We];48&a[Nt]?jl(c,a,c.template,a[On]):a[un]>0&&dv(a)}}function dv(s){for(let c=ha(s);null!==c;c=ru(c))for(let d=lr;d<c.length;d++){const g=c[d];if(_s(g))if(512&g[Nt]){const v=g[We];jl(v,g,v.template,g[On])}else g[un]>0&&dv(g)}const a=s[We].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Xn(a[c],s);_s(d)&&d[un]>0&&dv(d)}}function WD(s,o){const a=Xn(o,s),c=a[We];(function ZD(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),rv(c,a,a[On])}function Bg(s,o){return s[fo]?s[ps][gi]=o:s[fo]=o,s[ps]=o,o}function wr(s){for(;s;){s[Nt]|=32;const o=nu(s);if(Iu(s)&&!o)return s;s=o}return null}function $l(s,o,a,c=!0){const d=o[fs];d.begin&&d.begin();try{jl(s,o,s.template,a)}catch(v){throw c&&Tw(o,v),v}finally{d.end&&d.end()}}function zf(s,o,a){Ou(0),o(s,a)}function qf(s){return s[Fs]||(s[Fs]=[])}function jg(s){return s.cleanup||(s.cleanup=[])}function Tw(s,o){const a=s[xa],c=a?a.get(Bf,null):null;c&&c.handleError(o)}function Hg(s,o,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],C=o[v],x=s.data[v];null!==x.setInput?x.setInput(C,d,c,I):C[I]=d}}function $g(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=pe(d,I):2==g&&(c=pe(c,I+": "+o[++v]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}function Ec(s,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(dr(g)),ei(g))for(let I=lr;I<g.length;I++){const C=g[I],x=C[We].firstChild;null!==x&&Ec(C[We],C,x,c)}const v=a.type;if(8&v)Ec(s,o,a.child,c);else if(32&v){const I=rc(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=vg(o,a);if(Array.isArray(I))c.push(...I);else{const C=nu(o[Ln]);Ec(C[We],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class yh{get rootNodes(){const o=this._lView,a=o[We];return Ec(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(o){this._lView[On]=o}get destroyed(){return 128==(128&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[En];if(ei(o)){const a=o[Ls],c=a?a.indexOf(this):-1;c>-1&&(El(o,c),Oo(a,c))}this._attachedToViewContainer=!1}yg(this._lView[We],this._lView)}onDestroy(o){Gf(this._lView[We],this._lView,null,o)}markForCheck(){wr(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-65}reattach(){this._lView[Nt]|=64}detectChanges(){$l(this._lView[We],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xy(s,o){au(s,o,o[Vt],2,null,null)}(this._lView[We],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=o}}class Gg extends yh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;$l(o[We],o,o[On],!1)}checkNoChanges(){}get context(){return null}}class fv extends dh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=gt(o);return new Wf(a,this.ngModule)}}function Sw(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class YD{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Hn(c);const d=this.injector.get(o,Zy,c);return d!==Zy||a===Zy?d:this.parentInjector.get(o,a,c)}}class Wf extends U0{get inputs(){return Sw(this.componentDef.inputs)}get outputs(){return Sw(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function _D(s){return s.map(vD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof kl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new YD(o,g):o,I=v.get(hh,null);if(null===I)throw new ge(407,!1);const C=v.get(lD,null),x=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function vw(s,o,a){return s.selectRootElement(o,a===ve.ShadowDom)}(x,c,this.componentDef.encapsulation):Yd(x,R,function KD(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,Q=$f(0,null,null,1,0,null,null,null,null,null),_e=Hf(null,Q,null,G,null,null,I,x,C,v,null);let Ue,Ye;Nu(_e);try{const ut=this.componentDef;let Ct,xe=null;ut.findHostDirectiveDefs?(Ct=[],xe=new Map,ut.findHostDirectiveDefs(ut,Ct,xe),Ct.push(ut)):Ct=[ut];const Pt=function Mw(s,o){const a=s[We],c=pn;return s[c]=o,gh(a,c,2,"#host",null)}(_e,F),Tn=function pv(s,o,a,c,d,g,v,I){const C=d[We];!function Rw(s,o,a,c){for(const d of s)o.mergedAttrs=Co(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&($g(o,o.mergedAttrs,!0),null!==a&&va(c,a,o))}(c,s,o,v);const x=g.createRenderer(o,a),R=Hf(d,ov(a),null,a.onPush?32:16,d[s.index],s,g,x,I||null,null,null);return C.firstCreatePass&&mh(C,s,c.length-1),Bg(d,R),d[s.index]=R}(Pt,F,ut,Ct,_e,I,x);Ye=Cd(Q,pn),F&&function QD(s,o,a,c){if(c)ea(s,a,["ng-version",z0.full]);else{const{attrs:d,classes:g}=function wD(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&a.push(g);else{if(!As(d))break;d=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&ea(s,a,d),g&&g.length>0&&ya(s,a,g.join(" "))}}(x,ut,F,c),void 0!==a&&function gv(s,o,a){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=a[d];c.push(null!=g?Array.from(g):null)}}(Ye,this.ngContentSelectors,a),Ue=function Zf(s,o,a,c,d,g){const v=er(),I=d[We],C=hr(v,d);HD(I,d,v,a,null,c);for(let R=0;R<a.length;R++)te(Vn(d,I,v.directiveStart+R,v),d);$D(I,d,v),C&&te(C,d);const x=Vn(d,I,v.directiveStart+v.componentOffset,v);if(s[On]=d[On]=x,null!==g)for(const R of g)R(x,o);return iv(I,v,s),x}(Tn,ut,Ct,xe,_e,[mv]),rv(Q,_e,null)}finally{ku()}return new Aw(this.componentType,Ue,lu(Ye,_e),_e,Ye)}}class Aw extends Rg{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Gg(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;Hg(g[We],g,d,o,a),wr(Xn(this._tNode.index,g))}}get injector(){return new Ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function mv(){const s=er();Vu(he()[We],s)}function Kf(s){let o=function Ow(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let d;if(mi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ge(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=s;v.inputs=Yf(s.inputs),v.declaredInputs=Yf(s.declaredInputs),v.outputs=Yf(s.outputs);const I=d.hostBindings;I&&XD(s,I);const C=d.viewQuery,x=d.contentQueries;if(C&&vv(s,C),x&&JD(s,x),ye(s.inputs,d.inputs),ye(s.declaredInputs,d.declaredInputs),ye(s.outputs,d.outputs),mi(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===Kf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function yv(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Co(d.hostAttrs,a=Co(a,d.hostAttrs))}}(c)}function Yf(s){return s===J?{}:s===Ve?[]:s}function vv(s,o){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function JD(s,o){const a=s.contentQueries;s.contentQueries=a?(c,d,g)=>{o(c,d,g),a(c,d,g)}:o}function XD(s,o){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function hu(s){return!!Ev(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Ev(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ci(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function vh(s,o,a,c){const d=he();return Ci(d,vo(),o)&&(kt(),hn(Dn(),d,s,o,a,c)),vh}function ql(s,o,a,c){return Ci(s,vo(),a)?o+Oe(a)+c:jt}function Vw(s,o,a,c,d,g,v,I){const C=he(),x=kt(),R=s+pn,F=x.firstCreatePass?function Lw(s,o,a,c,d,g,v,I,C){const x=o.consts,R=gh(o,s,4,v||null,Bs(x,I));ww(o,a,R,Bs(x,C)),Vu(o,R);const F=R.tView=$f(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,x,C,o,a,c,d,g,v):x.data[R];jr(F,!1);const G=C[Vt].createComment("");uc(x,C,G,F),te(G,C),Bg(C,C[R]=Iw(G,C,G,F)),Zc(F)&&sv(x,C,F),null!=v&&Vg(C,F,I)}function Yg(s){return function br(s,o){return s[o]}(function ug(){return Mt.lFrame.contextLView}(),pn+s)}function Jf(s,o,a){const c=he();return Ci(c,vo(),o)&&Xs(kt(),Dn(),c,s,o,c[Vt],a,!1),Jf}function Bw(s,o,a,c,d){const v=d?"class":"style";Hg(s,a,o.inputs[v],v,c)}function bv(s,o,a,c){const d=he(),g=kt(),v=pn+s,I=d[Vt],C=g.firstCreatePass?function Dv(s,o,a,c,d,g){const v=o.consts,C=gh(o,s,2,c,Bs(v,d));return ww(o,a,C,Bs(v,g)),null!==C.attrs&&$g(C,C.attrs,!1),null!==C.mergedAttrs&&$g(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,d,o,a,c):g.data[v],x=d[v]=Yd(I,o,function Od(){return Mt.lFrame.currentNamespace}()),R=Zc(C);return jr(C,!0),va(I,x,C),32!=(32&C.flags)&&uc(g,d,x,C),0===function bd(){return Mt.lFrame.elementDepthCount}()&&te(x,d),function Su(){Mt.lFrame.elementDepthCount++}(),R&&(sv(g,d,C),iv(g,C,d)),null!==c&&Vg(d,C),bv}function Qg(){let s=er();Ad()?Mu():(s=s.parent,jr(s,!1));const o=s;!function Td(){Mt.lFrame.elementDepthCount--}();const a=kt();return a.firstCreatePass&&(Vu(a,s),Oa(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ga(s){return 0!=(8&s.flags)}(o)&&Bw(a,o,he(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function wo(s){return 0!=(16&s.flags)}(o)&&Bw(a,o,he(),o.stylesWithoutHost,!1),Qg}function jw(s,o,a,c){return bv(s,o,a,c),Qg(),jw}function Jg(s,o,a){const c=he(),d=kt(),g=s+pn,v=d.firstCreatePass?function db(s,o,a,c,d){const g=o.consts,v=Bs(g,c),I=gh(o,s,8,"ng-container",v);return null!==v&&$g(I,v,!0),ww(o,a,I,Bs(g,d)),null!==o.queries&&o.queries.elementStart(o,I),I}(g,d,c,o,a):d.data[g];jr(v,!0);const I=c[g]=c[Vt].createComment("");return uc(d,c,I,v),te(I,c),Zc(v)&&(sv(d,c,v),iv(d,v,c)),null!=a&&Vg(c,v),Jg}function Tv(){let s=er();const o=kt();return Ad()?Mu():(s=s.parent,jr(s,!1)),o.firstCreatePass&&(Vu(o,s),Oa(s)&&o.queries.elementEnd(s)),Tv}function Hw(){return he()}function $w(s){return!!s&&"function"==typeof s.then}function fb(s){return!!s&&"function"==typeof s.subscribe}const pb=fb;function Gw(s,o,a,c){const d=he(),g=kt(),v=er();return function zw(s,o,a,c,d,g,v){const I=Zc(c),x=s.firstCreatePass&&jg(s),R=o[On],F=qf(o);let G=!0;if(3&c.type||v){const Ue=hr(c,o),Ye=v?v(Ue):Ue,ut=F.length,Ct=v?Pt=>v(dr(Pt[c.index])):c.index;let xe=null;if(!v&&I&&(xe=function mb(s,o,a,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=o[Fs],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==xe)(xe.__ngLastListenerFn__||xe).__ngNextListenerFn__=g,xe.__ngLastListenerFn__=g,G=!1;else{g=Av(c,o,R,g,!1);const Pt=a.listen(Ye,d,g);F.push(g,Pt),x&&x.push(d,Ct,ut,ut+1)}}else g=Av(c,o,R,g,!1);const Q=c.outputs;let _e;if(G&&null!==Q&&(_e=Q[d])){const Ue=_e.length;if(Ue)for(let Ye=0;Ye<Ue;Ye+=2){const Tn=o[_e[Ye]][_e[Ye+1]].subscribe(g),or=F.length;F.push(g,Tn),x&&x.push(d,c.index,or,-(or+1))}}}(g,d,d[Vt],v,s,o,c),Gw}function Sv(s,o,a,c){try{return Br(6,o,a),!1!==a(c)}catch(d){return Tw(s,d),!1}finally{Br(7,o,a)}}function Av(s,o,a,c,d){return function g(v){if(v===Function)return c;wr(s.componentOffset>-1?Xn(s.index,o):o);let C=Sv(o,a,c,v),x=g.__ngNextListenerFn__;for(;x;)C=Sv(o,a,x,v)&&C,x=x.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function xv(s=1){return function gf(s){return(Mt.lFrame.contextLView=function Fu(s,o){for(;s>0;)o=o[po],s--;return o}(s,Mt.lFrame.contextLView))[On]}(s)}function Xg(s,o,a){return Xf(s,"",o,"",a),Xg}function Xf(s,o,a,c,d){const g=he(),v=ql(g,o,a,c);return v!==jt&&Xs(kt(),Dn(),g,s,v,g[Vt],d,!1),Xf}function is(s,o){return s<<17|o<<2}function Ze(s){return s>>17&32767}function Ih(s){return 2|s}function Uo(s){return(131068&s)>>2}function Rv(s,o){return-131069&s|o<<2}function Pv(s){return 1|s}function Mr(s,o,a,c,d){const g=s[a+1],v=null===o;let I=c?Ze(g):Uo(g),C=!1;for(;0!==I&&(!1===C||v);){const R=s[I+1];Cc(s[I],o)&&(C=!0,s[I+1]=c?Pv(R):Ih(R)),I=c?Ze(R):Uo(R)}C&&(s[a+1]=c?Ih(g):Pv(g))}function Cc(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&en(s,o)>=0}function Uv(s,o){return function xs(s,o,a,c){const d=he(),g=kt(),v=function _i(s){const o=Mt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function rE(s,o,a,c){const d=s.data;if(null===d[a+1]){const g=d[_r()],v=function Hv(s,o){return o>=s.expandoStartIndex}(s,a);(function nm(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function tp(s,o,a,c){const d=function Qo(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Dc(a=$v(null,s,o,a,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=$v(d,s,o,a,c),null===g){let C=function Eb(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Uo(c))return s[Ze(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=$v(null,s,o,C[1],c),C=Dc(C,o.attrs,c),function np(s,o,a,c){s[Ze(a?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function Ib(s,o,a){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Dc(c,s[g].hostAttrs,a);return Dc(c,o.attrs,a)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,c),function Di(s,o,a,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Ze(v),C=Uo(v);s[c]=a;let R,x=!1;if(Array.isArray(a)?(R=a[1],(null===R||en(a,R)>0)&&(x=!0)):R=a,d)if(0!==C){const G=Ze(s[I+1]);s[c+1]=is(G,I),0!==G&&(s[G+1]=Rv(s[G+1],c)),s[I+1]=function Ut(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=is(I,0),0!==I&&(s[I+1]=Rv(s[I+1],c)),I=c;else s[c+1]=is(C,0),0===I?I=c:s[C+1]=Rv(s[C+1],c),C=c;x&&(s[c+1]=Ih(s[c+1])),Mr(s,R,c,!0),Mr(s,R,c,!1),function tm(s,o,a,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&en(g,o)>=0&&(a[c+1]=Pv(a[c+1]))}(o,R,s,c,g),v=is(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,c)}}(g,s,v,c),o!==jt&&Ci(d,v,o)&&function zv(s,o,a,c,d,g,v,I){if(!(3&o.type))return;const C=s.data,x=C[I+1],R=function Ov(s){return 1==(1&s)}(x)?rp(C,o,a,d,Uo(x),v):void 0;bh(R)||(bh(g)||function Mv(s){return 2==(2&s)}(x)&&(g=rp(C,null,a,d,I,v)),function bl(s,o,a,c,d){if(o)d?s.addClass(a,c):s.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:ri.DashCase;null==d?s.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=ri.Important),s.setStyle(a,c,d,g))}}(c,v,vs(_r(),a),d,g))}(g,g.data[_r()],d,d[Vt],s,d[v+1]=function qv(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=we(xr(s)))),s}(o,a),c,v)}(s,o,null,!0),Uv}function $v(s,o,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=o[I],c=Dc(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(a.directiveStylingLast=I),c}function Dc(s,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Hr(s,v,!!a||o[++g]))}return void 0===s?null:s}function rp(s,o,a,c,d,g){const v=null===o;let I;for(;d>0;){const C=s[d],x=Array.isArray(C),R=x?C[1]:C,F=null===R;let G=a[d+1];G===jt&&(G=F?Ve:void 0);let Q=F?Tr(G,c):R===c?G:void 0;if(x&&!bh(Q)&&(Q=Tr(C,c)),bh(Q)&&(I=Q,v))return I;const _e=s[d+1];d=v?Ze(_e):Uo(_e)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=Tr(C,c))}return I}function bh(s){return void 0!==s}function rm(s,o=""){const a=he(),c=kt(),d=s+pn,g=c.firstCreatePass?gh(c,d,1,o,null):c.data[d],v=a[d]=function _l(s,o){return s.createText(o)}(a[Vt],o);uc(c,a,v,g),jr(g,!1)}function im(s){return ip("",s,""),im}function ip(s,o,a){const c=he(),d=ql(c,s,o,a);return d!==jt&&function du(s,o,a){const c=vs(o,s);!function wl(s,o,a){s.setValue(o,a)}(s[Vt],c,a)}(c,_r(),d),ip}const no=void 0;var Rb=["en",[["a","p"],["AM","PM"],no],[["AM","PM"],no,no],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],no,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],no,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",no,"{1} 'at' {0}",no],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mb(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ro={};function Sh(s){const o=function up(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=r_(o);if(a)return a;const c=o.split("-")[0];if(a=r_(c),a)return a;if("en"===c)return Rb;throw new ge(701,!1)}function Ah(s){return Sh(s)[St.PluralCase]}function r_(s){return s in ro||(ro[s]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[s]),ro[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const bc="en-US";let fm=bc;function kh(s,o,a,c,d){if(s=W(s),Array.isArray(s))for(let g=0;g<s.length;g++)kh(s[g],o,a,c,d);else{const g=kt(),v=he();let I=Nl(s)?s:W(s.provide),C=L0(s);const x=er(),R=1048575&x.providerIndexes,F=x.directiveStart,G=x.providerIndexes>>20;if(Nl(s)||!s.multi){const Q=new Is(C,d,Bl),_e=h_(I,o,d?R:R+G,F);-1===_e?(dn(sl(x,v),g,I),Im(g,s,o.length),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=h_(I,o,R+G,F),_e=h_(I,o,R,R+G),Ye=_e>=0&&a[_e];if(d&&!Ye||!d&&!(Q>=0&&a[Q])){dn(sl(x,v),g,I);const ut=function jE(s,o,a,c,d){const g=new Is(s,a,Bl);return g.multi=[],g.index=o,g.componentProviders=0,Dp(g,d,c&&!a),g}(d?bp:BE,a.length,d,c,C);!d&&Ye&&(a[_e].providerFactory=ut),Im(g,s,o.length,0),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(ut),v.push(ut)}else Im(g,s,Q>-1?Q:_e,Dp(a[d?_e:Q],C,!d&&c));!d&&c&&Ye&&a[_e].componentProviders++}}}function Im(s,o,a,c){const d=Nl(o),g=function Gy(s){return!!s.useClass}(o);if(d||g){const C=(g?W(o.useClass):o).prototype.ngOnDestroy;if(C){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=x.indexOf(a);-1===R?x.push(a,[c,C]):x[R+1].push(c,C)}else x.push(a,C)}}}function Dp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function h_(s,o,a,c){for(let d=a;d<c;d++)if(o[d]===s)return d;return-1}function BE(s,o,a,c){return Cm(this.multi,[])}function bp(s,o,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Vn(a,a[We],this.providerFactory.index,c);g=I.slice(0,v),Cm(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],Cm(d,g);return g}function Cm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Dm(s,o=[]){return a=>{a.providersResolver=(c,d)=>function d_(s,o,a){const c=kt();if(c.firstCreatePass){const d=mi(s);kh(a,c.data,c.blueprint,d,!0),kh(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Ac{}class f_{}function bm(s,o){return new p_(s,o??null)}class p_ extends Ac{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fv(this);const c=$n(o);this._bootstrapComponents=mc(c.bootstrap),this._r3Injector=cw(o,a,[{provide:Ac,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],we(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class pu extends f_{constructor(o){super(),this.moduleType=o}create(o){return new p_(this.moduleType,o)}}class HE extends Ac{constructor(o,a,c){super(),this.componentFactoryResolver=new fv(this),this.instance=null;const d=new F0([...o,{provide:Ac,useValue:this},{provide:dh,useValue:this.componentFactoryResolver}],a||Mg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Tm(s,o,a=null){return new HE(s,o,a).injector}let $E=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=uh(0,a.type),d=c.length>0?Tm([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=dt({token:s,providedIn:"environment",factory:()=>new s(nn(kl))}),s})();function g_(s){s.getStandaloneInjector=o=>o.get($E).getOrCreateStandaloneInjector(s)}function Le(s){return o=>{setTimeout(s,void 0,o)}}const gn=class Yb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=Le(g),d&&(d=Le(d)),v&&(v=Le(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Y.w0&&o.add(I),I}};function so(){return this._results[Symbol.iterator]()}class xp{get changes(){return this._changes||(this._changes=new gn)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=xp.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=so)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Pi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function dl(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let et=(()=>{class s{}return s.__NG_ELEMENT_ID__=Qe,s})();const yt=et,Qb=class extends yt{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=Hf(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[Go]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Yi];return null!==v&&(d[Yi]=v.createEmbeddedView(c)),rv(c,d,o),new yh(d)}};function Qe(){return ae(er(),he())}function ae(s,o){return 4&s.type?new Qb(o,s,lu(s,o)):null}let De=(()=>{class s{}return s.__NG_ELEMENT_ID__=Or,s})();function Or(){return nI(er(),he())}const XE=De,eI=class extends XE{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return lu(this._hostTNode,this._hostLView)}get injector(){return new Ds(this._hostTNode,this._hostLView)}get parentInjector(){const o=Fd(this._hostTNode,this._hostLView);if(Do(o)){const a=bo(o,this._hostLView),c=js(o);return new Ds(a[We].data[c+8],a)}return new Ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=tI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-lr}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,c,d,g){const v=o&&!function Zu(s){return"function"==typeof s}(o);let I;if(v)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new Wf(gt(o)),x=c||this.parentInjector;if(!g&&null==C.ngModule){const G=(v?x:this.parentInjector).get(kl,null);G&&(g=G)}const R=C.create(x,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[We];if(function Jc(s){return ei(s[En])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[En],G=new eI(F,F[Gn],F[En]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function su(s,o,a,c){const d=lr+c,g=a.length;c>0&&(a[d-1][gi]=o),c<g-lr?(o[gi]=a[d],bf(a,lr+c,o)):(a.push(o),o[gi]=null),o[En]=a;const v=o[Go];null!==v&&a!==v&&function My(s,o){const a=s[go];o[Ln]!==o[En][En][Ln]&&(s[Wc]=!0),null===a?s[go]=[o]:a.push(o)}(v,o);const I=o[Yi];null!==I&&I.insertView(s),o[Nt]|=64}(d,c,v,g);const I=ga(g,v),C=c[Vt],x=fa(C,v[qo]);return null!==x&&function gg(s,o,a,c,d,g){c[pi]=d,c[Gn]=o,au(s,c,a,1,d,g)}(d,v[Gn],C,c,x,I),o.attachToViewContainerRef(),bf(I_(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=tI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=El(this._lContainer,a);c&&(Oo(I_(this._lContainer),a),yg(c[We],c))}detach(o){const a=this._adjustIndex(o,-1),c=El(this._lContainer,a);return c&&null!=Oo(I_(this._lContainer),a)?new yh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function tI(s){return s[Ls]}function I_(s){return s[Ls]||(s[Ls]=[])}function nI(s,o){let a;const c=o[s.index];if(ei(c))a=c;else{let d;if(8&s.type)d=dr(c);else{const g=o[Vt];d=g.createComment("");const v=hr(s,o);oc(g,fa(g,v),d,function ac(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=a=Iw(c,o,d,s),Bg(o,a)}return new eI(a,s,o)}class C_{constructor(o){this.queryList=o,this.matches=null}clone(){return new C_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Om{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Om(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==uI(o,a).matches&&this.queries[a].setDirty()}}class rI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class iI{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new iI(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class D_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new D_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,sI(a,g)),this.matchTNodeWithReadOption(o,a,So(a,o,g,!1,!1))}else c===et?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,So(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===gc||d===De||d===et&&4&a.type)this.addMatch(a.index,-2);else{const g=So(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function sI(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function Bh(s,o,a,c){return-1===a?function Lt(s,o){return 11&s.type?lu(s,o):4&s.type?ae(s,o):null}(o,s):-2===a?function oI(s,o,a){return a===gc?lu(o,s):a===et?ae(o,s):a===De?nI(o,s):void 0}(s,o,c):Vn(s,s[We],a,o)}function Pn(s,o,a,c){const d=o[Yi].queries[c];if(null===d.matches){const g=s.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const x=v[C];I.push(x<0?null:Bh(o,g[x],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function mt(s,o,a,c){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Pn(s,o,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const x=g[I+1],R=o[-C];for(let F=lr;F<R.length;F++){const G=R[F];G[Go]===G[En]&&mt(G[We],G,x,c)}if(null!==R[go]){const F=R[go];for(let G=0;G<F.length;G++){const Q=F[G];mt(Q[We],Q,x,c)}}}}}return c}function jh(s){const o=he(),a=kt(),c=Xc();Ou(c+1);const d=uI(a,c);if(s.dirty&&function Tu(s){return 4==(4&s[Nt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?mt(a,o,c,[]):Pn(a,o,d,c);s.reset(g,H0),s.notifyOnChanges()}return!0}return!1}function aI(s,o,a,c){const d=kt();if(d.firstCreatePass){const g=er();(function Pm(s,o,a){null===s.queries&&(s.queries=new iI),s.queries.track(new D_(o,a))})(d,new rI(o,a,c),g.index),function td(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Mp(s,o,a){const c=new xp(4==(4&a));Gf(s,o,c,c.destroy),null===o[Yi]&&(o[Yi]=new Om),o[Yi].queries.push(new C_(c))}(d,he(),a)}function Yn(){return function Ke(s,o){return s[Yi].queries[o].queryList}(he(),Xc())}function uI(s,o){return s.queries.getByIndex(o)}function km(s){return!!$n(s)}function Er(...s){}const P_=new Kt("Application Initializer");let yu=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Er,this.reject=Er,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if($w(g))a.push(g);else if(pb(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(nn(P_,8))},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Hi=new Kt("AppId",{providedIn:"root",factory:function N_(){return`${gr()}${gr()}${gr()}`}});function gr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TI=new Kt("Platform Initializer"),Oc=new Kt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Vm=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Nc=new Kt("LocaleId",{providedIn:"root",factory:()=>Rn(Nc,pt.Optional|pt.SkipSelf)||function Um(){return typeof $localize<"u"&&$localize.locale||bc}()}),cT=new Kt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class kc{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let ba=(()=>{class s{compileModuleSync(a){return new pu(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=mc($n(a).declarations).reduce((v,I)=>{const C=gt(I);return C&&v.push(new Wf(C)),v},[]);return new kc(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const L_=(()=>Promise.resolve(0))();function ud(s){typeof Zone>"u"?L_.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class $i{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gn(!1),this.onMicrotaskEmpty=new gn(!1),this.onStable=new gn(!1),this.onError=new gn(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function AI(){let s=Jt.requestAnimationFrame,o=Jt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hT(s){const o=()=>{!function dT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Hm(s),s.isCheckStableRunning=!0,jm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Hm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return V_(s),a.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),zr(s)}},onInvoke:(a,c,d,g,v,I,C)=>{try{return V_(s),a.invoke(d,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),zr(s)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Hm(s),jm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$i.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if($i.isInAngularZone())throw new ge(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Np,Er,Er);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Np={};function jm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Hm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function V_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function zr(s){s._nesting--,jm(s)}class xI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gn,this.onMicrotaskEmpty=new gn,this.onStable=new gn,this.onError=new gn}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const xn=new Kt(""),vu=new Kt("");let B_,MI=(()=>{class s{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,B_||(function Gh(s){B_=s}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$i.assertNotInAngularZone(),ud(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ud(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(nn($i),nn(U_),nn(vu))},s.\u0275prov=dt({token:s,factory:s.\u0275fac}),s})(),U_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return B_?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ta=!1;let $t=null;const mn=new Kt("AllowMultipleToken"),Fc=new Kt("PlatformDestroyListeners"),$m=new Kt("appBootstrapListener");class RI{constructor(o,a){this.name=o,this.token=a}}function kI(s,o,a=[]){const c=`Platform: ${o}`,d=new Kt(c);return(g=[])=>{let v=$_();if(!v||v.injector.get(mn,!1)){const I=[...a,...g,{provide:d,useValue:!0}];s?s(I):function OI(s){if($t&&!$t.get(mn,!1))throw new ge(400,!1);$t=s;const o=s.get(VI);(function NI(s){const o=s.get(TI,null);o&&o.forEach(a=>a())})(s)}(function LI(s=[],o){return yc.create({name:o,providers:[{provide:lh,useValue:"platform"},{provide:Fc,useValue:new Set([()=>$t=null])},...s]})}(I,c))}return function FI(s){const o=$_();if(!o)throw new ge(401,!1);return o}()}}function $_(){return $t?.get(VI)??null}let VI=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Gm(s,o){let a;return a="noop"===s?new xI:("zone.js"===s?void 0:s)||new $i(o),a}(c?.ngZone,function UI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:$i,useValue:d}];return d.run(()=>{const v=yc.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(Bf,null);if(!C)throw new ge(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{ld(this._modules,I),x.unsubscribe()})}),function Lc(s,o,a){try{const c=a();return $w(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const x=I.injector.get(yu);return x.runInitializers(),x.donePromise.then(()=>(function lp(s){me(s,"Expected localeId to be defined"),"string"==typeof s&&(fm=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Nc,bc)||bc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=zh({},c);return function j_(s,o,a){const c=new pu(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(cd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ge(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Fc,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(nn(yc))},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function zh(s,o){return Array.isArray(o)?o.reduce(zh,s):{...s,...o}}let cd=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new N.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{$i.assertNotInAngularZone(),ud(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{$i.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(g,v.pipe((0,se.B)()))}bootstrap(a,c){const d=a instanceof U0;if(!this._injector.get(yu).done){!d&&cr(a);throw new ge(405,Ta)}let v;v=d?a:this._injector.get(dh).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function H_(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Ac),x=v.create(yc.NULL,[],c||v.selector,I),R=x.location.nativeElement,F=x.injector.get(xn,null);return F?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),ld(this.components,x),F?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ld(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get($m,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ld(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(nn($i),nn(kl),nn(Bf))},s.\u0275prov=dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ld(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function _u(){return!1}let qm=(()=>{class s{}return s.__NG_ELEMENT_ID__=z_,s})();function z_(s){return function dd(s,o,a){if(Wo(s)&&!a){const c=Xn(s.index,o);return new yh(c,c)}return 47&s.type?new yh(o[Ln],o):null}(er(),he(),16==(16&s))}class qI{constructor(){}supports(o){return hu(o)}create(o){return new WI(o)}}const Z_=(s,o)=>o;class WI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Z_}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<YI(c,d,g)?a:c,I=YI(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const x=I-d,R=C-d;if(x!=R){for(let G=0;G<x;G++){const Q=G<g.length?g[G]:g[G]=0,_e=Q+G;R<=_e&&_e<x&&(g[G]=Q+1)}g[v.previousIndex]=R-x}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!hu(o))throw new ge(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function rb(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new ZI(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Vp),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ZI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Vp{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new KI,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YI(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class QI{constructor(){}supports(o){return o instanceof Map||Ev(o)}create(){return new JI}}class JI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Ev(o)))throw new ge(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new qh(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class qh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uc(){return new Qm([new qI])}let Qm=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Uc()),deps:[[s,new $s,new oa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ge(901,!1)}}return s.\u0275prov=dt({token:s,providedIn:"root",factory:Uc}),s})();function K_(){return new Bc([new QI])}let Bc=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||K_()),deps:[[s,new $s,new oa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ge(901,!1)}}return s.\u0275prov=dt({token:s,providedIn:"root",factory:K_}),s})();const vT=kI(null,"core",[]);let jn=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(nn(cd))},s.\u0275mod=X({type:s}),s.\u0275inj=ft({}),s})();function Xm(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(vt,Ae,k)=>{k.d(Ae,{Z:()=>qe});var h=k(2090),Y=k(4859),N=k(6881),ie=k(1877);class se{constructor(ge,Re){this._delegate=ge,this.firebase=Re,(0,N._addComponent)(ge,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,Re=N._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(ge);return!Be.isInitialized()&&"EXPLICIT"===(null===(Oe=Be.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Re})}_removeServiceInstance(ge,Re=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Re)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const ct=function we(ct){const ge={},Re={__esModule:!0,initializeApp:function Pe(Fe,nt={}){const ne=N.initializeApp(Fe,nt);if((0,h.r3)(ge,ne.name))return ge[ne.name];const Dt=new ct(ne,Re);return ge[ne.name]=Dt,Dt},app:Be,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Fe){const nt=Fe.name,ne=nt.replace("-compat","");if(N._registerComponent(Fe)&&"PUBLIC"===Fe.type){const Dt=(Je=Be())=>{if("function"!=typeof Je[ne])throw ye.create("invalid-app-argument",{appName:nt});return Je[ne]()};void 0!==Fe.serviceProps&&(0,h.ZB)(Dt,Fe.serviceProps),Re[ne]=Dt,ct.prototype[ne]=function(...Je){return this._getService.bind(this,nt).apply(this,Fe.multipleInstances?Je:[])}}return"PUBLIC"===Fe.type?Re[ne]:null},removeApp:function Oe(Fe){delete ge[Fe]},useAsService:function $e(Fe,nt){return"serverAuth"===nt?null:nt},modularAPIs:N}};function Be(Fe){if(!(0,h.r3)(ge,Fe=Fe||N._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Fe});return ge[Fe]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Ee(){return Object.keys(ge).map(Fe=>ge[Fe])}}),Be.App=ct,Re}(se);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(Re){(0,h.ZB)(ct,Re)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ct}(),H=new ie.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=$;!function be(ct){(0,N.registerVersion)("@firebase/app-compat","0.2.13",ct)}()},6881:(vt,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>ks,_DEFAULT_ENTRY_NAME:()=>Lr,_addComponent:()=>rt,_addOrOverwriteComponent:()=>xt,_apps:()=>Jt,_clearComponents:()=>Vr,_components:()=>tn,_getProvider:()=>Yr,_registerComponent:()=>hi,_removeServiceInstance:()=>ur,deleteApp:()=>fi,getApp:()=>Zi,getApps:()=>nn,initializeApp:()=>Zt,onLog:()=>Ai,registerVersion:()=>Hn,setLogLevel:()=>wn});var h=k(5861),Y=k(4859),N=k(1877),ie=k(2090);const se=(de,X)=>X.some(Ne=>de instanceof Ne);let re,ye;const $=new WeakMap,H=new WeakMap,W=new WeakMap,je=new WeakMap,be=new WeakMap;let ge={get(de,X,Ne){if(de instanceof IDBTransaction){if("done"===X)return H.get(de);if("objectStoreNames"===X)return de.objectStoreNames||W.get(de);if("store"===X)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return Pe(de[X])},set:(de,X,Ne)=>(de[X]=Ne,!0),has:(de,X)=>de instanceof IDBTransaction&&("done"===X||"store"===X)||X in de};function Be(de){return"function"==typeof de?function Oe(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...X){return de.apply(Ee(this),X),Pe($.get(this))}:function(...X){return Pe(de.apply(Ee(this),X))}:function(X,...Ne){const ht=de.call(Ee(this),X,...Ne);return W.set(ht,X.sort?X.sort():[X]),Pe(ht)}}(de):(de instanceof IDBTransaction&&function ct(de){if(H.has(de))return;const X=new Promise((Ne,ht)=>{const It=()=>{de.removeEventListener("complete",Bt),de.removeEventListener("error",gt),de.removeEventListener("abort",gt)},Bt=()=>{Ne(),It()},gt=()=>{ht(de.error||new DOMException("AbortError","AbortError")),It()};de.addEventListener("complete",Bt),de.addEventListener("error",gt),de.addEventListener("abort",gt)});H.set(de,X)}(de),se(de,function we(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ge):de)}function Pe(de){if(de instanceof IDBRequest)return function qe(de){const X=new Promise((Ne,ht)=>{const It=()=>{de.removeEventListener("success",Bt),de.removeEventListener("error",gt)},Bt=()=>{Ne(Pe(de.result)),It()},gt=()=>{ht(de.error),It()};de.addEventListener("success",Bt),de.addEventListener("error",gt)});return X.then(Ne=>{Ne instanceof IDBCursor&&$.set(Ne,de)}).catch(()=>{}),be.set(X,de),X}(de);if(je.has(de))return je.get(de);const X=Be(de);return X!==de&&(je.set(de,X),be.set(X,de)),X}const Ee=de=>be.get(de),Fe=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],ne=new Map;function Dt(de,X){if(!(de instanceof IDBDatabase)||X in de||"string"!=typeof X)return;if(ne.get(X))return ne.get(X);const Ne=X.replace(/FromIndex$/,""),ht=X!==Ne,It=nt.includes(Ne);if(!(Ne in(ht?IDBIndex:IDBObjectStore).prototype)||!It&&!Fe.includes(Ne))return;const Bt=function(){var gt=(0,h.Z)(function*(Xt,...Qt){const cr=this.transaction(Xt,It?"readwrite":"readonly");let $n=cr.store;return ht&&($n=$n.index(Qt.shift())),(yield Promise.all([$n[Ne](...Qt),It&&cr.done]))[0]});return function(Qt){return gt.apply(this,arguments)}}();return ne.set(X,Bt),Bt}!function Re(de){ge=de(ge)}(de=>({...de,get:(X,Ne,ht)=>Dt(X,Ne)||de.get(X,Ne,ht),has:(X,Ne)=>!!Dt(X,Ne)||de.has(X,Ne)}));class Je{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function Ht(de){return"VERSION"===de.getComponent()?.type}(Ne)){const ht=Ne.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Ne=>Ne).join(" ")}}const at="@firebase/app",Wr=new N.Yd("@firebase/app"),Lr="[DEFAULT]",Wi={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,tn=new Map;function rt(de,X){try{de.container.addComponent(X)}catch(Ne){Wr.debug(`Component ${X.name} failed to register with FirebaseApp ${de.name}`,Ne)}}function xt(de,X){de.container.addOrOverwriteComponent(X)}function hi(de){const X=de.name;if(tn.has(X))return Wr.debug(`There were multiple attempts to register component ${X}.`),!1;tn.set(X,de);for(const Ne of Jt.values())rt(Ne,de);return!0}function Yr(de,X){const Ne=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),de.container.getProvider(X)}function ur(de,X,Ne=Lr){Yr(de,X).clearInstance(Ne)}function Vr(){tn.clear()}const Qr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ln{constructor(X,Ne,ht){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const ks="9.23.0";function Zt(de,X={}){let Ne=de;"object"!=typeof X&&(X={name:X});const ht=Object.assign({name:Lr,automaticDataCollectionEnabled:!1},X),It=ht.name;if("string"!=typeof It||!It)throw Qr.create("bad-app-name",{appName:String(It)});if(Ne||(Ne=(0,ie.aH)()),!Ne)throw Qr.create("no-options");const Bt=Jt.get(It);if(Bt){if((0,ie.vZ)(Ne,Bt.options)&&(0,ie.vZ)(ht,Bt.config))return Bt;throw Qr.create("duplicate-app",{appName:It})}const gt=new Y.H0(It);for(const Qt of tn.values())gt.addComponent(Qt);const Xt=new ln(Ne,ht,gt);return Jt.set(It,Xt),Xt}function Zi(de=Lr){const X=Jt.get(de);if(!X&&de===Lr&&(0,ie.aH)())return Zt();if(!X)throw Qr.create("no-app",{appName:de});return X}function nn(){return Array.from(Jt.values())}function fi(de){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(de){const X=de.name;Jt.has(X)&&(Jt.delete(X),yield Promise.all(de.container.getProviders().map(Ne=>Ne.delete())),de.isDeleted=!0)})).apply(this,arguments)}function Hn(de,X,Ne){var ht;let It=null!==(ht=Wi[de])&&void 0!==ht?ht:de;Ne&&(It+=`-${Ne}`);const Bt=It.match(/\s|\//),gt=X.match(/\s|\//);if(Bt||gt){const Xt=[`Unable to register library "${It}" with version "${X}":`];return Bt&&Xt.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Bt&&gt&&Xt.push("and"),gt&&Xt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Wr.warn(Xt.join(" "))}hi(new Y.wA(`${It}-version`,()=>({library:It,version:X}),"VERSION"))}function Ai(de,X){if(null!==de&&"function"!=typeof de)throw Qr.create("invalid-log-argument");(0,N.Am)(de,X)}function wn(de){(0,N.Ub)(de)}const xi="firebase-heartbeat-database",Ur=1,U="firebase-heartbeat-store";let L=null;function z(){return L||(L=function Ie(de,X,{blocked:Ne,upgrade:ht,blocking:It,terminated:Bt}={}){const gt=indexedDB.open(de,X),Xt=Pe(gt);return ht&&gt.addEventListener("upgradeneeded",Qt=>{ht(Pe(gt.result),Qt.oldVersion,Qt.newVersion,Pe(gt.transaction),Qt)}),Ne&&gt.addEventListener("blocked",Qt=>Ne(Qt.oldVersion,Qt.newVersion,Qt)),Xt.then(Qt=>{Bt&&Qt.addEventListener("close",()=>Bt()),It&&Qt.addEventListener("versionchange",cr=>It(cr.oldVersion,cr.newVersion,cr))}).catch(()=>{}),Xt}(xi,Ur,{upgrade:(de,X)=>{0===X&&de.createObjectStore(U)}}).catch(de=>{throw Qr.create("idb-open",{originalErrorMessage:de.message})})),L}function J(){return(J=(0,h.Z)(function*(de){try{return yield(yield z()).transaction(U).objectStore(U).get(Yt(de))}catch(X){if(X instanceof ie.ZR)Wr.warn(X.message);else{const Ne=Qr.create("idb-get",{originalErrorMessage:X?.message});Wr.warn(Ne.message)}}})).apply(this,arguments)}function Ve(de,X){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(de,X){try{const ht=(yield z()).transaction(U,"readwrite");yield ht.objectStore(U).put(X,Yt(de)),yield ht.done}catch(Ne){if(Ne instanceof ie.ZR)Wr.warn(Ne.message);else{const ht=Qr.create("idb-set",{originalErrorMessage:Ne?.message});Wr.warn(ht.message)}}})).apply(this,arguments)}function Yt(de){return`${de.name}!${de.options.appId}`}class on{constructor(X){this.container=X,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new Mi(Ne),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var X=this;return(0,h.Z)(function*(){const ht=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Gt();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==It&&!X._heartbeatsCache.heartbeats.some(Bt=>Bt.date===It))return X._heartbeatsCache.heartbeats.push({date:It,agent:ht}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Bt=>{const gt=new Date(Bt.date).valueOf();return Date.now()-gt<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,h.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ne=Gt(),{heartbeatsToSend:ht,unsentEntries:It}=function Cr(de,X=1024){const Ne=[];let ht=de.slice();for(const It of de){const Bt=Ne.find(gt=>gt.agent===It.agent);if(Bt){if(Bt.dates.push(It.date),Ki(Ne)>X){Bt.dates.pop();break}}else if(Ne.push({agent:It.agent,dates:[It.date]}),Ki(Ne)>X){Ne.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:ht}}(X._heartbeatsCache.heartbeats),Bt=(0,ie.L)(JSON.stringify({version:2,heartbeats:ht}));return X._heartbeatsCache.lastSentHeartbeatDate=Ne,It.length>0?(X._heartbeatsCache.heartbeats=It,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Bt})()}}function Gt(){return(new Date).toISOString().substring(0,10)}class Mi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,h.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function ve(de){return J.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ne=this;return(0,h.Z)(function*(){var ht;if(yield Ne._canUseIndexedDBPromise){const Bt=yield Ne.read();return Ve(Ne.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ne=this;return(0,h.Z)(function*(){var ht;if(yield Ne._canUseIndexedDBPromise){const Bt=yield Ne.read();return Ve(Ne.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...X.heartbeats]})}})()}}function Ki(de){return(0,ie.L)(JSON.stringify({version:2,heartbeats:de})).length}!function Aa(de){hi(new Y.wA("platform-logger",X=>new Je(X),"PRIVATE")),hi(new Y.wA("heartbeat",X=>new on(X),"PRIVATE")),Hn(at,"0.9.13",de),Hn(at,"0.9.13","esm2017"),Hn("fire-js","")}("")},4859:(vt,Ae,k)=>{k.d(Ae,{H0:()=>we,wA:()=>N});var h=k(5861),Y=k(2090);class N{constructor($,H,W){this.name=$,this.instanceFactory=H,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class se{constructor($,H){this.name=$,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const H=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(H)){const W=new Y.BH;if(this.instancesDeferred.set(H,W),this.isInitialized(H)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:H});je&&W.resolve(je)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate($){var H;const W=this.normalizeInstanceIdentifier($?.identifier),je=null!==(H=$?.optional)&&void 0!==H&&H;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(be){if(je)return null;throw be}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ye(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[H,W]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(H);try{const be=this.getOrInitializeService({instanceIdentifier:je});W.resolve(be)}catch{}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,h.Z)(function*(){const H=Array.from($.instances.values());yield Promise.all([...H.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...H.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:H={}}=$,W=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:W,options:H});for(const[be,qe]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(be)&&qe.resolve(je);return je}onInit($,H){var W;const je=this.normalizeInstanceIdentifier(H),be=null!==(W=this.onInitCallbacks.get(je))&&void 0!==W?W:new Set;be.add($),this.onInitCallbacks.set(je,be);const qe=this.instances.get(je);return qe&&$(qe,je),()=>{be.delete($)}}invokeOnInitCallbacks($,H){const W=this.onInitCallbacks.get(H);if(W)for(const je of W)try{je($,H)}catch{}}getOrInitializeService({instanceIdentifier:$,options:H={}}){let W=this.instances.get($);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===ie?void 0:pe),options:H}),this.instances.set($,W),this.instancesOptions.set($,H),this.invokeOnInitCallbacks(W,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,W)}catch{}var pe;return W||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor($){this.name=$,this.providers=new Map}addComponent($){const H=this.getProvider($.name);if(H.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);H.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const H=new se($,this);return this.providers.set($,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(vt,Ae,k)=>{k.d(Ae,{Am:()=>pe,Ub:()=>we,Yd:()=>ye,in:()=>Y});const h=[];var Y=(()=>{return($=Y||(Y={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Y;var $})();const N={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ie=Y.INFO,se={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},re=($,H,...W)=>{if(H<$.logLevel)return;const je=(new Date).toISOString(),be=se[H];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[be](`[${je}]  ${$.name}:`,...W)};class ye{constructor(H){this.name=H,this._logLevel=ie,this._logHandler=re,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Y))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...H),this._logHandler(this,Y.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...H),this._logHandler(this,Y.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...H),this._logHandler(this,Y.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...H),this._logHandler(this,Y.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...H),this._logHandler(this,Y.ERROR,...H)}}function we($){h.forEach(H=>{H.setLogLevel($)})}function pe($,H){for(const W of h){let je=null;H&&H.level&&(je=N[H.level]),W.userLogHandler=null===$?null:(be,qe,...ct)=>{const ge=ct.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");qe>=(je??be.logLevel)&&$({level:Y[qe].toLowerCase(),message:ge,args:ct,type:be.name})}}}},259:(vt,Ae,k)=>{k.d(Ae,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(vt,Ae,k)=>{k.d(Ae,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(vt,Ae,k)=>{k.r(Ae);var h=k(5861),Y=k(3942),N=k(2090),ie=k(6881),se=k(7582),re=k(1877),ye=k(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W_EMAIL_SIGNIN="EMAIL_SIGNIN",W_PASSWORD_RESET="PASSWORD_RESET",W_RECOVER_EMAIL="RECOVER_EMAIL",W_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",W_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",W_VERIFY_EMAIL="VERIFY_EMAIL";const qe=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ct=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new re.Yd("@firebase/auth");function Pe(y,...f){Oe.logLevel<=re.in.ERROR&&Oe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}function Ee(y,...f){throw nt(y,...f)}function Ie(y,...f){return nt(y,...f)}function $e(y,f,p){const _=Object.assign(Object.assign({},ct()),{[f]:p});return new N.LL("auth","Firebase",_).create(f,{appName:y.name})}function Fe(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ee(y,"argument-error"),$e(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...f){if("string"!=typeof y){const p=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return ge.create(y,...f)}function ne(y,f,...p){if(!y)throw nt(f,...p)}function Dt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function Je(y,f){y||Dt(f)}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Ns()||"https:"===Ns()}function Ns(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class qi{constructor(f,p){this.shortDelay=f,this.longDelay=p,Je(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Wr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ue(y,f){Je(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class le{static initialize(f,p,_){this.fetchImpl=f,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new qi(3e4,6e4);function Te(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ce(y,f,p,_){return lt.apply(this,arguments)}function lt(){return(lt=(0,h.Z)(function*(y,f,p,_,T={}){return dt(y,T,(0,h.Z)(function*(){let M={},V={};_&&("GET"===f?V=_:M={body:JSON.stringify(_)});const K=(0,N.xO)(Object.assign({key:y.config.apiKey},V)).slice(1),Se=yield y._getAdditionalHeaders();return Se["Content-Type"]="application/json",y.languageCode&&(Se["X-Firebase-Locale"]=y.languageCode),le.fetch()(In(y,y.config.apiHost,p,K),Object.assign({method:f,headers:Se,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function dt(y,f,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(y,f,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},me),f);try{const T=new fn(y),M=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const V=yield M.json();if("needConfirmation"in V)throw kn(y,"account-exists-with-different-credential",V);if(M.ok&&!("errorMessage"in V))return V;{const K=M.ok?V.errorMessage:V.error.message,[Se,He]=K.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw kn(y,"credential-already-in-use",V);if("EMAIL_EXISTS"===Se)throw kn(y,"email-already-in-use",V);if("USER_DISABLED"===Se)throw kn(y,"user-disabled",V);const tt=_[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw $e(y,tt,He);Ee(y,tt)}}catch(T){if(T instanceof N.ZR)throw T;Ee(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function ft(y,f,p,_){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(y,f,p,_,T={}){const M=yield Ce(y,f,p,_,T);return"mfaPendingCredential"in M&&Ee(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function In(y,f,p,_){const T=`${f}${p}?${_}`;return y.config.emulator?ue(y.config,T):`${y.config.apiScheme}://${T}`}class fn{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(Ie(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(y,f,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=Ie(y,f,_);return T.customData._tokenResponse=p,T}function Mn(){return(Mn=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Kr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Lr(){return(Lr=(0,h.Z)(function*(y,f=!1){const p=(0,N.m9)(y),_=yield p.getIdToken(f),T=Jt(_);ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,V=M?.sign_in_provider;return{claims:T,token:_,authTime:Kr(Wi(T.auth_time)),issuedAtTime:Kr(Wi(T.iat)),expirationTime:Kr(Wi(T.exp)),signInProvider:V||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Wi(y){return 1e3*Number(y)}function Jt(y){const[f,p,_]=y.split(".");if(void 0===f||void 0===p||void 0===_)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,N.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",T?.toString()),null}}function rt(y,f){return xt.apply(this,arguments)}function xt(){return(xt=(0,h.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(_){throw _ instanceof N.ZR&&function hi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class Yr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield p.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class ur{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vr(y){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,h.Z)(function*(y){var f;const p=y.auth,_=yield y.getIdToken(),T=yield rt(y,function Ir(y,f){return pt.apply(this,arguments)}(p,{idToken:_}));ne(T?.users.length,p,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const V=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?function Zt(y){return y.map(f=>{var{providerId:p}=f,_=(0,se._T)(f,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(M.providerUserInfo):[],K=function ks(y,f){return[...y.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}(y.providerData,V),tt=!!y.isAnonymous&&!(y.email&&M.passwordHash||K?.length),Xe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:K,metadata:new ur(M.createdAt,M.lastLoginAt),isAnonymous:tt};Object.assign(y,Xe)}),Sn.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(y){const f=(0,N.m9)(y);yield Vr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(y,f){const p=yield dt(y,{},(0,h.Z)(function*(){const _=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,V=In(y,T,"/v1/token",`key=${M}`),K=yield y._getAdditionalHeaders();return K["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(V,{method:"POST",headers:K,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(typeof f.idToken<"u","internal-error"),ne(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function tn(y){const f=Jt(y);return ne(f,"internal-error"),ne(typeof f.exp<"u","internal-error"),ne(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var _=this;return(0,h.Z)(function*(){return ne(!_.accessToken||_.refreshToken,f,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:V}=yield function Zi(y,f){return nn.apply(this,arguments)}(f,p);_.updateTokensAndExpiration(T,M,Number(V))})()}updateTokensAndExpiration(f,p,_){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,p){const{refreshToken:_,accessToken:T,expirationTime:M}=p,V=new fi;return _&&(ne("string"==typeof _,"internal-error",{appName:f}),V.refreshToken=_),T&&(ne("string"==typeof T,"internal-error",{appName:f}),V.accessToken=T),M&&(ne("number"==typeof M,"internal-error",{appName:f}),V.expirationTime=M),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return Dt("not implemented")}}function Rn(y,f){ne("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Hn{constructor(f){var{uid:p,auth:_,stsTokenManager:T}=f,M=(0,se._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ur(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,h.Z)(function*(){const _=yield rt(p,p.stsTokenManager.getToken(p.auth,f));return ne(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(f){return function yr(y){return Lr.apply(this,arguments)}(this,f)}reload(){return function Qr(y){return ln.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Hn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Vr(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const p=yield f.getIdToken();return yield rt(f,function ar(y,f){return Mn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var _,T,M,V,K,Se,He,tt;const Xe=null!==(_=p.displayName)&&void 0!==_?_:void 0,yn=null!==(T=p.email)&&void 0!==T?T:void 0,Qs=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Ml=null!==(V=p.photoURL)&&void 0!==V?V:void 0,Uy=null!==(K=p.tenantId)&&void 0!==K?K:void 0,Kn=null!==(Se=p._redirectEventId)&&void 0!==Se?Se:void 0,ih=null!==(He=p.createdAt)&&void 0!==He?He:void 0,xg=null!==(tt=p.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:Rl,emailVerified:Lf,isAnonymous:sh,providerData:Ii,stsTokenManager:Vf}=p;ne(Rl&&Vf,f,"internal-error");const Ol=fi.fromJSON(this.name,Vf);ne("string"==typeof Rl,f,"internal-error"),Rn(Xe,f.name),Rn(yn,f.name),ne("boolean"==typeof Lf,f,"internal-error"),ne("boolean"==typeof sh,f,"internal-error"),Rn(Qs,f.name),Rn(Ml,f.name),Rn(Uy,f.name),Rn(Kn,f.name),Rn(ih,f.name),Rn(xg,f.name);const oh=new Hn({uid:Rl,auth:f,email:yn,emailVerified:Lf,displayName:Xe,isAnonymous:sh,photoURL:Ml,phoneNumber:Qs,tenantId:Uy,stsTokenManager:Ol,createdAt:ih,lastLoginAt:xg});return Ii&&Array.isArray(Ii)&&(oh.providerData=Ii.map(P0=>Object.assign({},P0))),Kn&&(oh._redirectEventId=Kn),oh}static _fromIdTokenResponse(f,p,_=!1){return(0,h.Z)(function*(){const T=new fi;T.updateFromServerResponse(p);const M=new Hn({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield Vr(M),M})()}}const Ai=new Map;function wn(y){Je(y instanceof Function,"Expected a class definition");let f=Ai.get(y);return f?(Je(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ai.set(y,f),f)}const Ur=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,h.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,h.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function U(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,_){this.persistence=f,this.auth=p,this.userKey=_;const{config:T,name:M}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,M),this.fullPersistenceKey=U("persistence",T.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Hn._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,h.Z)(function*(){if(p.persistence===f)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,_="authUser"){return(0,h.Z)(function*(){if(!p.length)return new L(wn(Ur),f,_);const T=(yield Promise.all(p.map(function(){var He=(0,h.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return He.apply(this,arguments)}}()))).filter(He=>He);let M=T[0]||wn(Ur);const V=U(_,f.config.apiKey,f.name);let K=null;for(const He of p)try{const tt=yield He._get(V);if(tt){const Xe=Hn._fromJSON(f,tt);He!==M&&(K=Xe),M=He;break}}catch{}const Se=T.filter(He=>He._shouldAllowMigration);return M._shouldAllowMigration&&Se.length?(M=Se[0],K&&(yield M._set(V,K.toJSON())),yield Promise.all(p.map(function(){var He=(0,h.Z)(function*(tt){if(tt!==M)try{yield tt._remove(V)}catch{}});return function(tt){return He.apply(this,arguments)}}())),new L(M,f,_)):new L(M,f,_)})()}}function z(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(bt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ve(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Fn(f))return"Blackberry";if(Cn(f))return"Webos";if(J(f))return"Safari";if((f.includes("chrome/")||Ve(f))&&!f.includes("edge/"))return"Chrome";if(Yt(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ve(y=(0,N.z$)()){return/firefox\//i.test(y)}function J(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ve(y=(0,N.z$)()){return/crios\//i.test(y)}function bt(y=(0,N.z$)()){return/iemobile/i.test(y)}function Yt(y=(0,N.z$)()){return/android/i.test(y)}function Fn(y=(0,N.z$)()){return/blackberry/i.test(y)}function Cn(y=(0,N.z$)()){return/webos/i.test(y)}function on(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ki(y=(0,N.z$)()){return on(y)||Yt(y)||Cn(y)||Fn(y)||/windows phone/i.test(y)||bt(y)}function de(y,f=[]){let p;switch(y){case"Browser":p=z((0,N.z$)());break;case"Worker":p=`${z((0,N.z$)())}-${y}`;break;default:p=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${_}`}function Ne(){return(Ne=(0,h.Z)(function*(y){return(yield Ce(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(y,f){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(y,f){return Ce(y,"GET","/v2/recaptchaConfig",Te(y,f))})).apply(this,arguments)}function Bt(y){return void 0!==y&&void 0!==y.getResponse}function gt(y){return void 0!==y&&void 0!==y.enterprise}class Xt{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function cr(y){return new Promise((f,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=T=>{const M=Ie("internal-error");M.customData=T,p(M)},_.type="text/javascript",_.charset="UTF-8",function Qt(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function $n(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ho="NO_RECAPTCHA";class pi{constructor(f){this.type="recaptcha-enterprise",this.auth=un(f)}verify(f="verify",p=!1){var _=this;return(0,h.Z)(function*(){function M(){return M=(0,h.Z)(function*(K){if(!p){if(null==K.tenantId&&null!=K._agentRecaptchaConfig)return K._agentRecaptchaConfig.siteKey;if(null!=K.tenantId&&void 0!==K._tenantRecaptchaConfigs[K.tenantId])return K._tenantRecaptchaConfigs[K.tenantId].siteKey}return new Promise(function(){var Se=(0,h.Z)(function*(He,tt){ht(K,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Xe=>{if(void 0!==Xe.recaptchaKey){const yn=new Xt(Xe);return null==K.tenantId?K._agentRecaptchaConfig=yn:K._tenantRecaptchaConfigs[K.tenantId]=yn,He(yn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(Xe=>{tt(Xe)})});return function(He,tt){return Se.apply(this,arguments)}}())}),M.apply(this,arguments)}function V(K,Se,He){const tt=window.grecaptcha;gt(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(K,{action:f}).then(Xe=>{Se(Xe)}).catch(()=>{Se(ho)})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((K,Se)=>{(function T(K){return M.apply(this,arguments)})(_.auth).then(He=>{if(!p&&gt(window.grecaptcha))V(He,K,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));cr("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{V(He,K,Se)}).catch(tt=>{Se(tt)})}}).catch(He=>{Se(He)})})})()}}function We(y,f,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(y,f,p,_=!1){const T=new pi(y);let M;try{M=yield T.verify(p)}catch{M=yield T.verify(p,!0)}const V=Object.assign({},f);return Object.assign(V,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}class En{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const _=M=>new Promise((V,K)=>{try{V(f(M))}catch(Se){K(Se)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,h.Z)(function*(){if(p.auth.currentUser===f)return;const _=[];try{for(const T of p.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const M of _)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class gi{constructor(f,p,_,T){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gn(this),this.idTokenSubscription=new Gn(this),this.beforeStateQueue=new En(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,p){var _=this;return p&&(this._popupRedirectResolver=wn(p)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,M;if(!_._deleted&&(_.persistenceManager=yield L.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,h.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let M=T,V=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const K=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Se=M?._redirectEventId,He=yield p.tryRedirectSignIn(f);(!K||K===Se)&&He?.user&&(M=He.user,V=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(V)try{yield p.beforeStateQueue.runMiddleware(M)}catch(K){M=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(K))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,h.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,h.Z)(function*(){try{yield Vr(f)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function lo(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,h.Z)(function*(){const _=f?(0,N.m9)(f):null;return _&&ne(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(f,p=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&ne(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,h.Z)(function*(){yield p.assertedPersistence.setPersistence(wn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const p=yield ht(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Xt(p);null==f.tenantId?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,_.emailPasswordEnabled&&new pi(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,p,_){return this.registerStateListener(this.authStateSubscription,f,p,_)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,_){return this.registerStateListener(this.idTokenSubscription,f,p,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,h.Z)(function*(){if(!p.redirectPersistenceManager){const _=f&&wn(f)||p._popupRedirectResolver;ne(_,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[wn(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,h.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,h.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,h.Z)(function*(){if(f===p.currentUser)return p.queue((0,h.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,_,T){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),V=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(V,this,"internal-error"),V.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,_,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,h.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var p;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const M=yield f._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var p;const _=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function Be(y,...f){Oe.logLevel<=re.in.WARN&&Oe.warn(`Auth (${ie.SDK_VERSION}): ${y}`,...f)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function un(y){return(0,N.m9)(y)}class Gn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fs(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ma(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ps{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Dt("not implemented")}_getIdTokenResponse(f){return Dt("not implemented")}_linkToIdToken(f,p){return Dt("not implemented")}_getReauthenticationResolver(f){return Dt("not implemented")}}function po(y,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:resetPassword",Te(y,f))})).apply(this,arguments)}function Go(y,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:update",Te(y,f))})).apply(this,arguments)}function vr(y,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithPassword",Te(y,f))})).apply(this,arguments)}function Jr(y,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:sendOobCode",Te(y,f))})).apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function Ls(y,f){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function lr(y,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(y,f){return Jr(y,f)})).apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithEmailLink",Te(y,f))})).apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithEmailLink",Te(y,f))})).apply(this,arguments)}class Iu extends ps{constructor(f,p,_,T=null){super("password",_),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new Iu(f,p,"password")}static _fromEmailAndCode(f,p,_=null){return new Iu(f,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,h.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield We(f,T,"signInWithPassword");return vr(f,M)}return vr(f,T).catch(function(){var M=(0,h.Z)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const K=yield We(f,T,"signInWithPassword");return vr(f,K)}return Promise.reject(V)});return function(V){return M.apply(this,arguments)}}());case"emailLink":return function Oa(y,f){return Wo.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ee(f,"internal-error")}})()}_linkToIdToken(f,p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return Go(f,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Zc(y,f){return mi.apply(this,arguments)}(f,{idToken:p,email:_._email,oobCode:_._password});default:Ee(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ri(y,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithIdp",Te(y,f))})).apply(this,arguments)}class ms extends ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new ms(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ee("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=p,M=(0,se._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const V=new ms(_,T);return V.idToken=M.idToken||void 0,V.accessToken=M.accessToken||void 0,V.secret=M.secret,V.nonce=M.nonce,V.pendingToken=M.pendingToken||null,V}_getIdTokenResponse(f){return Ri(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,Ri(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ri(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,N.xO)(p)}return f}}function Kc(){return(Kc=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:sendVerificationCode",Te(y,f))})).apply(this,arguments)}function vd(){return(vd=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,f))})).apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(y,f){const p=yield ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,f));if(p.temporaryProof)throw kn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const _d={USER_NOT_FOUND:"user-not-found"};function Du(){return(Du=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithPhoneNumber",Te(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),_d)})).apply(this,arguments)}class yi extends ps{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new yi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new yi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function sg(y,f){return vd.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function og(y,f){return Cu.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Iy(y,f){return Du.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}=f;return _||p||T||M?new yi({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}):null}}class Zo{constructor(f){var p,_,T,M,V,K;const Se=(0,N.zd)((0,N.pd)(f)),He=null!==(p=Se.apiKey)&&void 0!==p?p:null,tt=null!==(_=Se.oobCode)&&void 0!==_?_:null,Xe=function hf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);ne(He&&tt&&Xe,"argument-error"),this.apiKey=He,this.operation=Xe,this.code=tt,this.continueUrl=null!==(M=Se.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(V=Se.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(K=Se.tenantId)&&void 0!==K?K:null}static parseLink(f){const p=function wd(y){const f=(0,N.zd)((0,N.pd)(y)).link,p=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,_=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(_?(0,N.zd)((0,N.pd)(_)).link:null)||_||p||f||y}(f);try{return new Zo(p)}catch{return null}}}let ff=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Iu._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=Zo.parseLink(_);return ne(T,"argument-error"),Iu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ys{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qi extends ys{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class mo extends Qi{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),ms._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return mo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return mo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:M,nonce:V,providerId:K}=f;if(!_&&!T&&!p&&!M||!K)return null;try{return new mo(K)._credential({idToken:p,accessToken:_,nonce:V,pendingToken:M})}catch{return null}}}let Yc=(()=>{class y extends Qi{constructor(){super("facebook.com")}static credential(p){return ms._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Pa=(()=>{class y extends Qi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return ms._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ed=(()=>{class y extends Qi{constructor(){super("github.com")}static credential(p){return ms._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Vs extends ps{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Ri(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,Ri(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Ri(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:M}=p;return _&&T&&M&&_===T?new Vs(_,M):null}static _create(f,p){return new Vs(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Na extends ys{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Na.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Na.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Vs.fromJSON(f);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:_}=f;if(!p||!_)return null;try{return Vs._create(_,p)}catch{return null}}}let bu=(()=>{class y extends Qi{constructor(){super("twitter.com")}static credential(p,_){return ms._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Us(y,f){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signUp",Te(y,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,_,T=!1){return(0,h.Z)(function*(){const M=yield Hn._fromIdTokenResponse(f,_,T),V=ka(_);return new Dr({user:M,providerId:V,_tokenResponse:_,operationType:p})})()}static _forOperation(f,p,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=ka(_);return new Dr({user:f,providerId:T,_tokenResponse:_,operationType:p})})()}}function ka(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ko(){return(Ko=(0,h.Z)(function*(y){var f;const p=un(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Dr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Us(p,{returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class vs extends N.ZR{constructor(f,p,_,T){var M;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,vs.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,p,_,T){return new vs(f,p,_,T)}}function hr(y,f,p,_){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?vs._fromErrorAndOperation(y,M,f,_):M})}function Id(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function br(){return br=(0,h.Z)(function*(y,f){const p=(0,N.m9)(y);yield _s(!0,p,f);const{providerUserInfo:_}=yield function Fr(y,f){return Zr.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Id(_||[]);return p.providerData=p.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),br.apply(this,arguments)}function Xn(y,f){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(y,f,p=!1){const _=yield rt(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return Dr._forOperation(y,"link",_)})).apply(this,arguments)}function _s(y,f,p){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,h.Z)(function*(y,f,p){yield Vr(f);const T=!1===y?"provider-already-linked":"no-such-provider";ne(Id(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function Bs(y,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(y,f,p=!1){const{auth:_}=y,T="reauthenticate";try{const M=yield rt(y,hr(_,T,f,y),p);ne(M.idToken,_,"internal-error");const V=Jt(M.idToken);ne(V,_,"internal-error");const{sub:K}=V;return ne(y.uid===K,_,"user-mismatch"),Dr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ee(_,"user-mismatch"),M}})).apply(this,arguments)}function Fa(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(y,f,p=!1){const _="signIn",T=yield hr(y,_,f),M=yield Dr._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function La(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,h.Z)(function*(y,f){return Fa(un(y),f)})).apply(this,arguments)}function bd(y,f){return Su.apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(y,f){const p=(0,N.m9)(y);return yield _s(!1,p,f.providerId),Xn(p,f)})).apply(this,arguments)}function Td(y,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,h.Z)(function*(y,f){return Bs((0,N.m9)(y),f)})).apply(this,arguments)}function Sd(){return(Sd=(0,h.Z)(function*(y,f){return ft(y,"POST","/v1/accounts:signInWithCustomToken",Te(y,f))})).apply(this,arguments)}function kt(){return kt=(0,h.Z)(function*(y,f){const p=un(y),_=yield function ag(y,f){return Sd.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),kt.apply(this,arguments)}class Va{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Ua._fromServerResponse(f,p):"totpInfo"in p?er._fromServerResponse(f,p):Ee(f,"internal-error")}}class Ua extends Va{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Ua(p)}}class er extends Va{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new er(p)}}function yo(y,f,p){var _;ne((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function jr(){return jr=(0,h.Z)(function*(y,f,p){var _;const T=un(y),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const V=yield We(T,M,"getOobCode",!0);p&&yo(T,V,p),yield Ls(T,V)}else p&&yo(T,M,p),yield Ls(T,M).catch(function(){var V=(0,h.Z)(function*(K){if("auth/missing-recaptcha-token"!==K.code)return Promise.reject(K);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield We(T,M,"getOobCode",!0);p&&yo(T,Se,p),yield Ls(T,Se)}});return function(K){return V.apply(this,arguments)}}())}),jr.apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(y,f,p){yield po((0,N.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function ws(){return ws=(0,h.Z)(function*(y,f){yield function Yi(y,f){return zo.apply(this,arguments)}((0,N.m9)(y),{oobCode:f})}),ws.apply(this,arguments)}function Ba(y,f){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(y,f){const p=(0,N.m9)(y),_=yield po(p,{oobCode:f}),T=_.requestType;switch(ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(_.mfaInfo,p,"internal-error");default:ne(_.email,p,"internal-error")}let M=null;return _.mfaInfo&&(M=Va._fromServerResponse(un(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(y,f){const{data:p}=yield Ba((0,N.m9)(y),f);return p.email})).apply(this,arguments)}function _i(){return _i=(0,h.Z)(function*(y,f,p){var _;const T=un(y),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let V;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const He=yield We(T,M,"signUpPassword");V=Us(T,He)}else V=Us(T,M).catch(function(){var He=(0,h.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Xe=yield We(T,M,"signUpPassword");return Us(T,Xe)}return Promise.reject(tt)});return function(tt){return He.apply(this,arguments)}}());const K=yield V.catch(He=>Promise.reject(He)),Se=yield Dr._fromIdTokenResponse(T,"signIn",K);return yield T._updateCurrentUser(Se.user),Se}),_i.apply(this,arguments)}function Ru(){return Ru=(0,h.Z)(function*(y,f,p){var _;const T=un(y),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function V(K,Se){ne(Se.handleCodeInApp,T,"argument-error"),Se&&yo(T,K,Se)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const K=yield We(T,M,"getOobCode",!0);V(K,p),yield lr(T,K)}else V(M,p),yield lr(T,M).catch(function(){var K=(0,h.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield We(T,M,"getOobCode",!0);V(He,p),yield lr(T,He)}});return function(Se){return K.apply(this,arguments)}}())}),Ru.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y),T=ff.credentialWithLink(f,p||Ht());return ne(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),La(_,T)})).apply(this,arguments)}function Ou(){return(Ou=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:createAuthUri",Te(y,f))})).apply(this,arguments)}function Pu(){return Pu=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:at()?Ht():"http://localhost"},{signinMethods:T}=yield function Xc(y,f){return Ou.apply(this,arguments)}((0,N.m9)(y),_);return T||[]}),Pu.apply(this,arguments)}function Ha(){return Ha=(0,h.Z)(function*(y,f){const p=(0,N.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&yo(p.auth,T,f);const{email:M}=yield function Wc(y,f){return qo.apply(this,arguments)}(p.auth,T);M!==y.email&&(yield y.reload())}),Ha.apply(this,arguments)}function $a(){return $a=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&yo(_.auth,M,p);const{email:V}=yield function Xr(y,f){return ei.apply(this,arguments)}(_.auth,M);V!==y.email&&(yield y.reload())}),$a.apply(this,arguments)}function ku(){return(ku=(0,h.Z)(function*(y,f){return Ce(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fu(){return Fu=(0,h.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const _=(0,N.m9)(y),M={idToken:yield _.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},V=yield rt(_,function Rd(y,f){return ku.apply(this,arguments)}(_.auth,M));_.displayName=V.displayName||null,_.photoURL=V.photoUrl||null;const K=_.providerData.find(({providerId:Se})=>"password"===Se);K&&(K.displayName=_.displayName,K.photoURL=_.photoURL),yield _._updateTokensIfNecessary(V)}),Fu.apply(this,arguments)}function Dn(y,f,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(y,f,p){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const V=yield rt(y,Go(_,M));yield y._updateTokensIfNecessary(V,!0)})).apply(this,arguments)}class _o{constructor(f,p,_={}){this.isNewUser=f,this.providerId=p,this.profile=_}}class yf extends _o{constructor(f,p,_,T){super(f,p,_),this.username=T}}class Od extends _o{constructor(f,p){super(f,"facebook.com",p)}}class lg extends yf{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Vu extends _o{constructor(f,p){super(f,"google.com",p)}}class tl extends yf{constructor(f,p,_){super(f,"twitter.com",p,_)}}function nl(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function mf(y){var f,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const V=null===(p=null===(f=Jt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(V)return new _o(M,"anonymous"!==V&&"custom"!==V?V:null)}if(!_)return null;switch(_){case"facebook.com":return new Od(M,T);case"github.com":return new lg(M,T);case"google.com":return new Vu(M,T);case"twitter.com":return new tl(M,T,y.screenName||null);case"custom":case"anonymous":return new _o(M,null);default:return new _o(M,_,T)}}(p)}class wo{constructor(f,p,_){this.type=f,this.credential=p,this.auth=_}static _fromIdtoken(f,p){return new wo("enroll",f,p)}static _fromMfaPendingCredential(f){return new wo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,_;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return wo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return wo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Eo{constructor(f,p,_){this.session=f,this.hints=p,this.signInResolver=_}static _fromError(f,p){const _=un(f),T=p.customData._serverResponse,M=(T.mfaInfo||[]).map(K=>Va._fromServerResponse(_,K));ne(T.mfaPendingCredential,_,"internal-error");const V=wo._fromMfaPendingCredential(T.mfaPendingCredential);return new Eo(V,M,function(){var K=(0,h.Z)(function*(Se){const He=yield Se._process(_,V);delete T.mfaInfo,delete T.mfaPendingCredential;const tt=Object.assign(Object.assign({},T),{idToken:He.idToken,refreshToken:He.refreshToken});switch(p.operationType){case"signIn":const Xe=yield Dr._fromIdTokenResponse(_,p.operationType,tt);return yield _._updateCurrentUser(Xe.user),Xe;case"reauthenticate":return ne(p.user,_,"internal-error"),Dr._forOperation(p.user,p.operationType,tt);default:Ee(_,"internal-error")}});return function(Se){return K.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,h.Z)(function*(){return p.signInResolver(f)})()}}class Do{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Va._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new Do(f)}getSession(){var f=this;return(0,h.Z)(function*(){return wo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var _=this;return(0,h.Z)(function*(){const T=f,M=yield _.getSession(),V=yield rt(_.user,T._process(_.user.auth,M,p));return yield _.user._updateTokensIfNecessary(V),_.user.reload()})()}unenroll(f){var p=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const M=yield rt(p.user,function ju(y,f){return Ce(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Te(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:V})=>V!==_),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const js=new WeakMap,bo="__sak";class Hu{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(bo,"1"),this.storage.removeItem(bo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const To=(()=>{class y extends Hu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function za(){const y=(0,N.z$)();return J(y)||on(y)}()&&function Aa(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),M=this.localCache[_];T!==M&&p(_,M,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((K,Se,He)=>{this.notifyListeners(K,He)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const K=this.storage.getItem(T);if(p.newValue!==K)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const M=()=>{const K=this.storage.getItem(T);!_&&this.localCache[T]===K||this.notifyListeners(T,K)},V=this.storage.getItem(T);!function Mi(){return(0,N.w1)()&&10===document.documentMode}()||V===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,M=this;return(0,h.Z)(function*(){yield T().call(M,p,_),M.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const M=yield _().call(T,p);return T.localCache[p]=JSON.stringify(M),M})()}_remove(p){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Cs=(()=>{class y extends Hu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let ta=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(M=>M.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,h.Z)(function*(){const T=p,{eventId:M,eventType:V,data:K}=T.data,Se=_.handlersMap[V];if(!Se?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:V});const He=Array.from(Se).map(function(){var Xe=(0,h.Z)(function*(yn){return yn(T.origin,K)});return function(yn){return Xe.apply(this,arguments)}}()),tt=yield function sl(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return f.apply(this,arguments)}}()))}(He);T.ports[0].postMessage({status:"done",eventId:M,eventType:V,response:tt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function na(y="",f=10){let p="";for(let _=0;_<f;_++)p+=Math.floor(10*Math.random());return y+p}class Fd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,_=50){var T=this;return(0,h.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let V,K;return new Promise((Se,He)=>{const tt=na("",20);M.port1.start();const Xe=setTimeout(()=>{He(new Error("unsupported_event"))},_);K={messageChannel:M,onMessage(yn){const Qs=yn;if(Qs.data.eventId===tt)switch(Qs.data.status){case"ack":clearTimeout(Xe),V=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),Se(Qs.data.response);break;default:clearTimeout(Xe),clearTimeout(V),He(new Error("invalid_response"))}}},T.handlers.add(K),M.port1.addEventListener("message",K.onMessage),T.target.postMessage({eventType:f,eventId:tt,data:p},[M.port2])}).finally(()=>{K&&T.removeMessageHandler(K)})})()}}function dn(){return window}function Gu(){return typeof dn().WorkerGlobalScope<"u"&&"function"==typeof dn().importScripts}function zu(){return(zu=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const So="firebaseLocalStorageDb",Vn=1,al="firebaseLocalStorage",qa="fbase_key";class Wa{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ds(y,f){return y.transaction([al],f?"readwrite":"readonly").objectStore(al)}function Wu(){const y=indexedDB.open(So,Vn);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(al,{keyPath:qa})}catch(T){p(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(al)?f(_):(_.close(),yield function wf(){const y=indexedDB.deleteDatabase(So);return new Wa(y).toPromise()}(),f(yield Wu()))}))})}function Ao(y,f,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(y,f,p){const _=Ds(y,!0).put({[qa]:f,value:p});return new Wa(_).toPromise()})).apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(y,f){const p=Ds(y,!1).get(f),_=yield new Wa(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Hs(y,f){const p=Ds(y,!0).delete(f);return new Wa(p).toPromise()}const xo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,h.Z)(function*(){return p.db||(p.db=yield Wu()),p.db})()}_withRetries(p){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const M=yield _._openDb();return yield p(M)}catch(M){if(T++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,h.Z)(function*(){return Gu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,h.Z)(function*(){p.receiver=ta._getInstance(function tr(){return Gu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(T,M){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,h.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function ol(){return zu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Fd(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(_=M[0])&&void 0!==_&&_.fulfilled&&null!==(T=M[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function qu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Wu();return yield Ao(p,bo,"1"),yield Hs(p,bo),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(M=>Ao(M,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(M=>function Za(y,f){return ra.apply(this,arguments)}(M,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>Hs(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,h.Z)(function*(){const _=yield p._withRetries(V=>{const K=Ds(V,!1).getAll();return new Wa(K).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:V,value:K}of _)M.add(V),JSON.stringify(p.localCache[V])!==JSON.stringify(K)&&(p.notifyListeners(V,K),T.push(V));for(const V of Object.keys(p.localCache))p.localCache[V]&&!M.has(V)&&(p.notifyListeners(V,null),T.push(V));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Ya=1e12;class cl{constructor(f){this.auth=f,this.counter=Ya,this._widgets=new Map}render(f,p){const _=this.counter;return this._widgets.set(_,new ll(f,this.auth.name,p||{})),this.counter++,_}reset(f){var p;const _=f||Ya;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Ya))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,h.Z)(function*(){var _;return null===(_=p._widgets.get(f||Ya))||void 0===_||_.execute(),""})()}}class ll{constructor(f,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function by(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cf=$n("rcb"),Ty=new qi(3e4,6e4);class Sy{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=dn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return ne(function Df(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Bt(dn().grecaptcha)?Promise.resolve(dn().grecaptcha):new Promise((_,T)=>{const M=dn().setTimeout(()=>{T(Ie(f,"network-request-failed"))},Ty.get());dn()[Cf]=()=>{dn().clearTimeout(M),delete dn()[Cf];const K=dn().grecaptcha;if(!K||!Bt(K))return void T(Ie(f,"internal-error"));const Se=K.render;K.render=(He,tt)=>{const Xe=Se(He,tt);return this.counter++,Xe},this.hostLanguage=p,_(K)},cr(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:Cf,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),T(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=dn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(f){return(0,h.Z)(function*(){return new cl(f)})()}clearedOneInstance(){}}const Qa="recaptcha",Zu={theme:"light",type:"image"};class dl{constructor(f,p=Object.assign({},Zu),_){this.parameters=p,this.type=Qa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(_),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new Sy,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(p)||new Promise(M=>{const V=K=>{K&&(f.tokenChangeListeners.delete(V),M(K))};f.tokenChangeListeners.add(V),f.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof f)f(p);else if("string"==typeof f){const _=dn()[f];"function"==typeof _&&_(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){ne(at()&&!Gu(),f.auth,"internal-error"),yield function Pi(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function X(y){return Ne.apply(this,arguments)}(f.auth);ne(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xi{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=yi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function Oo(){return(Oo=(0,h.Z)(function*(y,f,p){const _=un(y),T=yield Qu(_,f,(0,N.m9)(p));return new Xi(T,M=>La(_,M))})).apply(this,arguments)}function Yu(){return(Yu=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y);yield _s(!1,_,"phone");const T=yield Qu(_.auth,f,(0,N.m9)(p));return new Xi(T,M=>bd(_,M))})).apply(this,arguments)}function hl(){return(hl=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y),T=yield Qu(_.auth,f,(0,N.m9)(p));return new Xi(T,M=>Td(_,M))})).apply(this,arguments)}function Qu(y,f,p){return Hr.apply(this,arguments)}function Hr(){return Hr=(0,h.Z)(function*(y,f,p){var _;const T=yield p.verify();try{let M;if(ne("string"==typeof T,y,"argument-error"),ne(p.type===Qa,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const V=M.session;if("phoneNumber"in M)return ne("enroll"===V.type,y,"internal-error"),(yield function ea(y,f){return Ce(y,"POST","/v2/accounts/mfaEnrollment:start",Te(y,f))}(y,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===V.type,y,"internal-error");const K=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return ne(K,y,"missing-multi-factor-info"),(yield function Mo(y,f){return Ce(y,"POST","/v2/accounts/mfaSignIn:start",Te(y,f))}(y,{mfaPendingCredential:V.credential,mfaEnrollmentId:K,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield function ig(y,f){return Kc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return V}}finally{p._reset()}}),Hr.apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(y,f){yield Xn((0,N.m9)(y),f)})).apply(this,arguments)}let Ni=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=un(p)}verifyPhoneNumber(p,_){return Qu(this.auth,p,(0,N.m9)(_))}static credential(p,_){return yi._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?yi._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function st(y,f){return f?wn(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Wn extends ps{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ri(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Ri(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Ri(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function ti(y){return Fa(y.auth,new Wn(y),y.bypassAuthState)}function Ud(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),Bs(p,new Wn(y),y.bypassAuthState)}function Po(y){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(y){const{auth:f,user:p}=y;return ne(p,f,"internal-error"),Xn(p,new Wn(y),y.bypassAuthState)})).apply(this,arguments)}class fl{constructor(f,p,_,T,M=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:M,tenantId:V,error:K,type:Se}=f;if(K)return void p.reject(K);const He={auth:p.auth,requestUri:_,sessionId:T,tenantId:V||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Se)(He))}catch(tt){p.reject(tt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ti;case"linkViaPopup":case"linkViaRedirect":return Po;case"reauthViaPopup":case"reauthViaRedirect":return Ud;default:Ee(this.auth,"internal-error")}}resolve(f){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wi=new qi(2e3,1e4);function Ju(){return(Ju=(0,h.Z)(function*(y,f,p){const _=un(y);Fe(y,f,ys);const T=st(_,p);return new ec(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Xu(){return(Xu=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y);Fe(_.auth,f,ys);const T=st(_.auth,p);return new ec(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y);Fe(_.auth,f,ys);const T=st(_.auth,p);return new ec(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let ec=(()=>{class y extends fl{constructor(p,_,T,M,V){super(p,_,M,V),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,h.Z)(function*(){const _=yield p.execute();return ne(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,h.Z)(function*(){Je(1===p.filter.length,"Popup operations only handle one event");const _=na();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Ie(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,wi.get())};p()}}return y.currentPopupAction=null,y})();const No="pendingRedirect",Gs=new Map;class Bd extends fl{constructor(f,p,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,h.Z)(function*(){let _=Gs.get(p.auth._key());if(!_){try{const M=(yield function rr(y,f){return jd.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;_=()=>Promise.resolve(M)}catch(T){_=()=>Promise.reject(T)}Gs.set(p.auth._key(),_)}return p.bypassAuthState||Gs.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,p().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function jd(){return(jd=(0,h.Z)(function*(y,f){const p=Ja(f),_=Hd(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function zs(y,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(y,f){return Hd(y)._set(Ja(f),"true")})).apply(this,arguments)}function ua(y,f){Gs.set(y._key(),f)}function Hd(y){return wn(y._redirectPersistence)}function Ja(y){return U(No,y.config.apiKey,y.name)}function tc(y,f,p){return function $d(y,f,p){return pl.apply(this,arguments)}(y,f,p)}function pl(){return(pl=(0,h.Z)(function*(y,f,p){const _=un(y);Fe(y,f,ys),yield _._initializationPromise;const T=st(_,p);return yield zs(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function gl(y,f,p){return function qs(y,f,p){return ki.apply(this,arguments)}(y,f,p)}function ki(){return(ki=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y);Fe(_.auth,f,ys),yield _.auth._initializationPromise;const T=st(_.auth,p);yield zs(T,_.auth);const M=yield fr(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Gd(y,f,p){return function Sr(y,f,p){return nc.apply(this,arguments)}(y,f,p)}function nc(){return(nc=(0,h.Z)(function*(y,f,p){const _=(0,N.m9)(y);Fe(_.auth,f,ys),yield _.auth._initializationPromise;const T=st(_.auth,p);yield _s(!1,_,f.providerId),yield zs(T,_.auth);const M=yield fr(_);return T._openRedirect(_.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(y,f){return yield un(y)._initializationPromise,bs(y,f,!1)})).apply(this,arguments)}function bs(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(y,f,p=!1){const _=un(y),T=st(_,f),V=yield new Bd(_,T,p).execute();return V&&!p&&(delete V.user._redirectEventId,yield _._persistUserIfCurrent(V.user),yield _._setRedirectUser(null,f)),V})).apply(this,arguments)}function fr(y){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(y){const f=na(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ko{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(p=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ts(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fi(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var _;if(f.error&&!Fi(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(Ie(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const _=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yl(f))}saveEventToCache(f){this.cachedEventUids.add(yl(f)),this.lastProcessedEventTime=Date.now()}}function yl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Fi({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Ar(y){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(y,f={}){return Ce(y,"GET","/v1/projects",f)})).apply(this,arguments)}const fg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function es(){return(es=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ar(y);for(const p of f)try{if(vl(p))return}catch{}Ee(y,"unauthorized-domain")})).apply(this,arguments)}function vl(y){const f=Ht(),{protocol:p,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const V=new URL(y);return""===V.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&V.hostname===_}if(!la.test(p))return!1;if(fg.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const zd=new qi(3e4,6e4);function ri(){const y=dn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Zs=null;const da=new qi(5e3,15e3),qd="__/auth/iframe",Wd="emulator/auth/iframe",ts={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kd(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?ue(f,Wd):`https://${y.config.authDomain}/${qd}`,_={apiKey:f.apiKey,appName:y.name,v:ie.SDK_VERSION},T=Zd.get(y.config.apiHost);T&&(_.eid=T);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${p}?${(0,N.xO)(_).slice(1)}`}function D(){return D=(0,h.Z)(function*(y){const f=yield function Fo(y){return Zs=Zs||function Tt(y){return new Promise((f,p)=>{var _,T,M;function V(){ri(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ri(),p(Ie(y,"network-request-failed"))},timeout:zd.get()})}if(null!==(T=null===(_=dn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(M=dn().gapi)||void 0===M||!M.load){const K=$n("iframefcb");return dn()[K]=()=>{gapi.load?V():p(Ie(y,"network-request-failed"))},cr(`https://apis.google.com/js/api.js?onload=${K}`).catch(Se=>p(Se))}V()}}).catch(f=>{throw Zs=null,f})}(y),Zs}(y),p=dn().gapi;return ne(p,y,"internal-error"),f.open({where:document.body,url:Kd(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ts,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(M,V){yield _.restyle({setHideOnLeave:!1});const K=Ie(y,"network-request-failed"),Se=dn().setTimeout(()=>{V(K)},da.get());function He(){dn().clearTimeout(Se),M(_)}_.ping(He).then(He,()=>{V(K)})});return function(M,V){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P=500,j=600,Z="_blank",te="http://localhost";class Ge{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rt="__/auth/handler",At="emulator/auth/handler",ii=encodeURIComponent("fac");function bn(y,f,p,_,T,M){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(y,f,p,_,T,M){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const V={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ie.SDK_VERSION,eventId:T};if(f instanceof ys){f.setDefaultLanguage(y.languageCode),V.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(V.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tt,Xe]of Object.entries(M||{}))V[tt]=Xe}if(f instanceof Qi){const tt=f.getScopes().filter(Xe=>""!==Xe);tt.length>0&&(V.scopes=tt.join(","))}y.tenantId&&(V.tid=y.tenantId);const K=V;for(const tt of Object.keys(K))void 0===K[tt]&&delete K[tt];const Se=yield y._getAppCheckToken(),He=Se?`#${ii}=${encodeURIComponent(Se)}`:"";return`${function Ft({config:y}){return y.emulator?ue(y,At):`https://${y.authDomain}/${Rt}`}(y)}?${(0,N.xO)(K).slice(1)}${He}`})).apply(this,arguments)}const Li="webStorageSupport",pr=class Vi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cs,this._completeRedirectFn=bs,this._overrideRedirectResult=ua}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){var V;Je(null===(V=M.eventManagers[f._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const K=yield bn(f,p,_,Ht(),T);return function ze(y,f,p,_=P,T=j){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),V=Math.max((window.screen.availWidth-_)/2,0).toString();let K="";const Se=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:M,left:V}),He=(0,N.z$)().toLowerCase();p&&(K=Ve(He)?Z:p),ve(He)&&(f=f||te,Se.scrollbars="yes");const tt=Object.entries(Se).reduce((yn,[Qs,Ml])=>`${yn}${Qs}=${Ml},`,"");if(function Cr(y=(0,N.z$)()){var f;return on(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(He)&&"_self"!==K)return function ot(y,f){const p=document.createElement("a");p.href=y,p.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(f||"",K),new Ge(null);const Xe=window.open(f||"",K,tt);ne(Xe,y,"popup-blocked");try{Xe.focus()}catch{}return new Ge(Xe)}(f,K,na())})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(f),function Ld(y){dn().location.href=y}(yield bn(f,p,_,Ht(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:M}=this.eventManagers[p];return T?Promise.resolve(T):(Je(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(f);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(f){var p=this;return(0,h.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(f),T=new ko(f);return _.register("authEvent",M=>(ne(M?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Li,{type:Li},T=>{var M;const V=null===(M=T?.[0])||void 0===M?void 0:M[Li];void 0!==V&&p(!!V),Ee(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function eu(y){return es.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ki()||J()||on()}};class rc{constructor(f){this.factorId=f}_process(f,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,_);case"signin":return this._finalizeSignIn(f,p.credential);default:return Dt("unexpected MultiFactorSessionType")}}}class tu extends rc{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new tu(f)}_finalizeEnroll(f,p,_){return function il(y,f){return Ce(y,"POST","/v2/accounts/mfaEnrollment:finalize",Te(y,f))}(f,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function If(y,f){return Ce(y,"POST","/v2/accounts/mfaSignIn:finalize",Te(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nu=(()=>{class y{constructor(){}static assertion(p){return tu._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var sc="@firebase/auth";class _l{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,h.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function su(){return window}(0,N.Pz)("authIdTokenMaxAge"),function pg(y){(0,ie._registerComponent)(new ye.wA("auth",(f,{options:p})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:V,authDomain:K}=_.options;ne(V&&!V.includes(":"),"invalid-api-key",{appName:_.name});const Se={apiKey:V,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(y)},He=new gi(_,T,M,Se);return function On(y,f){const p=f?.persistence||[],_=(Array.isArray(p)?p:[p]).map(wn);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(He,p),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,_)=>{f.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ye.wA("auth-internal",f=>{const p=un(f.getProvider("auth").getImmediate());return new _l(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(sc,"0.23.2",function wl(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(sc,"0.23.2","esm2017")}("Browser");const My=2e3;function El(){return El=(0,h.Z)(function*(y,f,p){var _;const{BuildInfo:T}=su();Je(f.sessionId,"AuthEvent did not contain a session ID");const M=yield function oc(y){return Il.apply(this,arguments)}(f.sessionId),V={};return on()?V.ibi=T.packageName:Yt()?V.apn=T.packageName:Ee(y,"operation-not-supported-in-this-environment"),T.displayName&&(V.appDisplayName=T.displayName),V.sessionId=M,bn(y,p,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,V)}),El.apply(this,arguments)}function ou(){return(ou=(0,h.Z)(function*(y){const{BuildInfo:f}=su(),p={};on()?p.iosBundleId=f.packageName:Yt()?p.androidPackageName=f.packageName:Ee(y,"operation-not-supported-in-this-environment"),yield Ar(y,p)})).apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(y,f,p){const{cordova:_}=su();let T=()=>{};try{yield new Promise((M,V)=>{let K=null;function Se(){var Xe;M();const yn=null===(Xe=_.plugins.browsertab)||void 0===Xe?void 0:Xe.close;"function"==typeof yn&&yn(),"function"==typeof p?.close&&p.close()}function He(){K||(K=window.setTimeout(()=>{V(Ie(y,"redirect-cancelled-by-user"))},My))}function tt(){"visible"===document?.visibilityState&&He()}f.addPassiveListener(Se),document.addEventListener("resume",He,!1),Yt()&&document.addEventListener("visibilitychange",tt,!1),T=()=>{f.removePassiveListener(Se),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",tt,!1),K&&window.clearTimeout(K)}})}finally{T()}})).apply(this,arguments)}function Il(){return(Il=(0,h.Z)(function*(y){const f=function xf(y){if(Je(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Oy=20;class Xd extends ko{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function eh(y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(y){const f=yield th()._get(uc(y));return f&&(yield th()._remove(uc(y))),f})).apply(this,arguments)}function pa(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Oy;p++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function th(){return wn(To)}function uc(y){return U("authEvent",y.config.apiKey,y.name)}function ga(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,N.zd)(p.join("?"))}const au=class Rf{constructor(){this._redirectPersistence=Cs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bs,this._overrideRedirectResult=ua}_initialize(f){var p=this;return(0,h.Z)(function*(){const _=f._key();let T=p.eventManagers.get(_);return T||(T=new Xd(f),p.eventManagers.set(_,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ee(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){!function Jd(y){var f,p,_,T,M,V,K,Se,He,tt;const Xe=su();ne("function"==typeof(null===(f=Xe?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=Xe?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(M=null===(T=null===(_=Xe?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Se=null===(K=null===(V=Xe?.cordova)||void 0===V?void 0:V.plugins)||void 0===K?void 0:K.browsertab)||void 0===Se?void 0:Se.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(tt=null===(He=Xe?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===tt?void 0:tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const V=yield M._initialize(f);yield V.initialized(),V.resetRedirect(),function Sf(){Gs.clear()}(),yield M._originValidation(f);const K=function fa(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:pa(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(f,_,T);yield function ac(y,f){return th()._set(uc(y),f)}(f,K);const Se=yield function mg(y,f,p){return El.apply(this,arguments)}(f,K,p),He=yield function Qd(y){const{cordova:f}=su();return new Promise(p=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function Gt(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Se);return function Ry(y,f,p){return Ks.apply(this,arguments)}(f,V,He)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function yg(y){return ou.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:M}=su(),V=setTimeout((0,h.Z)(function*(){yield eh(f),p.onEvent(_g())}),500),K=function(){var tt=(0,h.Z)(function*(Xe){clearTimeout(V);const yn=yield eh(f);let Qs=null;yn&&Xe?.url&&(Qs=function Mf(y,f){var p,_;const T=function vg(y){const f=ga(y),p=f.link?decodeURIComponent(f.link):void 0,_=ga(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ga(T).link||T||_||p||y}(f);if(T.includes("/__/auth/callback")){const M=ga(T),V=M.firebaseError?function Dl(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,K=null===(_=null===(p=V?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Se=K?Ie(K):null;return Se?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(yn,Xe.url)),p.onEvent(Qs||_g())});return function(yn){return tt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,K);const Se=T,He=`${M.packageName.toLowerCase()}://`;su().handleOpenURL=function(){var tt=(0,h.Z)(function*(Xe){if(Xe.toLowerCase().startsWith(He)&&K({url:Xe}),"function"==typeof Se)try{Se(Xe)}catch(yn){console.error(yn)}});return function(Xe){return tt.apply(this,arguments)}}()}};function _g(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const Ys=1e3;function ya(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function _a(y=(0,N.z$)()){return!("file:"!==ya()&&"ionic:"!==ya()&&"capacitor:"!==ya()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ky(){try{const y=self.localStorage,f=na();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ny(y=(0,N.z$)()){return function wa(){return(0,N.w1)()&&11===document?.documentMode}()||function Py(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return Pf()&&(0,N.hl)()}return!1}function Pf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Tl(){return(function va(){return"http:"===ya()||"https:"===ya()}()||(0,N.ru)()||_a())&&!function cc(){return(0,N.b$)()||(0,N.UG)()}()&&ky()&&!Pf()}function Eg(){return _a()&&typeof document<"u"}function lc(){return(lc=(0,h.Z)(function*(){return!!Eg()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},Ys);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ei={LOCAL:"local",NONE:"none",SESSION:"session"},dc=ne,nh="persistence";function kf(y){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Dg(),p=U(nh,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function Dg(){var y;try{return(null===(y=function Nf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const bg=ne;class xr{constructor(){this.browserResolver=wn(pr),this.cordovaResolver=wn(au),this.underlyingResolver=null,this._redirectPersistence=Cs,this._completeRedirectFn=bs,this._overrideRedirectResult=ua}_initialize(f){var p=this;return(0,h.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,_,T)})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,_,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Ig(){return lc.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function Ea(y){return y.unwrap()}function Sl(y){return Tg(y)}function Tg(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ni.credentialFromResult(y);const p=f.providerId;if(!p||p===pe.PASSWORD)return null;let _;switch(p){case pe.GOOGLE:_=Pa;break;case pe.FACEBOOK:_=Yc;break;case pe.GITHUB:_=Ed;break;case pe.TWITTER:_=bu;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:V,pendingToken:K,nonce:Se}=f;return M||V||T||K?K?p.startsWith("saml.")?Vs._create(p,K):ms._fromParams({providerId:p,signInMethod:p,pendingToken:K,idToken:T,accessToken:M}):new mo(p).credential({idToken:T,accessToken:M,rawNonce:Se}):null}return y instanceof N.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Ui(y,f){return f.catch(p=>{throw p instanceof N.ZR&&function Ly(y,f){var p;const _=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Vy(y,function Bu(y,f){var p;const _=(0,N.m9)(y),T=f;return ne(f.customData.operationType,_,"argument-error"),ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Eo._fromError(_,T)}(y,f));else if(_){const T=Tg(f),M=f;T&&(M.credential=T,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Sl(p),additionalUserInfo:nl(p),user:ns.getOrCreate(T)}})}function uu(y,f){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:_=>Ui(y,p.confirm(_))}})).apply(this,arguments)}class Vy{constructor(f,p){this.resolver=p,this.auth=function Lo(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ui(Ea(this.auth),this.resolver.resolveSignIn(f))}}class ns{constructor(f){this._delegate=f,this.multiFactor=function Nd(y){const f=(0,N.m9)(y);return js.has(f)||js.set(f,Do._fromUser(f)),js.get(f)}(f)}static getOrCreate(f){return ns.USER_MAP.has(f)||ns.USER_MAP.set(f,new ns(f)),ns.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,h.Z)(function*(){return Ui(p.auth,bd(p._delegate,f))})()}linkWithPhoneNumber(f,p){var _=this;return(0,h.Z)(function*(){return uu(_.auth,function Ku(y,f,p){return Yu.apply(this,arguments)}(_._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,h.Z)(function*(){return Ui(p.auth,function $s(y,f,p){return _t.apply(this,arguments)}(p._delegate,f,xr))})()}linkWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield kf(un(p.auth)),Gd(p._delegate,f,xr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,h.Z)(function*(){return Ui(p.auth,Td(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return uu(this.auth,function Tf(y,f,p){return hl.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Ui(this.auth,function oa(y,f,p){return Xu.apply(this,arguments)}(this._delegate,f,xr))}reauthenticateWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield kf(un(p.auth)),gl(p._delegate,f,xr)})()}sendEmailVerification(f){return function Nu(y,f){return Ha.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,h.Z)(function*(){return yield function Cd(y,f){return br.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function _r(y,f){return Dn((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Es(y,f){return Dn((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Tr(y,f){return en.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function gf(y,f){return Fu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function el(y,f,p){return $a.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ns.USER_MAP=new WeakMap;const hc=ne;let rh=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;hc(T,"invalid-api-key",{appName:p.name}),hc(T,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?xr:void 0;this._delegate=_.initialize({options:{persistence:Ss(T,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function xa(y,f,p){const _=un(y);ne(_._canInitEmulator,_,"emulator-config-failed"),ne(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,M=fs(f),{host:V,port:K}=function Vt(y){const f=fs(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const M=T[1];return{host:M,port:Ma(_.substr(M.length+1))}}{const[M,V]=_.split(":");return{host:M,port:Ma(V)}}}(f);_.config.emulator={url:`${M}//${V}${null===K?"":`:${K}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:V,port:K,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function fo(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function ug(y,f){return ws.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ba(this._delegate,p)}confirmPasswordReset(p,_){return function Ad(y,f,p){return Mu.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,h.Z)(function*(){return Ui(T._delegate,function vo(y,f,p){return _i.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Md(y,f){return Pu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function cg(y,f){return"EMAIL_SIGNIN"===Zo.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,h.Z)(function*(){hc(Tl(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function ml(y,f){return Zn.apply(this,arguments)}(p._delegate,xr);return _?Ui(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Of(y,f){un(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:M,error:V,complete:K}=xl(p,_,T);return this._delegate.onAuthStateChanged(M,V,K)}onIdTokenChanged(p,_,T){const{next:M,error:V,complete:K}=xl(p,_,T);return this._delegate.onIdTokenChanged(M,V,K)}sendSignInLinkToEmail(p,_){return function ja(y,f,p){return Ru.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function xu(y,f,p){return jr.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,h.Z)(function*(){let T;switch(function Cg(y,f){dc(Object.values(Ei).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?dc(f!==Ei.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?dc(f===Ei.NONE,y,"unsupported-persistence-type"):Pf()?dc(f===Ei.NONE||f===Ei.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):dc(f===Ei.NONE||ky(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Ei.SESSION:T=Cs;break;case Ei.LOCAL:T=(yield wn(xo)._isAvailable())?xo:To;break;case Ei.NONE:T=Ur;break;default:return Ee("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Ui(this._delegate,function dr(y){return Ko.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Ui(this._delegate,La(this._delegate,p))}signInWithCustomToken(p){return Ui(this._delegate,function he(y,f){return kt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return Ui(this._delegate,function xd(y,f,p){return La((0,N.m9)(y),ff.credential(f,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return Ui(this._delegate,function qn(y,f,p){return Qo.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return uu(this._delegate,function bf(y,f,p){return Oo.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,h.Z)(function*(){return hc(Tl(),_._delegate,"operation-not-supported-in-this-environment"),Ui(_._delegate,function sa(y,f,p){return Ju.apply(this,arguments)}(_._delegate,p,xr))})()}signInWithRedirect(p){var _=this;return(0,h.Z)(function*(){return hc(Tl(),_._delegate,"operation-not-supported-in-this-environment"),yield kf(_._delegate),tc(_._delegate,p,xr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function vi(y,f){return Ji.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ei,y})();function xl(y,f,p){let _=y;"function"!=typeof y&&({next:_,error:f,complete:p}=y);const T=_;return{next:V=>T(V&&ns.getOrCreate(V)),error:f,complete:p}}function Ss(y,f){const p=function Fy(y,f){const p=Dg();if(!p)return[];const _=U(nh,y,f);switch(p.getItem(_)){case Ei.NONE:return[Ur];case Ei.LOCAL:return[xo,Cs];case Ei.SESSION:return[Cs];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(xo)&&p.push(xo),typeof window<"u")for(const _ of[To,Cs])p.includes(_)||p.push(_);return p.includes(Ur)||p.push(Ur),p}class Vo{constructor(){this.providerId="phone",this._delegate=new Ni(Ea(Y.Z.auth()))}static credential(f,p){return Ni.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Vo.PHONE_SIGN_IN_METHOD=Ni.PHONE_SIGN_IN_METHOD,Vo.PROVIDER_ID=Ni.PROVIDER_ID;const Sg=ne;class fc{constructor(f,p,_=Y.Z.app()){var T;Sg(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new dl(f,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function O0(y){y.INTERNAL.registerComponent(new ye.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new rh(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W_EMAIL_SIGNIN,PASSWORD_RESET:W_PASSWORD_RESET,RECOVER_EMAIL:W_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W_VERIFY_EMAIL}},EmailAuthProvider:ff,FacebookAuthProvider:Yc,GithubAuthProvider:Ed,GoogleAuthProvider:Pa,OAuthProvider:mo,SAMLAuthProvider:Na,PhoneAuthProvider:Vo,PhoneMultiFactorGenerator:nu,RecaptchaVerifier:fc,TwitterAuthProvider:bu,Auth:rh,AuthCredential:ps,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},5861:(vt,Ae,k)=>{function h(N,ie,se,re,ye,we,pe){try{var $=N[we](pe),H=$.value}catch(W){return void se(W)}$.done?ie(H):Promise.resolve(H).then(re,ye)}function Y(N){return function(){var ie=this,se=arguments;return new Promise(function(re,ye){var we=N.apply(ie,se);function pe(H){h(we,re,ye,pe,$,"next",H)}function $(H){h(we,re,ye,pe,$,"throw",H)}pe(void 0)})}}k.d(Ae,{Z:()=>Y})},7582:(vt,Ae,k)=>{function ie(ue,le){var me={};for(var oe in ue)Object.prototype.hasOwnProperty.call(ue,oe)&&le.indexOf(oe)<0&&(me[oe]=ue[oe]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(oe=Object.getOwnPropertySymbols(ue);Te<oe.length;Te++)le.indexOf(oe[Te])<0&&Object.prototype.propertyIsEnumerable.call(ue,oe[Te])&&(me[oe[Te]]=ue[oe[Te]])}return me}function W(ue,le,me,oe){return new(me||(me=Promise))(function(Ce,lt){function dt(Wt){try{ft(oe.next(Wt))}catch(In){lt(In)}}function _n(Wt){try{ft(oe.throw(Wt))}catch(In){lt(In)}}function ft(Wt){Wt.done?Ce(Wt.value):function Te(Ce){return Ce instanceof me?Ce:new me(function(lt){lt(Ce)})}(Wt.value).then(dt,_n)}ft((oe=oe.apply(ue,le||[])).next())})}function Pe(ue){return this instanceof Pe?(this.v=ue,this):new Pe(ue)}function Ee(ue,le,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,oe=me.apply(ue,le||[]),Ce=[];return Te={},lt("next"),lt("throw"),lt("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function lt(fn){oe[fn]&&(Te[fn]=function(kn){return new Promise(function(ar,Mn){Ce.push([fn,kn,ar,Mn])>1||dt(fn,kn)})})}function dt(fn,kn){try{!function _n(fn){fn.value instanceof Pe?Promise.resolve(fn.value.v).then(ft,Wt):In(Ce[0][2],fn)}(oe[fn](kn))}catch(ar){In(Ce[0][3],ar)}}function ft(fn){dt("next",fn)}function Wt(fn){dt("throw",fn)}function In(fn,kn){fn(kn),Ce.shift(),Ce.length&&dt(Ce[0][0],Ce[0][1])}}function $e(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,le=ue[Symbol.asyncIterator];return le?le.call(ue):(ue=function ct(ue){var le="function"==typeof Symbol&&Symbol.iterator,me=le&&ue[le],oe=0;if(me)return me.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&oe>=ue.length&&(ue=void 0),{value:ue&&ue[oe++],done:!ue}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),me={},oe("next"),oe("throw"),oe("return"),me[Symbol.asyncIterator]=function(){return this},me);function oe(Ce){me[Ce]=ue[Ce]&&function(lt){return new Promise(function(dt,_n){!function Te(Ce,lt,dt,_n){Promise.resolve(_n).then(function(ft){Ce({value:ft,done:dt})},lt)}(dt,_n,(lt=ue[Ce](lt)).done,lt.value)})}}}k.d(Ae,{FC:()=>Ee,KL:()=>$e,_T:()=>ie,mG:()=>W,qq:()=>Pe}),"function"==typeof SuppressedError&&SuppressedError}},vt=>{vt(vt.s=5361)}]);